<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

	<title>OFP app</title>

	<link rel='icon' type='image/png' href='./favicon.png'>
	<link crossorigin="anonymous" rel='stylesheet' href='{{{CONF_BOOTSTRAP_CSS}}}'>
	<link rel='stylesheet' href='{{{CONF_BUNDLE_CSS}}}'>

	<script defer src='{{{CONF_BUNDLE_JS}}}'></script>
</head>

<body>
<svg style="display: none;">
	<symbol id="marker" viewBox="0 0 64.723 100">
		<path d="M32.333 0C14.462 0 0 14.519 0 32.39c0 20.343 14.711 27.647 20.052 35.519S31.39 84.438 32.333 100c.944-15.518 6.19-23.074 11.995-32.092 5.806-9.018 20.395-17.648 20.395-35.519S50.203 0 32.333 0zm.028 26.114a5.797 5.797 0 1 1 0 11.594 5.797 5.797 0 0 1 0-11.594z"/>
	</symbol>
	<symbol id="bars" viewBox="0 0 448 512" width="20" height="20">
		<path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/>
	</symbol>
	<symbol id="home" viewBox="0 0 576 512" width="20" height="20">
		<path d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/>
	</symbol>
	<!-- <symbol id="fullscreen" viewBox="0 0 413.348 413.348" width="30" height="30">
		<path d="m413.348 0h-97.427l36.535 36.535-97.427 97.427 24.357 24.357 97.427-97.427 36.535 36.535z"/><path d="m0 413.348h97.427l-36.535-36.535 97.427-97.427-24.357-24.357-97.427 97.427-36.535-36.535z"/><path d="m413.348 413.348v-97.427l-36.535 36.535-97.427-97.427-24.357 24.357 97.427 97.427-36.535 36.535z"/><path d="m0 0v97.427l36.535-36.535 97.427 97.427 24.357-24.357-97.427-97.427 36.535-36.535z"/>
	</symbol> -->
</svg>
<script>
// make the whole serviceworker process into a promise so later on we can
// listen to it and in case new content is available a toast will be shown
window.isSWUpdateAvailable = new Promise(function(resolve, reject) {
	if ('serviceWorker' in navigator) {
		navigator.serviceWorker.register('/sw.js', {scope: '/'})
			.then(reg => {
				if (reg.waiting) resolve(reg);
				reg.onupdatefound = () => {
					const installingWorker = reg.installing;
					installingWorker.onstatechange = () => {
						switch (installingWorker.state) {
							case 'installed':
								if (navigator.serviceWorker.controller) {
									// new update available
									resolve(reg);
								} else {
									// no update available
									resolve(false);
								}
								break;
						}
					};
				};
			})
			.catch(err => {
				console.error('[SW ERROR]', err);
				resolve(false);
			});
		// reload once when the new Service Worker starts activating
		let refreshing;
		navigator.serviceWorker.addEventListener('controllerchange', () => {
			if (refreshing) return;
			refreshing = true;
			window.location.reload();
		});
	} else {
		resolve(false);
	}
});
</script>
</body>
</html>
