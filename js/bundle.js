var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(o)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function c(e){let t;return l(e,(e=>t=e))(),t}function u(e,t,n){e.$$.on_destroy.push(l(t,n))}function d(e,t,n,o){if(e){const r=p(e,t,n,o);return e[0](r)}}function p(e,t,o,r){return e[1]&&r?n(o.ctx.slice(),e[1](r(t))):o.ctx}function m(e,t,n,o,r,s,i){const a=function(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}(t,o,r,s);if(a){const r=p(t,n,o,i);e.p(r,a)}}function f(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function h(e){return null==e?"":e}function v(e,t,n=t){return e.set(n),t}function $(t){return t&&i(t.destroy)?t.destroy:e}const y="undefined"!=typeof window;let b=y?()=>window.performance.now():()=>Date.now(),x=y?e=>requestAnimationFrame(e):e;const w=new Set;function k(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&x(k)}function C(e){let t;return 0===w.size&&x(k),{promise:new Promise((n=>{w.add(t={c:e,f:n})})),abort(){w.delete(t)}}}function P(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function M(e){e.parentNode.removeChild(e)}function O(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function S(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function T(e){return document.createTextNode(e)}function F(){return T(" ")}function A(){return T("")}function j(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function D(e){return function(t){return t.preventDefault(),e.call(this,t)}}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function z(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:I(e,o,t[o])}function R(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function q(e){return""===e?null:+e}function W(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function N(e,t){e.value=null==t?"":t}function U(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function H(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function G(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function B(e,t,n){e.classList[n?"add":"remove"](t)}function K(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const Z=new Set;let J,V=0;function Q(e,t,n,o,r,s,i,a=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*s(e);c+=100*e+`%{${i(o,1-o)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=e.ownerDocument;Z.add(p);const m=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(E("style")).sheet),f=p.__svelte_rules||(p.__svelte_rules={});f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${r}ms 1 both`,V+=1,d}function X(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),V-=r,V||x((()=>{V||(Z.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),Z.clear())})))}function Y(e){J=e}function ee(){if(!J)throw new Error("Function called outside component initialization");return J}function te(e){ee().$$.on_mount.push(e)}function ne(e){ee().$$.on_destroy.push(e)}function oe(){const e=ee();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=K(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}function re(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const se=[],ie=[],ae=[],le=[],ce=Promise.resolve();let ue=!1;function de(){ue||(ue=!0,ce.then(ve))}function pe(){return de(),ce}function me(e){ae.push(e)}function fe(e){le.push(e)}let ge=!1;const he=new Set;function ve(){if(!ge){ge=!0;do{for(let e=0;e<se.length;e+=1){const t=se[e];Y(t),$e(t.$$)}for(Y(null),se.length=0;ie.length;)ie.pop()();for(let e=0;e<ae.length;e+=1){const t=ae[e];he.has(t)||(he.add(t),t())}ae.length=0}while(se.length);for(;le.length;)le.pop()();ue=!1,ge=!1,he.clear()}}function $e(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}let ye;function be(){return ye||(ye=Promise.resolve(),ye.then((()=>{ye=null}))),ye}function xe(e,t,n){e.dispatchEvent(K(`${t?"intro":"outro"}${n}`))}const we=new Set;let ke;function Ce(){ke={r:0,c:[],p:ke}}function Pe(){ke.r||s(ke.c),ke=ke.p}function Le(e,t){e&&e.i&&(we.delete(e),e.i(t))}function Me(e,t,n,o){if(e&&e.o){if(we.has(e))return;we.add(e),ke.c.push((()=>{we.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const Oe={duration:0};function Ee(n,o,r){let s,a,l=o(n,r),c=!1,u=0;function d(){s&&X(n,s)}function p(){const{delay:o=0,duration:r=300,easing:i=t,tick:p=e,css:m}=l||Oe;m&&(s=Q(n,0,1,r,o,i,m,u++)),p(0,1);const f=b()+o,g=f+r;a&&a.abort(),c=!0,me((()=>xe(n,!0,"start"))),a=C((e=>{if(c){if(e>=g)return p(1,0),xe(n,!0,"end"),d(),c=!1;if(e>=f){const t=i((e-f)/r);p(t,1-t)}}return c}))}let m=!1;return{start(){m||(X(n),i(l)?(l=l(),be().then(p)):p())},invalidate(){m=!1},end(){c&&(d(),c=!1)}}}function Se(n,o,r,a){let l=o(n,r),c=a?0:1,u=null,d=null,p=null;function m(){p&&X(n,p)}function f(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(o){const{delay:r=0,duration:i=300,easing:a=t,tick:g=e,css:h}=l||Oe,v={start:b()+r,b:o};o||(v.group=ke,ke.r+=1),u||d?d=v:(h&&(m(),p=Q(n,c,o,i,r,a,h)),o&&g(0,1),u=f(v,i),me((()=>xe(n,o,"start"))),C((e=>{if(d&&e>d.start&&(u=f(d,i),d=null,xe(n,u.b,"start"),h&&(m(),p=Q(n,c,u.b,u.duration,0,a,l.css))),u)if(e>=u.end)g(c=u.b,1-c),xe(n,u.b,"end"),d||(u.b?m():--u.group.r||s(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),g(c,1-c)}return!(!u&&!d)})))}return{run(e){i(l)?be().then((()=>{l=l(),g(e)})):g(e)},end(){m(),u=d=null}}}const Te="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function _e(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Fe(e){e&&e.c()}function Ae(e,t,n,r){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),r||me((()=>{const t=l.map(o).filter(i);c?c.push(...t):s(t),e.$$.on_mount=[]})),u.forEach(me)}function je(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function De(t,n,o,i,a,l,c=[-1]){const u=J;Y(t);const d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(d.ctx=o?o(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&a(d.ctx[e],d.ctx[e]=r)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](r),p&&function(e,t){-1===e.$$.dirty[0]&&(se.push(e),de(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],d.update(),p=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(M)}else d.fragment&&d.fragment.c();n.intro&&Le(t.$$.fragment),Ae(t,n.target,n.anchor,n.customElement),ve()}Y(u)}class Ie{$destroy(){je(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class ze{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}const Re="iPad"===navigator.platform||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,qe=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),We=/Safari\//i.test(navigator.userAgent)&&!/(Chrome\/|Chromium\/)/i.test(navigator.userAgent),Ne=matchMedia("(hover: hover)").matches;function Ue(e,t,n){let o;return function(){const r=this,s=arguments,i=function(){o=null,n||e.apply(r,s)},a=n&&!o;clearTimeout(o),o=setTimeout(i,t),a&&e.apply(r,s)}}function He(e){const t=e.split("-").slice(0,-1).join("");switch(t){case"route":return"rmain";case"alternate":return"ralt";case"nat":return"rnat";default:return t}}function Ge(e){switch(e){case"rmain":return"route";case"ralt":return"alternate";case"rnat":return"nat";default:return e}}function Be(e,t,n){return e<=t?t:e>=n?n:e}function Ke(e,t,n){return!(e<t)&&!(e>n)}function Ze(e,t,n,o){return 8&n?[e[0]+(t[0]-e[0])*(o[3]-e[1])/(t[1]-e[1]),o[3]]:4&n?[e[0]+(t[0]-e[0])*(o[1]-e[1])/(t[1]-e[1]),o[1]]:2&n?[o[2],e[1]+(t[1]-e[1])*(o[2]-e[0])/(t[0]-e[0])]:1&n?[o[0],e[1]+(t[1]-e[1])*(o[0]-e[0])/(t[0]-e[0])]:null}function Je(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function Ve(e,t){let n=new Promise(((t,n)=>{let o=setTimeout((()=>{clearTimeout(o),n("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,n])}const Qe=async()=>{const e={title:"OFP2MAP",url:window.location.pathname};try{await navigator.share(e)}catch(e){}return!1};function Xe(e){const t=e-1;return t*t*t+1}function Ye(e,{delay:n=0,duration:o=400,easing:r=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:r,css:e=>"opacity: "+e*s}}function et(e,{delay:t=0,duration:n=400,easing:o=Xe,x:r=0,y:s=0,opacity:i=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,u=l*(1-i);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*r}px, ${(1-e)*s}px);\n\t\t\topacity: ${l-u*t}`}}function tt(e,{delay:t=0,duration:n=400,easing:o=Xe}={}){const r=getComputedStyle(e),s=+r.opacity,i=parseFloat(r.height),a=parseFloat(r.paddingTop),l=parseFloat(r.paddingBottom),c=parseFloat(r.marginTop),u=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),p=parseFloat(r.borderBottomWidth);return{delay:t,duration:n,easing:o,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*s};height: ${e*i}px;padding-top: ${e*a}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*d}px;border-bottom-width: ${e*p}px;`}}const nt=[];function ot(e,t){return{subscribe:rt(e,t).subscribe}}function rt(t,n=e){let o;const r=[];function s(e){if(a(t,e)&&(t=e,o)){const e=!nt.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),nt.push(n,t)}if(e){for(let e=0;e<nt.length;e+=2)nt[e][0](nt[e+1]);nt.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,a=e){const l=[i,a];return r.push(l),1===r.length&&(o=n(s)||e),i(t),()=>{const e=r.indexOf(l);-1!==e&&r.splice(e,1),0===r.length&&(o(),o=null)}}}}function st(t,n,o){const r=!Array.isArray(t),a=r?[t]:t,c=n.length<2;return ot(o,(t=>{let o=!1;const u=[];let d=0,p=e;const m=()=>{if(d)return;p();const o=n(r?u[0]:u,t);c?t(o):p=i(o)?o:e},f=a.map(((e,t)=>l(e,(e=>{u[t]=e,d&=~(1<<t),o&&m()}),(()=>{d|=1<<t}))));return o=!0,m(),function(){s(f),p()}}))}const it=["318","319","320","321","330","340","350","380","787","772","773","77F"],at=["340","380"];const lt=rt(),ct=rt(!1),ut=rt(!1),dt=rt(!1),pt=rt(!1),mt=rt(!1),ft=function(e){const{subscribe:t,set:n,update:o}=rt(e);return{subscribe:t,set:n,update:o,reset:()=>n("object"==typeof e?{...e}:Array.isArray(e)?[...e]:e)}}(!1),gt=rt(-1),ht=rt(),vt=rt(),$t=rt(),yt=st([ht,$t],(([e,t])=>{if(e&&t){if(e.timeMatrix.length>0)return new Date(t.getTime()+6e4*e.timeMatrix[e.timeMatrix.length-1][1]);const n=new Date(t),o=e.infos.duration;return n.setUTCMinutes(n.getUTCMinutes()+o[1]),n.setUTCHours(n.getUTCHours()+o[0]),n}})),bt=rt(),xt=st([ht,bt],(([e,t])=>{let n;if(t?n=t:e&&(n=e.infos.aircraft),n&&-1!==it.indexOf(n))return n}));let wt=new Date;const kt=()=>{if("serviceWorker"in navigator){const e=18e5;new Date-wt>e&&navigator.serviceWorker.getRegistration().then((e=>{e&&(e.waiting?(ut.set(!0),dt.set(!0)):e.update(),ct.set(!1),wt=new Date)}),console.error)}},Ct=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&kt()},Pt=ot(!0,(e=>{const t=()=>{document&&document.visibilityState?"visible"===document.visibilityState?e(!0):e(!1):e(!0)};return document.addEventListener("visibilitychange",t),t(),()=>{document.removeEventListener("visibilitychange",t)}})),Lt=ot({},(e=>{const t=()=>{e(navigator.onLine)};return"undefined"!=typeof navigator&&"onLine"in navigator?(t(),window.addEventListener("offline",t),window.addEventListener("online",t)):e(void 0),()=>{"undefined"!=typeof navigator&&"onLine"in navigator&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}})),Mt=ot("/",(e=>{const t=()=>{const t=document.querySelector("meta[name=viewport]"),n=t?t.getAttribute("content"):"";let o=window.location.hash.substr(1)||"/";"/map"===o?(pt.set(!1),n&&t.setAttribute("content",n+",maximum-scale=1")):n&&t.setAttribute("content",n.replace(",maximum-scale=1","")),e(o),kt()};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}})),Ot=st([ht,gt,$t,ft,Pt],(([e,t,n,o,r],s)=>{let i;const a=o?1e4:6e4;if(e){const o=e=>{e<100?s(e):(s(100),clearInterval(i),i=void 0,gt.set(-1))};if(t>=0){let e=t;i=setInterval((()=>{o(e),e++}),100)}else{const t=n,l=new Date(t),c=e.infos.duration;l.setUTCMinutes(l.getUTCMinutes()+c[1]),l.setUTCHours(l.getUTCHours()+c[0]);const u=()=>{let e=new Date;return e<=t?0:e>=l?100:(e-t)/(3600*c[0]+60*c[1])/10},d=u();d<100?(r&&(i=setInterval((()=>{const e=u();o(e)}),a)),s(d)):s(100)}}else s(0);return()=>{i&&clearInterval(i)}}),0),Et=st([ht,Ot],(([e,t])=>{if(!e)return{map:{latitude:0,longitude:0},gramet:t,fl:300};const n=e.timeMatrix,o=e.distanceMatrix,r=o[0][0],s=o[o.length-1][0],i=o[o.length-1][1],a=0!==n.length?n[0][2]:o[0][2],l=0!==n.length?n[n.length-1][2]:o[o.length-1][2];if(t<=0)return{map:r,gramet:0,fl:a};if(t>=100)return{map:s,gramet:100,fl:l};if(0!==n.length){const e=t*n[n.length-1][1]/100;for(const[t,[s,l,c]]of n.entries())if(l>=e){if(e-l==0)return{map:s,gramet:100*o[t][1]/i,fl:c};const u=n[t-1];if(u){const n=o[t][1]-o[t-1][1],r=(l-e)/(l-u[1]);return{map:s.atFraction(u[0],r,n),gramet:100*(o[t][1]-r*n)/i,fl:u[2]}}return{map:r,gramet:0,fl:a}}}else{const e=t*o[o.length-1][1]/100;for(const[n,[s,i,l]]of o.entries())if(i>=e){if(e-i==0)return{map:s,gramet:t,fl:l};const c=o[n-1];if(c){const n=i-c[1];return{map:s.atFraction(c[0],(i-e)/n,n),gramet:t,fl:c[2]}}return{map:r,gramet:0,fl:a}}}return{map:s,gramet:100,fl:l}}),{map:{latitude:0,longitude:0},gramet:0,fl:300});function St(e){let t;return{c(){t=E("textarea"),t.value=e[0],I(t,"class","svelte-1c0wrid")},m(n,o){L(n,t,o),e[5](t)},p(e,n){1&n&&(t.value=e[0])},d(n){n&&M(t),e[5](null)}}}function Tt(t){let n,o,r;return{c(){n=E("a"),n.textContent="copier la route",I(n,"role","button"),I(n,"class","btn btn-primary"),I(n,"href","lhs-mpilot://")},m(e,s){L(e,n,s),o||(r=j(n,"click",t[4]),o=!0)},p:e,d(e){e&&M(n),o=!1,r()}}}function _t(t){let n,o,r;return{c(){n=E("a"),n.innerHTML="ouvrir mPilot <sup>*</sup>",I(n,"role","button"),I(n,"class","btn btn-primary"),I(n,"href","lhs-mpilot://")},m(e,s){L(e,n,s),o||(r=j(n,"click",t[4]),o=!0)},p:e,d(e){e&&M(n),o=!1,r()}}}function Ft(n){let o,r,a;return{c(){o=E("span"),o.textContent="copié!",I(o,"class","svelte-1c0wrid")},m(e,t){L(e,o,t),a=!0},i(e){a||(r&&r.end(1),a=!0)},o(n){r=function(n,o,r){let a,l=o(n,r),c=!0;const u=ke;function d(){const{delay:o=0,duration:r=300,easing:i=t,tick:d=e,css:p}=l||Oe;p&&(a=Q(n,1,0,r,o,i,p));const m=b()+o,f=m+r;me((()=>xe(n,!1,"start"))),C((e=>{if(c){if(e>=f)return d(0,1),xe(n,!1,"end"),--u.r||s(u.c),!1;if(e>=m){const t=i((e-m)/r);d(1-t,t)}}return c}))}return u.r+=1,i(l)?be().then((()=>{l=l(),d()})):d(),{end(e){e&&l.tick&&l.tick(1,0),c&&(a&&X(n,a),c=!1)}}}(o,Ye,{}),a=!1},d(e){e&&M(o),e&&r&&r.end()}}}function At(e){let t,n,o,r,s,i,a,l,c,u,d,p,m,f,g,h=null!=e[0]&&St(e);let v=(Re?_t:Tt)(e),$=Re&&function(e){let t;return{c(){t=E("div"),t.innerHTML='<small class="text-muted"><sup>*</sup> Une fois dans l&#39;application mPilot,\n                il vous suffira de faire un coller (la route aura été copiée automatiquement).</small>',I(t,"class","card-text")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}(),y=e[2]&&Ft();return{c(){h&&h.c(),t=F(),n=E("div"),o=E("div"),r=E("h5"),r.textContent="Route Lido",s=F(),i=E("div"),a=E("div"),a.innerHTML='<p class="card-text">Cette route est optimisée par rapport à celle de PilotMission car elle utilise les airways. Utiliser cette route permet\n                    d&#39;avoir une application Lido plus réactive.</p>',l=F(),c=E("div"),v.c(),u=F(),$&&$.c(),d=F(),p=E("div"),m=T(e[3]),f=F(),y&&y.c(),I(r,"class","card-title"),I(a,"class","col-12 col-md-9"),I(c,"class","text-md-right col align-self-center col-12 col-md-3 py-3 py-md-0"),I(i,"class","row mb-3"),I(p,"class","text-monospace svelte-1c0wrid"),I(o,"class","card-body"),I(n,"class","card mb-3 svelte-1c0wrid")},m(e,b){h&&h.m(e,b),L(e,t,b),L(e,n,b),P(n,o),P(o,r),P(o,s),P(o,i),P(i,a),P(i,l),P(i,c),v.m(c,null),P(o,u),$&&$.m(o,null),P(o,d),P(o,p),P(p,m),P(p,f),y&&y.m(p,null),g=!0},p(e,[n]){null!=e[0]?h?h.p(e,n):(h=St(e),h.c(),h.m(t.parentNode,t)):h&&(h.d(1),h=null),v.p(e,n),e[2]?y?4&n&&Le(y,1):(y=Ft(),y.c(),Le(y,1),y.m(p,null)):y&&(Ce(),Me(y,1,1,(()=>{y=null})),Pe())},i(e){g||(Le(y),g=!0)},o(e){Me(y),g=!1},d(e){h&&h.d(e),e&&M(t),e&&M(n),v.d(),$&&$.d(),y&&y.d()}}}let jt=!1;if(navigator.permissions)try{navigator.permissions.query({name:"clipboard-write"}).then((e=>{"granted"!=e.state&&"prompt"!=e.state||(jt=!0)}))}catch(e){}function Dt(e,t,n){let o;u(e,ht,(e=>n(7,o=e)));let r,s=null;const i=o?o.lidoRoute(!1).join(" "):"";let a,l=!1;return ne((()=>{a&&clearTimeout(a)})),[s,r,l,i,e=>{const t=async function(e){let t=!0;if(jt)navigator.clipboard.writeText(e).then((()=>t=!0),(()=>t=!1));else{n(0,s=e),await pe(),r.focus(),r.select();try{t=document.execCommand("copy")}catch(e){t=!1}n(0,s=null)}return t}(i);Re||(n(2,l=t),a=setTimeout((function(){n(2,l=!1),a&&clearTimeout(a)}),3e3),e.preventDefault())},function(e){ie[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class It extends Ie{constructor(e){super(),De(this,e,Dt,At,a,{})}}const zt={routeDisplay:!0,routePin:0,routeColor:"FFDA25A8",alternateDisplay:!0,alternatePin:0,alternateColor:"FFFF00FF",natDisplay:!0,natPin:8,natPinPosition:0,natColor:"80DA25A8",natIncompleteColor:"FF0000FF",greatCircleDisplay:!0,greatCircleColor:"5F1478FF",ogimetDisplay:!0,ogimetColor:"40FF0000",airportDisplay:!0,airportPin:0,firDisplay:!0,etopsDisplay:!0,etopsColor:"FF0324FC",iconTextChange:"1.0",lineWidthChange:"1.0",iconSizeChange:"1.0"};function Rt(e,t){e.addFolders({name:"greatcircle",enabled:t.greatCircleDisplay,color:t.greatCircleColor},{name:"ralt",enabled:t.alternateDisplay,color:t.alternateColor,pinId:t.alternatePin},{name:"rmain",color:t.routeColor,pinId:t.routePin},{name:"rnat",enabled:t.natDisplay,color:t.natColor,pinId:t.natPin},{name:"rnat_incomplete",enabled:t.natDisplay,color:t.natIncompleteColor,pinId:t.natPin})}const qt=()=>(window.kmlGen||(window.kmlGen=new editolido.KMLGenerator,Rt(window.kmlGen,zt)),window.kmlGen);function Wt(e,t){if(e.startsWith("etops-")||e.startsWith("airport-")||e.startsWith("fir-")||e.endsWith("-change")||"nat-incomplete-color"===e||"nat-pin-position"===e||e.startsWith("ogimet-"))return;const n=qt(),o=He(e);e.endsWith("-display")?n.changeFolderState(o,t):e.endsWith("-pin")?n.changeFolderPin(o,t):e.endsWith("-color")&&n.changeFolderColor(o,t.toUpperCase())}function Nt(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function Ut(e){let t,n,o,r=e[14].label+"";return{c(){t=E("option"),n=T(r),t.__value=e[16],t.value=t.__value,t.selected=o=e[16]===e[1]},m(e,o){L(e,t,o),P(t,n)},p(e,n){2&n&&o!==(o=e[16]===e[1])&&(t.selected=o)},d(e){e&&M(t)}}}function Ht(t){let n,o,r,a,l,c,u,d,p,m,f,g,h,v,y,b,x,w,k=Qt,C=[];for(let e=0;e<k.length;e+=1)C[e]=Ut(Nt(t,k,e));return{c(){n=E("kmlcolor"),o=E("pin"),r=S("svg"),a=S("use"),l=F(),c=E("select");for(let e=0;e<C.length;e+=1)C[e].c();u=F(),d=E("picker"),p=E("label"),m=E("input"),h=F(),v=E("input"),R(a,"xlink:href","#marker-symbol"),U(a,"stroke",0===t[1]?"#fff":Qt[t[1]].color),U(a,"fill",Qt[t[1]].color),I(o,"class","form-control svelte-1b9oa5t"),I(c,"name",t[4]),I(c,"class","custom-select"),void 0===t[1]&&me((()=>t[8].call(c))),I(m,"type","color"),I(p,"style",f=Vt(t[2])),I(v,"type","range"),I(v,"min","30"),I(v,"max","255"),I(d,"class","form-control"),I(d,"style",y=Jt(t[2][0])),I(n,"class","input-group")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,a),P(n,l),P(n,c);for(let e=0;e<C.length;e+=1)C[e].m(c,null);H(c,t[1]),P(n,u),P(n,d),P(d,p),P(p,m),N(m,t[2][0]),P(d,h),P(d,v),N(v,t[2][1]),x||(w=[j(c,"change",t[8]),j(c,"change",t[9]),j(m,"input",t[10]),$(g=t[5].call(null,p,t[2])),j(v,"change",t[11]),j(v,"input",t[11]),$(b=t[6].call(null,n,t[0]))],x=!0)},p(e,[t]){if(2&t&&U(a,"stroke",0===e[1]?"#fff":Qt[e[1]].color),2&t&&U(a,"fill",Qt[e[1]].color),2&t){let n;for(k=Qt,n=0;n<k.length;n+=1){const o=Nt(e,k,n);C[n]?C[n].p(o,t):(C[n]=Ut(o),C[n].c(),C[n].m(c,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=k.length}2&t&&H(c,e[1]),4&t&&N(m,e[2][0]),4&t&&f!==(f=Vt(e[2]))&&I(p,"style",f),g&&i(g.update)&&4&t&&g.update.call(null,e[2]),4&t&&N(v,e[2][1]),4&t&&y!==(y=Jt(e[2][0]))&&I(d,"style",y),b&&i(b.update)&&1&t&&b.update.call(null,e[0])},i:e,o:e,d(e){e&&M(n),O(C,e),x=!1,s(w)}}}const Gt=/^[A-F0-9]{8}$/i,Bt=e=>{let[t,n]=Zt(e);return[t,n/255]},Kt=["#FF0000",255],Zt=e=>{try{const t=parseInt(e.slice(0,2),16);return["#"+e.slice(6,8)+e.slice(4,6)+e.slice(2,4),t]}catch(e){return Kt}},Jt=e=>{const[t,n,o]=[e.slice(1,3),e.slice(3,5),e.slice(5,7)].map((e=>parseInt(e,16)));return`--range-red: ${t}; --range-green: ${n}; --range-blue: ${o};`},Vt=e=>`background-color: ${e[0]}; opacity: ${e[1]/255}`,Qt=[{label:"Aucun repère",color:"#FFFFFF"},{label:"Bleu",color:"#6699FF"},{label:"Jaune",color:"#FFFF00"},{label:"Marron* (Rouge pour Avenza/Earth)",color:"#CC9966"},{label:"Orange",color:"#FF9922"},{label:"Rose* (Rouge pour Avenza)",color:"#DD5599"},{label:"Rouge",color:"#FF0000"},{label:"Vert",color:"#22DD44"},{label:"Violet",color:"#BB11EE"}];function Xt(e,t,n){const o=oe();let{kmlColor:r="FF0000FF"}=t,{selected:s=0}=t,{name:i}=t;const a=i+"-color",l=i+"-pin";let c=Kt;const u=Ue(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"selected"in e&&n(1,s=e.selected),"name"in e&&n(7,i=e.name)},[r,s,c,o,l,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),u("change",{name:a,value:r})}}},function(e){return n(2,c=Zt(r)),{update(e){n(2,c=Zt(e)),u("change",{name:a,value:e.toUpperCase()})}}},i,function(){s=G(this),n(1,s)},e=>{e.target.blur(),o("change",{name:l,value:s})},function(){c[0]=this.value,n(2,c)},function(){c[1]=q(this.value),n(2,c)}]}class Yt extends Ie{constructor(e){super(),De(this,e,Xt,Ht,a,{kmlColor:0,selected:1,name:7})}}const en=Object.freeze({optionsKML:"optionsKML",shortcut:"shortcut",downloadType:"downloadType",exportKML:"exportKML"}),tn=new class{constructor(){}getItem(e){const t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(t){this.removeItem(e)}return null}setItem(e,t){const n=JSON.stringify(t);"{}"!==n&&localStorage.setItem(e,n)}removeItem(e){localStorage.removeItem(e)}},nn=(e,t,n="Mon OFP2MAP")=>{const o={},r=["exportKML"];for(const[t,n]of Object.entries(en)){if(r.includes(n))continue;let s=tn.getItem(n);if(t===en.optionsKML&&e){const t={};for(const n of Object.keys(e).filter((t=>e[t]!==zt[t])))t[n]=e[n];s=t}if(null!==s)if(t===en.optionsKML)for(const[e,t]of Object.entries(s))o[e]=t;else o[t]=s}const s=Object.entries(o).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),i=window.location.origin+window.location.pathname+(s?"?"+s:"")+"#"+t;window.history.replaceState(o,n,i)};function on(t){let n,o,r,i,a,l,c,u,d,p;return{c(){n=E("div"),o=E("div"),o.innerHTML='<span class="input-group-text svelte-1xnphi2"></span>',r=F(),i=E("input"),a=F(),l=E("div"),c=E("a"),u=T("Lancer"),I(o,"class","input-group-prepend"),I(i,"class","form-control svelte-1xnphi2"),I(i,"placeholder","Nom du raccourci"),I(i,"type","text"),I(c,"class","btn btn-outline-secondary svelte-1xnphi2"),I(c,"href",t[1]),B(c,"disabled",!(t[0].trim()&&Re)),I(l,"class","input-group-append"),I(n,"class","input-group")},m(e,s){L(e,n,s),P(n,o),P(n,r),P(n,i),N(i,t[0]),P(n,a),P(n,l),P(l,c),P(c,u),d||(p=[j(i,"input",t[4]),j(i,"change",t[3]),j(c,"click",t[2])],d=!0)},p(e,[t]){1&t&&i.value!==e[0]&&N(i,e[0]),2&t&&I(c,"href",e[1]),1&t&&B(c,"disabled",!(e[0].trim()&&Re))},i:e,o:e,d(e){e&&M(n),d=!1,s(p)}}}const rn="OFP2MAP";function sn(e,t,n){let o;u(e,ht,(e=>n(5,o=e)));const r=oe(),s=en.shortcut;let i,a=tn.getItem(s)||rn;const l=o?o.lidoRoute(!1).join(" "):"";return[a,i,function(e){const t=a.trim();if(t&&Re){const e=qt(),r={lidoRoute:l,kml:e.render(),kmlAvenza:e.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS}),kmlGoogleEarth:e.render({styleTemplate:editolido.googleEarthStyleTemplate}),grametProxyURL:o.ogimetData.proxyImg};n(1,i="shortcuts://run-shortcut?name="+encodeURIComponent(t)+"&input=text&text="+encodeURIComponent(JSON.stringify(r)))}else e.preventDefault()},function(){const e=a.trim();e===rn?tn.removeItem(s):tn.setItem(s,e),r("save",[s,e])},function(){a=this.value,n(0,a)}]}class an extends Ie{constructor(e){super(),De(this,e,sn,on,a,{})}}function ln(e){const t=()=>{document&&document.visibilityState&&"visible"!==document.visibilityState&&e&&e.blur&&e.blur()};return document.addEventListener("visibilitychange",t,!1),{destroy(){document.removeEventListener("visibilitychange",t)}}}function cn(t){let n,o,r,i,a,l,c,u,d,p,m,f,g,h,v,y,b,x,w,k=un[0]+"",C=un[1]+"",O=un[2]+"";return{c(){n=E("div"),o=E("select"),r=E("option"),i=T(k),l=E("option"),c=T(C),d=E("option"),p=T(O),g=F(),h=E("div"),v=E("a"),y=T(t[0]),r.selected=a=0===t[1],r.__value=0,r.value=r.__value,l.selected=u=1===t[1],l.__value=1,l.value=l.__value,d.selected=m=2===t[1],d.__value=2,d.value=d.__value,I(o,"class",f="custom-select choice"+t[1]+" svelte-7fc2wm"),I(o,"aria-label","Example select with button addon"),void 0===t[1]&&me((()=>t[7].call(o))),I(v,"class",b="btn btn-success choice"+t[1]+" svelte-7fc2wm"),I(v,"download",t[3]),I(v,"href",t[2]),I(h,"class","input-group-append"),I(n,"class","input-group svelte-7fc2wm")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,i),P(o,l),P(l,c),P(o,d),P(d,p),H(o,t[1]),P(n,g),P(n,h),P(h,v),P(v,y),t[8](n),x||(w=[j(o,"change",t[7]),j(o,"change",t[6]),$(ln.call(null,o)),j(v,"click",t[5])],x=!0)},p(e,[t]){2&t&&a!==(a=0===e[1])&&(r.selected=a),2&t&&u!==(u=1===e[1])&&(l.selected=u),2&t&&m!==(m=2===e[1])&&(d.selected=m),2&t&&f!==(f="custom-select choice"+e[1]+" svelte-7fc2wm")&&I(o,"class",f),2&t&&H(o,e[1]),1&t&&W(y,e[0]),2&t&&b!==(b="btn btn-success choice"+e[1]+" svelte-7fc2wm")&&I(v,"class",b),8&t&&I(v,"download",e[3]),4&t&&I(v,"href",e[2])},i:e,o:e,d(e){e&&M(n),t[8](null),x=!1,s(w)}}}const un=["KML Mapsme","KML Avenza","KML Google Earth"],dn=["green","purple","cyan"];function pn(e,t,n){const o=oe();let{label:r}=t;const s=en.downloadType;let i=tn.getItem(s)||1;"string"==typeof i&&(i=parseInt(i,10)),(i<0||i>=un.length)&&(i=0);let a,l="",c="";const u=e=>{a.style.setProperty("--color",`var(--${dn[i]})`)},d=(e,t="application/vnd.google-earth.kml+xml")=>{const n=new Blob(e,{type:t});return URL.createObjectURL(n)};return te((()=>(u(),()=>{l&&l.startsWith("blob:")&&URL.revokeObjectURL(l)}))),e.$$set=e=>{"label"in e&&n(0,r=e.label)},[r,i,l,c,a,function(e){const t=qt(),o=["_mapsme.kml","_avenza.kml","_googleearth.kml"][i];let r=t.name;if(r?(r=r.trim(),n(3,c=r.replace(/[ \/]/g,"_").replace(/:/g,"")+o)):n(3,c="editolido"+o),l&&l.startsWith("blob:")&&URL.revokeObjectURL(l),0===i)n(2,l=d([t.render()]));else if(1===i)n(2,l=d([t.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS})]));else{if(2!==i)return e.preventDefault(),!1;n(2,l=d([t.render({styleTemplate:editolido.googleEarthStyleTemplate})]))}},function(e){e.target.blur(),1===i?tn.removeItem(s):tn.setItem(s,i),o("save",[s,i]),u()},function(){i=G(this),n(1,i)},function(e){ie[e?"unshift":"push"]((()=>{a=e,n(4,a)}))}]}class mn extends Ie{constructor(e){super(),De(this,e,pn,cn,a,{label:0})}}function fn(t){let n,o,r,a,l,c,u,d,p,m,f,g,h,v,y,b,x;return{c(){n=E("kmlcolor"),o=E("div"),r=E("label"),a=E("input"),l=T(t[2]),c=F(),u=E("picker"),d=E("label"),p=E("input"),g=F(),h=E("input"),I(a,"name",t[4]),a.checked=t[1],I(a,"type","checkbox"),I(r,"for",t[4]),I(r,"class","input-group-text"),I(o,"class","input-group-prepend"),I(p,"type","color"),I(d,"style",m=Vt(t[3])),I(h,"type","range"),I(h,"min","30"),I(h,"max","255"),I(u,"class","form-control"),I(u,"style",v=Jt(t[3][0])),I(n,"class","input-group checkbox-combo")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,a),P(r,l),P(n,c),P(n,u),P(u,d),P(d,p),N(p,t[3][0]),P(u,g),P(u,h),N(h,t[3][1]),b||(x=[j(a,"change",t[8]),j(p,"input",t[9]),$(f=t[5].call(null,d,t[3])),j(h,"change",t[10]),j(h,"input",t[10]),$(y=t[6].call(null,n,t[0]))],b=!0)},p(e,[t]){2&t&&(a.checked=e[1]),4&t&&W(l,e[2]),8&t&&N(p,e[3][0]),8&t&&m!==(m=Vt(e[3]))&&I(d,"style",m),f&&i(f.update)&&8&t&&f.update.call(null,e[3]),8&t&&N(h,e[3][1]),8&t&&v!==(v=Jt(e[3][0]))&&I(u,"style",v),y&&i(y.update)&&1&t&&y.update.call(null,e[0])},i:e,o:e,d(e){e&&M(n),b=!1,s(x)}}}function gn(e,t,n){const o=oe();let{kmlColor:r="FF0000FF"}=t,{checked:s}=t,{name:i}=t,{label:a="Couleur"}=t;const l=i+"-color",c=i+"-display";let u=Kt;const d=Ue(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"checked"in e&&n(1,s=e.checked),"name"in e&&n(7,i=e.name),"label"in e&&n(2,a=e.label)},[r,s,a,u,c,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),d("change",{name:l,value:r})}}},function(e){return n(3,u=Zt(r)),{update(e){n(3,u=Zt(e)),d("change",{name:l,value:e.toUpperCase()})}}},i,function(t){re(e,t)},function(){u[0]=this.value,n(3,u)},function(){u[1]=q(this.value),n(3,u)}]}class hn extends Ie{constructor(e){super(),De(this,e,gn,fn,a,{kmlColor:0,checked:1,name:7,label:2})}}function vn(e,t,n){const o=e.slice();return o[9]=t[n],o[11]=n,o}function $n(e){let t,n,o,r=e[9].label+"";return{c(){t=E("option"),n=T(r),t.__value=e[11],t.value=t.__value,t.selected=o=e[11]===e[0]},m(e,o){L(e,t,o),P(t,n)},p(e,n){1&n&&o!==(o=e[11]===e[0])&&(t.selected=o)},d(e){e&&M(t)}}}function yn(t){let n,o,r,i,a,l,c,u,d,p=bn,m=[];for(let e=0;e<p.length;e+=1)m[e]=$n(vn(t,p,e));return{c(){n=E("div"),o=E("div"),r=E("label"),i=E("input"),a=T("Airports"),l=F(),c=E("select");for(let e=0;e<m.length;e+=1)m[e].c();I(i,"name",t[3]),i.checked=t[1],I(i,"type","checkbox"),I(r,"for",t[3]),I(r,"class","input-group-text"),I(o,"class","input-group-prepend"),I(c,"name",t[4]),I(c,"class","custom-select svelte-aqi3t3"),void 0===t[0]&&me((()=>t[7].call(c))),I(n,"class","input-group checkbox-combo")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,i),P(r,a),P(n,l),P(n,c);for(let e=0;e<m.length;e+=1)m[e].m(c,null);H(c,t[0]),u||(d=[j(i,"change",t[6]),j(c,"change",t[7]),j(c,"change",t[8])],u=!0)},p(e,[t]){if(2&t&&(i.checked=e[1]),1&t){let n;for(p=bn,n=0;n<p.length;n+=1){const o=vn(e,p,n);m[n]?m[n].p(o,t):(m[n]=$n(o),m[n].c(),m[n].m(c,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=p.length}1&t&&H(c,e[0])},i:e,o:e,d(e){e&&M(n),O(m,e),u=!1,s(d)}}}const bn=[{label:"statuts"},{label:"vert/rouge"}];function xn(e,t,n){const o=oe();let{selected:r=0}=t,{name:s="airport"}=t,{checked:i}=t;const a=s+"-display",l=s+"-pin";return e.$$set=e=>{"selected"in e&&n(0,r=e.selected),"name"in e&&n(5,s=e.name),"checked"in e&&n(1,i=e.checked)},[r,i,o,a,l,s,function(t){re(e,t)},function(){r=G(this),n(0,r)},e=>{e.target.blur(),o("change",{name:l,value:r})}]}class wn extends Ie{constructor(e){super(),De(this,e,xn,yn,a,{selected:0,name:5,checked:1})}}function kn(t){let n,o,r,i,a,l,c,u,d,p,m,f,g;return{c(){n=E("div"),o=E("div"),r=E("label"),i=T(t[2]),a=F(),l=E("button"),l.textContent="-",c=F(),u=E("div"),d=T(t[0]),p=F(),m=E("button"),m.textContent="+",I(r,"for",t[1]),I(r,"class","input-group-text svelte-si7r19"),I(o,"class","input-group-prepend"),I(l,"class","form-control svelte-si7r19"),I(l,"type","button"),I(u,"class"," form-control svelte-si7r19"),I(m,"class","form-control svelte-si7r19"),I(m,"type","button"),I(n,"class","input-group input-group-sm svelte-si7r19")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,i),P(n,a),P(n,l),P(n,c),P(n,u),P(u,d),P(n,p),P(n,m),f||(g=[j(l,"click",t[4]),j(m,"click",t[3])],f=!0)},p(e,[t]){4&t&&W(i,e[2]),2&t&&I(r,"for",e[1]),1&t&&W(d,e[0])},i:e,o:e,d(e){e&&M(n),f=!1,s(g)}}}function Cn(e,t,n){const o=oe();let{name:r}=t,{label:s}=t,{value:i}=t,{min:a=.9}=t,{max:l=1.4}=t,{step:c=.1}=t;return e.$$set=e=>{"name"in e&&n(1,r=e.name),"label"in e&&n(2,s=e.label),"value"in e&&n(0,i=e.value),"min"in e&&n(5,a=e.min),"max"in e&&n(6,l=e.max),"step"in e&&n(7,c=e.step)},[i,r,s,()=>{const e=i;n(0,i=Math.min(Math.max(parseFloat(i)+c,a),l).toFixed(1)),i!==e&&o("change",{name:r,value:i})},()=>{const e=i;n(0,i=Math.min(Math.max(parseFloat(i)-c,a),l).toFixed(1)),i!==e&&o("change",{name:r,value:i})},a,l,c]}class Pn extends Ie{constructor(e){super(),De(this,e,Cn,kn,a,{name:1,label:2,value:0,min:5,max:6,step:7})}}function Ln(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Mn(e){let t,n,o,r,i,a,l,c,u,d,p,m,f,g,h,v,y,b,x,w,k,C,O,S,_,A,z,R,q,W,N,U,H,G,K,Z,J,V,Q,X,Y,ee,te,ne,oe,re,se,ie,ae,le,ce,ue,de,pe,fe,ge,he,ve,$e,ye,be,xe,we,ke,Ce,Pe,Oe,Ee,Te,_e;p=new Yt({props:{name:"route",kmlColor:e[0].routeColor,selected:e[0].routePin}}),p.$on("change",e[4]),x=new Yt({props:{name:"alternate",kmlColor:e[0].alternateColor,selected:e[0].alternatePin}}),x.$on("change",e[4]),z=new Yt({props:{name:"nat",kmlColor:e[0].natColor,selected:e[0].natPin}}),z.$on("change",e[4]),U=new hn({props:{name:"great-circle",label:"Orthodromie",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay}}),U.$on("change",e[4]),K=new hn({props:{name:"ogimet",label:"Route GRAMET",kmlColor:e[0].ogimetColor,checked:e[0].ogimetDisplay}}),K.$on("change",e[4]),V=new hn({props:{name:"etops",label:"ETOPS",kmlColor:e[0].etopsColor,checked:e[0].etopsDisplay}}),V.$on("change",e[4]),Y=new wn({props:{name:"airport",selected:e[0].airportPin,checked:e[0].airportDisplay}}),Y.$on("change",e[4]),ue=new Pn({props:{name:"icon-text-change",label:"Label",value:e[0].iconTextChange}}),ue.$on("change",e[4]),pe=new Pn({props:{name:"line-width-change",label:"Ligne",value:e[0].lineWidthChange,min:.6,max:2,step:.1}}),pe.$on("change",e[4]),ge=new Pn({props:{name:"icon-size-change",label:"Icône",value:e[0].iconSizeChange,min:.6,max:2,step:.1}}),ge.$on("change",e[4]);let De=!e[1]&&On(e);return{c(){t=E("div"),n=E("a"),n.innerHTML='<svg class="svelte-szdee6"><use xlink:href="#close-symbol"></use></svg>',o=F(),r=E("form"),i=E("fieldset"),a=E("legend"),l=E("input"),u=T("Route"),d=F(),Fe(p.$$.fragment),m=F(),f=E("fieldset"),g=E("legend"),h=E("input"),y=T("Dégagement"),b=F(),Fe(x.$$.fragment),w=F(),k=E("fieldset"),C=E("legend"),O=E("input"),_=T("Tracks"),A=F(),Fe(z.$$.fragment),R=F(),q=E("small"),q.textContent="Positionné à l'entrée des tracks, un track incomplet restera rouge.",W=F(),N=E("fieldset"),Fe(U.$$.fragment),H=F(),G=E("fieldset"),Fe(K.$$.fragment),Z=F(),J=E("fieldset"),Fe(V.$$.fragment),Q=F(),X=E("fieldset"),Fe(Y.$$.fragment),ee=F(),te=E("fieldset"),ne=E("legend"),oe=E("input"),se=T("FIR REG"),ie=F(),ae=E("fieldset"),le=E("legend"),le.textContent="Aspect général",ce=F(),Fe(ue.$$.fragment),de=F(),Fe(pe.$$.fragment),fe=F(),Fe(ge.$$.fragment),he=F(),ve=E("div"),$e=E("button"),ye=T("Mémoriser"),xe=F(),we=E("button"),ke=T("Restaurer"),Pe=F(),De&&De.c(),I(n,"class","closeB svelte-szdee6"),I(n,"role","button"),I(n,"href","."),I(l,"name","route-display"),l.checked=c=e[0].routeDisplay,I(l,"type","checkbox"),I(i,"class","form-group svelte-szdee6"),I(h,"name","alternate-display"),h.checked=v=e[0].alternateDisplay,I(h,"type","checkbox"),I(f,"class","form-group svelte-szdee6"),I(O,"name","nat-display"),O.checked=S=e[0].natDisplay,I(O,"type","checkbox"),I(q,"class","form-text text-muted svelte-szdee6"),I(k,"class","form-group svelte-szdee6"),I(N,"class","form-group svelte-szdee6"),I(G,"class","form-group svelte-szdee6"),I(J,"class","form-group svelte-szdee6"),I(X,"class","form-group svelte-szdee6"),I(oe,"name","fir-display"),oe.checked=re=e[0].firDisplay,I(oe,"type","checkbox"),I(te,"class","form-group svelte-szdee6"),I(ae,"class","form-group svelte-szdee6"),$e.disabled=be=!e[2],I($e,"class","btn btn-primary btn-sm mb-2 svelte-szdee6"),I($e,"type","button"),we.disabled=Ce=!e[2],I(we,"class","btn btn-secondary btn-sm mb-2 svelte-szdee6"),I(we,"type","button"),I(ve,"class","last svelte-szdee6"),I(r,"class","svelte-szdee6"),I(t,"class","settings svelte-szdee6"),B(t,"sidebar",e[3])},m(s,c){L(s,t,c),P(t,n),P(t,o),P(t,r),P(r,i),P(i,a),P(a,l),P(a,u),P(i,d),Ae(p,i,null),P(r,m),P(r,f),P(f,g),P(g,h),P(g,y),P(f,b),Ae(x,f,null),P(r,w),P(r,k),P(k,C),P(C,O),P(C,_),P(k,A),Ae(z,k,null),P(k,R),P(k,q),P(r,W),P(r,N),Ae(U,N,null),P(r,H),P(r,G),Ae(K,G,null),P(r,Z),P(r,J),Ae(V,J,null),P(r,Q),P(r,X),Ae(Y,X,null),P(r,ee),P(r,te),P(te,ne),P(ne,oe),P(ne,se),P(r,ie),P(r,ae),P(ae,le),P(ae,ce),Ae(ue,ae,null),P(ae,de),Ae(pe,ae,null),P(ae,fe),Ae(ge,ae,null),P(r,he),P(r,ve),P(ve,$e),P($e,ye),P(ve,xe),P(ve,we),P(we,ke),P(ve,Pe),De&&De.m(ve,null),Ee=!0,Te||(_e=[j(n,"click",D(e[10])),j(l,"change",e[4]),j(h,"change",e[4]),j(O,"change",e[4]),j(oe,"change",e[4]),j($e,"click",e[7]),j(we,"click",e[6]),j(r,"submit",D(e[9])),$(Ln.call(null,t)),j(t,"click_outside",e[11])],Te=!0)},p(e,n){(!Ee||1&n&&c!==(c=e[0].routeDisplay))&&(l.checked=c);const o={};1&n&&(o.kmlColor=e[0].routeColor),1&n&&(o.selected=e[0].routePin),p.$set(o),(!Ee||1&n&&v!==(v=e[0].alternateDisplay))&&(h.checked=v);const r={};1&n&&(r.kmlColor=e[0].alternateColor),1&n&&(r.selected=e[0].alternatePin),x.$set(r),(!Ee||1&n&&S!==(S=e[0].natDisplay))&&(O.checked=S);const s={};1&n&&(s.kmlColor=e[0].natColor),1&n&&(s.selected=e[0].natPin),z.$set(s);const i={};1&n&&(i.kmlColor=e[0].greatCircleColor),1&n&&(i.checked=e[0].greatCircleDisplay),U.$set(i);const a={};1&n&&(a.kmlColor=e[0].ogimetColor),1&n&&(a.checked=e[0].ogimetDisplay),K.$set(a);const u={};1&n&&(u.kmlColor=e[0].etopsColor),1&n&&(u.checked=e[0].etopsDisplay),V.$set(u);const d={};1&n&&(d.selected=e[0].airportPin),1&n&&(d.checked=e[0].airportDisplay),Y.$set(d),(!Ee||1&n&&re!==(re=e[0].firDisplay))&&(oe.checked=re);const m={};1&n&&(m.value=e[0].iconTextChange),ue.$set(m);const f={};1&n&&(f.value=e[0].lineWidthChange),pe.$set(f);const g={};1&n&&(g.value=e[0].iconSizeChange),ge.$set(g),(!Ee||4&n&&be!==(be=!e[2]))&&($e.disabled=be),(!Ee||4&n&&Ce!==(Ce=!e[2]))&&(we.disabled=Ce),e[1]?De&&(De.d(1),De=null):De?De.p(e,n):(De=On(e),De.c(),De.m(ve,null)),8&n&&B(t,"sidebar",e[3])},i(e){Ee||(Le(p.$$.fragment,e),Le(x.$$.fragment,e),Le(z.$$.fragment,e),Le(U.$$.fragment,e),Le(K.$$.fragment,e),Le(V.$$.fragment,e),Le(Y.$$.fragment,e),Le(ue.$$.fragment,e),Le(pe.$$.fragment,e),Le(ge.$$.fragment,e),me((()=>{Oe||(Oe=Se(t,et,{duration:300,x:200,y:0},!0)),Oe.run(1)})),Ee=!0)},o(e){Me(p.$$.fragment,e),Me(x.$$.fragment,e),Me(z.$$.fragment,e),Me(U.$$.fragment,e),Me(K.$$.fragment,e),Me(V.$$.fragment,e),Me(Y.$$.fragment,e),Me(ue.$$.fragment,e),Me(pe.$$.fragment,e),Me(ge.$$.fragment,e),Oe||(Oe=Se(t,et,{duration:300,x:200,y:0},!1)),Oe.run(0),Ee=!1},d(e){e&&M(t),je(p),je(x),je(z),je(U),je(K),je(V),je(Y),je(ue),je(pe),je(ge),De&&De.d(),e&&Oe&&Oe.end(),Te=!1,s(_e)}}}function On(t){let n,o,r;return{c(){n=E("button"),n.textContent="Reset",I(n,"class","btn btn-outline-dark btn-sm reset svelte-szdee6"),I(n,"type","button")},m(e,s){L(e,n,s),o||(r=j(n,"click",t[5]),o=!0)},p:e,d(e){e&&M(n),o=!1,r()}}}function En(e){let t,n,o=e[3]&&Mn(e);return{c(){o&&o.c(),t=A()},m(e,r){o&&o.m(e,r),L(e,t,r),n=!0},p(e,[n]){e[3]?o?(o.p(e,n),8&n&&Le(o,1)):(o=Mn(e),o.c(),Le(o,1),o.m(t.parentNode,t)):o&&(Ce(),Me(o,1,1,(()=>{o=null})),Pe())},i(e){n||(Le(o),n=!0)},o(e){Me(o),n=!1},d(e){o&&o.d(e),e&&M(t)}}}function Sn(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}function Tn(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function _n(e,t){return JSON.stringify(e)===JSON.stringify(t)}function Fn(e,t,n){let o,r,s;u(e,pt,(e=>n(3,s=e)));const i=oe(),a=en.optionsKML;let{kmlOptions:l}=t,c={...zt,...tn.getItem(a)||{}};function d(e){let t=!1;for(const[o,r]of Object.entries(e))l[o]!==r&&(n(0,l[o]=r,l),i("change",{name:Tn(o),value:r}),t=!0);t&&n(0,l={...e})}return e.$$set=e=>{"kmlOptions"in e&&n(0,l=e.kmlOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=_n(zt,l)),257&e.$$.dirty&&n(2,r=!_n(c,l))},[l,o,r,s,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=Sn(t);l[r]!==o&&(n(0,l[r]=o,l),i("change",{name:t,value:o}))},function(){d(zt)},function(){d(c)},function(){if(o)tn.removeItem(a);else{const e={};for(const t of Object.keys(l).filter((e=>l[e]!==zt[e])))e[t]=l[t];tn.setItem(a,e)}i("save"),n(8,c={...l})},c,function(t){re(e,t)},()=>{v(pt,s=!s,s)},()=>v(pt,s=!1,s)]}class An extends Ie{constructor(e){super(),De(this,e,Fn,En,a,{kmlOptions:0})}}function jn(e){let t,n,o,r,i,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,O,S,_,A,D,z,R,q,W,N,U,H,G,B,K,Z,J,V;return i=new Yt({props:{name:"route",kmlColor:e[1].routeColor,selected:e[1].routePin}}),i.$on("change",e[4]),f=new Yt({props:{name:"alternate",kmlColor:e[1].alternateColor,selected:e[1].alternatePin}}),f.$on("change",e[4]),w=new Yt({props:{name:"nat",kmlColor:e[1].natColor,selected:e[1].natPin}}),w.$on("change",e[4]),_=new hn({props:{name:"great-circle",label:"Orthodromie",kmlColor:e[1].greatCircleColor,checked:e[1].greatCircleDisplay}}),_.$on("change",e[4]),{c(){t=E("div"),n=E("fieldset"),o=E("legend"),o.textContent="Route",r=F(),Fe(i.$$.fragment),a=F(),l=E("fieldset"),c=E("legend"),u=E("input"),p=T("Dégagement"),m=F(),Fe(f.$$.fragment),g=F(),h=E("fieldset"),v=E("legend"),$=E("input"),b=T("Tracks"),x=F(),Fe(w.$$.fragment),k=F(),C=E("small"),C.textContent="Positionné à l'entrée des tracks, un track incomplet restera rouge.",O=F(),S=E("fieldset"),Fe(_.$$.fragment),A=F(),D=E("div"),z=E("button"),R=T("Mémoriser"),W=F(),N=E("button"),U=T("Restaurer"),G=F(),B=E("button"),K=T("Comme carte"),I(n,"class","form-group svelte-1ikj0u7"),I(u,"name","alternate-display"),u.checked=d=e[1].alternateDisplay,I(u,"type","checkbox"),I(l,"class","form-group svelte-1ikj0u7"),I($,"name","nat-display"),$.checked=y=e[1].natDisplay,I($,"type","checkbox"),I(C,"class","form-text text-muted"),I(h,"class","form-group svelte-1ikj0u7"),I(S,"class","form-group svelte-1ikj0u7"),z.disabled=q=!e[3],I(z,"class","btn btn-primary btn-sm svelte-1ikj0u7"),I(z,"type","button"),N.disabled=H=!e[3]||0===Object.keys(e[0]).length,I(N,"class","btn btn-secondary btn-sm ml-3 svelte-1ikj0u7"),I(N,"type","button"),B.disabled=e[2],I(B,"class","btn btn-outline-secondary btn-sm ml-auto svelte-1ikj0u7"),I(B,"type","button"),I(D,"class","mt-3 mb-1 d-flex")},m(s,d){L(s,t,d),P(t,n),P(n,o),P(n,r),Ae(i,n,null),P(t,a),P(t,l),P(l,c),P(c,u),P(c,p),P(l,m),Ae(f,l,null),P(t,g),P(t,h),P(h,v),P(v,$),P(v,b),P(h,x),Ae(w,h,null),P(h,k),P(h,C),P(t,O),P(t,S),Ae(_,S,null),P(t,A),P(t,D),P(D,z),P(z,R),P(D,W),P(D,N),P(N,U),P(D,G),P(D,B),P(B,K),Z=!0,J||(V=[j(u,"change",e[4]),j($,"change",e[4]),j(z,"click",e[7]),j(N,"click",e[5]),j(B,"click",e[6])],J=!0)},p(e,[t]){const n={};2&t&&(n.kmlColor=e[1].routeColor),2&t&&(n.selected=e[1].routePin),i.$set(n),(!Z||2&t&&d!==(d=e[1].alternateDisplay))&&(u.checked=d);const o={};2&t&&(o.kmlColor=e[1].alternateColor),2&t&&(o.selected=e[1].alternatePin),f.$set(o),(!Z||2&t&&y!==(y=e[1].natDisplay))&&($.checked=y);const r={};2&t&&(r.kmlColor=e[1].natColor),2&t&&(r.selected=e[1].natPin),w.$set(r);const s={};2&t&&(s.kmlColor=e[1].greatCircleColor),2&t&&(s.checked=e[1].greatCircleDisplay),_.$set(s),(!Z||8&t&&q!==(q=!e[3]))&&(z.disabled=q),(!Z||9&t&&H!==(H=!e[3]||0===Object.keys(e[0]).length))&&(N.disabled=H),(!Z||4&t)&&(B.disabled=e[2])},i(e){Z||(Le(i.$$.fragment,e),Le(f.$$.fragment,e),Le(w.$$.fragment,e),Le(_.$$.fragment,e),Z=!0)},o(e){Me(i.$$.fragment,e),Me(f.$$.fragment,e),Me(w.$$.fragment,e),Me(_.$$.fragment,e),Z=!1},d(e){e&&M(t),je(i),je(f),je(w),je(_),J=!1,s(V)}}}function Dn(e,t){return JSON.stringify(e)===JSON.stringify(t)}function In(e,t,n){let o,r;const s=["routeDisplay","routeColor","routePin","alternateDisplay","alternateColor","alternatePin","natDisplay","natColor","natPin","greatCircleDisplay","greatCircleColor"];let{mapOptions:i}=t;const a=Object.keys(i).filter((e=>s.includes(e))).reduce(((e,t)=>(e[t]="routeDisplay"===t||i[t],e)),{}),l=en.exportKML;let c={...tn.getItem(l)||{}},u={...a,...c};function d(e){let t=!1;const o=u!==e;for(const[r,s]of Object.entries(e))o&&u[r]!==s&&(n(1,u[r]=s,u),Wt(Tn(r),s),t=!0);t&&n(1,u={...e})}d(u);return e.$$set=e=>{"mapOptions"in e&&n(8,i=e.mapOptions)},e.$$.update=()=>{2&e.$$.dirty&&n(2,o=Dn(a,u)),3&e.$$.dirty&&n(3,r=!Dn(c,u))},[c,u,o,r,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=Sn(t);u[r]!==o&&(n(1,u[r]=o,u),Wt(t,o))},()=>d(c),()=>d(a),function(){tn.setItem(l,u),n(0,c={...u})},i]}class zn extends Ie{constructor(e){super(),De(this,e,In,jn,a,{mapOptions:8})}}function Rn(e){let t,n,o,r,i,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,O,S,T,_,A,z,R,q;return u=new zn({props:{mapOptions:e[0]}}),w=new mn({props:{label:"Télécharger"}}),w.$on("save",e[3]),A=new an({}),A.$on("save",e[4]),{c(){t=E("div"),n=E("div"),o=E("div"),r=E("div"),i=E("form"),a=E("fieldset"),l=E("legend"),l.textContent="Réglages pour l'export",c=F(),Fe(u.$$.fragment),d=F(),p=E("div"),m=E("form"),f=E("fieldset"),g=E("legend"),g.textContent="Export",h=F(),v=E("fieldset"),$=E("legend"),$.textContent="KML",y=F(),b=E("p"),b.textContent="Choisissez un format (MapsMe, Avenza Maps ou Google Earth) et téléchargez le fichier KML.",x=F(),Fe(w.$$.fragment),k=F(),C=E("fieldset"),O=E("legend"),O.textContent="Raccourcis",S=F(),T=E("p"),T.innerHTML='Sur iOS on peut lancer un raccourci.\n                            <a href="https://www.icloud.com/shortcuts/886cc07d24d74d83bb0859643242c2df" target="_blank">Exemple de raccourci à installer\n                            </a>. Le raccourci reçoit le KML, la route Lido et le GRAMET.',_=F(),Fe(A.$$.fragment),I(l,"class","svelte-1l3lo3m"),I(a,"class","form svelte-1l3lo3m"),I(i,"class","settings svelte-1l3lo3m"),I(r,"class","col-12 col-md-6 d-flex pt-2 pt-md-0 svelte-1l3lo3m"),I(g,"class","svelte-1l3lo3m"),I(v,"class","form-group"),I(C,"class","form-group mt-4"),I(f,"class","form svelte-1l3lo3m"),I(m,"class","settings svelte-1l3lo3m"),I(p,"class","col-12 col-md-6 d-flex export svelte-1l3lo3m"),I(o,"class","row"),I(n,"class","card-body"),I(t,"class","card mb-3 svelte-1l3lo3m")},m(s,M){L(s,t,M),P(t,n),P(n,o),P(o,r),P(r,i),P(i,a),P(a,l),P(a,c),Ae(u,a,null),P(o,d),P(o,p),P(p,m),P(m,f),P(f,g),P(f,h),P(f,v),P(v,$),P(v,y),P(v,b),P(v,x),Ae(w,v,null),P(f,k),P(f,C),P(C,O),P(C,S),P(C,T),P(C,_),Ae(A,C,null),z=!0,R||(q=[j(i,"submit",D(e[2])),j(m,"submit",D(e[1]))],R=!0)},p(e,[t]){const n={};1&t&&(n.mapOptions=e[0]),u.$set(n)},i(e){z||(Le(u.$$.fragment,e),Le(w.$$.fragment,e),Le(A.$$.fragment,e),z=!0)},o(e){Me(u.$$.fragment,e),Me(w.$$.fragment,e),Me(A.$$.fragment,e),z=!1},d(e){e&&M(t),je(u),je(w),je(A),R=!1,s(q)}}}function qn(e,t,n){let{kmlOptions:o}=t;return e.$$set=e=>{"kmlOptions"in e&&n(0,o=e.kmlOptions)},[o,function(t){re(e,t)},function(t){re(e,t)},function(t){re(e,t)},function(t){re(e,t)}]}class Wn extends Ie{constructor(e){super(),De(this,e,qn,Rn,a,{kmlOptions:0})}}function Nn(t){let n;return{c(){n=T(" ")},m(e,t){L(e,n,t)},p:e,d(e){e&&M(n)}}}function Un(t){let n,o,r;return{c(){n=E("button"),n.textContent="Partager l'App",I(n,"class","btn btn-link")},m(e,t){L(e,n,t),o||(r=j(n,"click",Qe),o=!0)},p:e,d(e){e&&M(n),o=!1,r()}}}function Hn(t){let n,o,r,s,i,a;let l=(!0===navigator.standalone&&navigator.share?Un:Nn)(t);return{c(){n=E("h1"),o=E("strong"),o.textContent="OFP2MAP ",r=T("Cartographie pour l'OFP \n    "),s=E("img"),a=F(),l.c(),I(o,"class","d-none"),s.src!==(i="svg/Air_France_Logo.svg")&&I(s,"src","svg/Air_France_Logo.svg"),I(s,"alt","logo Air France"),I(s,"class","svelte-drdjg7"),I(n,"class","svelte-drdjg7")},m(e,t){L(e,n,t),P(n,o),P(n,r),P(n,s),P(n,a),l.m(n,null)},p(e,[t]){l.p(e,t)},i:e,o:e,d(e){e&&M(n),l.d()}}}class Gn extends Ie{constructor(e){super(),De(this,e,null,Hn,a,{})}}function Bn(t){let n,o,r,s;return n=new Gn({}),{c(){Fe(n.$$.fragment),o=F(),r=E("div"),r.innerHTML='<div class="card-deck"><div class=" col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card avenza svelte-16k91og"><div class="card-header svelte-16k91og">COMPATIBLE OFFLINE</div> \n      <div class="card-body"><p class="card-text">L&#39;OFP ne quitte pas votre iPad ou votre ordinateur. Fonctionne avec les dernières technologies: PWA, Service Worker, fully responsive, cartes WebGL...</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card mapsme svelte-16k91og"><div class="card-header svelte-16k91og">Multiples Projections</div> \n      <div class="card-body"><p class="card-text">Des cartes LAMBERT conformes, un ATLAS politique, un ATLAS physique, une carte VFR et une MERCATOR avec 12 niveaux de zoom. Export en format KML vers Mapsme, Avenza ou Google Earth</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card ogimet svelte-16k91og"><div class="card-header svelte-16k91og">Compatible avec Ogimet</div> \n      <div class="card-body"><p class="card-text">Calcule une route pour ogimet et affiche le GRAMET qui est un météogramme combinant l&#39;espace et le temps</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card shortcuts svelte-16k91og"><div class="card-header svelte-16k91og">Compatible Raccourcis</div> \n      <div class="card-body"><p class="card-text">Avec l&#39;app Raccourcis, automatisez en récupérant le KML, le Gramet, ou une route Lido optimisée</p></div></div></div></div>',I(r,"class","row svelte-16k91og")},m(e,t){Ae(n,e,t),L(e,o,t),L(e,r,t),s=!0},p:e,i(e){s||(Le(n.$$.fragment,e),s=!0)},o(e){Me(n.$$.fragment,e),s=!1},d(e){je(n,e),e&&M(o),e&&M(r)}}}class Kn extends Ie{constructor(e){super(),De(this,e,null,Bn,a,{})}}function Zn(e,t,n){const o={type:"Feature",geometry:{type:"Point",coordinates:[e[0],e[1]]},properties:{}};return t&&(o.properties.title=t),n&&(o.properties.description=n),o}function Jn(e){return{type:"geojson",data:{type:"FeatureCollection",features:e}}}function Vn(e,t){const n={type:"Feature",geometry:{type:"LineString",coordinates:e},properties:{}};return t&&(n.properties.title=t),n}const Qn=["#FFFFFF","#6699FF","#FFFF00","#CC9966","#FF9922","#DD5599","#FF0000","#22DD44","#BB11EE","#F56"],Xn=(e,t=10,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?10:o},Yn=(e,t=2)=>{const n=e*t;return isNaN(n)?1:n},eo=(e,t=1,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?1:o};function to(e,t,n,o,r){const s=Ge(t),i=r[`${s}Pin`],a=r[`${s}Display`],l=r[`${s}Color`],c=Xn(r.iconTextChange);e.addSource(`${t}-marker-source`,Jn(((e,t,n)=>{let o=[];const r=e.length;for(let s=0;s<r;s++){const r=t?t([e[s].longitude,e[s].latitude]):[e[s].longitude,e[s].latitude];r&&o.push(n?n(r,e[s]):r)}return o})(n,o,((e,t)=>Zn(e,t.name.replace(/00\.0/g,"")))))),e.addLayer(ro(t,i,l,a,c))}function no(e,t,n,o,r,s,i,a){o?e.addSource(`${t}-line-source`,Jn(o(n).map((e=>Vn(e))))):e.addSource(`${t}-line-source`,{type:"geojson",data:Vn(n.map((e=>[e.longitude,e.latitude])))}),e.addLayer(so(t,r,s,i,a))}function oo(e,t,n,o,r,s,i,a){if(o){const r=n.length,s=[];for(let e=0;e<r;e++){const t=o(n[e]),r=t.length;for(let e=0;e<r;e++)s.push(Vn(t[e]))}e.addSource(`${t}-line-source`,Jn(s))}else e.addSource(`${t}-line-source`,Jn(n.map((e=>Vn(e.map((e=>[e.longitude,e.latitude])))))));e.addLayer(so(t,r,s,i,a))}function ro(e,t,n,o,r){const[s,i]=Bt(n);return{id:`${e}-marker-layer`,type:"symbol",source:`${e}-marker-source`,layout:{"icon-image":0!==t?"sdf-marker-15":"sdf-triangle","icon-size":0!==t?1:.2,"icon-anchor":0!==t?"bottom":"center","icon-offset":[0,0],"icon-allow-overlap":!1,visibility:o?"visible":"none","text-field":["get","title"],"text-size":r,"text-offset":[0,.7],"text-anchor":"top"},paint:{"icon-color":0!==t?Qn[t]:s,"icon-halo-width":1,"icon-halo-color":"#000","text-color":s,"text-opacity":Math.max(i,.7)}}}function so(e,t,n,o=2,r=!1){const[s,i]=Bt(t);return{id:`${e}-line-layer`,type:"line",source:`${e}-line-source`,layout:{"line-join":"round","line-cap":"round",visibility:n?"visible":"none"},paint:{"line-color":s,"line-opacity":i,"line-width":o,"line-dasharray":r?[10,10]:[1]}}}function io(e,t,n=1){const{map:o,value:r,kmlOptions:s}=t,i=`${e}-marker-layer`,a=s[`${Ge(e)}Pin`];return o.getLayer(i)&&o.setLayoutProperty(i,"icon-size",a?eo(r,n):.2),!0}function ao(e,t,n=10){const{map:o,value:r}=t,s=`${e}-marker-layer`;return o.getLayer(s)&&o.setLayoutProperty(s,"text-size",Xn(r,n)),!0}function lo(e,t,n=2){const{map:o,value:r}=t,s=`${e}-line-layer`;return o.getLayer(s)&&o.setPaintProperty(s,"line-width",Yn(r,n)),!0}function co(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,s=`${e}-marker-layer`;if(n.getLayer(s)&&n.getLayer(r)){const e=o,t=Qn[e],i=n.getPaintProperty(r,"line-color");n.setPaintProperty(s,"icon-color",0!==e?t:i),n.setPaintProperty(s,"text-color",i),n.setLayoutProperty(s,"icon-size",0!==e?1:.2),n.setLayoutProperty(s,"icon-image",0!==e?"sdf-marker-15":"sdf-triangle"),n.setLayoutProperty(s,"icon-anchor",0!==e?"bottom":"center")}return!0}function uo(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,s=`${e}-marker-layer`,[i,a]=Bt(o);return n.getLayer(r)&&(n.setPaintProperty(r,"line-color",i),n.setPaintProperty(r,"line-opacity",a)),n.getLayer(s)&&n.setPaintProperty(s,"text-color",i),!0}function po(e,t,n){const{map:o}=n,r=`${e}-line-layer`,s=`${e}-marker-layer`;return o.getLayer(r)&&o.setLayoutProperty(r,"visibility",t?"visible":"none"),o.getLayer(s)&&o.setLayoutProperty(s,"visibility",t?"visible":"none"),!0}const mo="airport-layer",fo="airport-emer-layer",go="airport-source",ho=(e,t,n,o)=>0===e?(e=>["case",["==",8,["get",`${e}`]],"#ea80d8",["==",7,["get",`${e}`]],"#ea80d8",["==",6,["get",`${e}`]],"#dddddd",["==",5,["get",`${e}`]],"#dddddd",["==",4,["get",`${e}`]],"#fbfe98",["==",3,["get",`${e}`]],"#fbfe98",["==",2,["get",`${e}`]],"#00b0f1",["==",1,["get",`${e}`]],"#00b0f1","#000"])(t):((e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#095","#C71"])(n,o),vo=(e,t=!0)=>t?["in",`${e}`,["get","type"]]:["!",["in",`${e}`,["get","type"]]],$o=(e,t)=>["case",["in",["get","name"],["literal",t]],0,["get",`${e}`]],yo=e=>0===e?3:0,bo=(e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#000","#C60"],xo=(e,t)=>["case",["in",["get","name"],["literal",e]],Xn(t,10),Xn(t,8,1.15)],wo=e=>Xn(e,8,1.15),ko=(e,t)=>["case",["in",["get","name"],["literal",e]],eo(t,1),eo(t,.6)],Co=e=>["case",["==",2,["get","level"]],eo(e,.5,1.2),eo(e,.4,1.2)];function Po(e,t){const{map:n}=e;n.getLayer(mo)&&n.setLayoutProperty(mo,"visibility",t?"visible":"none"),n.getLayer(fo)&&n.setLayoutProperty(fo,"visibility",t?"visible":"none")}const Lo=e=>{const t=e?e.infos.ralts:[];let n=[];return e&&e.infos.EEP&&e.infos.EXP&&e.infos.raltPoints.length>0&&(n=[e.infos.EEP.name,e.infos.EXP.name]),[t,n.concat(t)]};var Mo={show:e=>Po(e,!0),hide:e=>Po(e,!1),add:e=>{const{map:t,mapData:n,ofp:o,kmlOptions:r}=e,{affineOrDrop:s}=n,i=s;let a=[];o&&o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0&&(a=[o.infos.EEP,o.infos.EXP]);const l=c(xt),u=o?o.infos.raltPoints:[],d=r.etopsColor,p=r.airportPin,m=r.airportDisplay,[f]=Bt(d),g=a.map((e=>e.name)),h=u.map((e=>e.name)),v=g.concat(h);fetch("data/airports.2105.geojson").then((e=>e.json())).then((e=>{if(i){const t=[];for(let n of e.features)n.geometry.coordinates=i(n.geometry.coordinates),void 0!==n.geometry.coordinates&&t.push(n);e.features=t}t.addSource(go,{type:"geojson",data:e}),t.addLayer({id:fo,type:"symbol",source:go,layout:{"icon-image":["case",["==",2,["get","level"]],"sdf-star","sdf-airport"],"icon-size":Co(r.iconSizeChange),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:m?"visible":"none","text-field":["get","name"],"text-size":wo(r.iconTextChange),"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1},paint:{"icon-color":["case",["==",1,["get","level"]],"#D70","#B02"],"icon-halo-width":0,"icon-halo-color":"#000","text-color":"#000","text-opacity":.8},filter:vo(l,!1)}),t.addLayer({id:mo,type:"symbol",source:go,layout:{"icon-image":["case",["in",["get","name"],["literal",v]],"sdf-triangle","sdf-airport"],"icon-size":ko(v,r.iconSizeChange),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:m?"visible":"none","text-field":["get","name"],"text-size":xo(v,r.iconTextChange),"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1,"symbol-sort-key":$o(l,v)},paint:{"icon-halo-color":["case",["==",0,["get","level"]],"#095","#D70"],"icon-halo-width":yo(p),"icon-color":ho(p,l,h,f),"text-color":bo(h,f),"text-halo-color":"#000","text-halo-width":["case",["==",0,["get","level"]],0,0],"text-opacity":.8},filter:vo(l)});const n=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,closeOnMove:!Ne}),s=function(e){const r=e.features[0].geometry.coordinates.slice(),s=e.features[0].properties.title;for(;Math.abs(e.lngLat.lng-r[0])>180;)r[0]+=e.lngLat.lng>r[0]?360:-360;let i=`<div class="airport"><h1>${s}</h1>`;const a=e.features[0].properties.level;let c="",u="0";switch(e.features[0].properties[l]){case 1:case 2:c="Destination & RCF",u="3";break;case 3:case 4:c="Dégagement à destination",u="2";break;case 5:case 6:c="Dégagement en route",u="2 ERA";break;case 7:case 8:c="Appui ou adéquat en route",u="1"}o&&(i+=`<p class="status status-${u.charAt(0)}">STATUT ${u}</p>`,a>0&&(i+=`<p class="security-${a}">${1==a?"ORANGE":"RED"}</p>`),c&&(i+=`<p class="status-text">${c}</p>`)),i+="</div>",n.setLngLat(r).setHTML(i).addTo(t)},a=()=>t.getCanvas().style.cursor="pointer",c=()=>t.getCanvas().style.cursor="",u=function(){c(),n.remove()};Ne?(t.on("mouseenter",mo,(e=>{a(),s(e)})),t.on("mouseenter",fo,(e=>{a(),s(e)})),t.on("mouseleave",mo,u),t.on("mouseleave",fo,u)):(t.on("mouseenter",mo,a),t.on("mouseenter",fo,a),t.on("click",mo,s),t.on("click",fo,s),t.on("mouseleave",mo,c),t.on("mouseleave",fo,c))}))},changeMarker:function(e){const{map:t,kmlOptions:n,ofp:o,aircraftType:r}=e,s=o?o.infos.ralts:[],[i]=Bt(n.etopsColor),a=n.airportPin;t.getLayer(mo)&&(t.setPaintProperty(mo,"icon-color",ho(a,r,s,i)),t.setPaintProperty(mo,"text-color",bo(s,i)),t.setPaintProperty(mo,"icon-halo-width",yo(a)))},change:function(e){const{map:t,kmlOptions:n,aircraftType:o,ofp:r}=e,[s,i]=Lo(r),[a]=Bt(n.etopsColor),l=n.airportPin;t.setFilter(mo,vo(o)),t.setPaintProperty(mo,"icon-color",ho(l,o,s,a)),t.setLayoutProperty(mo,"symbol-sort-key",$o(o,i)),t.setFilter(fo,vo(o,!1))},changeIconText:e=>{const{map:t,kmlOptions:n,ofp:o}=e,[,r]=Lo(o);t.getLayer(mo)&&t.setLayoutProperty(mo,"text-size",xo(r,n.iconTextChange)),t.getLayer(fo)&&t.setLayoutProperty(fo,"text-size",wo(n.iconTextChange))},changeIconSize:e=>{const{map:t,kmlOptions:n,ofp:o}=e,[,r]=Lo(o);t.getLayer(mo)&&t.setLayoutProperty(mo,"icon-size",ko(r,n.iconSizeChange)),t.getLayer(fo)&&t.setLayoutProperty(fo,"icon-size",Co(n.iconSizeChange))}};const Oo="etops-ep-circle-line-layer",Eo="etops-etops-circle-line-layer";function So(e,t){const{map:n}=e;n.getLayer(Eo)&&n.setLayoutProperty(Eo,"visibility",t?"visible":"none"),n.getLayer(Oo)&&n.setLayoutProperty(Oo,"visibility",t?"visible":"none")}var To={show:e=>So(e,!0),hide:e=>So(e,!1),add:function(e){const{map:t,mapData:n,ofp:o,kmlOptions:r}=e;if(!o)return;const s=Yn(r.lineWidthChange,1);if(o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0){const{affineAndClip:e}=n,i=o.infos.ETOPS,a=r.etopsDisplay;oo(t,"etops-ep-circle",[o.infos.EEP.circle(420,48),o.infos.EXP.circle(420,48)],e,r.routeColor,a,s,!0),oo(t,"etops-etops-circle",o.infos.raltPoints.map((e=>e.circle(7*i))),e,r.etopsColor,a,s,!0)}},changeLine:e=>function(e){const{map:t}=e,[n,o]=Bt(e.value);t.getLayer(Eo)&&(t.setPaintProperty(Eo,"line-color",n),t.setPaintProperty(Eo,"line-opacity",o))}(e),changeLineWidth:function(e){const{map:t,value:n}=e,o=Yn(n,1);return t.getLayer(Eo)&&t.setPaintProperty(Eo,"line-width",o),t.getLayer(Oo)&&t.setPaintProperty(Oo,"line-width",o),!0}};const _o="fir-reg-line-layer",Fo="fir-reg-layer",Ao="fir-reg-source";function jo(e,t){const{map:n}=e;n.getLayer(Fo)&&n.setLayoutProperty(Fo,"visibility",t?"visible":"none"),n.getLayer(_o)&&n.setLayoutProperty(_o,"visibility",t?"visible":"none")}var Do={show:e=>jo(e,!0),hide:e=>jo(e,!1),add:e=>{const{ofp:t,map:n,mapData:o,kmlOptions:r,mapOptions:s}=e;if("jb_pacific"===s.id||s.id.startsWith("vb_"))return;if(!t)return;const{affine:i}=o,a=r.firDisplay;fetch("data/fir-reg.2105.geojson").then((e=>e.json())).then((e=>{if(i)for(let t=0;t<e.features.length;t++){const n=e.features[t].geometry.coordinates[0];e.features[t].geometry.coordinates=[n.map((e=>i(e)))]}n.addSource(Ao,{type:"geojson",data:e}),n.addLayer({id:Fo,type:"fill",source:Ao,layout:{visibility:a?"visible":"none"},paint:{"fill-color":["case",["==","FIR-RED",["get","type"]],"rgba(255,0,0,0.2)","rgba(255,127,0,0.25)"]}}),n.addLayer({id:_o,type:"line",source:Ao,layout:{visibility:a?"visible":"none"},paint:{"line-color":["case",["==","FIR-RED",["get","type"]],"rgb(255,0,0)","rgb(255,127,0)"],"line-width":1,"line-opacity":["case",["==","FIR-RED",["get","type"]],.4,.6]}})}))}};const Io="great-circle";var zo={show:po.bind(null,Io,!0),hide:po.bind(null,Io,!1),add:e=>{const{ofp:t,kmlOptions:n,mapData:o,map:r,mapOptions:s}=e;if(s.id.startsWith("vb_"))return;if(!t)return;const{affineAndClip:i}=o,a=`${t.infos.departure}-${t.infos.destination}`,l=t.route,c=new editolido.Route([l.points[0],l.points[l.points.length-1]]).split(300,{name:`Ortho ${a}`});no(r,Io,c.points,i,n.greatCircleColor,n.greatCircleDisplay)},changeLine:uo.bind(null,Io)};const Ro="ogimet";var qo={show:po.bind(null,Ro,!0),hide:po.bind(null,Ro,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r,mapOptions:s}=e;if(s.id.startsWith("vb_"))return;if(!n)return;const{affineAndClip:i}=r;no(t,Ro,n.ogimetData.route.points,i,o.ogimetColor,o.ogimetDisplay)},changeLine:uo.bind(null,Ro)};const Wo="ralt";var No={show:po.bind(null,Wo,!0),hide:po.bind(null,Wo,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(!n)return;const{affineAndClip:s,affineOrDrop:i}=r,a=new editolido.Route(n.wptCoordinatesAlternate(),{name:"Route Dégagement"});no(t,Wo,a.points,s,o.alternateColor,o.alternateDisplay),to(t,Wo,a.points,i,o)},changeLine:uo.bind(null,Wo),changeMarker:co.bind(null,Wo),changeIconText:ao.bind(null,Wo),changeLineWidth:lo.bind(null,Wo),changeIconSize:io.bind(null,Wo)};const Uo="rmain";var Ho={show:po.bind(null,Uo,!0),hide:po.bind(null,Uo,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(!n)return;const{affineAndClip:s,affineOrDrop:i}=r,a=n.route;a.name=`${n.infos.departure}-${n.infos.destination}`,a.description=n.description,no(t,Uo,a.points,s,o.routeColor,!0),to(t,Uo,a.points,i,o)},changeLine:e=>uo(Uo,e)&&function(e){const{map:t,kmlOptions:n}=e,[o,r]=Bt(n.routeColor);t.getLayer(Oo)&&(t.setPaintProperty(Oo,"line-color",o),t.setPaintProperty(Oo,"line-opacity",r))}(e),changeMarker:co.bind(null,Uo),changeIconText:ao.bind(null,Uo),changeLineWidth:lo.bind(null,Uo),changeIconSize:io.bind(null,Uo)};const Go="rnat";const Bo={airport:Mo,etops:To,fir:Do,greatcircle:zo,ogimet:qo,ralt:No,rmain:Ho,rnat:{show:e=>po(Go,!0,e)&&po("rnat-incomplete",!0,e),hide:e=>po(Go,!1,e)&&po("rnat-incomplete",!1,e),add:function(e){const{map:t,ofp:n,mapData:o,kmlOptions:r}=e;if(!n)return;const{affineOrDrop:s,affineAndClip:i}=o,a=s,l=i,c=r.natColor,u=r.natPin,d=r.natDisplay,p={rnat:[],"rnat-incomplete":[]},m={rnat:[],"rnat-incomplete":[]};for(let e of n.tracks){const t=e.isComplete?"rnat":"rnat-incomplete";if(l){const n=l(e.points),o=n.length;for(let r=0;r<o;r++)p[t].push(Vn(n[r],e.name))}else p[t].push(Vn(e.points.map((e=>[e.longitude,e.latitude])),e.name));const n=e.points[0];let o=a?a([n.longitude,n.latitude]):[n.longitude,n.latitude];if(o&&m[t].push(Zn(o,`${e.name}\n${n.name}`,e.description)),e.isMine){const n=e.points[e.points.length-1];o=a?a([n.longitude,n.latitude]):[n.longitude,n.latitude],o&&m[t].push(Zn(o,`${e.name}\n${n.name}`,e.description))}}t.addSource("rnat-marker-source",Jn(m.rnat)),t.addSource("rnat-incomplete-marker-source",Jn(m["rnat-incomplete"])),t.addSource("rnat-line-source",Jn(p.rnat)),t.addSource("rnat-incomplete-line-source",Jn(p["rnat-incomplete"]));const f=Xn(r.iconTextChange,10),g=Yn(r.lineWidthChange,1);t.addLayer(so("rnat",c,d,g)),t.addLayer(so("rnat-incomplete",r.natIncompleteColor,d,g)),t.addLayer(ro("rnat",u,c,d,f)),t.addLayer(ro("rnat-incomplete",u,c,d,f));const h=e=>{for(var n=e.features[0].geometry.coordinates.slice(),o=e.features[0].properties.description;Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;(new mapboxgl.Popup).setLngLat(n).setHTML(o).addTo(t)},v=e=>{const n=e+"-marker-layer";t.on("click",n,h),t.on("mouseenter",n,(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave",n,(function(){t.getCanvas().style.cursor=""}))};v("rnat"),v("rnat-incomplete")},changeLine:uo.bind(null,Go),changeMarker:co.bind(null,Go),changeIconText:function(e){const{map:t,value:n}=e,o=Xn(n,10);return t.getLayer("rnat-marker-layer")&&t.setLayoutProperty("rnat-marker-layer","text-size",o),t.getLayer("rnat-incomplete-marker-layer")&&t.setLayoutProperty("rnat-incomplete-marker-layer","text-size",o),!0},changeLineWidth:function(e){const{map:t,value:n}=e,o=Yn(n,1);return t.getLayer("rnat-line-layer")&&t.setPaintProperty("rnat-line-layer","line-width",o),t.getLayer("rnat-incomplete-line-layer")&&t.setPaintProperty("rnat-incomplete-line-layer","line-width",o),!0},changeIconSize:function(e){const{map:t,value:n,kmlOptions:o}=e,r=o.natPin?eo(n,1):.2;return t.getLayer("rnat-marker-layer")&&t.setLayoutProperty("rnat-marker-layer","icon-size",r),t.getLayer("rnat-incomplete-marker-layer")&&t.setLayoutProperty("rnat-incomplete-marker-layer","icon-size",r),!0}}},Ko=2*Math.PI,Zo=Math.PI/4,Jo=function(e){return Math.abs(e)<=3.14159265359?e:e-function(e){return e<0?-1:1}(e)*Ko};var Vo={init:function(){},forward:function(e){var t=e.x,n=e.y,o=Jo(t-this.long0),r=Math.tan(n/2),s=Math.sin(Zo*r),i=s*s,a=this.x0+this.a*o*(.74482-.34588*i),l=this.y0+1.70711*this.a*r;return e.x=a,e.y=l,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.y/1.70711/this.a,n=Math.sin(Zo*t),o=n*n,r=Jo(this.long0+e.x/this.a/(.74482-.34588*o)),s=2*Math.atan(t);return e.x=r,e.y=s,e},names:["The Times","times"]};const Qo=Math.abs,Xo=Math.asin,Yo=Math.cos,er=Math.sin,tr=Math.sqrt,nr=1.340264,or=-.081106,rr=893e-6,sr=.003796,ir=tr(3)/2;var ar={init:function(){},forward:function(e){const t=e.x,n=e.y,o=Xo(ir*er(n)),r=o*o,s=r*r*r;return e.x=this.a*t*Yo(o)/(ir*(nr+3*or*r+s*(7*rr+9*sr*r))),e.y=this.a*o*(nr+or*r+s*(rr+sr*r)),e},inverse:function(e){const t=e.y/this.a,n=e.x/this.a;let o=t,r=o*o,s=r*r*r;for(var i,a=0;a<12&&(o-=i=(o*(nr+or*r+s*(rr+sr*r))-t)/(nr+3*or*r+s*(7*rr+9*sr*r)),r=o*o,s=r*r*r,!(Qo(i)<1e-12));++a);return e.x=ir*n*(nr+3*or*r+s*(7*rr+9*sr*r))/Yo(o),e.y=Xo(er(o)/ir),e},names:["Equal Earth","eqearth"]};function lr(e,t,n,o,r){window.proj4.Proj.projections.get("times")||window.proj4.Proj.projections.add(Vo),window.proj4.Proj.projections.get("eqearth")||window.proj4.Proj.projections.add(ar);let s={container:e,center:[0,49],zoom:2,attributionControl:!0,customAttribution:(()=>{const e="Airports/FIR © Olivier Ravet";return t.id.startsWith("ed_eqe")?`© equal-earth.com - ${e}`:t.id.startsWith("jb_")||t.id.startsWith("ed_")?`Yammer/QGIS & Avenza maps - ${e}`:t.id.startsWith("vb_")?`© ${window.atob("Q2FydGFCb3NzeQ==")}.com - Airports © Olivier Ravet`:`Yammer/Maps.me - ${e}`})()};const i=new mapboxgl.Map({...t.mapboxOptions,...s});let a,l,c,u;i._setCacheLimits(320,32),i.loadImage("sdf/maki-marker-sdf.png",(function(e,t){e||i.addImage("sdf-marker-15",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-triangle-sdf.png",(function(e,t){e||i.addImage("sdf-triangle",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-circle-sdf.png",(function(e,t){e||i.addImage("sdf-airport",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-star-sdf.png",(function(e,t){e||i.addImage("sdf-star",t,{pixelRatio:2,sdf:!0})})),window.proj4.defs("WGS84","+proj=longlat +datum=WGS84"),window.proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");let d,p=e=>window.proj4("WGS84","EPSG:3857",e),m=e=>window.proj4("EPSG:3857","WGS84",e);if(t.extent){let e,n,o,r;if(window.proj4.defs("CUSTOM",t.proj4),t.affineTransform)[e,n,o,r]=t.affineTransform;else{const s=[-20026376.39,-20048966.1,20026376.39,20048966.1],[i,a,l,c]=t.extent;let[u,d,p,m]=s;if(t.ratio){const e=s[3]-s[1],[n,o]=t.ratio,r=o/n*e;[u,d,p,m]=[s[0],s[3]-r,s[2],s[3]]}e=(p-u)/(l-i),n=u-e*i,o=(m-d)/(c-a),r=d-o*a}const[s,i,d,f]=t.viewport?t.viewport:t.extent,g=e=>window.proj4("WGS84","CUSTOM",e),h=t=>[e*t[0]+n,o*t[1]+r],v=e=>m(h(e));p=e=>h(g(e)),a=e=>m(p(e)),l=e=>{let[t,n]=g(e);return t=Be(t,s,d),n=Be(n,i,f),v([t,n])},c=e=>{let[t,n]=g(e);if(Ke(t,s,d)&&Ke(n,i,f))return v([t,n])},u=e=>{if(0===e.length)return[];return function(e,t,n){var o,r,s,i,a,l=e.length,c=Je(e[0],t),u=[];for(n||(n=[]),o=1;o<l;o++){for(r=e[o-1],i=a=Je(s=e[o],t);;){if(!(c|i)){u.push(r),i!==a?(u.push(s),o<l-1&&(n.push(u),u=[])):o===l-1&&u.push(s);break}if(c&i)break;c?c=Je(r=Ze(r,s,c,t),t):i=Je(s=Ze(r,s,i,t),t)}c=a}return u.length&&n.push(u),n}(e.map((e=>g([e.longitude,e.latitude]))),t.extent).map((e=>e.map((e=>v(e)))))}}let f=[];if(n){for(const e of n.tracks)f=f.concat(e.points);f=f.concat(n.route.points,n.wptCoordinatesAlternate()),d=((e,t,n=[1/0,1/0,-1/0,-1/0])=>{for(const[o,r]of e.map((e=>t?t([e.longitude,e.latitude]):[e.longitude,e.latitude])))n[0]>o&&(n[0]=o),n[1]>r&&(n[1]=r),n[2]<o&&(n[2]=o),n[3]<r&&(n[3]=r);return n[0]-=1,n[1]-=1,n[2]+=1,n[3]+=1,n})(f,l),i.fitBounds(d,{padding:{top:30,bottom:80,left:30,right:30}})}const g=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!1},fitBoundsOptions:{maxZoom:3},trackUserLocation:!0});if(a){const e=g._onSuccess;g._onSuccess=function(t){const[n,o]=a([t.coords.longitude,t.coords.latitude]);return e.apply(this,[{coords:{longitude:n,latitude:o,accuracy:t.coords.accuracy}}])}}const h={map:i,affine:a,affineAndClamp:l,affineAndClip:u,affineOrDrop:c,bbox:d,mapOptions:t,geolocate:g};return i.addControl(new class{onAdd(e){return this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl  mapboxgl-ctrl-group",this._button=document.createElement("button"),this._button.className="mapboxgl-ctrl-layers",this._button.setAttribute("type","button"),this._button.setAttribute("title","Personnaliser la carte"),this._button.innerHTML='<svg><use xlink:href="#layers-symbol"/></svg>',this._container.appendChild(this._button),this._toggleSidebar=()=>pt.update((e=>!e)),this._button.addEventListener("click",this._toggleSidebar),this._container}onRemove(){this._button.removeEventListener("click",this._toggleSidebar),this._container.parentNode.removeChild(this._container),this._map=void 0}}),i.addControl(g),i.on("load",(function(){(e=>{const{map:t,mapOptions:n}=e;n.tiles&&(t.addSource("jb-raster",{type:"raster",tiles:n.tiles,tileSize:n.tileSize}),t.addLayer({id:"jb-layer",type:"raster",source:"jb-raster",minzoom:0,maxzoom:22,paint:{"raster-opacity":1}})),Object.values(Bo).forEach((t=>t.add&&t.add(e)))})({ofp:n,kmlOptions:o,mapData:h,map:i,mapOptions:t}),r&&r(i,t)})),i.on("remove",(function(){})),h}class cr{constructor(e,t,n){this.dbName=e,this.dbPromise=new Promise(((o,r)=>{const s=indexedDB.open(e,t);s.onsuccess=()=>{o(s)},s.onerror=()=>{r("Error while opening DB")},s.onupgradeneeded=n?n.bind(null,s):()=>{}}))}getImageIdFromURL(e){return e.pathname.replace(/[/.]/g,"_")}async fetchImageFromDB(e,t){const n=await this.dbPromise;return new Promise(((o,r)=>{const s=n.result.transaction(t,"readonly").objectStore(t).get(e);s.onsuccess=()=>{o(s.result)},s.onerror=()=>{r("Something went wrong while fetching image from DB ")}}))}async putImageInDB(e,t,n){const o=await this.dbPromise;return new Promise(((r,s)=>{const i=o.result.transaction(t,"readwrite").objectStore(t),a=i.put(n,e);a.onsuccess=()=>{const t=i.get(e);t.onsuccess=()=>{r(t.result)}},a.onerror=()=>{s("Something went wrong while putting image in DB ")}}))}getCacheHandler(e){return this._cacheHandler.bind(this,e)}async isNotCached(e,t){const n=this.getImageIdFromURL(t),o=await this.dbPromise;return new Promise(((r,s)=>{const i=o.result.transaction(e,"readonly").objectStore(e).getKey(n);i.onsuccess=()=>{r(void 0===i.result?t:null)},i.onerror=()=>{s("Something went wrong while checking if cached from DB ")}}))}async countTiles(e){const t=await this.dbPromise;return new Promise(((n,o)=>{const r=t.result.transaction(e,"readonly").objectStore(e).count();r.onsuccess=()=>n(r.result),r.onerror=()=>o("Something went wrong while counting entries from DB")}))}async close(){(await this.dbPromise).result.close()}async _cacheHandler(e,{request:t,url:n}){const o=this.getImageIdFromURL(n);return this.fetchImageFromDB(o,e).then((n=>n?new Response(n):fetch(t).then((e=>e.clone().blob())).then((t=>t.type.startsWith("image/")||"application/x-protobuf"===t.type?this.putImageInDB(o,e,t).then((e=>new Response(e))):new Response("",{status:404,statusText:"invalid image found (sw)"})))))}}function ur(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}function dr(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}const pr=async(e,t)=>{const{map:n,mapOptions:o,bbox:r}=t;if(!n)return[];const s=new cr("lido-tiles");if(o.cacheAll){const e=await s.countTiles(o.cacheName);let t;if(t=o.matrix?o.matrix.map((([e,t])=>e*t)):[...Array(o.cacheZoom+1).keys()].map((e=>Math.pow(2,e)*Math.pow(2,e))),e>=t.reduce(((e,t)=>e+t),0))return s.close(),caches[o.id]=!0,[]}const[i,a]=[[r[0],r[1]],[r[2],r[3]]],l=[];for(let e=0;e<=o.cacheZoom;e++){let t,r;const c=Math.pow(2,e);let u,d;o.cacheAll?(t={x:0,y:c-1},r={x:c-1,y:0}):(t={x:ur(i[0],e),y:dr(i[1],e)},r={x:ur(a[0],e),y:dr(a[1],e)}),o.matrix?[u,d]=o.matrix[e]:[u,d]=[c,c];for(let i=t.x;i<=r.x;i++)for(let a=r.y;a<=t.y;a++)if(i>=0&&a>=0&&i<u&&a<d){let t;o.tiles?(t=new URL(o.tiles[0].replace("{z}",e).replace("{x}",i).replace("{y}",a)),l.push(s.isNotCached(o.cacheName,t))):(t=new URL(`https://api.mapbox.com/v4/denizotjb.6nts91f3/${e}/${i}/${a}@2x.webp?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(s.isNotCached(o.cacheName,t)),t=new URL(`https://api.mapbox.com/v4/denizotjb.9001lcsf,denizotjb.494jxmoa,mapbox.mapbox-streets-v8,denizotjb.1x3i1g8r,denizotjb.bifqeinj,denizotjb.cz0kdfpx,denizotjb.aop85z8z,mapbox.mapbox-terrain-v2/${e}/${i}/${a}.vector.pbf?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(s.isNotCached(o.cacheName,t)))}}const c=await Promise.all(l);return s.close(),c.filter((e=>null!==e))};function mr(e){let t,n,o,r,s,i;const a=e[4].default,l=d(a,e,e[3],null);return{c(){t=S("svg"),n=S("path"),o=S("path"),s=F(),l&&l.c(),I(n,"d","M50,5A45 45 0 1 1 49.9999 5"),I(n,"class","svelte-1bp2w4i"),I(o,"d",r=e[0]()),I(o,"class","svelte-1bp2w4i"),I(t,"viewBox","0 0 100 100"),I(t,"class","svelte-1bp2w4i")},m(e,r){L(e,t,r),P(t,n),P(t,o),L(e,s,r),l&&l.m(e,r),i=!0},p(e,[t]){(!i||1&t&&r!==(r=e[0]()))&&I(o,"d",r),l&&l.p&&8&t&&m(l,a,e,e[3],t,null,null)},i(e){i||(Le(l,e),i=!0)},o(e){Me(l,e),i=!1},d(e){e&&M(t),e&&M(s),l&&l.d(e)}}}function fr(e,t,n){let o,{$$slots:r={},$$scope:s}=t,{value:i=0}=t,{max:a=100}=t;return e.$$set=e=>{"value"in e&&n(1,i=e.value),"max"in e&&n(2,a=e.max),"$$scope"in e&&n(3,s=e.$$scope)},e.$$.update=()=>{6&e.$$.dirty&&n(0,o=()=>{if(i<=0)return"";if(i>=a)return"M50,5A45 45 0 1 1 49.9999 5";{const e=2*Math.PI*(i/a),t=50+45*Math.cos(e-Math.PI/2),n=50+45*Math.sin(e-Math.PI/2);let o="M50,5";return e>Math.PI&&(o+="A45 45 0 0 1 50 95"),o+=`A45 45 0 0 1 ${t} ${n}`,o}})},[o,i,a,s,r]}class gr extends Ie{constructor(e){super(),De(this,e,fr,mr,a,{value:1,max:2})}}function hr(e,t,n){const o=e.slice();return o[6]=t[n],o}function vr(t){let n,o;return{c(){n=E("option"),o=T("???"),n.__value=void 0,n.value=n.__value,n.selected=!0},m(e,t){L(e,n,t),P(n,o)},p:e,d(e){e&&M(n)}}}function $r(e){let t,n,o,r=e[6]+"";return{c(){t=E("option"),n=T(r),t.__value=e[6],t.value=t.__value,t.selected=o=e[6]===e[2]},m(e,o){L(e,t,o),P(t,n)},p(e,n){4&n&&o!==(o=e[6]===e[2])&&(t.selected=o)},d(e){e&&M(t)}}}function yr(e){let t,n=e[6]===e[2]||!at.includes(e[6]),o=n&&$r(e);return{c(){o&&o.c(),t=A()},m(e,n){o&&o.m(e,n),L(e,t,n)},p(e,r){4&r&&(n=e[6]===e[2]||!at.includes(e[6])),n?o?o.p(e,r):(o=$r(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&M(t)}}}function br(t){let n,o,r,i,a=!t[2]&&vr(),l=it,c=[];for(let e=0;e<l.length;e+=1)c[e]=yr(hr(t,l,e));return{c(){n=E("select"),a&&a.c(),o=A();for(let e=0;e<c.length;e+=1)c[e].c();I(n,"name","aircraftType"),I(n,"class","svelte-1xpiicm"),void 0===t[1]&&me((()=>t[5].call(n)))},m(e,s){L(e,n,s),a&&a.m(n,null),P(n,o);for(let e=0;e<c.length;e+=1)c[e].m(n,null);t[4](n),H(n,t[1]),r||(i=[j(n,"change",t[5]),j(n,"change",t[3]),$(ln.call(null,n))],r=!0)},p(e,[t]){if(e[2]?a&&(a.d(1),a=null):a?a.p(e,t):(a=vr(),a.c(),a.m(n,o)),4&t){let o;for(l=it,o=0;o<l.length;o+=1){const r=hr(e,l,o);c[o]?c[o].p(r,t):(c[o]=yr(r),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}2&t&&H(n,e[1])},i:e,o:e,d(e){e&&M(n),a&&a.d(),O(c,e),t[4](null),r=!1,s(i)}}}function xr(e,t,n){let o,r;u(e,bt,(e=>n(1,o=e))),u(e,xt,(e=>n(2,r=e)));let{aircraftTypeSelectElement:s=null}=t;return e.$$set=e=>{"aircraftTypeSelectElement"in e&&n(0,s=e.aircraftTypeSelectElement)},[s,o,r,function(t){re(e,t)},function(e){ie[e?"unshift":"push"]((()=>{s=e,n(0,s)}))},function(){o=G(this),bt.set(o)}]}class wr extends Ie{constructor(e){super(),De(this,e,xr,br,a,{aircraftTypeSelectElement:0})}}function kr(e,t,n){let o,r;u(e,Et,(e=>n(1,o=e)));let{mapData:s}=t;const i=window.document.createElement("div");i.classList.add("mapboxgl-user-location-dot","map-plane");const a=e=>{if(r){const t=s.affine,[n,o]=t?t([e.longitude,e.latitude]):[e.longitude,e.latitude];r.setLngLat([n,o])}};return te((()=>{r=new mapboxgl.Marker(i),a(o.map),r.addTo(s.map)})),ne((()=>{r&&(r.remove(),r=void 0)})),e.$$set=e=>{"mapData"in e&&n(0,s=e.mapData)},e.$$.update=()=>{2&e.$$.dirty&&a(o.map)},[s,o]}class Cr extends Ie{constructor(e){super(),De(this,e,kr,null,a,{mapData:0})}}const Pr={version:8,name:"Blank pour App",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template","mapbox:sdk-support":{js:"1.9.0",android:"8.6.0",ios:"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},center:[0,0],zoom:1.2946207284336362,bearing:0,pitch:0,sources:{},sprite:"mapbox://sprites/flyingeek/ckbhlmwdm0mn51imw8t4dddqs/ck2u8j60r58fu0sgyxrigm3cu",glyphs:"mapbox://fonts/flyingeek/{fontstack}/{range}.pbf",layers:[],created:"2020-06-16T07:22:32.952Z",id:"ckbhlmwdm0mn51imw8t4dddqs",modified:"2020-06-16T07:23:29.539Z",owner:"flyingeek",visibility:"public",draft:!1},Lr=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?256:512,Mr=[{label:"Mercator",id:"mercator",mapboxOptions:{style:"mapbox://styles/flyingeek/cknj4nmwu0t8117ny6rk7dwbg",renderWorldCopies:!1,maxZoom:12},cacheName:"denizotjbv2",cacheZoom:6},{label:"Lambert North",id:"jb_north",extent:[-7441575.3298294,-5719574.1644927,7383398.17621086,9105399.34154755],proj4:"+proj=lcc +lat_1=30 +lat_2=65 +lat_0=47.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Pr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-northv3.netlify.app/northv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"northv3",cacheAll:!0,tileSize:Lr},{label:"Lambert South",id:"jb_south",extent:[-12613000.20107552,-12796118.19556621,13437104.14597977,13253986.15148908],validity:[-12613903.56963206,-9420000.1608799,13437054.51836624,5862747.38325809],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Pr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-southv3.netlify.app/southv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"southv3",cacheAll:!0,tileSize:Lr},{label:"Lambert Pacific",id:"jb_pacific",extent:[-8306365.14297095,-7788164.66141786,6519185.45830619,7037385.93985927],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=-140 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Pr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-pacificv1.netlify.app/pacificv1/{z}/{x}/{y}.jpg"],cacheName:"pacificv1",cacheZoom:4,cacheAll:!0,tileSize:Lr},{label:"The World",id:"jb_theworld",affineTransform:[1.314746085506463,-45260.546626176685,1.315,648e4],extent:[-15201502.45260082,-8478963.56607166,15262747.04890729,10300929.57326125],proj4:"+proj=times +ellps=sphere +no_defs +wktext +lon_0=0 +x_0=0 +y_0=0",mapboxOptions:{style:Pr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-theworldv2.netlify.app/theworldv2/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,10],[32,20],[64,40]],cacheZoom:5,cacheName:"theworldv2",cacheAll:!0,tileSize:Lr},{label:"=Physique=",id:"ed_eqe_physical_fr",affineTransform:[1.104,-855.8520345054567,1.1,931e4],extent:[-18145536.6946,-10300589.33644032,18143985.81684419,9720047.1747],proj4:"+proj=eqearth +datum=WGS84 +wktext",mapboxOptions:{style:Pr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-eqephysicalfrv1.netlify.app/eqephysicalfrv1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,9],[32,18],[64,36]],cacheZoom:5,cacheName:"eqephysicalfrv1",cacheAll:!0,tileSize:Lr},{label:atob("Q2FydGFCb3NzeQ==")+" 2020",id:"vb_2020",ratio:[19449,18352],extent:[26966.11818123,-430589.86447607,1262485.62823696,735241.49181695],proj4:"+proj=lcc +lat_1=45.89893890000052 +lat_2=47.69601440000037 +lat_0=46.8 +lon_0=2.33722917 +x_0=600000 +y_0=200000 +datum=WGS84 +units=m +no_defs ",mapboxOptions:{style:Pr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-cb2020v1.netlify.app/cb2020v1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,4],[8,8],[16,16],[32,31],[64,61]],cacheName:"cb2020v1",cacheZoom:5,cacheAll:!0,tileSize:Lr}];function Or(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function Er(e){let t,n,o,r=(e[7].id===e[2]?`${e[7].label.toUpperCase()}`:e[7].label)+"";return{c(){t=E("option"),n=T(r),t.__value=e[7],t.value=t.__value,t.selected=o=e[7].id===e[0].id},m(e,o){L(e,t,o),P(t,n)},p(e,s){4&s&&r!==(r=(e[7].id===e[2]?`${e[7].label.toUpperCase()}`:e[7].label)+"")&&W(n,r),9&s&&o!==(o=e[7].id===e[0].id)&&(t.selected=o)},d(e){e&&M(t)}}}function Sr(t){let n,o,r,i=t[3],a=[];for(let e=0;e<i.length;e+=1)a[e]=Er(Or(t,i,e));return{c(){n=E("select");for(let e=0;e<a.length;e+=1)a[e].c();I(n,"name",t[1]),I(n,"class","form-control form-control-sm svelte-1uc3ace"),void 0===t[0]&&me((()=>t[6].call(n)))},m(e,s){L(e,n,s);for(let e=0;e<a.length;e+=1)a[e].m(n,null);H(n,t[0]),o||(r=[j(n,"change",t[6]),j(n,"change",t[5]),$(ln.call(null,n))],o=!0)},p(e,[t]){if(13&t){let o;for(i=e[3],o=0;o<i.length;o+=1){const r=Or(e,i,o);a[o]?a[o].p(r,t):(a[o]=Er(r),a[o].c(),a[o].m(n,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=i.length}2&t&&I(n,"name",e[1]),9&t&&H(n,e[0])},i:e,o:e,d(e){e&&M(n),O(a,e),o=!1,s(r)}}}function Tr(e,t,n){if(!e.proj4)return!1;try{const o=e.validity?e.validity:e.extent;for(let r of[t,n]){const[t,n]=window.proj4(e.proj4,[r.longitude,r.latitude]);if(t<o[0]||t>o[2]||n<o[1]||n>o[3])return!1}}catch(e){return!1}return!0}function _r(e,t,n){let{name:o="map-style"}=t,{ofp:r}=t,{selected:s=Mr[0]}=t,i=s.id;const a=r?Mr:Mr.filter((e=>!e.id.startsWith("vb_")&&"jb_theworld"!==e.id));return te((()=>{if(s.id===Mr[0].id&&r){const e=r.route.points[0],t=r.route.points[r.route.points.length-1],o=Mr.find((e=>"vb_2020"===e.id)),i=Mr.find((e=>"jb_north"===e.id));Tr(o,e,t)?n(0,s=o):e.distanceTo(t,editolido.rad_to_nm)<=1500||(t.latitude>30&&e.latitude>30?n(0,s=i):t.longitude<-80&&e.longitude<-80?n(0,s=Mr.find((e=>"jb_pacific"===e.id))):(t.latitude>30||e.latitude>30)&&e.atFraction(t,.5).latitude>=30&&Tr(i,e,t)?n(0,s=i):n(0,s=Mr.find((e=>"jb_south"===e.id))))}n(2,i=s.id)})),e.$$set=e=>{"name"in e&&n(1,o=e.name),"ofp"in e&&n(4,r=e.ofp),"selected"in e&&n(0,s=e.selected)},[s,o,i,a,r,function(t){re(e,t)},function(){s=G(this),n(0,s),n(3,a)}]}class Fr extends Ie{constructor(e){super(),De(this,e,_r,Sr,a,{name:1,ofp:4,selected:0})}}function Ar(t){let n,o,r,i,a,l,c,u=t[2]>=0?"◼︎":"▶︎";return{c(){n=E("label"),o=T(u),r=F(),i=E("input"),I(i,"name",t[0]),I(i,"type","checkbox"),i.checked=a=t[2]>=0,I(i,"class","svelte-1t9v15q"),I(n,"for",t[0]),I(n,"class","svelte-1t9v15q")},m(e,s){L(e,n,s),P(n,o),P(n,r),P(n,i),t[4](i),l||(c=[j(i,"change",t[3]),j(n,"click",t[3])],l=!0)},p(e,[t]){4&t&&u!==(u=e[2]>=0?"◼︎":"▶︎")&&W(o,u),1&t&&I(i,"name",e[0]),4&t&&a!==(a=e[2]>=0)&&(i.checked=a),1&t&&I(n,"for",e[0])},i:e,o:e,d(e){e&&M(n),t[4](null),l=!1,s(c)}}}function jr(e,t,n){let o;u(e,gt,(e=>n(2,o=e)));let r,{name:s="simulator"}=t;return e.$$set=e=>{"name"in e&&n(0,s=e.name)},[s,r,o,()=>{n(1,r.checked=!r.checked,r),v(gt,o=r.checked?0:-1,o)},function(e){ie[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Dr extends Ie{constructor(e){super(),De(this,e,jr,Ar,a,{name:0})}}const Ir=rt(),zr=rt({});function Rr(e,{ofp:t,pos:n,fl:o}){const r=document.getElementById("gt-plane");let s,i,a,l,c,u=parseFloat(n),d=t,p=o;const m=e.clientHeight,f=e.clientWidth,g=getComputedStyle(document.body),h=parseFloat(g.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),v=e=>65*c+(l-130*c)*e/100,$=e=>{const t=v(e),n=65*c,o=f/3,r=n+o,s=l-n-(f-o);return t>r&&t<s?o-t:t<=r?o-r:o-s},y=(e,t,n,o)=>{e&&(e.style.left=n+(v(t)-e.clientWidth/2)+"px",e.style.top=(h-Math.round(-6e-4*o*o+.8985*o+46.264))*c-e.clientHeight/2+"px")},b=()=>{const t=i.height||700;a=i.cloneNode(),a.id="grametImg",a.style.display="none",a.crossOrigin="anonymous",a.addEventListener("load",x),a.addEventListener("error",w),document.body.appendChild(a),i.style.height=t/h*m+"px",i.style.objectFit="contain",i.style.position="absolute",i.style.opacity=.01,e.appendChild(i),l=i.clientWidth;const n=i.clientHeight/t;c=n;const o=$(u);i.style.top=`-${33*n}px`,i.style.left=`${o}px`},x=()=>{Ir.set("success"),r.style.display="block",i.style.opacity=1;const e=$(u);y(r,u,e,p)},w=()=>{r.style.display="none",Ir.set("error")},k=()=>{i&&i.removeEventListener("load",b),i&&i.removeEventListener("error",w),i&&i.remove(),mt.set(!1),a&&a.removeEventListener("load",x),a&&a.removeEventListener("error",w),a&&a.remove(),a=void 0,i=void 0,s&&URL.revokeObjectURL(s),s=void 0},C=async e=>{i=document.createElement("img"),Ir.set("loading"),r.style.display="none",fetch(e.ogimetData.proxyImg).then((function(e){e.ok?(zr.set({status:e.status,text:e.statusText||"OK"}),e.blob().then((e=>{i&&(s=URL.createObjectURL(e),i.addEventListener("load",b),i.addEventListener("error",w),i.src=s)}))):(w(),e.headers?zr.set({status:e.status,text:e.statusText||e.headers.get("X-ofp2map-status")}):zr.set({status:e.status,text:e.statusText||""}))})).catch((function(e){w(),zr.set({status:0,text:e.message})}))};return C(t),{update({ofp:e,pos:t,fl:n}){if(u=parseFloat(t),e!==d)d=e,k(),C(e);else{const e=$(u);i.style.left=e+"px",p=n,y(r,u,e,n)}},destroy(){k()}}}const qr=(e,{pos:t,fl:n})=>{const o=e.parentNode.querySelector("svg"),r=document.getElementById("grametImg"),s=getComputedStyle(document.body),i=parseFloat(s.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),a=parseFloat(e.parentNode.dataset.maxHeight||"370"),l=r.width,c=r.height,u=document.querySelector("nav").clientWidth;let d;d=0!==l?Math.min(u/l*c,a):Math.min(c,a);let p,m,f=parseFloat(t),g=0,h=0,v=n;const $=e=>(65+(l-130)*e/100)*p,y=(e,t,n)=>{e.style.left=g+($(t)-e.clientWidth/2+2)+"px",e.style.top=(i+33-2-Math.round(-6e-4*n*n+.8985*n+46.264))*p-e.clientHeight/2+h+"px"},b=e=>{const t=$(e),n=u/3,o=0+n,r=l*p-0-(u-n);return t>o&&t<r?n-t:t<=o?n-o:n-r},x=()=>{g=e.x,h=e.y,p=e.scale,m=u<=l*p,y(o,f,v)};return f<=0||f>=100?(p=0===l?a/(i+70):Math.min(u/l,d/(i+70)),h=0):(p=d/i,h=-33*p),u>l*p?(g=(u-l*p)/2,m=!1):(g=b(f),m=!0),y(o,f,v),r.style.display="block",e.style.maxHeight=`${a}px`,e.appendChild(r),e.setTransform({scale:p,x:g,y:h}),e.addEventListener("change",x),{update({pos:t,fl:n}){f=parseFloat(t),v=n,m&&(g=b(f),e.setTransform({x:g})),y(o,f,n)},destroy(){r.style.display="none",document.body.appendChild(r),e.removeEventListener("change",x)}}},Wr=e=>{const t=document.getElementById("grametImg"),n=t.width,o=t.height||700,r=parseFloat(e.dataset.maxHeight||"370"),s=document.querySelector("nav").clientWidth;let i=1;0!==n&&(i=s/n);const a=Math.min(i*o,r);e.style.height=`${a}px`};function Nr(e){let t,n;return t=new Dr({}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Ur(e){let t,n,o,r,a,l,c,u,d,p,m,f=(0===e[0].gramet||100===e[0].gramet||e[1]>=0)&&Nr();return{c(){var e,o,s;t=E("div"),n=E("pinch-zoom"),r=F(),a=S("svg"),l=S("use"),c=F(),f&&f.c(),s="0.3",(o="min-scale")in(e=n)?e[o]=s:I(e,o,s),R(l,"xlink:href","#plane-symbol"),I(a,"class","svelte-dwqlg"),I(t,"class","pinch-zoom-parent svelte-dwqlg"),I(t,"data-max-height",Hr)},m(s,i){L(s,t,i),P(t,n),P(t,r),P(t,a),P(a,l),P(t,c),f&&f.m(t,null),d=!0,p||(m=[$(o=qr.call(null,n,{pos:e[0].gramet,fl:e[0].fl})),$(Wr.call(null,t))],p=!0)},p(n,[r]){e=n,o&&i(o.update)&&1&r&&o.update.call(null,{pos:e[0].gramet,fl:e[0].fl}),0===e[0].gramet||100===e[0].gramet||e[1]>=0?f?3&r&&Le(f,1):(f=Nr(),f.c(),Le(f,1),f.m(t,null)):f&&(Ce(),Me(f,1,1,(()=>{f=null})),Pe())},i(e){d||(Le(f),me((()=>{u||(u=Se(t,et,{y:Hr},!0)),u.run(1)})),d=!0)},o(e){Me(f),u||(u=Se(t,et,{y:Hr},!1)),u.run(0),d=!1},d(e){e&&M(t),f&&f.d(),e&&u&&u.end(),p=!1,s(m)}}}const Hr=370;function Gr(e,t,n){let o,r;return u(e,Et,(e=>n(0,o=e))),u(e,gt,(e=>n(1,r=e))),[o,r]}class Br extends Ie{constructor(e){super(),De(this,e,Gr,Ur,a,{})}}function Kr(e,t){let n=t;const o=()=>n&&n.resize(),r=new IntersectionObserver(((e,t)=>{e.forEach((e=>{1===e.intersectionRatio&&o()}))}),{threshold:1});r.observe(e);const s=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&o()};return document.addEventListener("visibilitychange",s,!1),window.addEventListener("orientationchange",o),{update(e){n=e},destroy(){r.unobserve(e),r.disconnect(),window.removeEventListener("orientationchange",o),document.removeEventListener("visibilitychange",s),n&&n.remove()}}}function Zr(e){let t,n,o,r,s;return n=new gr({props:{value:e[8],max:e[7],$$slots:{default:[Jr]},$$scope:{ctx:e}}}),{c(){t=E("div"),Fe(n.$$.fragment),I(t,"class","cacheButton svelte-voriir"),B(t,"cacheError",e[9]),B(t,"cacheProgress",e[8]>0||e[7]>0)},m(a,l){L(a,t,l),Ae(n,t,null),o=!0,r||(s=j(t,"click",(function(){i(e[11]?ts:e[21])&&(e[11]?ts:e[21]).apply(this,arguments)})),r=!0)},p(o,r){e=o;const s={};256&r[0]&&(s.value=e[8]),128&r[0]&&(s.max=e[7]),268435456&r[0]&&(s.$$scope={dirty:r,ctx:e}),n.$set(s),512&r[0]&&B(t,"cacheError",e[9]),384&r[0]&&B(t,"cacheProgress",e[8]>0||e[7]>0)},i(e){o||(Le(n.$$.fragment,e),o=!0)},o(e){Me(n.$$.fragment,e),o=!1},d(e){e&&M(t),je(n),r=!1,s()}}}function Jr(e){let t;const n=e[23].default,o=d(n,e,e[28],null),r=o||function(e){let t;return{c(){t=E("span"),t.textContent="↓",I(t,"class","svelte-voriir")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}();return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){o&&o.p&&268435456&t[0]&&m(o,n,e,e[28],t,null,null)},i(e){t||(Le(r,e),t=!0)},o(e){Me(r,e),t=!1},d(e){r&&r.d(e)}}}function Vr(e){let t;return{c(){t=E("div"),t.textContent="Votre navigateur ne supporte pas l'affichage d'images au format .webp",I(t,"class","nowebp svelte-voriir")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Qr(e){let t,n;return t=new Cr({props:{mapData:e[4]}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};16&n[0]&&(o.mapData=e[4]),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Xr(e){let t,n;return t=new Br({}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Yr(e){let t,n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,y,b,x,w,k=!e[12]&&e[4]&&e[4].mapOptions&&e[4].mapOptions.tiles&&e[4].mapOptions.tiles[0].endsWith(".webp");function C(t){e[24](t)}let O={ofp:e[1]};void 0!==e[5]&&(O.selected=e[5]),s=new Fr({props:O}),ie.push((()=>_e(s,"selected",C))),s.$on("change",e[18]);let S=e[5]&&e[1]&&window.indexedDB&&e[14]&&!0!==e[10][e[5].id]&&!e[13]&&Zr(e),T=k&&Vr(),_=e[4]&&!!e[1]&&(e[15]||e[16]>=0)&&Qr(e);function j(t){e[25](t)}let D={};function z(t){e[26](t)}void 0!==e[6]&&(D.aircraftTypeSelectElement=e[6]),p=new wr({props:D}),ie.push((()=>_e(p,"aircraftTypeSelectElement",j))),p.$on("change",e[19]);let R={};void 0!==e[0]&&(R.kmlOptions=e[0]),g=new An({props:R}),ie.push((()=>_e(g,"kmlOptions",z))),g.$on("change",e[20]),g.$on("save",e[27]);let q=e[17]&&Xr();return{c(){t=E("div"),o=F(),r=E("div"),Fe(s.$$.fragment),l=F(),S&&S.c(),c=F(),T&&T.c(),u=F(),_&&_.c(),d=F(),Fe(p.$$.fragment),f=F(),Fe(g.$$.fragment),v=F(),q&&q.c(),y=A(),I(t,"id",e[2]),I(t,"class","svelte-voriir"),I(r,"class","mapmenu svelte-voriir")},m(i,a){L(i,t,a),L(i,o,a),L(i,r,a),Ae(s,r,null),P(r,l),S&&S.m(r,null),P(r,c),T&&T.m(r,null),L(i,u,a),_&&_.m(i,a),L(i,d,a),Ae(p,i,a),L(i,f,a),Ae(g,i,a),L(i,v,a),q&&q.m(i,a),L(i,y,a),b=!0,x||(w=$(n=Kr.call(null,t,e[3])),x=!0)},p(e,o){(!b||4&o[0])&&I(t,"id",e[2]),n&&i(n.update)&&8&o[0]&&n.update.call(null,e[3]);const l={};2&o[0]&&(l.ofp=e[1]),!a&&32&o[0]&&(a=!0,l.selected=e[5],fe((()=>a=!1))),s.$set(l),e[5]&&e[1]&&window.indexedDB&&e[14]&&!0!==e[10][e[5].id]&&!e[13]?S?(S.p(e,o),25634&o[0]&&Le(S,1)):(S=Zr(e),S.c(),Le(S,1),S.m(r,c)):S&&(Ce(),Me(S,1,1,(()=>{S=null})),Pe()),4112&o[0]&&(k=!e[12]&&e[4]&&e[4].mapOptions&&e[4].mapOptions.tiles&&e[4].mapOptions.tiles[0].endsWith(".webp")),k?T||(T=Vr(),T.c(),T.m(r,null)):T&&(T.d(1),T=null),e[4]&&e[1]&&(e[15]||e[16]>=0)?_?(_.p(e,o),98322&o[0]&&Le(_,1)):(_=Qr(e),_.c(),Le(_,1),_.m(d.parentNode,d)):_&&(Ce(),Me(_,1,1,(()=>{_=null})),Pe());const u={};!m&&64&o[0]&&(m=!0,u.aircraftTypeSelectElement=e[6],fe((()=>m=!1))),p.$set(u);const f={};!h&&1&o[0]&&(h=!0,f.kmlOptions=e[0],fe((()=>h=!1))),g.$set(f),e[17]?q?131072&o[0]&&Le(q,1):(q=Xr(),q.c(),Le(q,1),q.m(y.parentNode,y)):q&&(Ce(),Me(q,1,1,(()=>{q=null})),Pe())},i(e){b||(Le(s.$$.fragment,e),Le(S),Le(_),Le(p.$$.fragment,e),Le(g.$$.fragment,e),Le(q),b=!0)},o(e){Me(s.$$.fragment,e),Me(S),Me(_),Me(p.$$.fragment,e),Me(g.$$.fragment,e),Me(q),b=!1},d(e){e&&M(t),e&&M(o),e&&M(r),je(s),S&&S.d(),T&&T.d(),e&&M(u),_&&_.d(e),e&&M(d),je(p,e),e&&M(f),je(g,e),e&&M(v),q&&q.d(e),e&&M(y),x=!1,w()}}}const es=e=>{ft.set(!1)},ts=()=>!1;function ns(e,t,n){let o,r,s,i,a,l;u(e,xt,(e=>n(29,r=e))),u(e,Lt,(e=>n(14,s=e))),u(e,ft,(e=>n(15,i=e))),u(e,gt,(e=>n(16,a=e))),u(e,mt,(e=>n(17,l=e)));let{$$slots:d={},$$scope:p}=t;const m=oe();let f,g,h,v,{kmlOptions:$}=t,{ofp:y}=t,b=0,x=0,w=!1,k=[];const C={};let{id:P="map"}=t;async function L(){if(y)try{n(22,k=await pr(0,g))}catch(e){n(22,k=[])}else n(22,k=[]);const e=document.querySelector(`#${P} .mapboxgl-ctrl-attrib-inner`);e&&(e.appendChild(document.createTextNode(" | ")),e.appendChild(v),e.appendChild(document.createTextNode(`${"2105".substring(0,2)}.${"2105".substring(2,4)}`)))}const M=e=>{(e=>{const{name:t,value:n}=e,o=He(t);if("icontext"===o)return Object.values(Bo).forEach((t=>t.changeIconText&&t.changeIconText(e)));if("linewidth"===o)return Object.values(Bo).forEach((t=>t.changeLineWidth&&t.changeLineWidth(e)));if("iconsize"===o)return Object.values(Bo).forEach((t=>t.changeIconSize&&t.changeIconSize(e)));const r=Bo[o];r&&(t.endsWith("-display")?n?r.show&&r.show(e):r.hide&&r.hide(e):t.endsWith("-pin")?r.changeMarker&&r.changeMarker(e):t.endsWith("-color")?r.changeLine&&r.changeLine(e):t.endsWith("-change")&&r.change&&r.change(e))})({map:f,mapData:g,name:e.detail.name,value:e.detail.value,ofp:y,kmlOptions:$,aircraftType:r}),m("save")};let O=!1;let E=!0;return(async()=>{const e=e=>{n(12,E=!(!e||"load"!==e.type)&&1==t.width)},t=new Image;t.onerror=e,t.onload=e,t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})(),te((()=>{mapboxgl.accessToken="pk.eyJ1IjoiZmx5aW5nZWVrIiwiYSI6ImNrYXpmZzhuYjBpczUycW1pZzZ1b2Z4NjAifQ.5S-VzSXpJkui8NDMlTU51Q",n(4,g=lr(P,h,y,$,L)),es(),ft.reset(),n(3,f=g.map),g.geolocate.on("trackuserlocationstart",es)})),ne((()=>{g.geolocate.off("trackuserlocationstart",es),n(3,f=void 0),n(4,g=void 0)})),e.$$set=e=>{"kmlOptions"in e&&n(0,$=e.kmlOptions),"ofp"in e&&n(1,y=e.ofp),"id"in e&&n(2,P=e.id),"$$scope"in e&&n(28,p=e.$$scope)},e.$$.update=()=>{4194304&e.$$.dirty[0]&&n(13,o=0===k.length)},[$,y,P,f,g,h,v,b,x,w,C,O,E,o,s,i,a,l,function(e){e.target.blur(),f&&f.remove(),n(8,x=0),n(9,w=!1),n(22,k=[]),n(7,b=0),g&&g.geolocate&&g.geolocate.off("trackuserlocationstart",es);const t=c(ft);es(),n(4,g=lr(P,h,y,$,L)),n(3,f=g.map),g.geolocate.on("trackuserlocationstart",es),setTimeout((async()=>{await pe,ft.set(t)}),0)},function(e){e.target.blur(),M({detail:{value:r,name:"airport-change"}})},M,async e=>{if(O)return!1;n(11,O=!0);try{n(7,b=k.length),n(9,w=!1);try{await Ve(4e3,fetch(`./manifest.json?dummy=${Date.now()}`,{cache:"no-store"}))}catch(e){return n(11,O=!1),n(9,w=!0),!1}n(8,x=0),await async function(e,t){const n=e;let o=0,r=0;return await new Promise((e=>{const s=setInterval((async()=>{if(0===n.filter((e=>e)).length&&(clearInterval(s),e()),o>=5||r>n.length-1)return;const i=r++,a=n[i];o++;try{await fetch(a),t&&t()}catch{}o--,delete n[i]}),100)}))}(k,(()=>n(8,x++,x))),x>=b&&(n(10,C[h.id]=!0,C),n(10,C),n(22,k=[]),n(7,b=0))}finally{n(11,O=!1)}},k,d,function(e){h=e,n(5,h)},function(e){v=e,n(6,v)},function(e){$=e,n(0,$)},function(t){re(e,t)},p]}class os extends Ie{constructor(e){super(),De(this,e,ns,Yr,a,{kmlOptions:0,ofp:1,id:2},[-1,-1])}}var rs=["bottom-right","bottom-center","bottom-left","top-right","top-center","top-left","right-bottom","right-center","right-top","left-bottom","left-center","left-top"];const ss="right",is="left",as="top",ls="bottom";function cs(){return"undefined"!=typeof window&&"undefined"!=typeof document}const us=(e,{top:t,bottom:n,left:o,right:r,height:s,width:i,clientWidth:a,clientHeight:l})=>{const c=t>s,u=n+s<l,d=o>i,p=r+i<a;return{top:()=>!c&&u?ls:as,bottom:()=>c&&!u?as:ls,left:()=>!d&&p?ss:is,right:()=>!p&&d?is:ss}[e]()},ds=(e,{top:t,bottom:n,left:o,right:r,height:s,width:i,clientWidth:a,clientHeight:l})=>{const c=t+(n-t)/2,u=n>s,d=t+s<l,p=c-s/2>0&&c+s/2<l,m=r>i,f=o+i<a,g={top:()=>!u&&d?ls:as,center:()=>p?"center":g.top(),bottom:()=>!d&&u?as:ls,left:()=>!m&&f?ss:is,right:()=>!f&&m?is:ss};return g[e]()},{window:ps}=Te,ms=e=>({isOpen:2048&e[0]}),fs=e=>({toggle:e[12],isOpen:e[11],open:e[13],close:e[14]}),gs=e=>({isOpen:2048&e[0]}),hs=e=>({toggle:e[12],isOpen:e[11],open:e[13],close:e[14]});function vs(e){let t,n,o;const r=e[26].content,s=d(r,e,e[25],fs);return{c(){t=E("div"),s&&s.c(),I(t,"class",n=h(`content ${e[4]||""}`)+" svelte-d6atc3")},m(n,r){L(n,t,r),s&&s.m(t,null),e[28](t),o=!0},p(e,i){s&&s.p&&33556480&i[0]&&m(s,r,e,e[25],i,ms,fs),(!o||16&i[0]&&n!==(n=h(`content ${e[4]||""}`)+" svelte-d6atc3"))&&I(t,"class",n)},i(e){o||(Le(s,e),o=!0)},o(e){Me(s,e),o=!1},d(n){n&&M(t),s&&s.d(n),e[28](null)}}}function $s(e){let t,n,o,r,i,a,l,c,u,p;const f=e[26].parent,g=d(f,e,e[25],hs);let v=e[11]&&vs(e);return{c(){t=E("div"),n=E("div"),g&&g.c(),o=F(),r=E("div"),v&&v.c(),I(n,"class","svelte-d6atc3"),I(r,"class","content-wrapper svelte-d6atc3"),I(r,"style",i=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`),I(t,"class",a=h(`overlay ${e[10]}`)+" svelte-d6atc3"),I(t,"style",l=`z-index:${e[0]}; ${e[1]}`)},m(s,i){L(s,t,i),P(t,n),g&&g.m(n,null),e[27](n),P(t,o),P(t,r),v&&v.m(r,null),e[29](t),c=!0,u||(p=[j(ps,"mousedown",e[15]),j(ps,"keydown",e[16])],u=!0)},p(e,n){g&&g.p&&33556480&n[0]&&m(g,f,e,e[25],n,gs,hs),e[11]?v?(v.p(e,n),2048&n[0]&&Le(v,1)):(v=vs(e),v.c(),Le(v,1),v.m(r,null)):v&&(Ce(),Me(v,1,1,(()=>{v=null})),Pe()),(!c||961&n[0]&&i!==(i=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`))&&I(r,"style",i),(!c||1024&n[0]&&a!==(a=h(`overlay ${e[10]}`)+" svelte-d6atc3"))&&I(t,"class",a),(!c||3&n[0]&&l!==(l=`z-index:${e[0]}; ${e[1]}`))&&I(t,"style",l)},i(e){c||(Le(g,e),Le(v),c=!0)},o(e){Me(g,e),Me(v),c=!1},d(n){n&&M(t),g&&g.d(n),e[27](null),v&&v.d(),e[29](null),u=!1,s(p)}}}function ys(e,t,o){let r,s,i,a;const l=["isOpen","updateOnScroll","closeOnScroll","position","closeOnClickOutside","zIndex","onWindowKeyDown","style"];let c=g(t,l),{$$slots:u={},$$scope:d}=t;const p=oe(),m=rs[0];let h,v,$,{isOpen:y=!1}=t,{updateOnScroll:b=!1}=t,{closeOnScroll:x=!1}=t,{position:w=m}=t,{closeOnClickOutside:k=!1}=t,{zIndex:C=1}=t,{onWindowKeyDown:P=(()=>{})}=t,{style:L=""}=t,M=null,O=0,E=0,S=0,T=0;function _(){cs()&&(window.addEventListener("resize",R),x?window.addEventListener("scroll",I):b&&window.addEventListener("scroll",R))}function F(){cs()&&(window.removeEventListener("resize",R),window.removeEventListener("scroll",R),window.removeEventListener("scroll",I))}var A;function j(e){const t=y,n=!0===e||!1===e?e:!y;(n&&s&&i||!n)&&o(17,y=n),t!==y&&(p("toggle",y),y?(_(),p("open")):(p("close"),F()))}function D(){a||j(!0)}function I(){a&&j(!1)}function z(e){const t=e.path||e.composedPath();return t.includes(h)||t.includes(v)}async function R(){if(await pe(),!a)return;rs.includes(w)||o(18,w=m);const{top:e,bottom:t,left:n,right:r,width:s,height:i}=h.getBoundingClientRect(),{height:l,width:c}=v.getBoundingClientRect(),u=((e,t)=>{const n=Math.min(document.body.clientHeight,document.documentElement.clientHeight),o=Math.min(document.body.clientWidth,document.documentElement.clientWidth);Object.assign(t,{clientWidth:o,clientHeight:n});const[r,s]=e.split("-");return`${us(r,t)}-${ds(s,t)}`})(w,{top:e,bottom:t,left:n,right:r,height:l,width:c});M!==u&&o(4,M=u),o(6,O=e),o(7,E=n),o(8,S=s),o(9,T=i)}return te((()=>{a&&_()})),ne((()=>{cs()&&F()})),A=R,ee().$$.before_update.push(A),e.$$set=e=>{t=n(n({},t),f(e)),o(36,c=g(t,l)),"isOpen"in e&&o(17,y=e.isOpen),"updateOnScroll"in e&&o(19,b=e.updateOnScroll),"closeOnScroll"in e&&o(20,x=e.closeOnScroll),"position"in e&&o(18,w=e.position),"closeOnClickOutside"in e&&o(21,k=e.closeOnClickOutside),"zIndex"in e&&o(0,C=e.zIndex),"onWindowKeyDown"in e&&o(22,P=e.onWindowKeyDown),"style"in e&&o(1,L=e.style),"$$scope"in e&&o(25,d=e.$$scope)},e.$$.update=()=>{if(o(10,r=c.class||""),4&e.$$.dirty[0]&&o(23,s=!h||!!h.childNodes.length),8&e.$$.dirty[0]&&o(24,i=!v||!!v.childNodes.length),8388608&e.$$.dirty[0]&&!s)throw new Error("parent slot is required");if(16777216&e.$$.dirty[0]&&!i)throw new Error("content slot is required");25296896&e.$$.dirty[0]&&o(11,a=y&&s&&i)},[C,L,h,v,M,$,O,E,S,T,r,a,j,D,I,function(e){k&&a&&!z(e)&&I()},function(e){P&&a&&P(e,{isOpen:a,open:D,close:I,toggle:j,contains:z})},y,w,b,x,k,P,s,i,d,u,function(e){ie[e?"unshift":"push"]((()=>{h=e,o(2,h)}))},function(e){ie[e?"unshift":"push"]((()=>{v=e,o(3,v)}))},function(e){ie[e?"unshift":"push"]((()=>{$=e,o(5,$)}))}]}class bs extends Ie{constructor(e){super(),De(this,e,ys,$s,a,{isOpen:17,updateOnScroll:19,closeOnScroll:20,position:18,closeOnClickOutside:21,zIndex:0,onWindowKeyDown:22,style:1},[-1,-1])}}function xs(e){let t,o;const r=e[3].default,s=d(r,e,e[2],null);let i=[{href:e[0]},e[1]],a={};for(let e=0;e<i.length;e+=1)a=n(a,i[e]);return{c(){t=E("a"),s&&s.c(),z(t,a)},m(e,n){L(e,t,n),s&&s.m(t,null),o=!0},p(e,[n]){s&&s.p&&4&n&&m(s,r,e,e[2],n,null,null),z(t,a=function(e,t){const n={},o={},r={$$scope:1};let s=e.length;for(;s--;){const i=e[s],a=t[s];if(a){for(const e in i)e in a||(o[e]=1);for(const e in a)r[e]||(n[e]=a[e],r[e]=1);e[s]=a}else for(const e in i)r[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}(i,[(!o||1&n)&&{href:e[0]},e[1]]))},i(e){o||(Le(s,e),o=!0)},o(e){Me(s,e),o=!1},d(e){e&&M(t),s&&s.d(e)}}}function ws(e,t,o){const r=["href"];let s=g(t,r),{$$slots:i={},$$scope:a}=t,{href:l}=t;const c=l&&!l.startsWith("#")?Object.assign({rel:"noreferrer",target:"_blank"},s):s;return e.$$set=e=>{t=n(n({},t),f(e)),o(5,s=g(t,r)),"href"in e&&o(0,l=e.href),"$$scope"in e&&o(2,a=e.$$scope)},[l,c,a,i]}class ks extends Ie{constructor(e){super(),De(this,e,ws,xs,a,{href:0})}}function Cs(t){let n;return{c(){n=E("div"),n.innerHTML='<p class="svelte-1w7b6ys">↻</p><p class="svelte-1w7b6ys">Mise à jour</p>',I(n,"class","gramet-thumbnail updating svelte-1w7b6ys")},m(e,t){L(e,n,t)},p:e,i:e,o:e,d(e){e&&M(n)}}}function Ps(e){let t,n;return t=new bs({props:{position:"bottom-center",$$slots:{content:[Fs,({close:e})=>({10:e}),({close:e})=>e?1024:0],parent:[Ms,({toggle:e})=>({11:e}),({toggle:e})=>e?2048:0]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};7210&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function Ls(e){let t,n,o,r,a,l,c,u,d,p,m=e[2]&&As();return c=new bs({props:{position:"bottom-center",isOpen:e[0],$$slots:{content:[Ds,({close:e})=>({10:e}),({close:e})=>e?1024:0],parent:[js]},$$scope:{ctx:e}}}),{c(){t=E("div"),n=S("svg"),o=S("circle"),r=F(),m&&m.c(),l=F(),Fe(c.$$.fragment),I(o,"cx","50"),I(o,"cy","50"),I(o,"r","50"),I(n,"id","gt-plane"),I(n,"viewBox","0 0 100 100"),I(n,"xmlns","http://www.w3.org/2000/svg"),I(n,"class","svelte-1w7b6ys"),I(t,"class","gramet-thumbnail svelte-1w7b6ys"),B(t,"open",e[2])},m(s,i){L(s,t,i),P(t,n),P(n,o),P(t,r),m&&m.m(t,null),L(s,l,i),Ae(c,s,i),u=!0,d||(p=[$(a=Rr.call(null,t,{ofp:e[3],pos:e[4].gramet,fl:e[4].fl})),j(t,"click",e[6])],d=!0)},p(e,n){e[2]?m||(m=As(),m.c(),m.m(t,null)):m&&(m.d(1),m=null),a&&i(a.update)&&24&n&&a.update.call(null,{ofp:e[3],pos:e[4].gramet,fl:e[4].fl}),4&n&&B(t,"open",e[2]);const o={};1&n&&(o.isOpen=e[0]),5120&n&&(o.$$scope={dirty:n,ctx:e}),c.$set(o)},i(e){u||(Le(c.$$.fragment,e),u=!0)},o(e){Me(c.$$.fragment,e),u=!1},d(e){e&&M(t),m&&m.d(),e&&M(l),je(c,e),d=!1,s(p)}}}function Ms(e){let t,n,o;return{c(){t=E("button"),t.innerHTML='<svg class="gramet-error svelte-1w7b6ys"><use xlink:href="#info-symbol"></use></svg>',I(t,"slot","parent"),I(t,"class","btn btn-light svelte-1w7b6ys")},m(r,s){L(r,t,s),n||(o=j(t,"click",(function(){i(e[11])&&e[11].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&M(t),n=!1,o()}}}function Os(e){let t;return{c(){t=T("ogimet")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Es(e){let t,n,o,r=0!==e[5].status&&_s(e);return{c(){t=E("p"),t.textContent="A certaines heures le site ogimet est saturé, il faut essayer 2 ou 3 fois en temporisant de 30 secondes à chaque essai.",n=F(),r&&r.c(),o=A()},m(e,s){L(e,t,s),L(e,n,s),r&&r.m(e,s),L(e,o,s)},p(e,t){0!==e[5].status?r?r.p(e,t):(r=_s(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(e){e&&M(t),e&&M(n),r&&r.d(e),e&&M(o)}}}function Ss(t){let n;return{c(){n=E("p"),n.textContent="Le serveur ogimet indique qu'il est indisponible (no grib data). Sa mise à jour débute normalement à 00:00z et c'est long..."},m(e,t){L(e,n,t)},p:e,d(e){e&&M(n)}}}function Ts(e){let t,n,o,r,s,i=e[5].text+"";return{c(){t=E("p"),n=T('Erreur construction route GRAMET: Station "'),o=E("code"),r=T(i),s=T("\" non reconnue par ogimet,\n                    merci de me remonter l'information pour que je corrige l'application. Inutile de réessayer.")},m(e,i){L(e,t,i),P(t,n),P(t,o),P(o,r),P(t,s)},p(e,t){32&t&&i!==(i=e[5].text+"")&&W(r,i)},d(e){e&&M(t)}}}function _s(e){let t,n,o,r,s=(e[5].text||e[5].status)+"";return{c(){t=E("p"),n=T("Pour information, le proxy a retourné: "),o=E("code"),r=T(s)},m(e,s){L(e,t,s),P(t,n),P(t,o),P(o,r)},p(e,t){32&t&&s!==(s=(e[5].text||e[5].status)+"")&&W(r,s)},d(e){e&&M(t)}}}function Fs(e){let t,n,o,r,a,l,c,u,d,p,m,f,g,h,v,$;function y(e,t){return 409===e[5].status?Ts:"no grib data"===e[5].text?Ss:Es}m=new ks({props:{href:e[3].ogimetData.url,target:"_blank",$$slots:{default:[Os]},$$scope:{ctx:e}}});let b=y(e),x=b(e);return{c(){t=E("div"),n=E("div"),o=E("h3"),r=T("😱: Erreur de récupération du Gramet"),a=E("button"),a.innerHTML='<svg class="svelte-1w7b6ys"><use xlink:href="#close-symbol"></use></svg>',l=F(),c=E("div"),u=E("p"),d=E("a"),d.textContent="essayez à nouveau",p=T(" ou allez sur "),Fe(m.$$.fragment),f=T("."),g=F(),x.c(),I(a,"type","button"),I(a,"class","close svelte-1w7b6ys"),I(a,"aria-label","Close"),I(o,"class","popover-header"),I(d,"href","."),I(c,"class","popover-body"),I(n,"class","popover"),I(n,"role","tooltip"),U(n,"max-width","330px"),I(t,"slot","content"),U(t,"width","330px")},m(s,y){L(s,t,y),P(t,n),P(n,o),P(o,r),P(o,a),P(n,l),P(n,c),P(c,u),P(u,d),P(u,p),Ae(m,u,null),P(u,f),P(c,g),x.m(c,null),h=!0,v||($=[j(a,"click",(function(){i(e[10])&&e[10].apply(this,arguments)})),j(d,"click",D(e[8]))],v=!0)},p(t,n){e=t;const o={};8&n&&(o.href=e[3].ogimetData.url),4096&n&&(o.$$scope={dirty:n,ctx:e}),m.$set(o),b===(b=y(e))&&x?x.p(e,n):(x.d(1),x=b(e),x&&(x.c(),x.m(c,null)))},i(e){h||(Le(m.$$.fragment,e),h=!0)},o(e){Me(m.$$.fragment,e),h=!1},d(e){e&&M(t),je(m),x.d(),v=!1,s($)}}}function As(e){let t,n;return{c(){t=S("svg"),n=S("use"),R(n,"xlink:href","#close-symbol"),I(t,"class","gramet-close svelte-1w7b6ys")},m(e,o){L(e,t,o),P(t,n)},d(e){e&&M(t)}}}function js(e){let t;return{c(){t=E("div"),I(t,"slot","parent"),I(t,"class","d-none")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ds(e){let t,n,o,r,a,l,c,u,d,p,m;return{c(){t=E("div"),n=E("div"),o=E("h3"),r=T("Nouveau GRAMET disponible"),a=E("button"),a.innerHTML='<svg class="svelte-1w7b6ys"><use xlink:href="#close-symbol"></use></svg>',l=F(),c=E("div"),u=E("p"),d=E("button"),d.textContent="Mettre à jour",I(a,"type","button"),I(a,"class","close svelte-1w7b6ys"),I(a,"aria-label","Close"),I(o,"class","popover-header"),I(d,"class","btn btn-primary"),I(u,"class","text-center"),I(c,"class","popover-body"),I(n,"class","popover"),I(n,"role","tooltip"),U(n,"left","calc(-1rem - 35px)"),U(n,"max-width","290px"),U(n,"top","20px"),I(t,"slot","content"),U(t,"width","290px")},m(s,f){L(s,t,f),P(t,n),P(n,o),P(o,r),P(o,a),P(n,l),P(n,c),P(c,u),P(u,d),p||(m=[j(a,"click",(function(){i(e[10])&&e[10].apply(this,arguments)})),j(d,"click",e[7])],p=!0)},p(t,n){e=t},d(e){e&&M(t),p=!1,s(m)}}}function Is(e){let t,n,o,r;const s=[Ls,Ps,Cs],i=[];function a(e,t){return"error"!==e[1]&&"reload"!==e[1]?0:"reload"!==e[1]?1:"reload"===e[1]?2:-1}return~(t=a(e))&&(n=i[t]=s[t](e)),{c(){n&&n.c(),o=A()},m(e,n){~t&&i[t].m(e,n),L(e,o,n),r=!0},p(e,[r]){let l=t;t=a(e),t===l?~t&&i[t].p(e,r):(n&&(Ce(),Me(i[l],1,1,(()=>{i[l]=null})),Pe()),~t?(n=i[t],n?n.p(e,r):(n=i[t]=s[t](e),n.c()),Le(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(Le(n),r=!0)},o(e){Me(n),r=!1},d(e){~t&&i[t].d(e),e&&M(o)}}}function zs(e,t,n){let o,r,s,i,a;u(e,Ir,(e=>n(1,o=e))),u(e,mt,(e=>n(2,r=e))),u(e,ht,(e=>n(3,s=e))),u(e,Et,(e=>n(4,i=e))),u(e,zr,(e=>n(5,a=e)));let l=!1;const c=async()=>{v(Ir,o="reload",o),v(mt,r=!1,r),n(0,l=!1),await pe,v(Ir,o="loading",o)},d=async e=>{if("workbox-broadcast-update"===e.data.meta&&"CACHE_UPDATED"===e.data.type){const{updatedURL:t}=e.data.payload;t===s.ogimetData.proxyImg&&(r?n(0,l=!0):c())}};navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",d),ne((()=>{navigator&&navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",d)}));return[l,o,r,s,i,a,()=>{"success"===o&&v(mt,r=!r,r)},c,()=>v(Ir,o="loading",o)]}class Rs extends Ie{constructor(e){super(),De(this,e,zs,Is,a,{})}}function qs(e){let t;return{c(){t=E("p"),t.textContent="ETOPS",I(t,"class","etops svelte-cgn8wq")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ws(t){let n,o,r,s,i,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x=t[1].infos.flight+"",w=t[1].infos.departure+"",k=t[1].infos.destination+"",C=t[1].infos.date+"",O=t[1].infos.ofp.includes("/")?"":"ofp: ",_=t[1].infos.ofp+"",A=t[2]<20&&qs(),D=navigator&&navigator.share&&function(e){let t,n;return{c(){t=S("svg"),n=S("use"),R(n,"xlink:href","#share-symbol"),I(t,"class","svelte-cgn8wq")},m(e,o){L(e,t,o),P(t,n)},d(e){e&&M(t)}}}();return{c(){n=E("div"),A&&A.c(),o=F(),r=E("div"),s=E("p"),i=E("b"),a=T(x),l=F(),c=T(w),u=T("-"),d=T(k),p=F(),m=E("p"),f=T(C),g=F(),h=T(O),v=T(_),$=F(),D&&D.c(),I(s,"class","svelte-cgn8wq"),I(m,"class","svelte-cgn8wq"),I(r,"class","details svelte-cgn8wq"),I(n,"class","infos svelte-cgn8wq")},m(e,x){L(e,n,x),A&&A.m(n,null),P(n,o),P(n,r),P(r,s),P(s,i),P(i,a),P(s,l),P(s,c),P(s,u),P(s,d),P(r,p),P(r,m),P(m,f),P(m,g),P(m,h),P(m,v),P(m,$),D&&D.m(m,null),y||(b=j(n,"click",navigator&&navigator.share?t[0]:null),y=!0)},p(e,[t]){e[2]<20?A||(A=qs(),A.c(),A.m(n,o)):A&&(A.d(1),A=null),2&t&&x!==(x=e[1].infos.flight+"")&&W(a,x),2&t&&w!==(w=e[1].infos.departure+"")&&W(c,w),2&t&&k!==(k=e[1].infos.destination+"")&&W(d,k),2&t&&C!==(C=e[1].infos.date+"")&&W(f,C),2&t&&O!==(O=e[1].infos.ofp.includes("/")?"":"ofp: ")&&W(h,O),2&t&&_!==(_=e[1].infos.ofp+"")&&W(v,_)},i:e,o:e,d(e){e&&M(n),A&&A.d(),D&&D.d(),y=!1,b()}}}function*Ns(e,t){let n="";const o=e.infos.ralts;if(o.length>0)try{n=e.text.extract("ETOPS SUMMARY","SUMMARY-").replace(e.removePageFooterRegex,"")}catch(e){}const r=String.raw`(EEP\(\S{4}\)|ETP\S+|EXP\(\S{4}\))\s.+?EET (\d{2})\.(\d{2}) .+? ([\d.]+)\/EFOB ([\d.]+)(?:.+?(${o.join("|")})\s(\S+).+?\sREQ\s(\d{2})(\d{2})-(\d{2})(\d{2}))?`,s=new RegExp(r,"gm"),i=new Date(t),a=t-e.infos.takeoff;i.setUTCHours(0,0);const l=n.matchAll(s);for(let[,e,n,o,r,s,c,u,d,p,m,f]of l){const l=new Date(t.getTime()+36e5*parseInt(n,10)+6e4*parseInt(o,10)),g=Math.round(10*(parseFloat(s)-parseFloat(r)))/10,h=void 0!==d&&void 0!==p?new Date(i.getTime()+36e5*parseInt(d,10)+6e4*parseInt(p,10)+a):void 0,v=void 0!==m&&void 0!==f?new Date(i.getTime()+36e5*parseInt(m,10)+6e4*parseInt(f,10)+a):void 0;yield[e,l,parseFloat(r),parseFloat(s),g,c,u,h,v]}}function Us(e,t,n){let o,r,s;u(e,ht,(e=>n(1,r=e))),u(e,$t,(e=>n(3,s=e)));const i=(e,t)=>{let n="";const o=e=>e.getUTCHours().toString().padStart(2,"0"),r=e=>e.getUTCMinutes().toString().padStart(2,"0"),s=[];for(const[i,a,,,l,c,u,d,p]of Ns(e,t)){let e,t;t=i.startsWith("ETP")?`**${i}** ${n}/${c}`:`**${i.substring(0,3)}**${i.substring(3)}`,e=`\n${t} ➔ ETO: **${o(a)}:${r(a)}** | ΔFUEL: **${l.toFixed(1)}**\n`,c&&(n=c,e+=`\n**Appui**: ${c} ${u} - Plage: **${o(d)}${r(d)}-${o(p)}${r(p)}**`),s.push(e)}return s};return e.$$.update=()=>{10&e.$$.dirty&&n(2,o=((e,t)=>{if(t){const n=[];for(const[,o,,r,s]of Ns(e,t))n.push([o,r,s]);if(n.length>1){const e=(n[0][1]-n[n.length-1][1])/(n[n.length-1][0]-n[0][0])*6e4;return Math.min(...n.map((t=>t[2]/e)))}if(n.length>0)return n[0][2]/8*60}return 180})(r,s))},[async()=>{const e={title:"OFP2MAP",text:JSON.stringify({...r.infos,text:r.text,"ofp2map-takeoff":s,etopsOutput:i(r,s)})};try{await navigator.share(e)}catch(e){}return!1},r,o,s]}class Hs extends Ie{constructor(e){super(),De(this,e,Us,Ws,a,{shareOFP:0})}get shareOFP(){return this.$$.ctx[0]}}function Gs(t){let n,o,r,i,a,l,c,u,d,p,m;return{c(){n=E("div"),o=S("svg"),r=S("use"),i=F(),a=E("label"),l=T("Heure de décollage"),c=F(),u=E("input"),R(r,"xlink:href","#takeoff-symbol"),I(o,"class","svelte-16mu92i"),B(o,"show",t[2]||t[3]>=0),B(o,"hide",!(t[2]||t[3]>=0)),I(a,"for",t[0]),I(a,"class","svelte-16mu92i"),I(u,"id",t[0]),I(u,"name",t[0]),I(u,"type","time"),u.value=d=t[4](t[1].getUTCHours(),t[1].getUTCMinutes()),I(u,"class","svelte-16mu92i"),I(n,"class","svelte-16mu92i")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(n,i),P(n,a),P(a,l),P(n,c),P(n,u),p||(m=[j(o,"click",t[7]),$(ln.call(null,u)),j(u,"change",t[5])],p=!0)},p(e,[t]){12&t&&B(o,"show",e[2]||e[3]>=0),12&t&&B(o,"hide",!(e[2]||e[3]>=0)),1&t&&I(a,"for",e[0]),1&t&&I(u,"id",e[0]),1&t&&I(u,"name",e[0]),2&t&&d!==(d=e[4](e[1].getUTCHours(),e[1].getUTCMinutes()))&&(u.value=d)},i:e,o:e,d(e){e&&M(n),p=!1,s(m)}}}function Bs(e,t,n){let o,r,s,i,a;u(e,ht,(e=>n(6,r=e))),u(e,$t,(e=>n(8,s=e))),u(e,ft,(e=>n(2,i=e))),u(e,gt,(e=>n(3,a=e)));let{name:l="take-off"}=t;const c=(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return e.$$set=e=>{"name"in e&&n(0,l=e.name)},e.$$.update=()=>{64&e.$$.dirty&&n(1,o=(e=>{const t=new Date(e.infos.datetime.getTime()+6e4*r.infos.taxitime);return v($t,s=t,s),t})(r))},[l,o,i,a,c,e=>{let t,n;""==e.target.value?(n=o.getUTCHours(),t=o.getUTCMinutes(),e.target.blur(),e.target.value=c(n,t)):(n=parseFloat(e.target.value.slice(0,2)),t=parseFloat(e.target.value.slice(3)));let r=new Date(o);r.setUTCMinutes(t),r.setUTCHours(n);const i=(r.getTime()-o.getTime())/6e4;i<-720?r=new Date(r.getTime()+864e5):i>720&&(r=new Date(r.getTime()-864e5)),v($t,s=r,s),r.toISOString()!==o.toISOString()?e.target.classList.add("changed"):e.target.classList.remove("changed")},r,()=>v(ft,i=!i,i)]}class Ks extends Ie{constructor(e){super(),De(this,e,Bs,Gs,a,{name:0})}}const Zs=Math.PI,Js=Math.sin,Vs=Math.cos,Qs=Math.tan,Xs=Math.asin,Ys=Math.acos,ei=Math.atan2,ti=180/Zs,ni=Zs/180,oi=2451545,ri=e=>e.valueOf()/864e5-.5+2440588,si=e=>(ri(e)-oi)/36525,ii=e=>((e,t)=>(e%t+t)%t)(280.46646+e*(36000.76983+3032e-7*e),360),ai=e=>357.52911+e*(35999.05029-1537e-7*e),li=e=>ii(e)+(e=>{const t=ni*ai(e);return Js(t)*(1.914602-e*(.004817+14e-6*e))+Js(2*t)*(.019993-101e-6*e)+289e-6*Js(3*t)})(e),ci=e=>li(e)-.00569-.00478*Js(ni*(125.04-1934.136*e)),ui=e=>(e=>23+(26+(21.448-e*(46.815+e*(59e-5-.001813*e)))/60)/60)(e)+.00256*Vs(ni*(125.04-1934.136*e)),di=e=>{const t=ni*ui(e),n=ni*ci(e),o=Js(t)*Js(n);return Xs(o)},pi=e=>{var t=ni*ui(e),n=ni*ci(e),o=Vs(t)*Js(n),r=Vs(n);return ei(o,r)},mi=({date:e,latitude:t,longitude:n})=>{const o=e.getUTCHours(),r=e.getUTCMinutes(),s=e.getUTCSeconds(),i=si(e),a=(e=>{const t=(e=>.016708634-e*(42037e-9+1.267e-7*e))(e),n=ni*ui(e),o=ni*ii(e),r=ni*ai(e),s=Math.pow(Qs(n/2),2),i=s*Js(2*o)-2*t*Js(r)+4*t*s*Js(r)*Vs(2*o)-.5*s*s*Js(4*o)-1.25*t*t*Js(2*r);return ti*i*4})(i)+4*n,l=di(i);let c=(60*o+r+s/60+a)%1440/4-180;c<-180&&(c+=360);const u=ni*t;let d=Js(u)*Js(l)+Vs(u)*Vs(l)*Vs(ni*c);d>1?d=1:d<-1&&(d=-1);const p=Ys(d);return{elevation:90-ti*p}},fi=new Map([["night",([e,t])=>hi(e,t)?"astronomicalDawn":"nightStart"],["astronomical twilight",([e,t])=>hi(e,t)?"nauticalDawn":"astronomicalDusk"],["nautical twilight",([e,t])=>hi(e,t)?"civilDawn":"nauticalDusk"],["civil twilight",([e,t])=>hi(e,t)?"sunrise":"civilDusk"],["sunrise end",([e,t])=>hi(e,t)?"sunriseEnd":"sunset"],["day",([e,t])=>hi(e,t)?"dayStart":"sunsetStart"]]),gi=Array.from(fi.keys()),hi=(e,t)=>gi.indexOf(t)>=gi.indexOf(e),vi=[[-18,"night"],[-12,"astronomical twilight"],[-6,"nautical twilight"],[-.833,"civil twilight"],[1,"sunrise end"]],$i=e=>ri(e)-oi,yi=23.4397*ni,bi=(e,t)=>ei(Js(e)*Vs(yi)-Qs(t)*Js(yi),Vs(e)),xi=(e,t)=>Xs(Js(t)*Vs(yi)+Vs(t)*Js(yi)*Js(e)),wi=e=>{const t=ni*(134.963+13.064993*e),n=ni*(93.272+13.22935*e),o=ni*(218.316+13.176396*e)+6.289*ni*Js(t),r=5.128*ni*Js(n),s=385001-20905*Vs(t);return{ra:bi(o,r),dec:xi(o,r),dist:s}},ki=function(e,t,n){var o=ni*-n,r=ni*t,s=$i(e),i=wi(s);return{altitude:((e,t,n)=>Xs(Js(t)*Js(n)+Vs(t)*Vs(n)*Vs(e)))(((e,t)=>ni*(280.16+360.9856235*e)-t)(s,o)-i.ra,r,i.dec)}},Ci=new Map([[!1,()=>"moonrise"],[!0,()=>"moonset"]]),Pi={name:"sun",getState:({date:e,latitude:t,longitude:n},o=0)=>{const r=mi({date:e,latitude:t,longitude:n}).elevation,s=1.15*Math.sqrt(100*o)/60;for(const[e,t]of vi)if(r<=e-s)return[t,r];return["day",r]},stateMap:fi},Li={name:"moon",getState:({date:e,latitude:t,longitude:n},o)=>{const r=1.15*ni*Math.sqrt(100*o)/60,s=ki(e,t,n).altitude;return[s>-.005794821282742547-r,ti*s]},stateMap:Ci};function Mi(e,t,n){const o=e.slice();return o[20]=t[n],o}function Oi(e,t,n){const o=e.slice();return o[20]=t[n],o}function Ei(e,t,n){const o=e.slice();return o[20]=t[n],o}function Si(e,t,n){const o=e.slice();return o[20]=t[n],o}function Ti(e,t,n){const o=e.slice();return o[20]=t[n],o}function _i(e,t,n){const o=e.slice();return o[20]=t[n],o[28]=n,o}function Fi(e,t,n){const o=e.slice();return o[20]=t[n],o}function Ai(e){let t,n;return t=new bs({props:{position:"bottom-center",isOpen:!1,$$slots:{content:[Vi,({close:e})=>({19:e}),({close:e})=>[e?524288:0]],parent:[Ri,({toggle:e})=>({31:e}),({toggle:e})=>[0,e?1:0]]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};524543&n[0]|33&n[1]&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function ji(e){let t,n=e[1].moon.slice(0,3),o=[];for(let t=0;t<n.length;t+=1)o[t]=Ii(Mi(e,n,t));return{c(){t=E("div");for(let e=0;e<o.length;e+=1)o[e].c();I(t,"class","details svelte-1qi2xg5"),B(t,"two",2===e[1].moon.length),B(t,"three",e[1].moon.length>=3)},m(e,n){L(e,t,n);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,r){if(1026&r[0]){let s;for(n=e[1].moon.slice(0,3),s=0;s<n.length;s+=1){const i=Mi(e,n,s);o[s]?o[s].p(i,r):(o[s]=Ii(i),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}2&r[0]&&B(t,"two",2===e[1].moon.length),2&r[0]&&B(t,"three",e[1].moon.length>=3)},d(e){e&&M(t),O(o,e)}}}function Di(e){let t,n=e[2],o=[];for(let t=0;t<n.length;t+=1)o[t]=zi(Oi(e,n,t));return{c(){t=E("div");for(let e=0;e<o.length;e+=1)o[e].c();I(t,"class","details svelte-1qi2xg5"),B(t,"two",2===e[2].length),B(t,"three",e[2].length>=3)},m(e,n){L(e,t,n);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,r){if(1028&r[0]){let s;for(n=e[2],s=0;s<n.length;s+=1){const i=Oi(e,n,s);o[s]?o[s].p(i,r):(o[s]=zi(i),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}4&r[0]&&B(t,"two",2===e[2].length),4&r[0]&&B(t,"three",e[2].length>=3)},d(e){e&&M(t),O(o,e)}}}function Ii(e){let t,n,o,r,s="moonrise"===e[20].type?"↥":"↧",i=e[10](e[20].date)+"";return{c(){t=E("p"),n=T(s),o=F(),r=T(i),I(t,"class","svelte-1qi2xg5")},m(e,s){L(e,t,s),P(t,n),P(t,o),P(t,r)},p(e,t){2&t[0]&&s!==(s="moonrise"===e[20].type?"↥":"↧")&&W(n,s),2&t[0]&&i!==(i=e[10](e[20].date)+"")&&W(r,i)},d(e){e&&M(t)}}}function zi(e){let t,n,o,r,s="sunrise"===e[20].type?"↥":"↧",i=e[10](e[20].date)+"";return{c(){t=E("p"),n=T(s),o=F(),r=T(i),I(t,"class","svelte-1qi2xg5")},m(e,s){L(e,t,s),P(t,n),P(t,o),P(t,r)},p(e,t){4&t[0]&&s!==(s="sunrise"===e[20].type?"↥":"↧")&&W(n,s),4&t[0]&&i!==(i=e[10](e[20].date)+"")&&W(r,i)},d(e){e&&M(t)}}}function Ri(e){let t,n,o,r,s,a;function l(e,t){return"☀️"===e[6]?Di:"🔭"!==e[6]?ji:void 0}let c=l(e),u=c&&c(e);return{c(){t=E("div"),n=E("p"),o=T(e[6]),r=F(),u&&u.c(),I(n,"class","icon svelte-1qi2xg5"),I(t,"slot","parent"),I(t,"class","sun svelte-1qi2xg5")},m(l,c){L(l,t,c),P(t,n),P(n,o),P(t,r),u&&u.m(t,null),s||(a=j(t,"click",(function(){i(e[31])&&e[31].apply(this,arguments)})),s=!0)},p(n,r){e=n,64&r[0]&&W(o,e[6]),c===(c=l(e))&&u?u.p(e,r):(u&&u.d(1),u=c&&c(e),u&&(u.c(),u.m(t,null)))},d(e){e&&M(t),u&&u.d(),s=!1,a()}}}function qi(e){let t,n,o;return{c(){t=S("stop"),I(t,"offset",n=e[20].relpos+"%"),I(t,"stop-color",o=e[15](e[20].type))},m(e,n){L(e,t,n)},p(e,r){2&r[0]&&n!==(n=e[20].relpos+"%")&&I(t,"offset",n),2&r[0]&&o!==(o=e[15](e[20].type))&&I(t,"stop-color",o)},d(e){e&&M(t)}}}function Wi(e){let t,n,o;return{c(){t=S("line"),I(t,"x1",n=5+.9*e[20].relpos+"%"),I(t,"y1","30"),I(t,"x2",o=5+.9*e[20].relpos+"%"),I(t,"y2","32"),I(t,"stroke","gray"),I(t,"stroke-width","1")},m(e,n){L(e,t,n)},p(e,r){2&r[0]&&n!==(n=5+.9*e[20].relpos+"%")&&I(t,"x1",n),2&r[0]&&o!==(o=5+.9*e[20].relpos+"%")&&I(t,"x2",o)},d(e){e&&M(t)}}}function Ni(e){let t,n,o,r;return{c(){t=S("text"),n=T("✹"),I(t,"x",o=5+.9*e[20].relpos+"%"),I(t,"y","44"),I(t,"fill",r=e[20].type.endsWith("Dawn")?"#FCBF49":"#000B18"),I(t,"text-anchor","middle")},m(e,o){L(e,t,o),P(t,n)},p(e,n){2&n[0]&&o!==(o=5+.9*e[20].relpos+"%")&&I(t,"x",o),2&n[0]&&r!==(r=e[20].type.endsWith("Dawn")?"#FCBF49":"#000B18")&&I(t,"fill",r)},d(e){e&&M(t)}}}function Ui(e){let t,n,o=e[20].type.startsWith("civil"),r="sunriseEnd"!==e[20].type&&"sunsetStart"!==e[20].type&&Wi(e),s=o&&Ni(e);return{c(){r&&r.c(),t=A(),s&&s.c(),n=A()},m(e,o){r&&r.m(e,o),L(e,t,o),s&&s.m(e,o),L(e,n,o)},p(e,i){"sunriseEnd"!==e[20].type&&"sunsetStart"!==e[20].type?r?r.p(e,i):(r=Wi(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),2&i[0]&&(o=e[20].type.startsWith("civil")),o?s?s.p(e,i):(s=Ni(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){r&&r.d(e),e&&M(t),s&&s.d(e),e&&M(n)}}}function Hi(e){let t,n,o,r,s,i,a;return{c(){t=S("line"),r=S("text"),s=T("☽"),I(t,"x1",n=5+.9*e[20].relpos+"%"),I(t,"y1","18"),I(t,"x2",o=5+.9*e[20].relpos+"%"),I(t,"y2","20"),I(t,"stroke","gray"),I(t,"stroke-width","1"),I(r,"x",i=5+.9*e[20].relpos+"%"),I(r,"y","16"),I(r,"fill",a="moonrise"===e[20].type?"#FCBF49":"#000B18"),I(r,"text-anchor","middle")},m(e,n){L(e,t,n),L(e,r,n),P(r,s)},p(e,s){2&s[0]&&n!==(n=5+.9*e[20].relpos+"%")&&I(t,"x1",n),2&s[0]&&o!==(o=5+.9*e[20].relpos+"%")&&I(t,"x2",o),2&s[0]&&i!==(i=5+.9*e[20].relpos+"%")&&I(r,"x",i),2&s[0]&&a!==(a="moonrise"===e[20].type?"#FCBF49":"#000B18")&&I(r,"fill",a)},d(e){e&&M(t),e&&M(r)}}}function Gi(e){let t;return{c(){t=E("tr"),t.innerHTML='<td colspan="4">Aucun événement</td>'},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Bi(e){let t;return{c(){t=E("span"),t.textContent="✹",I(t,"class","svelte-1qi2xg5"),B(t,"rise","civilDawn"===e[20].type)},m(e,n){L(e,t,n)},p(e,n){2&n[0]&&B(t,"rise","civilDawn"===e[20].type)},d(e){e&&M(t)}}}function Ki(e){let t,n,o,r,s,i,a,l,c,u,d,p,m,f,g,h=(e[11][e[20].type]||e[20].type)+"",v=e[20].type.startsWith("civil"),$=e[10](e[20].date)+"",y=e[20].fl+"",b=v&&Bi(e);return{c(){t=E("tr"),n=E("td"),o=T(h),r=F(),b&&b.c(),s=F(),i=E("td"),l=F(),c=E("td"),u=T($),d=F(),p=E("td"),m=T("FL"),f=T(y),g=F(),I(i,"class",a="color "+e[20].type+"-color svelte-1qi2xg5")},m(e,a){L(e,t,a),P(t,n),P(n,o),P(n,r),b&&b.m(n,null),P(t,s),P(t,i),P(t,l),P(t,c),P(c,u),P(t,d),P(t,p),P(p,m),P(p,f),P(t,g)},p(e,t){2&t[0]&&h!==(h=(e[11][e[20].type]||e[20].type)+"")&&W(o,h),2&t[0]&&(v=e[20].type.startsWith("civil")),v?b?b.p(e,t):(b=Bi(e),b.c(),b.m(n,null)):b&&(b.d(1),b=null),2&t[0]&&a!==(a="color "+e[20].type+"-color svelte-1qi2xg5")&&I(i,"class",a),2&t[0]&&$!==($=e[10](e[20].date)+"")&&W(u,$),2&t[0]&&y!==(y=e[20].fl+"")&&W(f,y)},d(e){e&&M(t),b&&b.d()}}}function Zi(e){let t;return{c(){t=E("tr"),t.innerHTML='<td colspan="4">Aucun événement</td>'},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ji(e){let t,n,o,r,s,i,a,l,c,u,d,p,m,f,g,h=(e[11][e[20].type]||e[20].type)+"",v=e[10](e[20].date)+"",$=e[20].fl+"";return{c(){t=E("tr"),n=E("td"),o=T(h),r=F(),s=E("span"),s.textContent="☽",i=F(),a=E("td"),l=F(),c=E("td"),u=T(v),d=F(),p=E("td"),m=T("FL"),f=T($),g=F(),I(s,"class","svelte-1qi2xg5"),B(s,"rise","moonrise"===e[20].type),I(a,"class","color svelte-1qi2xg5")},m(e,h){L(e,t,h),P(t,n),P(n,o),P(n,r),P(n,s),P(t,i),P(t,a),P(t,l),P(t,c),P(c,u),P(t,d),P(t,p),P(p,m),P(p,f),P(t,g)},p(e,t){2&t[0]&&h!==(h=(e[11][e[20].type]||e[20].type)+"")&&W(o,h),2&t[0]&&B(s,"rise","moonrise"===e[20].type),2&t[0]&&v!==(v=e[10](e[20].date)+"")&&W(u,v),2&t[0]&&$!==($=e[20].fl+"")&&W(f,$)},d(e){e&&M(t)}}}function Vi(t){let n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,_,D,z,R,q,N,H,G,K,Z,J,V,Q,X,Y,ee,te,ne,oe,re,se,ie=t[10](t[0])+"",ae=t[10](t[4])+"",le=t[14]()+"",ce=t[13]()+"",ue=t[12]()+"",de=t[5]?"":"non visible",pe=t[1].sun,fe=[];for(let e=0;e<pe.length;e+=1)fe[e]=qi(Fi(t,pe,e));let ge=t[1].sun,he=[];for(let e=0;e<ge.length;e+=1)he[e]=Ui(_i(t,ge,e));let ve=t[1].moon,$e=[];for(let e=0;e<ve.length;e+=1)$e[e]=Hi(Ti(t,ve,e));let ye=t[1].sun.filter(ta),be=[];for(let e=0;e<ye.length;e+=1)be[e]=Ki(Si(t,ye,e));let xe=null;ye.length||(xe=Gi());let we=t[1].moon,ke=[];for(let e=0;e<we.length;e+=1)ke[e]=Ji(Ei(t,we,e));let Ce=null;return we.length||(Ce=Zi()),{c(){n=E("div"),o=E("h3"),r=T("Éphémérides du vol"),s=E("button"),s.innerHTML='<svg class="svelte-1qi2xg5"><use xlink:href="#close-symbol"></use></svg>',a=F(),l=E("div"),c=S("svg"),u=S("defs"),d=S("linearGradient"),p=S("stop");for(let e=0;e<fe.length;e+=1)fe[e].c();f=S("stop");for(let e=0;e<he.length;e+=1)he[e].c();h=A();for(let e=0;e<$e.length;e+=1)$e[e].c();v=S("rect"),$=S("circle"),b=S("text"),x=T(ie),w=S("text"),k=T(ae),C=F(),_=E("table"),D=E("thead"),D.innerHTML='<tr><th scope="col" class="svelte-1qi2xg5">Soleil</th> \n                            <th scope="col" class="color svelte-1qi2xg5"></th> \n                            <th scope="col" class="svelte-1qi2xg5">Heure</th> \n                            <th scope="col" class="svelte-1qi2xg5">FL</th></tr>',z=F(),R=E("tbody");for(let e=0;e<be.length;e+=1)be[e].c();xe&&xe.c(),q=F(),N=E("thead"),H=E("tr"),G=E("th"),K=T("Lune "),Z=T(le),J=F(),V=T(ce),Q=F(),X=T(ue),Y=T("% "),ee=T(de),te=F(),ne=E("tbody");for(let e=0;e<ke.length;e+=1)ke[e].c();Ce&&Ce.c(),I(s,"type","button"),I(s,"class","close svelte-1qi2xg5"),I(s,"aria-label","Close"),I(o,"class","popover-header"),I(p,"offset","0%"),I(p,"stop-color",m=t[15](t[8](t[3]))),I(f,"offset","100%"),I(f,"stop-color",g=t[15](t[9](t[3]))),I(d,"id","MyGradient"),I(v,"fill","url(#MyGradient)"),I(v,"x","5%"),I(v,"y","20"),I(v,"width","90%"),I(v,"height","10px"),I(v,"rx","0"),I($,"fill","#FCBF49"),I($,"cx",y=5+.9*t[7]+"%"),I($,"stroke","#FCBF49"),I($,"cy","25"),I($,"r","2"),I(b,"x","5%"),I(b,"y","56"),I(b,"fill","black"),I(b,"text-anchor","middle"),I(w,"x","95%"),I(w,"y","56"),I(w,"fill","black"),I(w,"text-anchor","middle"),I(c,"width","100%"),I(c,"height","60px"),I(c,"xmlns","http://www.w3.org/2000/svg"),I(G,"scope","col"),I(G,"colspan","4"),I(G,"class","svelte-1qi2xg5"),B(G,"border-bottom-0",0===t[1].moon.length),I(_,"class","table svelte-1qi2xg5"),I(l,"class","popover-body"),I(n,"slot","content"),U(n,"width","390px"),U(n,"max-width","390px"),U(n,"position","static"),I(n,"class","popover")},m(e,m){L(e,n,m),P(n,o),P(o,r),P(o,s),P(n,a),P(n,l),P(l,c),P(c,u),P(u,d),P(d,p);for(let e=0;e<fe.length;e+=1)fe[e].m(d,null);P(d,f);for(let e=0;e<he.length;e+=1)he[e].m(c,null);P(c,h);for(let e=0;e<$e.length;e+=1)$e[e].m(c,null);P(c,v),P(c,$),P(c,b),P(b,x),P(c,w),P(w,k),P(l,C),P(l,_),P(_,D),P(_,z),P(_,R);for(let e=0;e<be.length;e+=1)be[e].m(R,null);xe&&xe.m(R,null),P(_,q),P(_,N),P(N,H),P(H,G),P(G,K),P(G,Z),P(G,J),P(G,V),P(G,Q),P(G,X),P(G,Y),P(G,ee),P(_,te),P(_,ne);for(let e=0;e<ke.length;e+=1)ke[e].m(ne,null);Ce&&Ce.m(ne,null),re||(se=j(s,"click",(function(){i(t[19])&&t[19].apply(this,arguments)})),re=!0)},p(e,n){if(t=e,8&n[0]&&m!==(m=t[15](t[8](t[3])))&&I(p,"stop-color",m),32770&n[0]){let e;for(pe=t[1].sun,e=0;e<pe.length;e+=1){const o=Fi(t,pe,e);fe[e]?fe[e].p(o,n):(fe[e]=qi(o),fe[e].c(),fe[e].m(d,f))}for(;e<fe.length;e+=1)fe[e].d(1);fe.length=pe.length}if(8&n[0]&&g!==(g=t[15](t[9](t[3])))&&I(f,"stop-color",g),2&n[0]){let e;for(ge=t[1].sun,e=0;e<ge.length;e+=1){const o=_i(t,ge,e);he[e]?he[e].p(o,n):(he[e]=Ui(o),he[e].c(),he[e].m(c,h))}for(;e<he.length;e+=1)he[e].d(1);he.length=ge.length}if(2&n[0]){let e;for(ve=t[1].moon,e=0;e<ve.length;e+=1){const o=Ti(t,ve,e);$e[e]?$e[e].p(o,n):($e[e]=Hi(o),$e[e].c(),$e[e].m(c,v))}for(;e<$e.length;e+=1)$e[e].d(1);$e.length=ve.length}if(128&n[0]&&y!==(y=5+.9*t[7]+"%")&&I($,"cx",y),1&n[0]&&ie!==(ie=t[10](t[0])+"")&&W(x,ie),16&n[0]&&ae!==(ae=t[10](t[4])+"")&&W(k,ae),3074&n[0]){let e;for(ye=t[1].sun.filter(ta),e=0;e<ye.length;e+=1){const o=Si(t,ye,e);be[e]?be[e].p(o,n):(be[e]=Ki(o),be[e].c(),be[e].m(R,null))}for(;e<be.length;e+=1)be[e].d(1);be.length=ye.length,ye.length?xe&&(xe.d(1),xe=null):xe||(xe=Gi(),xe.c(),xe.m(R,null))}if(32&n[0]&&de!==(de=t[5]?"":"non visible")&&W(ee,de),2&n[0]&&B(G,"border-bottom-0",0===t[1].moon.length),3074&n[0]){let e;for(we=t[1].moon,e=0;e<we.length;e+=1){const o=Ei(t,we,e);ke[e]?ke[e].p(o,n):(ke[e]=Ji(o),ke[e].c(),ke[e].m(ne,null))}for(;e<ke.length;e+=1)ke[e].d(1);ke.length=we.length,we.length?Ce&&(Ce.d(1),Ce=null):Ce||(Ce=Zi(),Ce.c(),Ce.m(ne,null))}},i(e){oe||me((()=>{oe=Ee(n,tt,{duration:200}),oe.start()}))},o:e,d(e){e&&M(n),O(fe,e),O(he,e),O($e,e),O(be,e),xe&&xe.d(),O(ke,e),Ce&&Ce.d(),re=!1,se()}}}function Qi(e){let t,n,o=e[3]&&e[3].timeMatrix.length>0&&Ai(e);return{c(){o&&o.c(),t=A()},m(e,r){o&&o.m(e,r),L(e,t,r),n=!0},p(e,n){e[3]&&e[3].timeMatrix.length>0?o?(o.p(e,n),8&n[0]&&Le(o,1)):(o=Ai(e),o.c(),Le(o,1),o.m(t.parentNode,t)):o&&(Ce(),Me(o,1,1,(()=>{o=null})),Pe())},i(e){n||(Le(o),n=!0)},o(e){Me(o),n=!1},d(e){o&&o.d(e),e&&M(t)}}}function*Xi({prev:e,next:t,takeOffTime:n,segmentLength:o,getState:r,stateMap:s,increment:i=3e4}){let a=e.state;const l=6e4*e.sum,c=6e4*t.sum;for(let u=l+i;u<=c;u+=i){let i=e.fl;u>=c&&(i=t.fl);const d=new Date(n+u);let p;const m=c-l;if(0===m)p=t.p;else{const n=(u-l)/m;p=e.p.atFraction(t.p,n,o)}const[f]=r({date:d,latitude:p.latitude,longitude:p.longitude},i);if(f!==a){const e=s.get(a)([a,f]);if(yield{position:p,type:e,date:d,fl:i},f===t.state)break}a=f}}const Yi=()=>({[Li.name]:[],[Pi.name]:[]}),ea=st([ht,$t],(([e,t])=>{if(!t||!e||0===e.timeMatrix.length)return Yi();const n=t.getTime(),o=Yi(),r=e.timeMatrix,s=6e4*r[r.length-1][1],i=e.distanceMatrix;let a=r.length-1;for(const e of[Pi,Li]){const t=[];let l=null;for(const[o,[c,u,d]]of r.entries()){let r=d;0!==o&&o!==a||(r=0);const p=new Date(n+6e4*u),[m]=e.getState({date:p,latitude:c.latitude,longitude:c.longitude},r),f={p:c,sum:u,fl:r,state:m};if(l&&m!==l.state){const r={prev:l,next:f,takeOffTime:n,segmentLength:i[o][1]-i[o-1][1],getState:e.getState,stateMap:e.stateMap,increment:"sun"===e.name?3e4:6e4};for(const e of Xi(r))e.relpos=Math.round(1e4*(e.date.getTime()-n)/s)/100,t.push(e)}l=f}o[e.name]=t}return o}),Yi()),ta=e=>"sunriseEnd"!==e.type&&"sunsetStart"!==e.type;function na(t,n,o){let r,s,i,a,l,c,d,p,m,f=e;u(t,$t,(e=>o(0,l=e))),u(t,yt,(e=>o(4,c=e))),u(t,ea,(e=>o(1,d=e))),u(t,ht,(e=>o(3,p=e))),u(t,Ot,(e=>o(7,m=e))),t.$$.on_destroy.push((()=>f()));const g=()=>Math.round(100*i.fraction),h=()=>{const e=i.phase,t=i.fraction;return e&&t?t<=.02?"🌑":e<.5&&t<=.34?"🌒":e<.5&&t<=.65?"🌓":e<.5&&t<.97?"🌔":t>=.97?"🌕":e>=.5&&t>.65?"🌖":e>=.5&&t>.34?"🌗":"🌘":"☽"};return t.$$.update=()=>{2&t.$$.dirty[0]&&o(2,r=d.sun.filter((e=>["sunrise","sunset"].includes(e.type))).slice(0,3)),11&t.$$.dirty[0]&&o(5,s=d.moon.length>0||((e,t)=>{if(!e||!t)return"🔭";const n=e.route.points[0],[o]=Li.getState({date:t,latitude:n.latitude,longitude:n.longitude});return o})(p,l)),1&t.$$.dirty[0]&&(i=l?(e=>{const t=si(e),n={dec:di(t),ra:pi(t)},o=wi($i(e)),r=149598e3,s=Ys(Js(n.dec)*Js(o.dec)+Vs(n.dec)*Vs(o.dec)*Vs(n.ra-o.ra)),i=ei(r*Js(s),o.dist-r*Vs(s)),a=ei(Vs(n.dec)*Js(n.ra-o.ra),Js(n.dec)*Vs(o.dec)-Vs(n.dec)*Js(o.dec)*Vs(n.ra-o.ra));return{fraction:(1+Vs(i))/2,phase:.5+.5*i*(a<0?-1:1)/Math.PI,angle:a}})(l):{}),13&t.$$.dirty[0]&&o(6,a=r.length>0?"☀️":((e,t)=>{if(!e||!t)return"🔭";const n=e.route.points[0];let[o]=Pi.getState({date:t,latitude:n.latitude,longitude:n.longitude});return"day"===o?"☀️":([o]=Li.getState({date:t,latitude:n.latitude,longitude:n.longitude}),o||d.moon.length>0?h():"🔭")})(p,l))},[l,d,r,p,c,s,a,m,e=>{if(!e||!l)return"";const[t,n,o]=e.timeMatrix[0];return Pi.getState({date:l,latitude:t.latitude,longitude:t.longitude},0)[0]},e=>{if(!e||!c)return"";const[t,n,o]=e.timeMatrix[e.timeMatrix.length-1];return Pi.getState({date:c,latitude:t.latitude,longitude:t.longitude},0)[0]},(e,t=!1)=>e?t?e.toJSON().slice(11,19):e.getUTCSeconds(e)<30?e.toJSON().slice(11,16):new Date(e.getTime()+6e4).toJSON().slice(11,16):t?"--:--:--":"--:--",{astronomicalDawn:"Aube astronomique",astronomicalDusk:"Nuit astronomique",nauticalDawn:"Aube nautique",nauticalDusk:"Nuit nautique",civilDawn:"Aube civile",civilDusk:"Nuit civile",sunrise:"Lever du soleil",sunset:"Coucher du soleil",day:"Jour",night:"Nuit",moonrise:"Lever de lune",moonset:"Coucher de lune"},g,()=>{const e=i.phase,t=g();return t<=0?"Nouvelle lune":e<.5&&t<50?"Premier croissant":e<.5&&50===t?"Premier quartier":e<.5&&t<100?"Gibbeuse croissante":100===t?"Pleine Lune":e>=.5&&t>50?"Gibbeuse décroissante":e>=.5&&50===t?"Dernier quartier":"Dernier croissant"},h,e=>{switch(e){case"day":case"dayStart":return"#89d4ff";case"sunrise end":case"sunsetStart":case"sunriseEnd":return"lightskyblue";case"civil twilight":case"sunset":case"sunrise":return"#2383C2";case"nautical twilight":case"civilDawn":case"civilDusk":return"#0052A2";case"astronomical twilight":case"nauticalDawn":case"nauticalDusk":return"#02386E";case"night":case"astronomicalDawn":case"astronomicalDusk":return"#000B18";default:return"red"}}]}class oa extends Ie{constructor(e){super(),De(this,e,na,Qi,a,{},[-1,-1])}}function ra(e){let t,n,o,r,s,i;t=new Hs({}),o=new Ks({});let a="/map"===e[2]&&sa();return{c(){Fe(t.$$.fragment),n=F(),Fe(o.$$.fragment),r=F(),a&&a.c(),s=A()},m(e,l){Ae(t,e,l),L(e,n,l),Ae(o,e,l),L(e,r,l),a&&a.m(e,l),L(e,s,l),i=!0},p(e,t){"/map"===e[2]?a?4&t&&Le(a,1):(a=sa(),a.c(),Le(a,1),a.m(s.parentNode,s)):a&&(Ce(),Me(a,1,1,(()=>{a=null})),Pe())},i(e){i||(Le(t.$$.fragment,e),Le(o.$$.fragment,e),Le(a),i=!0)},o(e){Me(t.$$.fragment,e),Me(o.$$.fragment,e),Me(a),i=!1},d(e){je(t,e),e&&M(n),je(o,e),e&&M(r),a&&a.d(e),e&&M(s)}}}function sa(e){let t,n,o;return t=new Rs({}),n=new oa({}),{c(){Fe(t.$$.fragment),Fe(n.$$.fragment)},m(e,r){Ae(t,e,r),Ae(n,e,r),o=!0},i(e){o||(Le(t.$$.fragment,e),Le(n.$$.fragment,e),o=!0)},o(e){Me(t.$$.fragment,e),Me(n.$$.fragment,e),o=!1},d(e){je(t,e),je(n,e)}}}function ia(e){let t,n,o,r;return{c(){t=E("li"),n=E("a"),n.innerHTML='<span class="svelte-16bfhq8">CARTE</span>',I(n,"class","nav-link"),I(n,"href","#/map"),I(t,"class","nav-item svelte-16bfhq8"),B(t,"active","/map"===e[2])},m(s,i){L(s,t,i),P(t,n),o||(r=j(n,"click",e[4]),o=!0)},p(e,n){4&n&&B(t,"active","/map"===e[2])},d(e){e&&M(t),o=!1,r()}}}function aa(e){let t,n,o,r;return{c(){t=E("li"),n=E("a"),n.innerHTML='<span class="svelte-16bfhq8">EXPORT</span>',I(n,"class","nav-link"),I(n,"href","#/export"),I(t,"class","nav-item svelte-16bfhq8"),B(t,"active","/export"===e[2])},m(s,i){L(s,t,i),P(t,n),o||(r=j(n,"click",e[4]),o=!0)},p(e,n){4&n&&B(t,"active","/export"===e[2])},d(e){e&&M(t),o=!1,r()}}}function la(e){let t,n,o,r,i,a,l,c,u,p,f,g,h,v,$,y,b,x,w,k,C;const O=e[6].default,T=d(O,e,e[5],null);let _=e[1]&&ra(e),A=(e[1]||e[3]||"/map"===e[2])&&ia(e),D=(e[1]||"/export"===e[2])&&aa(e);return{c(){t=E("nav"),n=E("input"),o=F(),T&&T.c(),r=F(),_&&_.c(),i=F(),a=E("label"),a.innerHTML='<span class="navbar-toggler-icon"></span>',l=F(),c=E("ul"),u=E("li"),p=E("a"),f=E("strong"),f.textContent="OFP2MAP ",g=S("svg"),h=S("use"),v=F(),A&&A.c(),$=F(),D&&D.c(),y=F(),b=E("li"),x=E("a"),x.innerHTML='<span class="svelte-16bfhq8">AIDE</span>',I(n,"type","checkbox"),I(n,"id","menu"),I(n,"class","svelte-16bfhq8"),I(a,"class","navbar-toggler"),I(a,"for","menu"),I(f,"class","d-none"),R(h,"xlink:href","#home-symbol"),I(g,"class","svelte-16bfhq8"),I(p,"class","nav-link"),I(p,"href","#/"),I(u,"class","nav-item svelte-16bfhq8"),B(u,"active","/"===e[2]),I(x,"class","nav-link"),I(x,"href","#/help"),I(b,"class","nav-item svelte-16bfhq8"),B(b,"active","/help"===e[2]),I(c,"class","navbar-nav collapse navbar-collapse svelte-16bfhq8"),I(c,"id","navbarToggler"),I(t,"class","navbar navbar-expand-md navbar-light svelte-16bfhq8")},m(s,d){L(s,t,d),P(t,n),e[7](n),P(t,o),T&&T.m(t,null),P(t,r),_&&_.m(t,null),P(t,i),P(t,a),P(t,l),P(t,c),P(c,u),P(u,p),P(p,f),P(p,g),P(g,h),P(c,v),A&&A.m(c,null),P(c,$),D&&D.m(c,null),P(c,y),P(c,b),P(b,x),w=!0,k||(C=[j(p,"click",e[4]),j(x,"click",e[4])],k=!0)},p(e,[n]){T&&T.p&&32&n&&m(T,O,e,e[5],n,null,null),e[1]?_?(_.p(e,n),2&n&&Le(_,1)):(_=ra(e),_.c(),Le(_,1),_.m(t,i)):_&&(Ce(),Me(_,1,1,(()=>{_=null})),Pe()),4&n&&B(u,"active","/"===e[2]),e[1]||e[3]||"/map"===e[2]?A?A.p(e,n):(A=ia(e),A.c(),A.m(c,$)):A&&(A.d(1),A=null),e[1]||"/export"===e[2]?D?D.p(e,n):(D=aa(e),D.c(),D.m(c,y)):D&&(D.d(1),D=null),4&n&&B(b,"active","/help"===e[2])},i(e){w||(Le(T,e),Le(_),w=!0)},o(e){Me(T,e),Me(_),w=!1},d(n){n&&M(t),e[7](null),T&&T.d(n),_&&_.d(),A&&A.d(),D&&D.d(),k=!1,s(C)}}}function ca(e,t,n){let o,r,s;u(e,ht,(e=>n(1,o=e))),u(e,Mt,(e=>n(2,r=e))),u(e,xt,(e=>n(3,s=e)));let i,{$$slots:a={},$$scope:l}=t;return e.$$set=e=>{"$$scope"in e&&n(5,l=e.$$scope)},[i,o,r,s,()=>n(0,i.checked=!1,i),l,a,function(e){ie[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class ua extends Ie{constructor(e){super(),De(this,e,ca,la,a,{})}}function da(t){let n,o,r,s,i;return{c(){n=E("label"),o=T("Changer"),r=E("input"),I(r,"id",ha),I(r,"name",ha),I(r,"type","file"),I(r,"accept","application/pdf"),r.hidden=!0,I(n,"class","btn btn-outline-secondary btn-sm svelte-vs1fb2")},m(e,a){L(e,n,a),P(n,o),P(n,r),s||(i=j(r,"change",t[6]),s=!0)},p:e,d(e){e&&M(n),s=!1,i()}}}function pa(e){let t,n,o,r,i,a,l;return{c(){t=E("div"),n=E("input"),o=F(),r=E("label"),i=T(e[1]),I(n,"id",ha),I(n,"name",ha),I(n,"type","file"),I(n,"accept","application/pdf"),n.disabled=e[0],I(n,"class","custom-file-input svelte-vs1fb2"),I(r,"class","custom-file-label text-truncate svelte-vs1fb2"),I(r,"for",ha),B(r,"ready",e[2]),I(t,"class","custom-file svelte-vs1fb2"),B(t,"blink",!e[3])},m(s,c){L(s,t,c),P(t,n),P(t,o),P(t,r),P(r,i),a||(l=[j(n,"change",e[6]),j(n,"click",e[5],{once:!0})],a=!0)},p(e,o){1&o&&(n.disabled=e[0]),2&o&&W(i,e[1]),4&o&&B(r,"ready",e[2]),8&o&&B(t,"blink",!e[3])},d(e){e&&M(t),a=!1,s(l)}}}function ma(t){let n,o,r,s;function i(e,t){return e[3]?da:pa}let a=i(t),l=a(t);return{c(){n=E("form"),l.c(),o=F(),I(n,"class","form-inline")},m(e,i){L(e,n,i),l.m(n,null),P(n,o),r||(s=j(n,"submit",D(t[9])),r=!0)},p(e,[t]){a===(a=i(e))&&l?l.p(e,t):(l.d(1),l=a(e),l&&(l.c(),l.m(n,o)))},i:e,o:e,d(e){e&&M(n),l.d(),r=!1,s()}}}const fa=[{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.min.js"},{type:"script",url:"./js/lidojs.1.3.29.min.js"},{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.min.js"},{type:"script",url:"./js/wmo.1.3.29.var.js"},{type:"script",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.js"},{type:"script",url:"https://unpkg.com/pinch-zoom-element-js@1.1.2/dist/pinch-zoom-min.js"},{type:"link",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.css"}],ga=async(e,t)=>{const n=await e.getPage(t);return(await n.getTextContent()).items.map((e=>e.str)).join("")};let ha="file";function va(e,t,n){let o,r,s,i,a;u(e,mt,(e=>n(12,o=e))),u(e,vt,(e=>n(13,r=e))),u(e,$t,(e=>n(14,s=e))),u(e,ht,(e=>n(3,i=e))),u(e,bt,(e=>n(4,a=e)));let l,{kmlOptions:c}=t,d=!1,p=new ze,m="Choisir un OFP",f=!1;const g=oe();function h(){!function(e,t,n){let o=e.length;function r(){o=--o,o<1&&n()}t()?n():e.forEach((({type:e,url:t,options:n={async:!0,defer:!0}})=>{const s="script"===e,i=document.createElement(s?"script":"link");(t.startsWith("http")||t.startsWith("//"))&&(i.crossOrigin="anonymous");let a=!0;s?(i.src=t,i.async=n.async,i.defer=n.defer):(i.href=t,"prefetch"in n?(i.rel="prefetch",o-=1,a=!1):"preload"in n?(i.rel="preload",o-=1,a=!1):(i.rel="stylesheet",o-=1,a=!1)),a&&(i.onload=r),document.body.appendChild(i)}))}(fa,(()=>!!window["pdfjs-dist/build/pdf"]),(()=>{const e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.worker.min.js",l&&!l.destroyed||(l=new e.PDFWorker),p.resolve(!0),n(2,f=!0)}))}const $=e=>{const t=new FileReader;return new Promise(((n,o)=>{t.onload=e=>{if(!l||l.destroyed){const e=window["pdfjs-dist/build/pdf"];l=new e.PDFWorker}(async e=>{const t=window["pdfjs-dist/build/pdf"],n=[];let o=0;const r=await t.getDocument(e).promise,s=r.numPages;for(let e=1;e<=s;e+=1){const t=await ga(r,e);if(t.includes("(Long copy #1)"))n.push(t),o+=1;else{if(0!==o)break;t.includes("FPL SUMMARY")&&n.push(t)}}return n.join("\n")})({data:e.target.result,verbosity:0,worker:l}).then((e=>{if(e)try{const t=new editolido.Ofp("_PDFJS_"+e),r=new editolido.GeoGridIndex;r.data=window.WMO;const s=editolido.ogimetData(t,r);s.proxyImg=`https://ofp2map-gramet.vercel.app/api/${s.proxy}__${s.route.name.replace(/[^a-z0-9\-_]/giu,"_")}.png`,s.route.description=s.wmo.join(" "),t.ogimetData=s;let i=0,a=t.infos.fl;const l=t.route.segments.map((([e,t])=>(i+=e.distanceTo(t),[t,i,a])));l.unshift([t.route.points[0],0]),t.distanceMatrix=l;let u=[];try{u=t.wptNamesEET(t.route.points)}catch(e){}0===u.length?document.body.style.setProperty("--plane-halo-color","red"):document.body.style.setProperty("--plane-halo-color","var(--plane-color)"),t.timeMatrix=u;try{qt(),function(e,t){let n={...zt,...t};const o=qt();Rt(o,n);const r=e.description;if(o.setName(r),!e)return;const s=`${e.infos.departure}-${e.infos.destination}`,i=new editolido.Route(e.wptCoordinates(),{name:s,description:r}),a=new editolido.Route(e.wptCoordinatesAlternate(),{name:"Route Dégagement"}),l=new editolido.Route([i.points[0],i.points[i.points.length-1]]).split(300,{name:`Ortho ${s}`});let c=[];for(let t of e.tracks){let e=t.isComplete?"rnat":"rnat_incomplete";o.addLine(e,t);let n=new editolido.GeoPoint(t.points[0],{name:t.name,description:t.description});o.addPoint(e,n),t.isMine&&(c.push(n),n=new editolido.GeoPoint(t.points[t.points.length-1],{name:t.name,description:t.description}),c.push(n),o.addPoint(e,n))}o.addLine("greatcircle",l),o.addLine("rmain",i),o.addPoints("rmain",i,{excluded:c}),o.addLine("ralt",a),o.addPoints("ralt",a)}(t,c),n(t)}catch(e){o(e)}}catch(e){o(e)}else o(Error("OFP non reconnu. Attention il y a 2 OFP dans PilotMission, il faut bien choisir celui nommé « Dossier de vol OFP »."))}),(e=>{o(e)}))},t.onerror=e=>{o(Error("Fichier illisible !"))},t.readAsArrayBuffer(e)}))};return e.$$set=e=>{"kmlOptions"in e&&n(8,c=e.kmlOptions)},[d,m,f,i,a,h,async function(e){n(0,d=!0),v(mt,o=!1,o),h(),await p.promise.then((()=>{const t=e.target.files[0],o=e.target.closest("form");t&&(v(vt,r="loading",r),v($t,s=void 0,s),n(1,m=e.target.value.split(/([\\/])/g).pop()),g("change",m),$(t).then((t=>{v(ht,i=t,i),v(bt,a=void 0,a),v(vt,r="success",r),o.blur(),e.target.blur(),o.reset()}),(e=>{v(vt,r=e,r),v(ht,i=void 0,i),o.reset()})),window.location.hash="#/map")})),n(0,d=!1)},async function(e){n(0,d=!0),v(vt,r="loading",r),h(),await p.promise.then((()=>{v(ht,i=void 0,i);try{qt(),v(bt,a=e.target.value,a),v(vt,r="success",r)}catch(e){v(vt,r=e,r)}window.location.hash="#/map"})),n(0,d=!1)},c,function(t){re(e,t)},e=>!at.includes(e)]}class $a extends Ie{constructor(e){super(),De(this,e,va,ma,a,{kmlOptions:8})}}function ya(e){let t,n,o;const r=e[3].default,s=d(r,e,e[2],null);return{c(){t=E("page"),s&&s.c(),I(t,"class","svelte-1de5e3b"),B(t,"fadein",!1===e[0]),B(t,"d-none",!0===e[0])},m(e,n){L(e,t,n),s&&s.m(t,null),o=!0},p(e,[n]){s&&s.p&&4&n&&m(s,r,e,e[2],n,null,null),1&n&&B(t,"fadein",!1===e[0]),1&n&&B(t,"d-none",!0===e[0])},i(r){o||(Le(s,r),n||me((()=>{n=Ee(t,e[1],{}),n.start()})),o=!0)},o(e){Me(s,e),o=!1},d(e){e&&M(t),s&&s.d(e)}}}function ba(e,t,n){let{$$slots:o={},$$scope:r}=t,{hidden:s}=t;return e.$$set=e=>{"hidden"in e&&n(0,s=e.hidden),"$$scope"in e&&n(2,r=e.$$scope)},[s,(e,t,n)=>{if(void 0===s)return Ye(e,t)},r,o]}class xa extends Ie{constructor(e){super(),De(this,e,ba,ya,a,{hidden:0})}}function wa(t){let n,o;return{c(){n=T(t[1]),o=T(".com")},m(e,t){L(e,n,t),L(e,o,t)},p:e,d(e){e&&M(n),e&&M(o)}}}function ka(e){let t;return{c(){t=T("ce lien")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ca(e){let t;return{c(){t=T("ogimet.com")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Pa(e){let t;return{c(){t=T("Guide d'interprétation")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function La(e){let t;return{c(){t=T("OFP2MAP-AURORA")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ma(e){let t;return{c(){t=T("OFP2MAP-ETOPS")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Oa(e){let t;return{c(){t=T("OFP2MAP-MENU")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ea(e){let t;return{c(){t=T("OFP2MAP-PLANE FINDER")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Sa(e){let t;return{c(){t=T("OFP2MAP-PLUGIN")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ta(e){let t;return{c(){t=T("liste des commits")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function _a(e){let t;return{c(){t=T("Equal Earth")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Fa(t){let n,o;return{c(){n=T(t[1]),o=T(".com")},m(e,t){L(e,n,t),L(e,o,t)},p:e,d(e){e&&M(n),e&&M(o)}}}function Aa(e){let t;return{c(){t=T("l'app")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function ja(e){let t;return{c(){t=T("le proxy")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Da(e){let t;return{c(){t=E("span"),t.innerHTML="Fly<span>Tax</span>",I(t,"class","flytax")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function Ia(e){let t,n,o,r,s,i,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,O,S,_,A,j,D,z,R,q,W,N,U,H,G,B,K,Z,J,V,Q,X,Y,ee,te,ne,oe,re,se,ie,ae,le,ce,ue,de,pe,me,fe,ge,he,ve,$e,ye,be,xe,we,ke,Ce,Pe,Oe,Ee,Se,Te,_e,De,Ie,ze,Re,qe,We,Ne,Ue,He,Ge,Be,Ke,Ze,Je,Ve,Qe,Xe,Ye,et,tt,nt,ot,rt,st,it,at,lt,ct,ut,dt,pt,mt,ft,gt,ht,vt,$t,yt,bt,xt,wt,kt,Ct,Pt,Lt,Mt,Ot,Et,St,Tt,_t,Ft,At,jt,Dt,It,zt,Rt,qt,Wt,Nt,Ut,Ht,Gt,Bt,Kt,Zt,Jt,Vt,Qt,Xt,Yt,en,tn,nn,on,rn,sn,an,ln,cn,un,dn,pn,mn,fn,gn,hn,vn,$n,yn,bn,xn,wn,kn,Cn,Pn,Ln,Mn,On,En,Sn,Tn,_n,Fn,An,jn,Dn=window.atob("VmluY2VudCBCb3NzeQ==")+"";z=new ks({props:{href:`https://www.${e[1].toLowerCase()}.com`,$$slots:{default:[wa]},$$scope:{ctx:e}}});let In=!0!==navigator.standalone&&function(e){let t,n,o,r;return n=new ks({props:{href:"http://flyingeek.github.io/lido-online/index.html",$$slots:{default:[ka]},$$scope:{ctx:e}}}),{c(){t=T("Pour mémoire, dans un navigateur, il suffit de partager l'url ou "),Fe(n.$$.fragment),o=T(".")},m(e,s){L(e,t,s),Ae(n,e,s),L(e,o,s),r=!0},i(e){r||(Le(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&M(t),je(n,e),e&&M(o)}}}(e);return pe=new ks({props:{href:e[0],$$slots:{default:[Ca]},$$scope:{ctx:e}}}),ye=new ks({props:{href:"http://www.ogimet.com/guia_gramet.phtml.en",$$slots:{default:[Pa]},$$scope:{ctx:e}}}),xt=new ks({props:{href:"https://www.icloud.com/shortcuts/7a84be04b4f04607876d20a08c39c2ef",$$slots:{default:[La]},$$scope:{ctx:e}}}),Pt=new ks({props:{href:"https://www.icloud.com/shortcuts/85acce199353490c9f3a3db0618da19e",$$slots:{default:[Ma]},$$scope:{ctx:e}}}),Et=new ks({props:{href:"https://www.icloud.com/shortcuts/ce764c49281643d4a63aec3d8bf848be",$$slots:{default:[Oa]},$$scope:{ctx:e}}}),Ft=new ks({props:{href:"https://www.icloud.com/shortcuts/db21157c4fb441919eed9fa7e2cb644f",$$slots:{default:[Ea]},$$scope:{ctx:e}}}),It=new ks({props:{href:"https://www.icloud.com/shortcuts/1ef02bdaecb6406bb600429dccbdfac6",$$slots:{default:[Sa]},$$scope:{ctx:e}}}),Bt=new ks({props:{href:"https://github.com/flyingeek/lido-online/commits/master",$$slots:{default:[Ta]},$$scope:{ctx:e}}}),nn=new ks({props:{href:"https://equal-earth.com/physical/",$$slots:{default:[_a]},$$scope:{ctx:e}}}),cn=new ks({props:{href:`https://www.${e[1].toLowerCase()}.com`,$$slots:{default:[Fa]},$$scope:{ctx:e}}}),xn=new ks({props:{href:"https://github.com/flyingeek/lido-online",$$slots:{default:[Aa]},$$scope:{ctx:e}}}),kn=new ks({props:{href:"https://github.com/flyingeek/ofp2map-gramet",$$slots:{default:[ja]},$$scope:{ctx:e}}}),Fn=new ks({props:{href:"https://flyingeek.github.io/flytax/",rel:"noopener",$$slots:{default:[Da]},$$scope:{ctx:e}}}),{c(){t=E("h2"),t.textContent="Préambule",n=F(),o=E("p"),o.textContent="OFP2MAP est une application PWA (ou Web Application), elle peut être lancée soit depuis un navigateur, soit depuis l'écran d'accueil de l'iPad. Initialement, simple convertisseur de l'OFP en KML, OFP2MAP est devenu une vraie application de cartographie. OFP2MAP nécessite des navigateurs récents pour fonctionner. Safari 14 iOS/Mac est compatible, Chrome 83 fonctionne aussi.",r=F(),s=E("p"),s.textContent="L'OFP ne transite sur aucun serveur, seule une route calculée (basée sur au plus 21 stations météo) est transmise à l'hébergeur du proxy (voir plus bas) puis à Ogimet.com pour récupérer le Gramet. L'app ne collecte aucune donnée.",i=F(),a=E("h2"),a.textContent="Utilisation",l=F(),c=E("ol"),u=E("li"),u.innerHTML="<p>Dans Pilot Mission, onglet «Dossier de vol», affichez le PDF nommé &quot;Dossier de vol OFP&quot;. Sur la gauche, cliquez sur le carré avec une flèche vers le haut. Choisissez «Enregistrer dans Fichiers». Dans l&#39;app, c&#39;est cet OFP qu&#39;il faut ensuite sélectionner.</p>",d=F(),p=E("li"),m=E("p"),m.textContent=`La carte par défaut dépend de la distance: ${e[1]} 2020, puis Mercator jusqu'à 1500nm puis LAMBERT, il est possible sur la carte, en haut à gauche, de basculer sur d'autres projections :`,f=F(),g=E("ul"),h=E("li"),h.textContent="LAMBERT NORTH (parallèles sécants N30 et N65) est recommandée au-dessus du N40",v=F(),$=E("li"),$.textContent="LAMBERT SOUTH & PACIFIC (sécants N30 et S15 ) sont recommandées sous N30",y=F(),b=E("li"),b.textContent="THE WORLD permet de disposer d'un Atlas off-line, c'est une projection Times",x=F(),w=E("li"),w.textContent="MERCATOR est une Web Mercator avec un thème est inspiré des cartes VFR. Il y a 12 niveaux de zoom, dont 6 disponibles off-line",k=F(),C=E("li"),C.textContent="=Physique= est un Atlas physique basé sur une projection Equal Earth (qui montre les continents et les pays à leur taille réelle) avec des étiquettes en français (par Tom Patterson).",O=F(),S=E("li"),_=T(e[1]),A=T(" 2020 est une carte VFR, elle couvre France/Belgique/Luxembourg/Suisse et "),j=T(Dn),D=T(" a autorisé son utilisation. Sur cette carte, déjà très dense en informations, la route Gramet, l'orthodromie et les FIR sont désactivées. La dernière version est disponible sur "),Fe(z.$$.fragment),R=T("."),q=F(),W=E("ol"),W.innerHTML="<li>Navigation dans la carte: on peut avec un doigt déplacer la carte, zoomer ou orienter la carte avec deux doigts.<br/><strong><big>☞</big> Il est aussi possible de modifier l&#39;angle de vue en balayant de bas en haut avec deux doigts</strong>.</li>",N=F(),U=E("h2"),U.textContent="Mémo visuel",H=F(),G=E("p"),G.innerHTML='<img src="./images/map-help.webp" alt="mémo visuel" id="memovisuel"/><br/>',B=F(),K=E("h2"),K.textContent="Réglages des calques",Z=F(),J=E("p"),J.innerHTML='<figure><img src="./images/layers-settings.webp" alt="layers settings help"/><figcaption>Réglages des calques</figcaption></figure>La carte, en haut à droite, dispose d&#39;un bouton pour personnaliser les calques et les couleurs. Un calque contient un type d&#39;information, par exemple les cercles ETOPS, les FIR réglementées, les tracks, la route...\nIl est possible d&#39;afficher ou de masquer chaque calque en utilisant la coche qui précède son nom. La plupart des calques permettent de choisir la couleur et l&#39;opacité, certains permettent de choisir une icône. Les icônes sont surtout utiles pour l’export dans les fichiers KML.\nPour les aéroports (le type avion est déterminé dans l&#39;OFP), il est possible de choisir entre 2 thèmes: couleur du statut ou vert/rouge. Si vous optez pour le second, le statut reste accessible en cliquant sur un terrain (popup).\nEnfin, trois boutons permettent la sauvegarde, la restauration ou un retour aux valeurs par défaut. Le bouton RESTAURER permet, après avoir fait des modifications temporaires (non sauvegardées), de revenir rapidement aux réglages précédents.',V=F(),Q=E("p"),Q.textContent="Pour vous entraîner, je vous recommande de modifier la couleur des terrains en vert/rouge et de sauvegarder votre choix.",X=F(),Y=E("h2"),Y.textContent="Particularités de l'iPad",ee=F(),te=E("p"),te.textContent="OFP2MAP ne peut être lancé que depuis l'écran d'accueil, l'application se lance en plein écran. On ne peut pas recharger la page comme dans un navigateur : il faudra pour cela aller dans le menu d'aide (cet écran) ou un bouton spécifique sera affiché en haut.",ne=F(),oe=E("p"),re=T("Pour partager le lien vers OFP2MAP, utilisez le bouton situé en haut sur cette page, ou le lien situé sous le logo sur la page d'accueil, puis utilisez AirDrop. "),In&&In.c(),se=F(),ie=E("p"),ie.textContent="À noter que parfois, des bugs d'affichage peuvent apparaître :  lorsque l'on retourne sur l'app, l'app est zoomée, il faut alors juste dézoomer en utilisant un pinch de deux doigts sur la barre de menu. Il est aussi possible de tuer l'app,  même en mode déconnecté, pour la relancer.",ae=F(),le=E("h2"),le.textContent="GRAMET",ce=F(),ue=E("p"),de=T("Le GRAMET est un météogramme représentant le temps et l'espace. Il indique, en tout point de la route, et à l'heure de passage estimée, une coupe verticale de la météo prévue.\nLe GRAMET est réalisé par "),Fe(pe.$$.fragment),me=T(" à partir d'une route calculée. Il est possible d'afficher le GRAMET et sa route sur la carte. La route est particulièrement utile lors des vols océaniques car il n'y a aucune station en mer.\nPour construire la route du GRAMET, on utilise non pas les waypoints, mais au plus 21 stations météo (WMO). Il y a au total 13000 WMO dans le monde. Le GRAMET débute toujours à l'heure hh:00. Pour un decollage à 19h30, il débutera à 19h, pour un décollage à 19h31, il débutera à 20h. Pour les OFP anciens, c'est l'heure actuelle qui est envoyée. En mode déconnecté, OFP2MAP utilise la version du GRAMET qu'il a mis en cache pendant 48h. Après l'heure de décollage initialement prévue, vous pouvez forcer une mise à jour, soit en rechargeant l'ofp, soit en changeant brièvement de page."),fe=F(),ge=E("p"),ge.textContent="Pour afficher le Gramet, cliquez sur sa miniature à gauche de l'OFP. Pour afficher la route, direction le réglage des calques de la carte. Par défaut elle est affichée en bleu. En fonction de l'heure de décollage (modifiable), le Gramet et sa miniature affichent la position avion. Avant l'horaire prévu de décollage, un bouton play permet de lancer une animation.",he=F(),ve=E("p"),$e=T("Pour mieux comprendre le GRAMET, je vous conseille son "),Fe(ye.$$.fragment),be=T("."),xe=F(),we=E("h2"),we.textContent="Position estimée / GPS",ke=F(),Ce=E("p"),Ce.textContent="Il est possible d'afficher la position avion sur la carte (bouton en forme de mire). Si vous l'autorisez, la position GPS sera prise en compte. Si la localisation GPS semble ne pas fonctionner (au sol ou en vol avec un gps externe), vérifiez que vous n'avez pas désactivé la localisation dans iPad / Réglages / Confidentialité / Service de localisation / Sites Safari. Vous devez choisir «Lorsque l'app est active» ou «Demander la prochaine fois». Le Bouton a deux ou trois positions: OFF, ON centré, ON non centré. Si, dans la position ON centré, vous déplacez la carte, il passe en ON non centré. L'appui suivant le repassera en ON centré. Un dernier appui le mettra sur OFF.",Pe=F(),Oe=E("p"),Oe.textContent="En l'absence de GPS, l'avion dans la barre de menu (à gauche de l'heure de décollage) permet d'afficher la position estimée. Si la reconnaissance des waypoints s'est bien effectuée, les estimées de l'OFP seront prises en compte. Sinon, ce sera un simple ratio horaire, merci de me transmettre l'OFP dans ce cas (ce sera signalé par un avion rouge dans la barre de menu). L'heure de décollage est modifiable et permet toujours d'ajuster la position estimée.",Ee=F(),Se=E("h2"),Se.textContent="ETOPS",Te=F(),_e=E("p"),_e.textContent="La capacité ETOPS est determinée depuis l'OFP et les cercles sont tracés. Un drapeau ETOPS apparait dans le pavé d'information de l'OFP si le carburant est limitatif (20mn, soit environ 2T de marge sur 777). Pour avoir plus d'informations vous pouvez utiliser un plugin (voir ci-dessous).",De=F(),Ie=E("h2"),Ie.textContent="Éphémérides",ze=F(),Re=E("p"),Re.textContent="Un calcul astronomique de la position du soleil est effectué en tenant compte de la route de l’OFP, du FL de l’OFP, et de l’heure de décollage choisie dans l’application. La précision attendue de l’algorithme est de ±1 min sous 72° de latitude et de 10 min au-delà. Comme les estimées sont à ±1 min, la précision finale devrait être de ±2 min si le FL de l'OFP est bien respecté.",qe=F(),We=E("p"),We.textContent="Le symbole du widget est dynamique:",Ne=F(),Ue=E("ul"),Ue.innerHTML="<li>☀️ si le soleil est visible pendant le vol</li> \n<li>🌕🌖🌗🌘🌑🌒🌓🌔 si la lune est visible pendant le vol</li> \n<li>🔭 si vous restez dans le noir.</li>",He=F(),Ge=E("p"),Ge.textContent="Le widget affiche éventuellement les heures de lever ou de coucher. Cliquer sur le widget affiche les éphémérides du vol, elles contiennent les aubes et crépuscules civils, nautiques et astronomiques, la phase de la lune et son illumination, les levers et couchers de lune.",Be=F(),Ke=E("p"),Ke.textContent="Si OFP2MAP n'a pas pu récupérer les estimées de l'OFP (voir le paragraphe sur la position estimée), le widget ne s'affichera pas.",Ze=F(),Je=E("p"),Je.innerHTML="En anglais le terme <q>twilight</q> est utilisé indifféremment pour l&#39;aube ou le crépuscule. En français, la chronologie des événements est:",Ve=F(),Qe=E("table"),Qe.innerHTML="<thead><tr><th>Angle</th><th>▲ Soleil levant</th><th>▼ Soleil couchant</th></tr></thead> \n<tbody><tr><td></td><td>Jour</td><td>Jour</td></tr> \n<tr><td>-0.83°</td><td>↑ Lever du soleil (fin aube civile)</td><td>↓ Coucher du soleil (début crépuscule civil)</td></tr> \n<tr><td>-6°</td><td>↑ début aube civile (jour civil)</td><td>↓ fin du crépuscule civil (début nuit civile)</td></tr> \n<tr><td>-12°</td><td>↑ début aube nautique (jour nautique)</td><td>↓ fin du crépuscule nautique (début nuit nautique)</td></tr> \n<tr><td>-18°</td><td>↑ début aube astronomique (jour astronomique)</td><td>↓ fin du crépuscule astronomique (début nuit astronomique)</td></tr> \n<tr><td></td><td>↑ Nuit</td><td>↓ Nuit</td></tr></tbody>",Xe=F(),Ye=E("h2"),Ye.textContent="Mode off-line / Cache",et=F(),tt=E("p"),tt.textContent="Une fois un premier OFP chargé, il est possible même en mode déconnecté de charger un autre OFP pour l'exporter. Le cache de l'App vous permettra de naviguer sur les cartes déjà visualisées. Pour mettre en cache les cartes, il suffit de les consulter.",nt=F(),ot=E("p"),ot.textContent=`Il existe aussi un bouton de mise en cache : le pictogramme ↓ situé à droite du sélecteur de carte. Sur les cartes LAMBERT, THE WORLD, =Physique= et ${e[1]}, il mettra en cache la totalité de la carte. Sur la MERCATOR, seule la partie de carte incluant la route sera mise en cache.`,rt=F(),st=E("p"),st.textContent=`Les premières mises en cache peuvent prendre du temps : sur la Mercator, un vol LC peut nécessiter le téléchargement de 40Mo de données. Les caches des autres projections utilisent : 7Mo pour la NORTH, 4Mo pour la PACIFIC, 7Mo pour la SOUTH, 32Mo pour THE WORLD, 40Mo pour =Physique= et 40Mo pour ${e[1]}.`,it=F(),at=E("h2"),at.textContent="Export / Plugins (Raccourcis)",lt=F(),ct=E("p"),ct.textContent="La page Export permet d'exporter la route et les tracks au format KML, elle dispose de ses propres réglages pour générer le KML. Par défaut les réglages sont ceux de la carte. Si vous avez déjà sauvegardé un réglage d'export, alors le bouton « COMME CARTE » permet de récupérer les réglages choisis pour la carte.",ut=F(),dt=E("p"),dt.innerHTML='Sur iPad, l&#39;export des fichiers KML affiche une page un peu particulière, utilisez le bouton <svg style="vertical-align: bottom;"><use xlink:href="#share-symbol"></use></svg> pour choisir l&#39;app qui recevra le fichier. Cliquez en haut à gauche sur OK pour revenir à OFP2MAP. Alternativement, vous pouvez utiliser « Options... » pour définir une app qui recevra les fichiers kml par défaut et utiliser Ouvrir dans « nom de l&#39;app ».',pt=F(),mt=E("p"),mt.textContent="Un raccourci peut être lancé depuis la page Export, il recevra les fichiers KML, la route Lido et le Gramet. Le nom du raccourci est modifiable, il faut que le raccourci soit installé avant de le lancer.",ft=F(),gt=E("p"),gt.innerHTML="<strong>Plugins depuis la carte :</strong> Il est aussi possible de lancer des raccourcis ayant accès au contenu de l&#39;OFP depuis le pavé d&#39;informations du vol dans la barre de menu. Il faut autoriser les raccourcis non fiables dans Réglages/Raccourcis, puis installer le(s) plugin(s).",ht=F(),vt=E("p"),vt.textContent="Liste des plugins:",$t=F(),yt=E("ul"),bt=E("li"),Fe(xt.$$.fragment),wt=T(" NOAA Aurora Forecast 30-90mn et prévisions à 3 jours."),kt=F(),Ct=E("li"),Fe(Pt.$$.fragment),Lt=T(" calcule un cartouche ETOPS actualisé"),Mt=F(),Ot=E("li"),Fe(Et.$$.fragment),St=T(" menu affichant l'ensemble des plugins installés"),Tt=F(),_t=E("li"),Fe(Ft.$$.fragment),At=T(" recherche l'avion avec flightaware.com"),jt=F(),Dt=E("li"),Fe(It.$$.fragment),zt=T(" permet de visualiser les données (format json) si vous souhaitez développer un plugin."),Rt=F(),qt=E("h2"),qt.textContent="Mise à jour",Wt=F(),Nt=E("p"),Nt.textContent="L'app détecte les mises à jour automatiquement, normalement vous n'avez rien à faire. Eventuellement un prompt peut\napparaitre vous demandant d'autoriser cette mise à jour. La version AIRAC et le type avion détecté dans l'OFP sont affichés en bas à droite de la carte dans le champ d'attribution.",Ut=F(),Ht=E("p"),Gt=T("Pour connaître les dernières nouveautés d'OFP2MAP, je poste dans Yammer/Mapsme et Teams/MyConcorde. En attendant une solution plus conviviale, vous pouvez aussi consulter la "),Fe(Bt.$$.fragment),Kt=T(' sur GitHub (ce n\'est pas "user friendly").'),Zt=F(),Jt=E("h2"),Jt.textContent="Crédits",Vt=F(),Qt=E("ul"),Xt=E("li"),Xt.textContent="Les données terrains/FIR sont fournies par Olivier Ravet forum Yammer/Mapsme",Yt=F(),en=E("li"),tn=T("=Physique= est une carte de Tom Patterson disponible sur "),Fe(nn.$$.fragment),on=F(),rn=E("li"),sn=T("La dernière version de la carte "),an=T(e[1]),ln=T(" est disponible sur le site "),Fe(cn.$$.fragment),un=F(),dn=E("li"),dn.textContent="Les autres cartes sont de Jean-Baptiste Denizot forum Yammer/QGIS & Avenza Maps",pn=F(),mn=E("li"),mn.textContent="Le GRAMET provient du site ogimet.com",fn=F(),gn=E("li"),gn.textContent="Le site est développé en javascript à l'aide du framework SVELTE",hn=F(),vn=E("li"),vn.textContent="La partie serveur (un proxy pour pouvoir récupérer l'image du GRAMET) est en python.",$n=F(),yn=E("li"),bn=T("Eric Delord CDB 777 est l'auteur. Le code source est disponible sur GitHub pour "),Fe(xn.$$.fragment),wn=T(" et "),Fe(kn.$$.fragment),Cn=F(),Pn=E("h2"),Pn.textContent="Hébergement",Ln=F(),Mn=E("p"),Mn.textContent="L'hébergement des images est normalement fourni par alwaysdata.com (pack gratuit) mais en raison d'un blacklistage sur le réseau internet d'AF, les fonds de cartes sont à présent hébergés sur netlify. Le proxy gramet est lui dorénavant hébergé sur vercel. Le site est hébergé sur GitHub.",On=F(),En=E("h2"),En.textContent="Liens",Sn=F(),Tn=E("ul"),_n=E("li"),Fe(Fn.$$.fragment),An=T(" une aide aux calculs des frais professionnels (même auteur)."),I(t,"id","md_préambule"),I(a,"id","md_utilisation"),I(W,"start","3"),I(U,"id","md_mémo-visuel"),I(K,"id","md_réglages-des-calques"),I(Y,"id","md_particularités-de-lipad"),I(le,"id","md_gramet"),I(we,"id","md_position-estimée--gps"),I(Se,"id","md_etops"),I(Ie,"id","md_éphémérides"),I(Qe,"class","table"),I(Ye,"id","md_mode-off-line--cache"),I(at,"id","md_export--plugins-raccourcis"),I(qt,"id","md_mise-à-jour"),I(Jt,"id","md_crédits"),I(Pn,"id","md_hébergement"),I(En,"id","md_liens")},m(e,M){L(e,t,M),L(e,n,M),L(e,o,M),L(e,r,M),L(e,s,M),L(e,i,M),L(e,a,M),L(e,l,M),L(e,c,M),P(c,u),P(c,d),P(c,p),P(p,m),P(p,f),P(p,g),P(g,h),P(g,v),P(g,$),P(g,y),P(g,b),P(g,x),P(g,w),P(g,k),P(g,C),P(g,O),P(g,S),P(S,_),P(S,A),P(S,j),P(S,D),Ae(z,S,null),P(S,R),L(e,q,M),L(e,W,M),L(e,N,M),L(e,U,M),L(e,H,M),L(e,G,M),L(e,B,M),L(e,K,M),L(e,Z,M),L(e,J,M),L(e,V,M),L(e,Q,M),L(e,X,M),L(e,Y,M),L(e,ee,M),L(e,te,M),L(e,ne,M),L(e,oe,M),P(oe,re),In&&In.m(oe,null),L(e,se,M),L(e,ie,M),L(e,ae,M),L(e,le,M),L(e,ce,M),L(e,ue,M),P(ue,de),Ae(pe,ue,null),P(ue,me),L(e,fe,M),L(e,ge,M),L(e,he,M),L(e,ve,M),P(ve,$e),Ae(ye,ve,null),P(ve,be),L(e,xe,M),L(e,we,M),L(e,ke,M),L(e,Ce,M),L(e,Pe,M),L(e,Oe,M),L(e,Ee,M),L(e,Se,M),L(e,Te,M),L(e,_e,M),L(e,De,M),L(e,Ie,M),L(e,ze,M),L(e,Re,M),L(e,qe,M),L(e,We,M),L(e,Ne,M),L(e,Ue,M),L(e,He,M),L(e,Ge,M),L(e,Be,M),L(e,Ke,M),L(e,Ze,M),L(e,Je,M),L(e,Ve,M),L(e,Qe,M),L(e,Xe,M),L(e,Ye,M),L(e,et,M),L(e,tt,M),L(e,nt,M),L(e,ot,M),L(e,rt,M),L(e,st,M),L(e,it,M),L(e,at,M),L(e,lt,M),L(e,ct,M),L(e,ut,M),L(e,dt,M),L(e,pt,M),L(e,mt,M),L(e,ft,M),L(e,gt,M),L(e,ht,M),L(e,vt,M),L(e,$t,M),L(e,yt,M),P(yt,bt),Ae(xt,bt,null),P(bt,wt),P(yt,kt),P(yt,Ct),Ae(Pt,Ct,null),P(Ct,Lt),P(yt,Mt),P(yt,Ot),Ae(Et,Ot,null),P(Ot,St),P(yt,Tt),P(yt,_t),Ae(Ft,_t,null),P(_t,At),P(yt,jt),P(yt,Dt),Ae(It,Dt,null),P(Dt,zt),L(e,Rt,M),L(e,qt,M),L(e,Wt,M),L(e,Nt,M),L(e,Ut,M),L(e,Ht,M),P(Ht,Gt),Ae(Bt,Ht,null),P(Ht,Kt),L(e,Zt,M),L(e,Jt,M),L(e,Vt,M),L(e,Qt,M),P(Qt,Xt),P(Qt,Yt),P(Qt,en),P(en,tn),Ae(nn,en,null),P(Qt,on),P(Qt,rn),P(rn,sn),P(rn,an),P(rn,ln),Ae(cn,rn,null),P(Qt,un),P(Qt,dn),P(Qt,pn),P(Qt,mn),P(Qt,fn),P(Qt,gn),P(Qt,hn),P(Qt,vn),P(Qt,$n),P(Qt,yn),P(yn,bn),Ae(xn,yn,null),P(yn,wn),Ae(kn,yn,null),L(e,Cn,M),L(e,Pn,M),L(e,Ln,M),L(e,Mn,M),L(e,On,M),L(e,En,M),L(e,Sn,M),L(e,Tn,M),P(Tn,_n),Ae(Fn,_n,null),P(_n,An),jn=!0},p(e,[t]){const n={};8&t&&(n.$$scope={dirty:t,ctx:e}),z.$set(n);const o={};1&t&&(o.href=e[0]),8&t&&(o.$$scope={dirty:t,ctx:e}),pe.$set(o);const r={};8&t&&(r.$$scope={dirty:t,ctx:e}),ye.$set(r);const s={};8&t&&(s.$$scope={dirty:t,ctx:e}),xt.$set(s);const i={};8&t&&(i.$$scope={dirty:t,ctx:e}),Pt.$set(i);const a={};8&t&&(a.$$scope={dirty:t,ctx:e}),Et.$set(a);const l={};8&t&&(l.$$scope={dirty:t,ctx:e}),Ft.$set(l);const c={};8&t&&(c.$$scope={dirty:t,ctx:e}),It.$set(c);const u={};8&t&&(u.$$scope={dirty:t,ctx:e}),Bt.$set(u);const d={};8&t&&(d.$$scope={dirty:t,ctx:e}),nn.$set(d);const p={};8&t&&(p.$$scope={dirty:t,ctx:e}),cn.$set(p);const m={};8&t&&(m.$$scope={dirty:t,ctx:e}),xn.$set(m);const f={};8&t&&(f.$$scope={dirty:t,ctx:e}),kn.$set(f);const g={};8&t&&(g.$$scope={dirty:t,ctx:e}),Fn.$set(g)},i(e){jn||(Le(z.$$.fragment,e),Le(In),Le(pe.$$.fragment,e),Le(ye.$$.fragment,e),Le(xt.$$.fragment,e),Le(Pt.$$.fragment,e),Le(Et.$$.fragment,e),Le(Ft.$$.fragment,e),Le(It.$$.fragment,e),Le(Bt.$$.fragment,e),Le(nn.$$.fragment,e),Le(cn.$$.fragment,e),Le(xn.$$.fragment,e),Le(kn.$$.fragment,e),Le(Fn.$$.fragment,e),jn=!0)},o(e){Me(z.$$.fragment,e),Me(In),Me(pe.$$.fragment,e),Me(ye.$$.fragment,e),Me(xt.$$.fragment,e),Me(Pt.$$.fragment,e),Me(Et.$$.fragment,e),Me(Ft.$$.fragment,e),Me(It.$$.fragment,e),Me(Bt.$$.fragment,e),Me(nn.$$.fragment,e),Me(cn.$$.fragment,e),Me(xn.$$.fragment,e),Me(kn.$$.fragment,e),Me(Fn.$$.fragment,e),jn=!1},d(e){e&&M(t),e&&M(n),e&&M(o),e&&M(r),e&&M(s),e&&M(i),e&&M(a),e&&M(l),e&&M(c),je(z),e&&M(q),e&&M(W),e&&M(N),e&&M(U),e&&M(H),e&&M(G),e&&M(B),e&&M(K),e&&M(Z),e&&M(J),e&&M(V),e&&M(Q),e&&M(X),e&&M(Y),e&&M(ee),e&&M(te),e&&M(ne),e&&M(oe),In&&In.d(),e&&M(se),e&&M(ie),e&&M(ae),e&&M(le),e&&M(ce),e&&M(ue),je(pe),e&&M(fe),e&&M(ge),e&&M(he),e&&M(ve),je(ye),e&&M(xe),e&&M(we),e&&M(ke),e&&M(Ce),e&&M(Pe),e&&M(Oe),e&&M(Ee),e&&M(Se),e&&M(Te),e&&M(_e),e&&M(De),e&&M(Ie),e&&M(ze),e&&M(Re),e&&M(qe),e&&M(We),e&&M(Ne),e&&M(Ue),e&&M(He),e&&M(Ge),e&&M(Be),e&&M(Ke),e&&M(Ze),e&&M(Je),e&&M(Ve),e&&M(Qe),e&&M(Xe),e&&M(Ye),e&&M(et),e&&M(tt),e&&M(nt),e&&M(ot),e&&M(rt),e&&M(st),e&&M(it),e&&M(at),e&&M(lt),e&&M(ct),e&&M(ut),e&&M(dt),e&&M(pt),e&&M(mt),e&&M(ft),e&&M(gt),e&&M(ht),e&&M(vt),e&&M($t),e&&M(yt),je(xt),je(Pt),je(Et),je(Ft),je(It),e&&M(Rt),e&&M(qt),e&&M(Wt),e&&M(Nt),e&&M(Ut),e&&M(Ht),je(Bt),e&&M(Zt),e&&M(Jt),e&&M(Vt),e&&M(Qt),je(nn),je(cn),je(xn),je(kn),e&&M(Cn),e&&M(Pn),e&&M(Ln),e&&M(Mn),e&&M(On),e&&M(En),e&&M(Sn),e&&M(Tn),je(Fn)}}}function za(e,t,n){let o,r;u(e,ht,(e=>n(2,r=e)));const s=window.atob("Q2FydGFCb3NzeQ==");return e.$$.update=()=>{4&e.$$.dirty&&n(0,o=r?r.ogimetData.url:"http://www.ogimet.com")},[o,s,r]}class Ra extends Ie{constructor(e){super(),De(this,e,za,Ia,a,{})}}function qa(e,t,n){const o=e.slice();return o[17]=t[n].id,o[18]=t[n].label,o}function Wa(t){let n,o,r,s,i=!!navigator.share&&function(t){let n,o,r;return{c(){n=E("button"),n.textContent="Partager l'App",I(n,"class","btn btn-outline-secondary btn-sm svelte-1iafbte")},m(e,t){L(e,n,t),o||(r=j(n,"click",Qe),o=!0)},p:e,d(e){e&&M(n),o=!1,r()}}}();return{c(){i&&i.c(),n=F(),o=E("button"),o.textContent="Recharger l'App",I(o,"class","btn btn-outline-secondary btn-sm svelte-1iafbte")},m(e,a){i&&i.m(e,a),L(e,n,a),L(e,o,a),r||(s=j(o,"click",t[6]),r=!0)},p(e,t){navigator.share&&i.p(e,t)},d(e){i&&i.d(e),e&&M(n),e&&M(o),r=!1,s()}}}function Na(e){let t,n,o,r=e[18]+"";return{c(){t=E("option"),n=T(r),t.__value=e[17],t.value=t.__value,t.selected=o=e[17]===e[0]},m(e,o){L(e,t,o),P(t,n)},p(e,n){129&n&&o!==(o=e[17]===e[0])&&(t.selected=o)},d(e){e&&M(t)}}}function Ua(e){let t,n,o,r,i,a,l,c,u,d,p,m,f,g,h,v,y,b,x,w=!0===navigator.standalone&&Wa(e),k=e[7],C=[];for(let t=0;t<k.length;t+=1)C[t]=Na(qa(e,k,t));return v=new Ra({}),{c(){t=E("div"),n=E("div"),o=E("div"),r=E("h1"),i=E("div"),i.innerHTML='<img src="images/ofp2map-icons/icon-128x128.png" alt="logo" class="svelte-1iafbte"/>',a=F(),l=E("div"),c=E("div"),c.textContent=`OFP2MAP v${Ha}`,u=E("small"),d=T("ServiceWorker : "),p=T(e[2]),m=F(),w&&w.c(),f=F(),g=E("select");for(let e=0;e<C.length;e+=1)C[e].c();h=F(),Fe(v.$$.fragment),I(i,"class","app svelte-1iafbte"),I(u,"class","svelte-1iafbte"),I(l,"class","infos svelte-1iafbte"),I(g,"class","custom-select custom-select-sm svelte-1iafbte"),void 0===e[0]&&me((()=>e[10].call(g))),I(r,"class","svelte-1iafbte"),I(n,"class","scrollContainer svelte-1iafbte"),I(t,"class","markdown svelte-1iafbte"),I(t,"style",e[5])},m(s,k){L(s,t,k),P(t,n),P(n,o),P(o,r),P(r,i),P(r,a),P(r,l),P(l,c),P(l,u),P(u,d),P(u,p),P(r,m),w&&w.m(r,null),P(r,f),P(r,g);for(let e=0;e<C.length;e+=1)C[e].m(g,null);H(g,e[0]),e[11](r),P(o,h),Ae(v,o,null),e[12](n),y=!0,b||(x=[j(u,"click",e[9],{once:!0}),j(g,"change",e[10]),j(g,"change",e[8]),$(ln.call(null,g))],b=!0)},p(e,[n]){if((!y||4&n)&&W(p,e[2]),!0===navigator.standalone&&w.p(e,n),129&n){let t;for(k=e[7],t=0;t<k.length;t+=1){const o=qa(e,k,t);C[t]?C[t].p(o,n):(C[t]=Na(o),C[t].c(),C[t].m(g,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=k.length}129&n&&H(g,e[0]),(!y||32&n)&&I(t,"style",e[5])},i(e){y||(Le(v.$$.fragment,e),y=!0)},o(e){Me(v.$$.fragment,e),y=!1},d(n){n&&M(t),w&&w.d(),O(C,n),e[11](null),je(v),e[12](null),b=!1,s(x)}}}const Ha="1.12.6";function Ga(e,t,n){let o,r;u(e,lt,(e=>n(1,r=e)));let s="";let i,a;const l=[];let c,d,p;te((()=>(c=a.querySelectorAll("h2[id]"),p=new IntersectionObserver((e=>{const t=a.scrollTop;if(t<Math.floor(a.scrollHeight-a.clientHeight)){let e=l[0].id;for(const n of c){if(t<n.offsetTop-a.offsetTop-i.clientHeight)break;e=n.id}n(0,d=e)}}),{root:a,rootMargin:0-i.clientHeight+"px 0px 30px 0px",threshold:1}),c.forEach((e=>{l.push({id:e.id,label:e.innerText}),p.observe(e)})),n(0,d=l[0].id),()=>{p.disconnect(),c=void 0,p=void 0})));return e.$$.update=()=>{var t;2&e.$$.dirty&&(t=r)&&t.messageSW({type:"GET_VERSION"}).then((e=>n(2,s=e))),1&e.$$.dirty&&n(5,o=void 0===d||d===l[0].id?"padding-top: 1rem;":"padding-top: 0.25rem;")},[d,r,s,i,a,o,()=>{window.location.hash="#/",window.location.reload()},l,e=>{e.target.blur(),p.disconnect(),function(e,t){const n=e-a.offsetTop-i.clientHeight,o=n.toFixed(),r=Math.floor(a.scrollHeight-a.clientHeight),s=function(){(a.scrollTop.toFixed()===o||a.scrollTop>=r)&&(a.removeEventListener("scroll",s),t&&t())};a.addEventListener("scroll",s),s(),a.scrollTo({top:n,behavior:"smooth"})}(document.getElementById(d).offsetTop,(()=>{c.forEach((e=>{p.observe(e)}))}))},()=>r&&r.update()&&void 0,function(){d=G(this),n(0,d),n(7,l)},function(e){ie[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(e){ie[e?"unshift":"push"]((()=>{a=e,n(4,a)}))}]}class Ba extends Ie{constructor(e){super(),De(this,e,Ga,Ua,a,{})}}function Ka(e){let t,n,o,r,i,a,l,c,u,d,p,m,f,g,h,v;return{c(){t=E("div"),n=E("div"),o=E("strong"),o.innerHTML='<span class="svelte-395rpc">👨🏻‍✈️</span>Mise à jour disponible',r=F(),i=E("button"),i.innerHTML='<span aria-hidden="true">×</span>',a=F(),l=E("div"),c=E("p"),c.textContent="Il faudra recharger l'OFP",u=F(),d=E("button"),p=E("span"),m=T(e[1]),I(o,"class","svelte-395rpc"),I(i,"type","button"),I(i,"class","close svelte-395rpc"),I(i,"aria-label","Close"),I(n,"class","toast-header svelte-395rpc"),I(p,"class","svelte-395rpc"),B(p,"blinking",e[1].endsWith("...")),I(d,"class","btn btn-primary"),I(d,"type","button"),I(l,"class","toast-body text-center"),I(t,"class","toast svelte-395rpc"),U(t,"position","fixed"),U(t,"top","0"),U(t,"right","0")},m(s,f){L(s,t,f),P(t,n),P(n,o),P(n,r),P(n,i),P(t,a),P(t,l),P(l,c),P(l,u),P(l,d),P(d,p),P(p,m),g=!0,h||(v=[j(i,"click",e[6]),j(d,"click",e[7],{once:!0})],h=!0)},p(e,t){(!g||2&t)&&W(m,e[1]),2&t&&B(p,"blinking",e[1].endsWith("..."))},i(e){g||(me((()=>{f||(f=Se(t,Ye,{},!0)),f.run(1)})),g=!0)},o(e){f||(f=Se(t,Ye,{},!1)),f.run(0),g=!1},d(e){e&&M(t),e&&f&&f.end(),h=!1,s(v)}}}function Za(t){let n,o,r,s,i,a,l,c,u,d,p=(t[4](700)||"")+"";return{c(){n=E("div"),o=E("div"),r=E("div"),r.innerHTML='<strong class="svelte-395rpc"><span class="svelte-395rpc">👨🏻‍✈️</span>Mise à jour détectée</strong>',s=F(),i=E("div"),a=E("button"),a.innerHTML="<span>Mise à jour...</span>",l=F(),c=T(p),I(r,"class","toast-header svelte-395rpc"),I(a,"class","btn"),I(a,"type","button"),I(i,"class","toast-body text-center"),I(o,"class","toast svelte-395rpc"),I(n,"class","modal svelte-395rpc")},m(e,p){L(e,n,p),P(n,o),P(o,r),P(o,s),P(o,i),P(i,a),P(n,l),L(e,c,p),u||(d=j(a,"click",D(t[5])),u=!0)},p:e,i:e,o:e,d(e){e&&M(n),e&&M(c),u=!1,d()}}}function Ja(e){let t,n,o,r;const s=[Za,Ka],i=[];function a(e,t){return!e[3]||e[2]||e[0]?e[3]&&!e[2]?1:-1:0}return~(t=a(e))&&(n=i[t]=s[t](e)),{c(){n&&n.c(),o=A()},m(e,n){~t&&i[t].m(e,n),L(e,o,n),r=!0},p(e,[r]){let l=t;t=a(e),t===l?~t&&i[t].p(e,r):(n&&(Ce(),Me(i[l],1,1,(()=>{i[l]=null})),Pe()),~t?(n=i[t],n?n.p(e,r):(n=i[t]=s[t](e),n.c()),Le(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(Le(n),r=!0)},o(e){Me(n),r=!1},d(e){~t&&i[t].d(e),e&&M(o)}}}const Va=rt(),Qa=e=>{ut.set(!0),ct.set(!1),e?dt.set(!((e,t)=>{const n=e.split("."),o=t.split(".");return n.slice(0,-1).join(".")===o.slice(0,-1).join(".")})("1.12.6",e)):dt.set(!0)};function Xa(t,n,o){let r,s,i,a,l=e;u(t,ct,(e=>o(2,r=e))),u(t,lt,(e=>o(8,s=e))),u(t,Va,(e=>o(9,i=e))),u(t,ut,(e=>o(3,a=e))),t.$$.on_destroy.push((()=>l()));let c="Installer";v(ct,r=!1,r);let{prompt:d=!1}=n;const p=(e=0)=>{let t;s&&i&&i.waiting?(navigator.serviceWorker.addEventListener("controllerchange",(()=>{t||(t=!0,e?setTimeout((()=>window.location.reload()),e):window.location.reload())})),o(1,c="En cours..."),i.waiting.postMessage({type:"SKIP_WAITING"})):window.location.reload()};return t.$$set=e=>{"prompt"in e&&o(0,d=e.prompt)},[d,c,r,a,p,function(e){re(t,e)},()=>v(ct,r=!0,r),()=>p()]}class Ya extends Ie{constructor(e){super(),De(this,e,Xa,Ja,a,{prompt:0})}}function el(e){let t;return{c(){t=E("ol"),t.innerHTML='<li class="svelte-3tetng">Dans la barre de menu, cliquez sur <svg class="svelte-3tetng"><use xlink:href="#share-symbol"></use></svg></li> \n                    <li class="svelte-3tetng">Faites défiler, choisir : <em>Sur l&#39;écran d&#39;accueil</em>  <svg style="width:22px;height:22px;" class="svelte-3tetng"><use xlink:href="#add2home-symbol"></use></svg></li> \n                    <li class="svelte-3tetng">Lancez l&#39;application depuis l&#39;écran d&#39;accueil</li>',I(t,"class","guide svelte-3tetng")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function tl(e){let t;return{c(){t=E("p"),t.textContent="Merci d'ouvrir cette page dans Safari",I(t,"class","guide error svelte-3tetng")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function nl(t){let n,o,r,s,i,a,l,c,u,d,p,m,f,g;n=new Gn({});let h=function(e,t){return e[0]?el:tl}(t)(t);return f=new Ya({}),{c(){Fe(n.$$.fragment),o=F(),r=E("div"),s=E("div"),i=E("div"),i.innerHTML='<img src="./images/ofp2map-icons/icon-128x128.png" alt="OFP2MAP" class="svelte-3tetng"/>',a=F(),l=E("div"),c=E("h3"),c.textContent="Installez OFP2MAP",u=F(),d=E("p"),d.innerHTML='Si OFP2MAP est déjà sur l&#39;écran d&#39;accueil, ne l&#39;installez pas une deuxième fois. <b>Attention:</b> l&#39;installation ne peut se faire que depuis\n                le navigateur Safari, <b>si présent, cliquez sur <svg class="safari svelte-3tetng"><use xlink:href="#safari-symbol"></use></svg> en haut à droite</b>.',p=F(),h.c(),m=F(),Fe(f.$$.fragment),I(i,"class","icon-container svelte-3tetng"),I(c,"class","title svelte-3tetng"),I(d,"class","text svelte-3tetng"),I(l,"class","prompt-content svelte-3tetng"),I(s,"class","prompt svelte-3tetng"),I(r,"class","prompt-container svelte-3tetng")},m(e,t){Ae(n,e,t),L(e,o,t),L(e,r,t),P(r,s),P(s,i),P(s,a),P(s,l),P(l,c),P(l,u),P(l,d),P(l,p),h.m(l,null),L(e,m,t),Ae(f,e,t),g=!0},p:e,i(e){g||(Le(n.$$.fragment,e),Le(f.$$.fragment,e),g=!0)},o(e){Me(n.$$.fragment,e),Me(f.$$.fragment,e),g=!1},d(e){je(n,e),e&&M(o),e&&M(r),h.d(),e&&M(m),je(f,e)}}}function ol(e){return[We&&!qe]}class rl extends Ie{constructor(e){super(),De(this,e,ol,nl,a,{})}}function sl(e){let t,n,o,r,s,i,a,l,c;t=new ua({props:{$$slots:{default:[al]},$$scope:{ctx:e}}}),o=new Ya({props:{prompt:!!e[1]}});let u=(e[1]||e[4])&&"success"===e[2]&&ll(e);const d=[gl,fl,ml,pl,dl,ul],p=[];function m(e,t){return"loading"===e[2]?0:e[2]&&"success"!==e[2]&&"/map"===e[3]?1:"/export"===e[3]&&"success"===e[2]?2:"/"===e[3]?3:"/help"===e[3]?4:!e[1]&&!e[4]||"/map"!==e[3]?5:-1}return~(i=m(e))&&(a=p[i]=d[i](e)),{c(){Fe(t.$$.fragment),n=F(),Fe(o.$$.fragment),r=F(),u&&u.c(),s=F(),a&&a.c(),l=A()},m(e,a){Ae(t,e,a),L(e,n,a),Ae(o,e,a),L(e,r,a),u&&u.m(e,a),L(e,s,a),~i&&p[i].m(e,a),L(e,l,a),c=!0},p(e,n){const r={};4097&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const c={};2&n&&(c.prompt=!!e[1]),o.$set(c),(e[1]||e[4])&&"success"===e[2]?u?(u.p(e,n),22&n&&Le(u,1)):(u=ll(e),u.c(),Le(u,1),u.m(s.parentNode,s)):u&&(Ce(),Me(u,1,1,(()=>{u=null})),Pe());let f=i;i=m(e),i===f?~i&&p[i].p(e,n):(a&&(Ce(),Me(p[f],1,1,(()=>{p[f]=null})),Pe()),~i?(a=p[i],a?a.p(e,n):(a=p[i]=d[i](e),a.c()),Le(a,1),a.m(l.parentNode,l)):a=null)},i(e){c||(Le(t.$$.fragment,e),Le(o.$$.fragment,e),Le(u),Le(a),c=!0)},o(e){Me(t.$$.fragment,e),Me(o.$$.fragment,e),Me(u),Me(a),c=!1},d(e){je(t,e),e&&M(n),je(o,e),e&&M(r),u&&u.d(e),e&&M(s),~i&&p[i].d(e),e&&M(l)}}}function il(t){let n,o;return n=new rl({}),{c(){Fe(n.$$.fragment)},m(e,t){Ae(n,e,t),o=!0},p:e,i(e){o||(Le(n.$$.fragment,e),o=!0)},o(e){Me(n.$$.fragment,e),o=!1},d(e){je(n,e)}}}function al(e){let t,n;return t=new $a({props:{kmlOptions:e[0]}}),t.$on("change",e[6]),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function ll(e){let t,n;return t=new xa({props:{hidden:"/map"!==e[3],$$slots:{default:[cl]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.hidden="/map"!==e[3]),4107&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function cl(e){let t,n,o;function r(t){e[7](t)}let s={id:"map",ofp:e[1]};return void 0!==e[0]&&(s.kmlOptions=e[0]),t=new os({props:s}),ie.push((()=>_e(t,"kmlOptions",r))),t.$on("save",e[8]),{c(){Fe(t.$$.fragment)},m(e,n){Ae(t,e,n),o=!0},p(e,o){const r={};2&o&&(r.ofp=e[1]),!n&&1&o&&(n=!0,r.kmlOptions=e[0],fe((()=>n=!1))),t.$set(r)},i(e){o||(Le(t.$$.fragment,e),o=!0)},o(e){Me(t.$$.fragment,e),o=!1},d(e){je(t,e)}}}function ul(t){let n,o=t[5](t[3])+"";return{c(){n=T(o)},m(e,t){L(e,n,t)},p(e,t){8&t&&o!==(o=e[5](e[3])+"")&&W(n,o)},i:e,o:e,d(e){e&&M(n)}}}function dl(e){let t,n;return t=new xa({props:{$$slots:{default:[hl]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function pl(e){let t,n;return t=new xa({props:{$$slots:{default:[vl]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function ml(e){let t,n;return t=new xa({props:{$$slots:{default:[$l]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};4105&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function fl(e){let t,n;return t=new xa({props:{$$slots:{default:[yl]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};4100&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function gl(e){let t,n;return t=new xa({props:{$$slots:{default:[bl]},$$scope:{ctx:e}}}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function hl(e){let t,n;return t=new Ba({}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function vl(e){let t,n;return t=new Kn({}),{c(){Fe(t.$$.fragment)},m(e,o){Ae(t,e,o),n=!0},i(e){n||(Le(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){je(t,e)}}}function $l(e){let t,n,o,r;return t=new Wn({props:{kmlOptions:e[0]}}),t.$on("save",e[9]),o=new It({}),{c(){Fe(t.$$.fragment),n=F(),Fe(o.$$.fragment)},m(e,s){Ae(t,e,s),L(e,n,s),Ae(o,e,s),r=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){r||(Le(t.$$.fragment,e),Le(o.$$.fragment,e),r=!0)},o(e){Me(t.$$.fragment,e),Me(o.$$.fragment,e),r=!1},d(e){je(t,e),e&&M(n),je(o,e)}}}function yl(e){let t,n,o;return{c(){t=E("p"),n=T("😱: "),o=T(e[2]),I(t,"class","ofpError svelte-1vmui72")},m(e,r){L(e,t,r),P(t,n),P(t,o)},p(e,t){4&t&&W(o,e[2])},d(e){e&&M(t)}}}function bl(e){let t;return{c(){t=E("div"),t.textContent="traitement en cours...",U(t,"margin","auto")},m(e,n){L(e,t,n)},d(e){e&&M(t)}}}function xl(e){let t,n,o,r,s,i;const a=[il,sl],l=[];return o=navigator&&!1===navigator.standalone&&Re?0:1,r=l[o]=a[o](e),{c(){t=E("main"),n=E("div"),r.c(),I(n,"class","content svelte-1vmui72"),I(t,"class",s="container "+(e[3].substr(1)||"home")+" svelte-1vmui72")},m(e,r){L(e,t,r),P(t,n),l[o].m(n,null),i=!0},p(e,[n]){r.p(e,n),(!i||8&n&&s!==(s="container "+(e[3].substr(1)||"home")+" svelte-1vmui72"))&&I(t,"class",s)},i(e){i||(Le(r),i=!0)},o(e){Me(r),i=!1},d(e){e&&M(t),l[o].d()}}}function wl(e,t,n){let o,r,s,i,a,l;u(e,ht,(e=>n(1,o=e))),u(e,vt,(e=>n(2,r=e))),u(e,Mt,(e=>n(3,s=e))),u(e,pt,(e=>n(10,i=e))),u(e,ct,(e=>n(11,a=e))),u(e,xt,(e=>n(4,l=e)));(e=>{const t={},n={};e.length>1&&(e.substr(1)||"").split("&").forEach((function(e){const n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}));for(let[e,o]of Object.entries(t))if(e in zt){let t;e.endsWith("Pin")?(o*=1,isNaN(o)||(t=o)):e.endsWith("Color")&&o.match(Gt)?t=o.toUpperCase():e.endsWith("Display")?t=!!o:e.endsWith("Change")&&(o*=1,isNaN(o)||(t=o.toFixed(1))),void 0!==t&&(n[e]=t)}else"downloadType"===e?(o*=1,isNaN(o)||tn.setItem(en.downloadType,o)):"shortcut"===e&&(o=o.trim(),o&&tn.setItem(en.shortcut,o));tn.setItem(en.optionsKML,n)})(window.location.search);let c=(e=>{const t={};for(let[n,o]of Object.entries(e))n in zt&&(n.endsWith("Pin")?(o*=1,isNaN(o)||(t[n]=o)):n.endsWith("Color")&&o.match(Gt)?t[n]=o.toUpperCase():n.endsWith("Display")?t[n]=!!o:n.endsWith("Change")&&(o*=1,isNaN(o)||(t[n]=o.toFixed(1))));return{...zt,...t}})(tn.getItem(en.optionsKML)||{});nn(c,s);te((()=>(document.addEventListener("visibilitychange",Ct,!1),()=>document.removeEventListener("visibilitychange",Ct))));return[c,o,r,s,l,e=>{window.location.hash="#/"},()=>{v(pt,i=!1,i),v(ct,a=!1,a)},function(e){c=e,n(0,c)},()=>nn(c,s),()=>nn(c,s)]}class kl extends Ie{constructor(e){super(),De(this,e,wl,xl,a,{})}}try{self["workbox:window:6.1.2"]&&_()}catch(Cl){}function Cl(e,t){return new Promise((function(n){var o=new MessageChannel;o.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[o.port2])}))}function Pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ll(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pl(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.1.2"]&&_()}catch(Cl){}var Ml=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Ol(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var El=function(e,t){this.type=e,Object.assign(this,t)};function Sl(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Tl(){}var _l={type:"SKIP_WAITING"};function Fl(e,t){if(!t)return e&&e.then?e.then(Tl):Promise.resolve()}var Al=function(e){var t,n;function o(t,n){var o,r;return void 0===n&&(n={}),(o=e.call(this)||this).nn={},o.tn=0,o.rn=new Ml,o.en=new Ml,o.on=new Ml,o.un=0,o.an=new Set,o.cn=function(){var e=o.fn,t=e.installing;o.tn>0||!Ol(t.scriptURL,o.sn)||performance.now()>o.un+6e4?(o.vn=t,e.removeEventListener("updatefound",o.cn)):(o.hn=t,o.an.add(t),o.rn.resolve(t)),++o.tn,t.addEventListener("statechange",o.ln)},o.ln=function(e){var t=o.fn,n=e.target,r=n.state,s=n===o.vn,i={sw:n,isExternal:s,originalEvent:e};!s&&o.mn&&(i.isUpdate=!0),o.dispatchEvent(new El(r,i)),"installed"===r?o.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&o.dispatchEvent(new El("waiting",i))}),200):"activating"===r&&(clearTimeout(o.wn),s||o.en.resolve(n))},o.dn=function(e){var t=o.hn;t===navigator.serviceWorker.controller&&(o.dispatchEvent(new El("controlling",{sw:t,originalEvent:e,isUpdate:o.mn})),o.on.resolve(t))},o.gn=(r=function(e){var t=e.data,n=e.source;return Sl(o.getSW(),(function(){o.an.has(n)&&o.dispatchEvent(new El("message",{data:t,sw:n,originalEvent:e}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),o.sn=t,o.nn=n,navigator.serviceWorker.addEventListener("message",o.gn),o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,s=o.prototype;return s.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var o=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return Fl(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return o.mn=Boolean(navigator.serviceWorker.controller),o.yn=o.pn(),Sl(o.bn(),(function(e){o.fn=e,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&Ol(t.scriptURL,o.sn)&&(o.hn=t,Promise.resolve().then((function(){o.dispatchEvent(new El("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn,{once:!0}),o.fn}))}))}catch(e){return Promise.reject(e)}},s.update=function(){try{return this.fn?Fl(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},s.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},s.messageSW=function(e){try{return Sl(this.getSW(),(function(t){return Cl(t,e)}))}catch(e){return Promise.reject(e)}},s.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Cl(this.fn.waiting,_l)},s.pn=function(){var e=navigator.serviceWorker.controller;return e&&Ol(e.scriptURL,this.sn)?e:void 0},s.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Sl(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(o.prototype,r),o}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Ll(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());let jl,Dl=!1;try{jl=new kl({target:document.body})}catch(e){Dl=!0;try{var Il=document.createElement("p");Il.innerHTML="Erreur: "+e.message+"<br/><br/>OFP2MAP a besoin de navigateurs récents: Safari 14 iOS/Mac, Firefox 86, Chrome 87 et Microsoft Edge 87 sont compatibles. <br /><br />Contactez moi sur l'email AF (erdelord@...) en me donnant le message d'erreur.",document.body.appendChild(Il)}catch(Ll){}}finally{if("serviceWorker"in navigator){const e=new Al("./sw.js");lt.set(e),e.addEventListener("installed",(e=>{e.isUpdate})),e.addEventListener("activated",(t=>{t.isUpdate||e.messageSW({type:"CLIENTS_CLAIM"}),t.isExternal})),e.addEventListener("waiting",(t=>{Dl?(e.addEventListener("controlling",(()=>{window.location.reload()})),e.messageSkipWaiting()):(t.isExternal,Ve(400,Cl(t.sw,{type:"GET_VERSION"})).then((e=>Qa(e))).catch((e=>{Qa()})))})),e.register().then((e=>{Dl&&e&&e.unregister(),Va.set(e)}),console.error)}}return jl}();
//# sourceMappingURL=bundle.js.map
