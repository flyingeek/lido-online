var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(o)}function l(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i;function c(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function u(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function d(e){let t;return u(e,(e=>t=e))(),t}function p(e,t,n){e.$$.on_destroy.push(u(t,n))}function m(e,t,n,o){if(e){const s=f(e,t,n,o);return e[0](s)}}function f(e,t,o,s){return e[1]&&s?n(o.ctx.slice(),e[1](s(t))):o.ctx}function h(e,t,n,o){if(e[2]&&o){const s=e[2](o(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|s[o];return e}return t.dirty|s}return t.dirty}function g(e,t,n,o,s,r){if(s){const l=f(t,n,o,r);e.p(l,s)}}function v(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function y(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function $(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function x(e){return null==e?"":e}function b(e,t,n){return e.set(n),t}function A(t){return t&&l(t.destroy)?t.destroy:e}const w="undefined"!=typeof window;let T=w?()=>window.performance.now():()=>Date.now(),P=w?e=>requestAnimationFrame(e):e;const k=new Set;function C(e){k.forEach((t=>{t.c(e)||(k.delete(t),t.f())})),0!==k.size&&P(C)}function L(e){let t;return 0===k.size&&P(C),{promise:new Promise((n=>{k.add(t={c:e,f:n})})),abort(){k.delete(t)}}}function S(e,t){e.appendChild(t)}function M(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function E(e){const t=I("style");return function(e,t){S(e.head||e,t),t.sheet}(M(e),t),t.sheet}function O(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode.removeChild(e)}function q(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function I(e){return document.createElement(e)}function D(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function N(e){return document.createTextNode(e)}function z(){return N(" ")}function j(){return N("")}function R(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function V(e){return function(t){return t.preventDefault(),e.call(this,t)}}function U(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function B(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:U(e,o,t[o])}function H(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function Q(e){return""===e?null:+e}function W(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function G(e,t){e.value=null==t?"":t}function Z(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function K(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}e.selectedIndex=-1}function J(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let X;function Y(){if(void 0===X){X=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){X=!0}}return X}function ee(e,t,n){e.classList[n?"add":"remove"](t)}function te(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,o,t),s}const ne=new Map;let oe,se=0;function re(e,t,n,o,s,r,l,a=0){const i=16.666/o;let c="{\n";for(let e=0;e<=1;e+=i){const o=t+(n-t)*r(e);c+=100*e+`%{${l(o,1-o)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=M(e),{stylesheet:m,rules:f}=ne.get(p)||function(e,t){const n={stylesheet:E(t),rules:{}};return ne.set(e,n),n}(p,e);f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${o}ms linear ${s}ms 1 both`,se+=1,d}function le(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-o.length;s&&(e.style.animation=o.join(", "),se-=s,se||P((()=>{se||(ne.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&F(t)})),ne.clear())})))}function ae(e){oe=e}function ie(){if(!oe)throw new Error("Function called outside component initialization");return oe}function ce(e){ie().$$.on_mount.push(e)}function ue(e){ie().$$.on_destroy.push(e)}function de(){const e=ie();return(t,n,{cancelable:o=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=te(t,n,{cancelable:o});return s.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}function pe(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const me=[],fe=[],he=[],ge=[],ve=Promise.resolve();let ye=!1;function $e(){ye||(ye=!0,ve.then(ke))}function xe(){return $e(),ve}function be(e){he.push(e)}function Ae(e){ge.push(e)}const we=new Set;let Te,Pe=0;function ke(){const e=oe;do{for(;Pe<me.length;){const e=me[Pe];Pe++,ae(e),Ce(e.$$)}for(ae(null),me.length=0,Pe=0;fe.length;)fe.pop()();for(let e=0;e<he.length;e+=1){const t=he[e];we.has(t)||(we.add(t),t())}he.length=0}while(me.length);for(;ge.length;)ge.pop()();ye=!1,we.clear(),ae(e)}function Ce(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(be)}}function Le(){return Te||(Te=Promise.resolve(),Te.then((()=>{Te=null}))),Te}function Se(e,t,n){e.dispatchEvent(te(`${t?"intro":"outro"}${n}`))}const Me=new Set;let Ee;function Oe(){Ee={r:0,c:[],p:Ee}}function Fe(){Ee.r||r(Ee.c),Ee=Ee.p}function qe(e,t){e&&e.i&&(Me.delete(e),e.i(t))}function Ie(e,t,n,o){if(e&&e.o){if(Me.has(e))return;Me.add(e),Ee.c.push((()=>{Me.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const De={duration:0};function Ne(n,o,s){let r,a,i=o(n,s),c=!1,u=0;function d(){r&&le(n,r)}function p(){const{delay:o=0,duration:s=300,easing:l=t,tick:p=e,css:m}=i||De;m&&(r=re(n,0,1,s,o,l,m,u++)),p(0,1);const f=T()+o,h=f+s;a&&a.abort(),c=!0,be((()=>Se(n,!0,"start"))),a=L((e=>{if(c){if(e>=h)return p(1,0),Se(n,!0,"end"),d(),c=!1;if(e>=f){const t=l((e-f)/s);p(t,1-t)}}return c}))}let m=!1;return{start(){m||(m=!0,le(n),l(i)?(i=i(),Le().then(p)):p())},invalidate(){m=!1},end(){c&&(d(),c=!1)}}}function _e(n,o,s,a){let i=o(n,s),c=a?0:1,u=null,d=null,p=null;function m(){p&&le(n,p)}function f(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function h(o){const{delay:s=0,duration:l=300,easing:a=t,tick:h=e,css:g}=i||De,v={start:T()+s,b:o};o||(v.group=Ee,Ee.r+=1),u||d?d=v:(g&&(m(),p=re(n,c,o,l,s,a,g)),o&&h(0,1),u=f(v,l),be((()=>Se(n,o,"start"))),L((e=>{if(d&&e>d.start&&(u=f(d,l),d=null,Se(n,u.b,"start"),g&&(m(),p=re(n,c,u.b,u.duration,0,a,i.css))),u)if(e>=u.end)h(c=u.b,1-c),Se(n,u.b,"end"),d||(u.b?m():--u.group.r||r(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),h(c,1-c)}return!(!u&&!d)})))}return{run(e){l(i)?Le().then((()=>{i=i(),h(e)})):h(e)},end(){m(),u=d=null}}}function ze(e,t){const n=t.token={};function o(e,o,s,r){if(t.token!==n)return;t.resolved=r;let l=t.ctx;void 0!==s&&(l=l.slice(),l[s]=r);const a=e&&(t.current=e)(l);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(Oe(),Ie(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Fe())})):t.block.d(1),a.c(),qe(a,1),a.m(t.mount(),t.anchor),i=!0),t.block=a,t.blocks&&(t.blocks[o]=a),i&&ke()}if((s=e)&&"object"==typeof s&&"function"==typeof s.then){const n=ie();if(e.then((e=>{ae(n),o(t.then,1,t.value,e),ae(null)}),(e=>{if(ae(n),o(t.catch,2,t.error,e),ae(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var s}const je="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Re(e,t){e.d(1),t.delete(e.key)}function Ve(e,t,n,o,s,r,l,a,i,c,u,d){let p=e.length,m=r.length,f=p;const h={};for(;f--;)h[e[f].key]=f;const g=[],v=new Map,y=new Map;for(f=m;f--;){const e=d(s,r,f),a=n(e);let i=l.get(a);i?o&&i.p(e,t):(i=c(a,e),i.c()),v.set(a,g[f]=i),a in h&&y.set(a,Math.abs(f-h[a]))}const $=new Set,x=new Set;function b(e){qe(e,1),e.m(a,u),l.set(e.key,e),u=e.first,m--}for(;p&&m;){const t=g[m-1],n=e[p-1],o=t.key,s=n.key;t===n?(u=t.first,p--,m--):v.has(s)?!l.has(o)||$.has(o)?b(t):x.has(s)?p--:y.get(o)>y.get(s)?(x.add(o),b(t)):($.add(s),p--):(i(n,l),p--)}for(;p--;){const t=e[p];v.has(t.key)||i(t,l)}for(;m;)b(g[m-1]);return g}function Ue(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Be(e){e&&e.c()}function He(e,t,n,s){const{fragment:a,on_mount:i,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),s||be((()=>{const t=i.map(o).filter(l);c?c.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(be)}function Qe(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function We(t,n,o,l,a,i,c,u=[-1]){const d=oe;ae(t);const p=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let m=!1;if(p.ctx=o?o(t,n.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=s)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](s),m&&function(e,t){-1===e.$$.dirty[0]&&(me.push(e),$e(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),m=!0,r(p.before_update),p.fragment=!!l&&l(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(F)}else p.fragment&&p.fragment.c();n.intro&&qe(t.$$.fragment),He(t,n.target,n.anchor,n.customElement),ke()}ae(d)}class Ge{$destroy(){Qe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ze="iPad"===navigator.platform||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;Ze&&/Version\/15/i.test(navigator.userAgent);const Ke=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),Je=/Safari\//i.test(navigator.userAgent)&&!/(Chrome\/|Chromium\/)/i.test(navigator.userAgent);matchMedia("(hover: hover)").matches;const Xe=()=>{},Ye="previousOFP",et="previousOFPUID",tt="previousOFPExpiration",nt="previousMapProjectionId",ot="previousOFP2MAPTakeOFF";function st(e,t,n){let o;return function(){const s=this,r=arguments,l=function(){o=null,n||e.apply(s,r)},a=n&&!o;clearTimeout(o),o=setTimeout(l,t),a&&e.apply(s,r)}}function rt(e){const t=e.split("-").slice(0,-1).join("");switch(t){case"route":return"rmain";case"alternate":return"ralt";case"nat":return"rnat";default:return t}}function lt(e,t,n){return e<=t?t:e>=n?n:e}function at(e,t,n){return!(e<t)&&!(e>n)}function it(e,t,n,o){return 8&n?[e[0]+(t[0]-e[0])*(o[3]-e[1])/(t[1]-e[1]),o[3]]:4&n?[e[0]+(t[0]-e[0])*(o[1]-e[1])/(t[1]-e[1]),o[1]]:2&n?[o[2],e[1]+(t[1]-e[1])*(o[2]-e[0])/(t[0]-e[0])]:1&n?[o[0],e[1]+(t[1]-e[1])*(o[0]-e[0])/(t[0]-e[0])]:null}function ct(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function ut(e,t){var n,o,s,r,l,a,i;for(o=1;o<=8;o*=2){for(n=[],r=!(ct(s=e[e.length-1],t)&o),l=0;l<e.length;l++)(i=!(ct(a=e[l],t)&o))!==r&&n.push(it(s,a,o,t)),i&&n.push(a),s=a,r=i;if(!(e=n).length)break}return n}function dt(e,t,n){var o,s,r,l,a,i=e.length,c=ct(e[0],t),u=[];for(n||(n=[]),o=1;o<i;o++){for(s=e[o-1],l=a=ct(r=e[o],t);;){if(!(c|l)){u.push(s),l!==a?(u.push(r),o<i-1&&(n.push(u),u=[])):o===i-1&&u.push(r);break}if(c&l)break;c?c=ct(s=it(s,r,c,t),t):l=ct(r=it(s,r,l,t),t)}c=a}return u.length&&n.push(u),n}function pt(e,t){let n=new Promise(((t,n)=>{let o=setTimeout((()=>{clearTimeout(o),n("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,n])}const mt=(e,t)=>{let n=e.split("."),o=t.split(".");for(var s=0;s<3;s++){let e=Number(n[s]),t=Number(o[s]);if(e>t)return 1;if(t>e)return-1;if(!isNaN(e)&&isNaN(t))return 1;if(isNaN(e)&&!isNaN(t))return-1}return 0},ft=async()=>{const e={title:"OFP2MAP",url:window.location.pathname};try{await navigator.share(e)}catch(e){}return!1},ht=(e,t)=>{let n=0,o=e.length-1,s=-1;for(;n<=o;){let r=Math.trunc((n+o)/2);t(e[r])?(s=r,o=r-1):n=r+1}return-1!==s&&t(e[s])?s:-1},gt=(e=!1)=>{const t=e?document.querySelector("#map canvas.mapboxgl-canvas"):document.querySelector("page:not(.d-none)>#map canvas.mapboxgl-canvas");t&&t.focus()},vt=e=>`${e.infos.flightNo}_${e.infos.depICAO}_${e.infos.destICAO}_${e.infos.flightNo}_${e.infos.ofpOUT.toISOString()}_${e.infos.ofp.replace("/","-")}}`,yt=(e,t)=>{if(void 0===t)return null;if(localStorage){const n=localStorage.getItem(e),o=localStorage.getItem(et),s=localStorage.getItem(tt);if(n&&s&&parseInt(s,10)>Date.now()&&(null===t||t&&o===vt(t)))return n}return null},$t=(e,t)=>{localStorage&&e&&localStorage.setItem(e,t)},xt=e=>$t(nt,e),bt=()=>{localStorage&&(localStorage.removeItem(et),localStorage.removeItem(Ye),localStorage.removeItem(tt),localStorage.removeItem(ot),localStorage.removeItem(nt))};function At(e){const t=e-1;return t*t*t+1}function wt(e,{delay:n=0,duration:o=400,easing:s=t}={}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:s,css:e=>"opacity: "+e*r}}function Tt(e,{delay:t=0,duration:n=400,easing:o=At,x:s=0,y:r=0,opacity:l=0}={}){const a=getComputedStyle(e),i=+a.opacity,c="none"===a.transform?"":a.transform,u=i*(1-l);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*s}px, ${(1-e)*r}px);\n\t\t\topacity: ${i-u*t}`}}function Pt(e,{delay:t=0,duration:n=400,easing:o=At}={}){const s=getComputedStyle(e),r=+s.opacity,l=parseFloat(s.height),a=parseFloat(s.paddingTop),i=parseFloat(s.paddingBottom),c=parseFloat(s.marginTop),u=parseFloat(s.marginBottom),d=parseFloat(s.borderTopWidth),p=parseFloat(s.borderBottomWidth);return{delay:t,duration:n,easing:o,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*r};height: ${e*l}px;padding-top: ${e*a}px;padding-bottom: ${e*i}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*d}px;border-bottom-width: ${e*p}px;`}}const kt=[];function Ct(e,t){return{subscribe:Lt(e,t).subscribe}}function Lt(t,n=e){let o;const s=new Set;function r(e){if(a(t,e)&&(t=e,o)){const e=!kt.length;for(const e of s)e[1](),kt.push(e,t);if(e){for(let e=0;e<kt.length;e+=2)kt[e][0](kt[e+1]);kt.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(l,a=e){const i=[l,a];return s.add(i),1===s.size&&(o=n(r)||e),l(t),()=>{s.delete(i),0===s.size&&(o(),o=null)}}}}function St(t,n,o){const s=!Array.isArray(t),a=s?[t]:t,i=n.length<2;return Ct(o,(t=>{let o=!1;const c=[];let d=0,p=e;const m=()=>{if(d)return;p();const o=n(s?c[0]:c,t);i?t(o):p=l(o)?o:e},f=a.map(((e,t)=>u(e,(e=>{c[t]=e,d&=~(1<<t),o&&m()}),(()=>{d|=1<<t}))));return o=!0,m(),function(){r(f),p()}}))}const Mt=["220","318","319","320","321","330","340","350","380","787","772","773","77F"],Et=["340","380"],Ot=["CDG","ORY"],Ft=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],qt=(e,t)=>"PAR"===e?Ot.includes(t):e===t;function It(e,t,n){const o=n[e];if(!o)return;let s,r=new Date(Date.parse(t));try{s=r.toLocaleString("en-GB",{timeZone:o})}catch(e){return}const l=/(\d\d)\/(\d\d)\/(\d\d\d\d), (\d\d):(\d\d):\d\d/u.exec(s);if(null!==l){const[,e,t,n,o,s]=l,a=`${n}-${t}-${e}T${o}:${s}`,i=(new Date(Date.parse(a+"Z"))-r)/36e5;if(0===i)return"+0";let c=i>=0?"+":"";return c+=i.toFixed(1),c.endsWith(".0")?c.slice(0,-2):c}}const Dt=(e,t,n)=>{const o={value:new Date(e.legs[0].OUT.getTime()-6e4*t)};let s=It(e.depIATA,o.value.toISOString(),n);return o.tz=s||e.depTZ,o.safeTZ=!!s,o.textValue=zt(o.value),o},Nt=e=>`${Math.floor(e).toString().padStart(2,0)}:${(60*(e-Math.floor(e))).toFixed(0).padStart(2,0)}`,_t=e=>`${Math.floor(e/60).toString().padStart(2,0)}:${(e-60*Math.floor(e/60)).toFixed(0).padStart(2,0)}`,zt=e=>`${e.getUTCHours().toString().padStart(2,0)}:${e.getUTCMinutes().toString().padStart(2,0)}`,jt=(e,t,n)=>{const[o,s]=t.split(".");return n?s?`<${o} class="${s}">${e}</${o}>`:`<${o}>${e}</${o}>`:e},Rt=(e,t)=>jt(e,t,!0),Vt=e=>Rt(`MANEX ${e}`,"cite"),Ut=e=>Rt(e,"b"),Bt=e=>Rt(e,"span.error"),Ht=e=>Rt(`hors marge de ${e}h`,"span.cdb_margin"),Qt=(e,t,n)=>{if(e.IN.getTime()<t.IN.getTime())return"";if(e.OUT){const t=(e.IN.getTime()-e.OUT.getTime())/6e4;return`${(e=>Rt(e,"span.formula"))(`${zt(e.IN)}z - ${_t(t)} = `)}${zt(e.OUT)}z${Ht(n)}`}return"calculé uniquement sur la dernière étape du SV"},Wt=(e,t,n,o)=>{if(!Array.isArray(e.legs)||e.legs.length<=0)return e;const s=e.legs[0],r=e.legs[e.legs.length-1];if(void 0===s.depTZ)for(const t of e.legs.slice(1))if(t.destIATA===s.depIATA||"ORY"===t.destIATA&&"CDG"===s.depIATA||"CDG"===t.destIATA&&"ORY"===s.depIATA){s.depTZ=t.destTZ;break}let l=60,a=60;return qt(n,s.depIATA)?"PAR"===n?("LC"===t?(a=105,l=90):(a=90,l=75),s.isMEP&&(a=75,l=60)):"PTP"===n&&(a=75,l=75):("PAR"===n&&"LC"===t&&(a=75,l=75),e.legs[0].isMEP&&(a=60,l=60)),e.OUT=s.OUT,e.depTZ=s.depTZ,e.depIATA=s.depIATA,e.firstLegIsMEP=s.isMEP,e.reportingFTL=Dt(e,a,o),e.reportingAF=Dt(e,l,o),e.IN=r.IN,e.destIATA=r.destIATA,e.scheduledBlockTime=(e.IN.getTime()-e.OUT.getTime())/6e4,e},Gt=([e,t],{base:n,flightTypeAircraft:o,baseTZ:s,flightTypePNT:r,isCargo:l},a)=>{const i=e.findIndex((e=>e.legs.reduce(((e,t)=>e||t.isOFP),!1))),c=e[i],u=i>0?e[i-1]:void 0,d=!0,p=e=>{a.push(e)},m=e=>{"LC"===o&&p(e)},f=e=>{"MC"===o&&p(e)},h=i===e.length-1;let g=!1;p("SV débute par une MEP: "+(c.firstLegIsMEP?"OUI":"NON")),p(`début TSV FTL: ${zt(c.reportingFTL.value)}z ${Vt("07.05.01 & 07.05.05")}`),p(`début TSV AF: ${zt(c.reportingAF.value)}z ${Vt("07.08.01.A")}`),c.FDP=(c.IN.getTime()-c.reportingFTL.value.getTime())/6e4,c.TSVAF=(c.IN.getTime()+9e5-c.reportingAF.value.getTime())/6e4,"PAR"===n&&h&&e[0].depIATA!==c.destIATA?(p("Dernier SV d'un courrier croisé: OUI"),p(`Le TSV AF se termine au bloc réel +75mn ${Vt("07.08.01.A")}`),g=!0,c.TSVAF+=60):(p("Dernier SV d'un courrier croisé: NON"),p(`Le TSV AF se termine au bloc réel +15mn ${Vt("07.08.01.A")}`)),p(`TSV AF: ${_t(c.TSVAF)} ${Vt("07.08.01.A")}`),p(`Le TSV FTL se termine au bloc réel ${Vt("07.02.Définitions")}`),p(`TSV FTL: ${_t(c.FDP)} ${Vt("07.02.Définitions")}`),p(`nombre de tronçons du SV au sens FTL: ${Yt(c.legs)} ${Vt("07.05.05")}`);const v={PEQ2:{},PEQ3:{value:rn(c.legs,3,d)},PEQ4:{value:rn(c.legs,4,d)}};if(m(Ut("PEQ3/PEQ4 PRE considéré comme opérationnel")),m(`TSV MAX FTL PEQ3: ${Nt(v.PEQ3.value)} ${Vt("07.05.04.C")}`),m(`TSV MAX FTL PEQ4: ${Nt(v.PEQ4.value)} ${Vt("07.05.04.C")}`),"Base"===c.acclimatization.value?p(`Equipage acclimaté à la base ${c.depIATA} (${jt(`GMT${c.reportingFTL.tz}`,"b",!c.acclimatization.safeTZ)}) ${Vt("07.02.Définitions")}`):"±2"===c.acclimatization.value?p(`méridiens traversés <= 2 -> équipage acclimaté ${c.acclimatization.iata} (${jt(`GMT${c.reportingFTL.tz}`,"b",!c.acclimatization.safeTZ)})  ${Vt("07.02.Définitions")}`):(t&&p(t),p(`ACCLIMATATION: "${c.acclimatization.value}"${"X"!==c.acclimatization.value?" fuseau GMT"+c.acclimatization.tz+" ("+c.acclimatization.iata+")":""} ${Vt("07.02.Définitions")}`)),"X"===c.acclimatization.value){const e=!1;v.PEQ2=cn([Yt(c.legs),e],nn),p(`${Ut("accord spécifique SGRF: NON")} -> ajouter 1h au TSV MAX FTL PEQ2 si OUI`),p(`TSV MAX FTL PEQ2: ${Nt(v.PEQ2.value)} ${Vt("07.05.04.A.b")}`)}else{const e=new Date(c.reportingFTL.value.getTime()+36e5*parseFloat(c.acclimatization.tz)),t=e.getUTCHours()+e.getUTCMinutes()/60;v.PEQ2=cn([Yt(c.legs),t],tn),p(`Heure de référence FTL: ${zt(e)} ${Vt("07.02.Définitions")}`),p(`TSV MAX FTL PEQ2: ${Nt(v.PEQ2.value)} ${Vt("07.05.04.A.a")}`)}let y;if(u){const e=u.IN.getTime()+9e5;y=(c.reportingAF.value.getTime()-e)/36e5,m(`${Ut(`Durée du repos en escale: ${Nt(y)}`)} -> sinon, vérifier TSV MAX AF ≤ repos`),f(`Durée du repos à l'hôtel: ${Nt(y-(y<=10?1:.5))}`),y<10?f("Repos minoré, TSV MAX AF <= repos hotel"):y>10&&y<13&&f(`${Ut("Durée du repos à l'hotel ≥ 10h: -> sinon, vérifier TSV MAX AF ≤ repos")}`)}else y=100;const $={PEQ2:{},PEQ3:{value:ln(c.legs,3,l,a)},PEQ4:{value:ln(c.legs,4,l,a)}};p(`nombre de tronçons du SV au sens AF: ${en(c.legs)} ${Vt("07.08.03 & 07.08.05.D")}`),m(Ut("Vol Cargo: "+(l?"OUI":"NON"))),m(`TSV MAX AF PEQ3 (LC): ${Nt($.PEQ3.value)} ${Vt("07.08.05.C")}`),m(`TSV MAX AF PEQ4 (LC): ${Nt($.PEQ4.value)} ${Vt("07.08.05.C")}`);const x=Jt(o,r,s,n,(c.reportingAF.value.getTime()-e[0].reportingAF.value.getTime())/36e5,c,a),b=new Date(c.reportingAF.value.getTime()+36e5*parseFloat(x)),A=b.getUTCHours()+b.getUTCMinutes()/60;$.PEQ2=an(c.legs,o,A,y),p(`Fuseau de référence AF: GMT${x} ${Vt("07.08.01.A")}`),p(`Heure de référence AF: ${zt(b)} ${Vt("07.08.01.A")}`),p(`TSV MAX AF PEQ2: ${Nt($.PEQ2.value)} ${Vt("LC"===o?"07.08.05.B":"07.08.03.B")}`);const w=e=>{const t=(e=>new Date(c.reportingAF.value.getTime()+36e5*$[e].value-6e4*(g?75:15)))(e),n=(e=>new Date(c.reportingFTL.value.getTime()+36e5*v[e].value))(e);return n<=t?{rule:"FTL",value:v[e].value,IN:n,isForbidden:n.getTime()<c.IN.getTime()}:{rule:"AF",value:$[e].value,IN:t,isForbidden:t.getTime()<c.IN.getTime()}},T=w("PEQ2"),P=w("PEQ3"),k=w("PEQ4"),C=e=>cn([d,"FTL"===e.rule?e.value:(e.IN.getTime()-c.reportingFTL.value.getTime())/36e5],on).value;T.reposPNC=0,m("Calculs des repos en vol FTL pour le PNC au TSV MAX"),P.reposPNC=C(P),k.reposPNC=C(k);const L=c.FDP/60>v.PEQ2.value?cn([d,c.FDP/60],on):{value:0};m("Le repos PNC en vol AF est basé sur le temps de vol OFP"),m(`Le repos PNC en vol FTL est basé sur le ${Ut("TSV FTL PNC supposé identique à celui du CDB")}`);const S=c.legs.filter((e=>e.isOFP)).pop(),M={FTL:{value:L.value}};let E;const O="TSV AF PNC maxi 17h30",F="TSV AF PNC maxi 15h00";qt(n,S.depIATA)&&"LC"===o&&(E={},E.value=360-30*Math.ceil(Math.max(c.scheduledBlockTime-360,0)/60),E.textValue=_t(E.value),1===c.legs.length&&c.scheduledBlockTime>870?(E.textValue=O,E.textOUT=E.textValue):c.legs.length>1&&c.scheduledBlockTime>570?(E.textValue=F,E.textOUT=E.textValue):(E.OUT=new Date(c.OUT.getTime()+6e4*E.value),E.textOUT=zt(E.OUT)+"z"),m(`A la base, il y a un retard maximum pour les PNC LC de ${E.textValue} ${Ut("(si SV PNC identique)")}`));const q=c.legs[c.legs.length-1].blockTimeOFP;if(q&&(p(`Dernière étape du SV, butées départ calculées avec le bloc OFP: ${_t(q)}`),T.OUT=new Date(T.IN.getTime()-6e4*q),P.OUT=new Date(P.IN.getTime()-6e4*q),k.OUT=new Date(k.IN.getTime()-6e4*q),E)){const e=g?90:30,t=t=>new Date(c.reportingAF.value.getTime()+36e5*t-6e4*e-6e4*q);(E.textValue===O||E.textValue===F)&&(E.OUT=t(17.5),E.textOUT=zt(E.OUT)+"z")}return E&&"BEY"===S.destIATA&&(m(`${Rt("Vérifiez les conditions des vols BEY pour le retard PNC","b.warning")}${Vt("07.09.06.B.b")}`),E.textOUT=(e=>Rt(e,"span.warning"))(E.textOUT)),p(`Il est possible d'ajouter au TSV MAX une marge de 2h en PEQ2 et 3h en PEQ3/PEQ4 ${Vt("07.06.07.B")}`),p(`${Ut("La REGUL PN a toujours raison")} (même s'il faut parfois insister...)`),{...c,reposPNC:M,retardPNC:E||"",maxTSV_PEQ2:T,maxTSV_PEQ3:P,maxTSV_PEQ4:k,maxTSVFTL:v,maxTSVAF:$}},Zt=(e,{aircraftType:t,flightTypeAircraft:n,flightTypePNT:o,tzdb:s,ofpOUT:r,ofpOFF:l,ofpON:a,ofpIN:i,scheduledIN:c,blockTime:u,flightTime:d,scheduledBlockTime:p})=>{let m,f,h,g,v,y,$,x,b,A=!1,w=[],T=[];if(g=/TSV\s+-\s+(\d{2}):(\d{2})/u,v=g.exec(e),h=v?parseInt(v[2],10)+60*parseInt(v[1],10):0,g=/DATE\s:\s(\d+)\.(\S{3})\.(\d{4})/u,v=g.exec(e),!v)throw new Error("could not extract pairing month/year");if(b=parseInt(v[3],10),x=Ft.indexOf(v[2])+1,x<=0)throw new Error("could not extract pairing month");g=/CABIN VERSION[^(]+\((\d+)[^/]+\/\s*(\d+)\s*PNC/u,v=g.exec(e),v&&($=parseFloat(v[1]),y=parseFloat(v[2]));const P=e=>{const[t,n]=e.split("h");return n?`${t}.${(parseFloat(n)/6).toFixed(0)}`:t};g=/OPERATION VERSION\s(.+?)\s\d+\sNB PAX/u,v=g.exec(e);const k=v?v[1]:"";g=/(\d{2})\/(\d{2})\s\S+(\sX)?\s(\S{3})\s>\s(\S{3})\s\(([-+\dh]+)\)\s(\d{2}):(\d{2})\s(?:\d{2}:\d{2})\s(\d{2}):(\d{2})/gu;const C=()=>`<samp>${Array.from(e.matchAll(g),(e=>e[0])).join("<br>")}</samp>`;let L,S,M={legs:[]},E=!1,O=!1;for(v of e.matchAll(g)){const e=parseInt(v[2],10),t=parseInt(v[1],10),o=!!v[3],l=e<x?b+1:b,a=new Date(Date.UTC(l,e-1,t,parseInt(v[7],10),parseInt(v[8],10)));S&&a.toISOString()===S.toISOString()&&(E=!0),S=a;const i=parseInt(v[10],10)+60*parseInt(v[9],10),c=new Date(a.getTime()+6e4*i),d=v[4],p=v[5];m||(m=Ot.includes(d)?"PAR":d);const f=P(v[6]),h=It(d,`${l}-${v[2]}-${v[1]}T${v[7]}:${v[8]}Z`,s)||L;0!==M.legs.length&&a-M.legs[M.legs.length-1].IN>36e6&&(w.push(Wt(M,n,m,s)),M={legs:[]});const g=a.toISOString()===r.toISOString();M.legs.push({depIATA:d,destIATA:p,destTZ:f,depTZ:h,OUT:a,IN:c,blockTime:i,blockTimeOFP:g?u:void 0,isOFP:g,isMEP:o}),L=f}M.legs.length>0&&w.push(Wt(M,n,m,s));try{f=w[0].reportingAF.tz}catch(e){f=L}w.length>0&&void 0===w[0].depTZ&&w[0].legs.length>0&&(w[0].legs[0].depTZ=L,w[0].depTZ=L),T.push(Ut("la rotation satisfait au MANEX 07.05.04.A ou 07.05.04.C (standard ou avec repos en vol)")),["PAR","TLS","MRS","NCE","PTP"].includes(m)?(T.push(`base ${m}`),Array.isArray(w)&&M&&Array.isArray(M.legs)&&0!==w.length&&0!==M.legs.length&&(1!==w.length||1!==M.legs.length)||(O||T.push(Bt(`L'OFP ne contient pas la rotation complète ou erreur d'analyse:<br>${C()}`)),O=!0)):(O||T.push(Bt(`base ${m} -> l'OFP ne contient pas la rotation complète ou erreur d'analyse:<br>${C()}`)),O=!0),t&&"???"!==t||T.push(Bt("Type avion inconnu")),T.push(`type avion ${t} -> règles ${n}`),"LC"===n&&(A="77F"===t||["P001","J001","W001","Y001","1P","1J","1W","1Y"].includes(k)&&0===y,T.push(`${t} LC / config ${k} / ${y} PNC -> vol ${A?"CARGO":"PAX"}`)),M=Gt((e=>{let t,n,o;const s=[],r=[];if(!Array.isArray(e)||0===e.length)return[s,r.pop()];const l=e[0];for(const a of e){const e=a.legs.reduce(((e,t)=>e||t.isOFP),!1);let i;i=t?"X"!==o?Math.abs(parseFloat(t.tz)-parseFloat(a.reportingFTL.tz))<=2?{value:"±2",tz:a.reportingFTL.tz,iata:a.depIATA,safeTZ:a.reportingFTL.safeTZ}:Kt(t,n,o,a,e?r:[]):Kt(l.reportingFTL,l.depIATA,o,a,e?r:[]):{value:"Base",tz:a.reportingFTL.tz,iata:a.depIATA,safeTZ:a.reportingFTL.safeTZ},s.push({...a,acclimatization:i}),t=a.reportingFTL,o=i.value,n=a.depIATA}return[s,r.pop()]})(w),{base:m,flightTypeAircraft:n,baseTZ:f,flightTypePNT:o,isCargo:A},T),(E||p>M.scheduledBlockTime)&&(O||T.push(`${Bt("Attention: rotation CDB de l'OFP incohérente:")}<br>${C()}`),O=!0);const F="interdit";return{base:m,baseTZ:f,pilotCount:$,pncCount:y,scheduledTSV:h,textOfpOut:zt(r),textOfpOff:zt(l),textOfpOn:zt(a),textOfpIn:zt(i),textScheduledIn:zt(c),duty:{scheduledBlockTime:M.scheduledBlockTime,isCargo:A,retardPNC:M.retardPNC?{textOUT:M.retardPNC.textOUT}:"",rules:n,reposPNC:{AF:{textValue:_t(sn(d))},FTL:{textValue:on.dataDisplay(M.reposPNC.FTL.value)}},title:M.legs?M.legs.reduce(((e,t)=>e+"-"+t.destIATA),M.depIATA||""):"",textOUT:zt(M.OUT),reportingAF:{textValue:M.reportingAF.textValue,textEndValue:zt(new Date(M.reportingAF.value.getTime()+6e4*M.TSVAF))},reportingFTL:{textValue:M.reportingFTL.textValue,textEndValue:zt(new Date(M.reportingFTL.value.getTime()+6e4*M.FDP))},textIN:zt(M.IN),textTSVAF:_t(M.TSVAF),textFDP:_t(M.FDP),maxTSVAF:{PEQ2:{textValue:Nt(M.maxTSVAF.PEQ2.value)},PEQ3:{textValue:Nt(M.maxTSVAF.PEQ3.value)},PEQ4:{textValue:Nt(M.maxTSVAF.PEQ4.value)}},maxTSVFTL:{PEQ2:{textValue:Nt(M.maxTSVFTL.PEQ2.value)},PEQ3:{textValue:Nt(M.maxTSVFTL.PEQ3.value)},PEQ4:{textValue:Nt(M.maxTSVFTL.PEQ4.value)}},destIATA:M.destIATA,maxTSV_PEQ2:{rule:M.maxTSV_PEQ2.rule,textIN:M.maxTSV_PEQ2.isForbidden?F:zt(M.maxTSV_PEQ2.IN)+"z"+Ht(2),textOUT:Qt(M.maxTSV_PEQ2,M,2),reposPNC:"LC"!==n||M.maxTSV_PEQ2.isForbidden?"":_t(M.maxTSV_PEQ2.reposPNC)},maxTSV_PEQ3:{rule:M.maxTSV_PEQ3.rule,textIN:M.maxTSV_PEQ3.isForbidden?F:zt(M.maxTSV_PEQ3.IN)+"z"+Ht(3),textOUT:Qt(M.maxTSV_PEQ3,M,3),reposPNC:M.maxTSV_PEQ3.isForbidden?"":_t(M.maxTSV_PEQ3.reposPNC)},maxTSV_PEQ4:{rule:M.maxTSV_PEQ4.rule,textIN:M.maxTSV_PEQ4.isForbidden?F:zt(M.maxTSV_PEQ4.IN)+"z"+Ht(3),textOUT:Qt(M.maxTSV_PEQ4,M,3),reposPNC:M.maxTSV_PEQ4.isForbidden?"":_t(M.maxTSV_PEQ4.reposPNC)},steps:T}}},Kt=(e,t,n,{reportingFTL:o,depIATA:s},r)=>{const l=(o.value.getTime()-e.value.getTime())/6e4,a=Math.abs(parseFloat(o.tz)-parseFloat(e.tz));let i=[jt(`${t} ${e.tz}`,"b",!e.safeTZ),jt(`${s} ${o.tz}`,"b",!o.safeTZ),`${a}`];const c="X"===n?"le départ de la base":"dernière acclimatation";r.push(`Temps depuis ${c}: ${_t(l)}, méridiens traversés: ${i[2]} (${i[0]} -> ${i[1]})`);let u,d=null,p=!1;const{x:m,y:f,ix:h,iy:g,value:v}=cn([l,a],Xt);return"B"===v?(d=e.tz,u=t,p=e.safeTZ):"D"===v&&(d=o.tz,u=s,p=o.safeTZ),{x:m,y:f,ix:h,iy:g,value:v,tz:d,iata:u,safeTZ:p}},Jt=(e,t,n,o,s,{depIATA:r,reportingAF:l},a)=>{const i=parseFloat(l.tz)-parseFloat(n),c=e=>e>=0?`+${e}`:e.toString();let u=jt(`${r} ${l.tz}`,"b",!l.safeTZ);return a.push(`Type avion: ${e}, type de courrier: ${"LT"===t?"Long":"Moyen"} Trajet ${Vt("07.08.01.A")}`),"LC"===e&&"LT"===t?(a.push(`Temps d'absence AF: ${Nt(s)}, méridiens traversés: ${Math.abs(i)} ( ${o} ${n} ->  ${u})`),s<24?n:s<48?i>=3?c(parseFloat(n)+3):i<=-3?c(parseFloat(n)-3):l.tz:s<96?i>=6?c(parseFloat(n)+6):i<=-6?c(parseFloat(n)-6):l.tz:l.tz):n},Xt={x:[e=>e<2880,e=>e<4320,e=>e<5760,e=>e<7200,e=>e>=7200],y:[e=>e<4,e=>e<=6,e=>e<=9,e=>e<=12],data:[["B","D","D","D","D"],["B","X","D","D","D"],["B","X","X","D","D"],["B","X","X","X","D"]]},Yt=e=>e.length-(e.length>0&&e[0].isMEP?1:0),en=e=>e.length-(e.length>0&&e[e.length-1].isMEP?1:0),tn={x:[e=>e<=2,e=>3===e,e=>4===e,e=>5===e,e=>6===e],y:[e=>e>=6&&e<13.5,e=>e>=13.5&&e<14,e=>e>=14&&e<14.5,e=>e>=14.5&&e<15,e=>e>=15&&e<15.5,e=>e>=15.5&&e<16,e=>e>=16&&e<16.5,e=>e>=16.5&&e<17,e=>e>=17||e<5,e=>e>=5&&e<5.25,e=>e>=5.25&&e<5.5,e=>e>=5.5&&e<5.75,e=>e<6],data:[[13,12.5,12,11.5,11],[12.75,12.25,11.75,11.25,10.75],[12.5,12,11.5,11,10.5],[12.25,11.75,11.25,10.75,10.25],[12,11.5,11,10.5,10],[11.75,11.25,10.75,10.25,9.75],[11.5,11,10.5,10,9.5],[11.25,10.75,10.25,9.75,9.25],[11,10.5,10,9.5,9],[12,11.5,11,10.5,10],[12.25,11.75,11.25,10.75,10.25],[12.5,12,11.5,11,10.5],[12.75,12.25,11.75,11.25,10.75]]},nn={x:[e=>e<=2,e=>3===e,e=>4===e,e=>5===e],y:[e=>!0===e,e=>!1===e],data:[[12,11.5,11,10.5],[11,10.5,10,9.5]]},on={x:[e=>!0===e,e=>!1===e],y:[e=>e<=14.5,e=>e<=15,e=>e<=15.5,e=>e<=16,e=>e<=16.5,e=>e<=17,e=>e<=17.5,e=>e<=18,()=>!0],data:[[90,90],[105,120],[120,140],[135,160],[155,180],[180,205],[205,-1],[230,-1],[-1,-1]],dataDisplay:e=>e>=0?_t(e):"Interdit"},sn=e=>e<300?0:e<690?30+15*Math.floor((e-300)/60):e<870?135+15*Math.floor((e-690)/30):240,rn=(e,t,n=!0)=>{const o=Yt(e);let s=!1;const r=(e,t)=>Math.max(e,t.blockTime);if(o<=2&&(s=o<e.length?e.slice(1).reduce(r,0)>=540:e.reduce(r,0)>=540),o<=2&&s){if(3===t)return n?17:16;if(t>=4)return n?18:17}else if(o<=3){if(3===t)return n?16:15;if(t>=4)return n?17:16}},ln=(e,t,n=!1,o)=>{const s=en(e);if(n){if(t>=4){if(1===s)return 18;if(2===s&&e[0].depIATA!==e[e.length-1].destIATA)return 17.5}else if(3===t){if(1===s)return 16.5;if(2===s&&e[0].blockTime<=120&&e[1].blockTime>=480)return 16.5;if(2===s&&e[0].depIATA===e[e.length-1].destIATA)return 14;if(2===s)return"MEX"===e[0].depIATA&&e[0].blockTime<=210&&["CDG","ORY"].includes(e[e.length-1].destIATA)?16.5:15;if(3===s){const t=new Date(e[0].OUT.getTime()+36e5*parseFloat(e[0].depTZ));if(t.getUTCHours()+t.getUTCMinutes()/60<=10.5){if(e.reduce(((e,t)=>e||t.blockTime>=330),!1))return o.push(`${Ut("PEQ3: Le SV est considéré comme un cargo tri-tronçons Afrique")} ${Vt("07.08.05.C.a")}`),14.5}}}}else{if(t>=4&&1===s)return 18;if(1===s||2===s&&e[0].blockTime<=120&&e[1].blockTime>=480)return 16.5;if(2===s)return 14}return 0},an=(e,t,n,o)=>{const s=en(e),r=(e,r)=>{e=Math.floor(60*e)/60;let l=o;return"MC"===r&&(l=o<10?o-1:99),{value:Math.min(e,l),legs:s,refTime:n,type:t}};return"LC"===t?r(gn(n,s<=3?fn:hn),"LC"):s<=2?r(gn(n,un),"MC"):3===s?r(gn(n,dn),"MC"):4===s?r(gn(n,pn),"MC"):5===s?r(gn(n,mn),"MC"):void 0},cn=([e,t],n)=>{const o=n.x.findIndex((t=>t(e))),s=n.y.findIndex((e=>e(t)));return{value:o>=0&&s>=0?n.data[s][o]:void 0}},un=[[0,10.5],[4.5,10.5],[4.75,11],[5,11.34],[6,13],[8,13],[12,13],[18,10.5],[24,10.5]],dn=[[0,10.5],[4.99,10.5],[5,10.75],[5.5,12.5],[13.5,12.5],[14.75,12],[17.99,10.75],[18,10.5],[24,10.5]],pn=[[0,10.5],[4.99,10.5],[5,10.75],[5.5,12],[14.75,12.5],[17.99,10.75],[18,10.5],[24,10.5]],mn=[[0,0],[8.24,0],[8.25,12],[12,12],[12.5,11.5],[16,8],[16.01,0]],fn=[[0,12],[5,12],[9,14],[13,14],[19,12],[24,12]],hn=[[0,11],[5,11],[9,13],[14,13],[20,11],[24,11]],gn=(e,t)=>{const n=t.findIndex((([t])=>t>e));if(-1===n)return t[0][1];const[o,s]=t[n-1],[r,l]=t[n];return s+(e-o)/(r-o)*(l-s)},vn="previousAppVersion";const yn=Lt(),$n=Lt(!1),xn=Lt(!1),bn=Lt(!1),An=Lt(!1),wn=Lt(!1),Tn=Lt(!1),Pn=function(e){const{subscribe:t,set:n,update:o}=Lt(e);return{subscribe:t,set:n,update:o,reset:()=>n("object"==typeof e?{...e}:Array.isArray(e)?[...e]:e)}}(!0),kn=Lt(0),Cn=Lt(-1),Ln=Lt(),Sn=Lt(),Mn=Lt(),En=St([Ln,Mn],(([e,t])=>{if(e&&t){if(e.timeMatrix.length>0)return new Date(t.getTime()+6e4*e.timeMatrix[e.timeMatrix.length-1][1]);return new Date(t.getTime()+6e4*e.infos.flightTime)}})),On=Lt(),Fn=St([Ln,On],(([e,t])=>{let n;if(t?n=t:e&&(n=e.infos.aircraftType),n&&-1!==Mt.indexOf(n))return n})),qn=St([Ln],(([e])=>{try{return Zt(editolido.extract(e.text,"CREW PAIRING","Generated"),e.infos)}catch(e){}}));let In=new Date;const Dn=()=>{if("serviceWorker"in navigator){const e=18e5;new Date-In>e&&navigator.serviceWorker.getRegistration().then((e=>{e&&(e.waiting?(xn.set(!0),bn.set(!0)):e.update(),$n.set(!1),In=new Date)}),console.error)}},Nn=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&Dn()},_n=Ct(!0,(e=>{const t=()=>{document&&document.visibilityState?"visible"===document.visibilityState?e(!0):e(!1):e(!0)};return document.addEventListener("visibilitychange",t),t(),()=>{document.removeEventListener("visibilitychange",t)}})),zn=Ct({},(e=>{const t=()=>{e(navigator.onLine)};return"undefined"!=typeof navigator&&"onLine"in navigator?(t(),window.addEventListener("offline",t),window.addEventListener("online",t)):e(void 0),()=>{"undefined"!=typeof navigator&&"onLine"in navigator&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}})),jn=Ct("/",(e=>{const t=()=>{const t=document.querySelector("meta[name=viewport]"),n=t?t.getAttribute("content"):"";let o=window.location.hash.substr(1)||"/";"/map"===o?(An.set(!1),n&&t.setAttribute("content",n+",maximum-scale=1")):(n&&t.setAttribute("content",n.replace(",maximum-scale=1","")),o.startsWith("/help_")&&(o="/help"),navigator&&!1===navigator.standalone&&Ze&&(o="/install")),e(o),Dn()};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}})),Rn=St([Ln,Cn,Mn,Pn,_n],(([e,t,n,o,s],r)=>{let l;const a=o?1e4:6e4;if(e&&n){const o=e=>{e<100?r(e):(r(100),clearInterval(l),l=void 0,Cn.set(-1))};if(t>=0){let e=t;l=setInterval((()=>{o(e),e++}),100)}else{const t=n,i=new Date(t.getTime()+6e4*e.infos.flightTime),c=()=>{let n=new Date;return n<=t?0:n>=i?100:(n-t)/(60*e.infos.flightTime)/10},u=c();u<100?(s&&(l=setInterval((()=>{const e=c();o(e)}),a)),r(u)):r(100)}}else r(0);return()=>{l&&clearInterval(l)}}),0),Vn=St([Ln,Rn],(([e,t])=>{if(!e)return{map:{latitude:0,longitude:0},gramet:t,fl:300,reltime:0};const n=e.timeMatrix,o=e.distanceMatrix,s=o[0][0],r=o[o.length-1][0],l=o[o.length-1][1],a=0!==n.length?n[0][2]:o[0][2],i=0!==n.length?n[n.length-1][2]:o[o.length-1][2],c=t*(0!==n.length?n[n.length-1][1]:e.infos.flightTime)/100;if(t<=0)return{map:s,gramet:0,fl:a,reltime:c};if(t>=100)return{map:r,gramet:100,fl:i,reltime:c};if(0!==n.length){const e=ht(n,(e=>e[1]>=c)),[t,r,i]=n[e];if(c-r==0)return{reltime:c,map:t,gramet:100*o[e][1]/l,fl:i};const u=n[e-1];if(u){const n=o[e][1]-o[e-1][1],s=(r-c)/(r-u[1]);return{reltime:c,map:t.atFraction(u[0],s,n),gramet:100*(o[e][1]-s*n)/l,fl:u[2]}}return{reltime:c,map:s,gramet:0,fl:a}}if(0!==o.length){const e=t*o[o.length-1][1]/100,n=ht(o,(t=>t[1]>=e)),[r,l,i]=o[n];if(e-l==0)return{map:r,gramet:t,fl:i,reltime:c};const u=o[n-1];if(u){const n=l-u[1];return{map:r.atFraction(u[0],(l-e)/n,n),gramet:t,fl:u[2],reltime:c}}return{map:s,gramet:0,fl:a,reltime:c}}return{map:r,gramet:100,fl:i,reltime:c}}),{map:{latitude:0,longitude:0},gramet:0,fl:300,reltime:0});function Un(e){let t;return{c(){t=I("textarea"),t.value=e[0],U(t,"class","svelte-13az34h")},m(n,o){O(n,t,o),e[5](t)},p(e,n){1&n&&(t.value=e[0])},d(n){n&&F(t),e[5](null)}}}function Bn(t){let n,o,s;return{c(){n=I("a"),n.textContent="copier la route",U(n,"role","button"),U(n,"class","btn btn-primary"),U(n,"href","lhs-mpilot://")},m(e,r){O(e,n,r),o||(s=R(n,"click",t[4]),o=!0)},p:e,d(e){e&&F(n),o=!1,s()}}}function Hn(t){let n,o,s;return{c(){n=I("a"),n.innerHTML="ouvrir mPilot <sup>*</sup>",U(n,"role","button"),U(n,"class","btn btn-primary"),U(n,"href","lhs-mpilot://")},m(e,r){O(e,n,r),o||(s=R(n,"click",t[4]),o=!0)},p:e,d(e){e&&F(n),o=!1,s()}}}function Qn(n){let o,s,a;return{c(){o=I("span"),o.textContent="copié!",U(o,"class","svelte-13az34h")},m(e,t){O(e,o,t),a=!0},i(e){a||(s&&s.end(1),a=!0)},o(n){s=function(n,o,s){let a,i=o(n,s),c=!0;const u=Ee;function d(){const{delay:o=0,duration:s=300,easing:l=t,tick:d=e,css:p}=i||De;p&&(a=re(n,1,0,s,o,l,p));const m=T()+o,f=m+s;be((()=>Se(n,!1,"start"))),L((e=>{if(c){if(e>=f)return d(0,1),Se(n,!1,"end"),--u.r||r(u.c),!1;if(e>=m){const t=l((e-m)/s);d(1-t,t)}}return c}))}return u.r+=1,l(i)?Le().then((()=>{i=i(),d()})):d(),{end(e){e&&i.tick&&i.tick(1,0),c&&(a&&le(n,a),c=!1)}}}(o,wt,{}),a=!1},d(e){e&&F(o),e&&s&&s.end()}}}function Wn(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h,g=null!=e[0]&&Un(e);let v=(Ze?Hn:Bn)(e),y=Ze&&function(e){let t;return{c(){t=I("div"),t.innerHTML='<small class="text-muted"><sup>*</sup> Une fois dans l&#39;application mPilot,\n                il vous suffira de faire un coller (la route aura été copiée automatiquement).</small>',U(t,"class","card-text")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}(),$=e[2]&&Qn();return{c(){g&&g.c(),t=z(),n=I("div"),o=I("div"),s=I("h5"),s.textContent="Route Lido",r=z(),l=I("div"),a=I("div"),a.innerHTML='<p class="card-text">Cette route est optimisée par rapport à celle de PilotMission car elle utilise les airways. Utiliser cette route permet\n                    d&#39;avoir une application Lido plus réactive.</p>',i=z(),c=I("div"),v.c(),u=z(),y&&y.c(),d=z(),p=I("div"),m=N(e[3]),f=z(),$&&$.c(),U(s,"class","card-title"),U(a,"class","col-12 col-md-9"),U(c,"class","text-md-end col align-self-center col-12 col-md-3 py-3 py-md-0"),U(l,"class","row mb-3"),U(p,"class","text-monospace svelte-13az34h"),U(o,"class","card-body"),U(n,"class","card mb-3 svelte-13az34h")},m(e,x){g&&g.m(e,x),O(e,t,x),O(e,n,x),S(n,o),S(o,s),S(o,r),S(o,l),S(l,a),S(l,i),S(l,c),v.m(c,null),S(o,u),y&&y.m(o,null),S(o,d),S(o,p),S(p,m),S(p,f),$&&$.m(p,null),h=!0},p(e,[n]){null!=e[0]?g?g.p(e,n):(g=Un(e),g.c(),g.m(t.parentNode,t)):g&&(g.d(1),g=null),v.p(e,n),e[2]?$?4&n&&qe($,1):($=Qn(),$.c(),qe($,1),$.m(p,null)):$&&(Oe(),Ie($,1,1,(()=>{$=null})),Fe())},i(e){h||(qe($),h=!0)},o(e){Ie($),h=!1},d(e){g&&g.d(e),e&&F(t),e&&F(n),v.d(),y&&y.d(),$&&$.d()}}}let Gn=!1;if(navigator.permissions)try{navigator.permissions.query({name:"clipboard-write"}).then((e=>{"granted"!=e.state&&"prompt"!=e.state||(Gn=!0)})).catch((()=>{}))}catch(e){}function Zn(e,t,n){let o;p(e,Ln,(e=>n(7,o=e)));let s,r=null;const l=o?o.lidoRoute(!1).join(" "):"";let a,i=!1;return ue((()=>{a&&clearTimeout(a)})),[r,s,i,l,e=>{const t=async function(e){let t=!0;if(Gn)navigator.clipboard.writeText(e).then((()=>t=!0),(()=>t=!1));else{n(0,r=e),await xe(),s.focus(),s.select();try{t=document.execCommand("copy")}catch(e){t=!1}n(0,r=null)}return t}(l);Ze||(n(2,i=t),a=setTimeout((function(){n(2,i=!1),a&&clearTimeout(a)}),3e3),e.preventDefault())},function(e){fe[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class Kn extends Ge{constructor(e){super(),We(this,e,Zn,Wn,a,{})}}const Jn={routeDisplay:!0,routePin:0,routeColor:"FFDA25A8",alternateDisplay:!0,alternatePin:0,alternateColor:"FFFF00FF",natDisplay:!0,natPin:8,natColor:"80DA25A8",greatCircleDisplay:!0,greatCircleColor:"5F1478FF"};function Xn(e,t){e.addFolders({name:"greatcircle",enabled:t.greatCircleDisplay,color:t.greatCircleColor},{name:"ralt",enabled:t.alternateDisplay,color:t.alternateColor,pinId:t.alternatePin},{name:"rmain",color:t.routeColor,pinId:t.routePin},{name:"rnat",enabled:t.natDisplay,color:t.natColor,pinId:t.natPin},{name:"rnat_incomplete",enabled:t.natDisplay,color:t.natIncompleteColor,pinId:t.natPin})}const Yn=()=>(window.kmlGen||(window.kmlGen=new editolido.KMLGenerator,Xn(window.kmlGen,Jn)),window.kmlGen);function eo(e,t){if(!e)return;if(e.startsWith("etops-")||e.startsWith("airport-")||e.startsWith("fir-")||e.endsWith("-change")||e.endsWith("-hide")||"nat-incomplete-color"===e||"nat-pin-position"===e||e.startsWith("ogimet-"))return;const n=Yn(),o=rt(e);e.endsWith("-display")?n.changeFolderState(o,t):e.endsWith("-pin")?n.changeFolderPin(o,t):e.endsWith("-color")&&n.changeFolderColor(o,t.toUpperCase())}function to(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function no(e){let t,n,o,s,r=e[14].label+"";return{c(){t=I("option"),n=N(r),t.__value=o=e[16],t.value=t.__value,t.selected=s=e[16]===e[1]},m(e,o){O(e,t,o),S(t,n)},p(e,n){2&n&&s!==(s=e[16]===e[1])&&(t.selected=s)},d(e){e&&F(t)}}}function oo(t){let n,o,s,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,w=uo,T=[];for(let e=0;e<w.length;e+=1)T[e]=no(to(t,w,e));return{c(){n=I("kmlcolor"),o=I("pin"),s=D("svg"),a=D("use"),i=z(),c=I("select");for(let e=0;e<T.length;e+=1)T[e].c();u=z(),d=I("picker"),p=I("label"),m=I("input"),g=z(),v=I("input"),H(a,"xlink:href","#marker-symbol"),Z(a,"stroke",0===t[1]?"#fff":uo[t[1]].color),Z(a,"fill",uo[t[1]].color),U(o,"class","form-control svelte-5u5yzj"),U(c,"name",t[4]),U(c,"class","form-select"),void 0===t[1]&&be((()=>t[8].call(c))),U(m,"type","color"),U(p,"style",f=co(t[2])),U(v,"type","range"),U(v,"min","30"),U(v,"max","255"),U(d,"class","form-control"),U(d,"style",y=io(t[2][0])),U(n,"class","input-group")},m(e,r){O(e,n,r),S(n,o),S(o,s),S(s,a),S(n,i),S(n,c);for(let e=0;e<T.length;e+=1)T[e].m(c,null);K(c,t[1]),S(n,u),S(n,d),S(d,p),S(p,m),G(m,t[2][0]),S(d,g),S(d,v),G(v,t[2][1]),x||(b=[R(c,"change",t[8]),R(c,"change",t[9]),R(m,"input",t[10]),A(h=t[5].call(null,p,t[2])),R(v,"change",t[11]),R(v,"input",t[11]),A($=t[6].call(null,n,t[0]))],x=!0)},p(e,[t]){if(2&t&&Z(a,"stroke",0===e[1]?"#fff":uo[e[1]].color),2&t&&Z(a,"fill",uo[e[1]].color),2&t){let n;for(w=uo,n=0;n<w.length;n+=1){const o=to(e,w,n);T[n]?T[n].p(o,t):(T[n]=no(o),T[n].c(),T[n].m(c,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=w.length}2&t&&K(c,e[1]),4&t&&G(m,e[2][0]),4&t&&f!==(f=co(e[2]))&&U(p,"style",f),h&&l(h.update)&&4&t&&h.update.call(null,e[2]),4&t&&G(v,e[2][1]),4&t&&y!==(y=io(e[2][0]))&&U(d,"style",y),$&&l($.update)&&1&t&&$.update.call(null,e[0])},i:e,o:e,d(e){e&&F(n),q(T,e),x=!1,r(b)}}}const so=/^[A-F0-9]{8}$/i,ro=e=>{let[t,n]=ao(e);return[t,n/255]},lo=["#FF0000",255],ao=e=>{try{const t=parseInt(e.slice(0,2),16);return["#"+e.slice(6,8)+e.slice(4,6)+e.slice(2,4),t]}catch(e){return lo}},io=e=>{const[t,n,o]=[e.slice(1,3),e.slice(3,5),e.slice(5,7)].map((e=>parseInt(e,16)));return`--range-red: ${t}; --range-green: ${n}; --range-blue: ${o};`},co=e=>`background-color: ${e[0]}; opacity: ${e[1]/255}`,uo=[{label:"Aucun repère",color:"#FFFFFF"},{label:"Bleu",color:"#6699FF"},{label:"Jaune",color:"#FFFF00"},{label:"Marron* (Rouge pour Avenza/Earth)",color:"#CC9966"},{label:"Orange",color:"#FF9922"},{label:"Rose* (Rouge pour Avenza)",color:"#DD5599"},{label:"Rouge",color:"#FF0000"},{label:"Vert",color:"#22DD44"},{label:"Violet",color:"#BB11EE"}];function po(e,t,n){const o=de();let{kmlColor:s="FF0000FF"}=t,{selected:r=0}=t,{name:l}=t;const a=l+"-color",i=l+"-pin";let c=lo;const u=st(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,s=e.kmlColor),"selected"in e&&n(1,r=e.selected),"name"in e&&n(7,l=e.name)},[s,r,c,o,i,function(e){return{update(e){const[t,o]=e;n(0,s=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),u("change",{name:a,value:s})}}},function(e){return n(2,c=ao(s)),{update(e){n(2,c=ao(e)),u("change",{name:a,value:e.toUpperCase()})}}},l,function(){r=J(this),n(1,r)},e=>{e.target.blur(),o("change",{name:i,value:r})},function(){c[0]=this.value,n(2,c)},function(){c[1]=Q(this.value),n(2,c)}]}class mo extends Ge{constructor(e){super(),We(this,e,po,oo,a,{kmlColor:0,selected:1,name:7})}}const fo={routeDisplay:!0,routeColor:"FFDA25A8",alternateDisplay:!0,alternateColor:"FFFF00FF",natDisplay:!0,natPinPosition:0,natColor:"80858585",natIncompleteColor:"FF0000FF",greatCircleDisplay:!0,greatCircleColor:"5F1478FF",ogimetDisplay:!0,ogimetColor:"40FF0000",airportDisplay:!0,airportPin:0,airportLabel:0,firDisplay:!0,firHide:"",etopsDisplay:!0,etopsColor:"FF0324FC",iconTextChange:"1.0",lineWidthChange:"1.0",iconSizeChange:"1.0"};const ho=Object.freeze({optionsKML:"optionsKML",shortcut:"shortcut",downloadType:"downloadType",exportKML:"exportKML",focusKML:"focusKML",changelogOnUpdate:"changelogOnUpdate"}),go=new class{constructor(){}getItem(e){const t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(t){this.removeItem(e)}return null}setItem(e,t){const n=JSON.stringify(t);"{}"!==n&&localStorage.setItem(e,n)}removeItem(e){localStorage.removeItem(e)}hasItem(e){return null!==localStorage.getItem(e)}},vo=(e,t=fo)=>{const n={};for(let[o,s]of Object.entries(e))o in t&&(o.endsWith("Pin")?(s*=1,isNaN(s)||(n[o]=s)):o.endsWith("Color")&&s.match(so)?n[o]=s.toUpperCase():o.endsWith("Display")?n[o]=!!s:o.endsWith("Change")?(s*=1,isNaN(s)||(n[o]=s.toFixed(1))):o.endsWith("Hide")&&(n[o]=s.toString().trim()));return{...t,...n}},yo=(e,t="Mon OFP2MAP")=>{const n={},o=["optionsKML","shortcut","downloadType"];for(const[t,s]of Object.entries(ho)){if(!o.includes(s))continue;let r=go.getItem(s);if(t===ho.optionsKML&&e){const t={};for(const n of Object.keys(e).filter((t=>e[t]!==fo[t])))t[n]=e[n];r=t}if(null!==r)if(t===ho.optionsKML)for(const[e,t]of Object.entries(r))n[e]=t;else n[t]=r}const s=Object.entries(n).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),r=window.location.origin+window.location.pathname+(s?"?"+s:"")+window.location.hash;window.history.replaceState(n,t,r)};function $o(t){let n,o,s,l,a,i,c,u,d,p;return{c(){n=I("div"),o=I("span"),s=z(),l=I("input"),a=z(),i=I("div"),c=I("a"),u=N("Lancer"),U(o,"class","input-group-text svelte-1yaj23v"),U(l,"class","form-control svelte-1yaj23v"),U(l,"placeholder","Nom du raccourci"),U(l,"type","text"),U(c,"href",t[1]),U(c,"class","svelte-1yaj23v"),ee(c,"disabled",t[2]),U(i,"class","input-group-text svelte-1yaj23v"),ee(i,"disabled",t[2]),U(n,"class","input-group")},m(e,r){O(e,n,r),S(n,o),S(n,s),S(n,l),G(l,t[0]),S(n,a),S(n,i),S(i,c),S(c,u),d||(p=[R(l,"input",t[5]),R(l,"change",t[4]),R(c,"click",t[3])],d=!0)},p(e,[t]){1&t&&l.value!==e[0]&&G(l,e[0]),2&t&&U(c,"href",e[1]),4&t&&ee(c,"disabled",e[2]),4&t&&ee(i,"disabled",e[2])},i:e,o:e,d(e){e&&F(n),d=!1,r(p)}}}const xo="OFP2MAP";function bo(e,t,n){let o,s;p(e,Ln,(e=>n(6,s=e)));const r=de(),l=ho.shortcut;let a,i=go.getItem(l)||xo;const c=s?s.lidoRoute(!1).join(" "):"";return e.$$.update=()=>{1&e.$$.dirty&&n(2,o=!(i.trim()&&Ze))},[i,a,o,function(e){const t=i.trim();if(t&&Ze){const e=Yn(),o={lidoRoute:c,kml:e.render(),kmlAvenza:e.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS}),kmlGoogleEarth:e.render({styleTemplate:editolido.googleEarthStyleTemplate}),grametProxyURL:s.ogimetData.proxyImg};n(1,a="shortcuts://run-shortcut?name="+encodeURIComponent(t)+"&input=text&text="+encodeURIComponent(JSON.stringify(o)))}else e.preventDefault()},function(){const e=i.trim();e===xo?go.removeItem(l):go.setItem(l,e),r("save",[l,e])},function(){i=this.value,n(0,i)}]}class Ao extends Ge{constructor(e){super(),We(this,e,bo,$o,a,{})}}function wo(e){const t=()=>{document&&document.visibilityState&&"visible"!==document.visibilityState&&e&&e.blur&&(e.blur(),gt())};return document.addEventListener("visibilitychange",t,!1),{destroy(){document.removeEventListener("visibilitychange",t)}}}function To(t){let n,o,s,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b=Po[0]+"",w=Po[1]+"",T=Po[2]+"";return{c(){n=I("div"),o=I("select"),s=I("option"),l=N(b),i=I("option"),c=N(w),d=I("option"),p=N(T),h=z(),g=I("div"),v=I("a"),y=N(t[0]),s.selected=a=0===t[1],s.__value=0,s.value=s.__value,i.selected=u=1===t[1],i.__value=1,i.value=i.__value,d.selected=m=2===t[1],d.__value=2,d.value=d.__value,U(o,"class",f="form-select choice"+t[1]+" svelte-c2m79k"),U(o,"aria-label","Example select with button addon"),void 0===t[1]&&be((()=>t[7].call(o))),U(v,"class"," svelte-c2m79k"),U(v,"download",t[3]),U(v,"href",t[2]),U(g,"class","input-group-text svelte-c2m79k"),U(n,"class","input-group svelte-c2m79k")},m(e,r){O(e,n,r),S(n,o),S(o,s),S(s,l),S(o,i),S(i,c),S(o,d),S(d,p),K(o,t[1]),S(n,h),S(n,g),S(g,v),S(v,y),t[8](n),$||(x=[R(o,"change",t[7]),R(o,"change",t[6]),A(wo.call(null,o)),R(v,"click",t[5])],$=!0)},p(e,[t]){2&t&&a!==(a=0===e[1])&&(s.selected=a),2&t&&u!==(u=1===e[1])&&(i.selected=u),2&t&&m!==(m=2===e[1])&&(d.selected=m),2&t&&f!==(f="form-select choice"+e[1]+" svelte-c2m79k")&&U(o,"class",f),2&t&&K(o,e[1]),1&t&&W(y,e[0]),8&t&&U(v,"download",e[3]),4&t&&U(v,"href",e[2])},i:e,o:e,d(e){e&&F(n),t[8](null),$=!1,r(x)}}}const Po=["KML Mapsme","KML Avenza","KML Google Earth"],ko=["bs-green","bs-purple","bs4-cyan"];function Co(e,t,n){const o=de();let{label:s}=t;const r=ho.downloadType;let l=go.getItem(r)||1;"string"==typeof l&&(l=parseInt(l,10)),(l<0||l>=Po.length)&&(l=0);let a,i="",c="";const u=e=>{a.style.setProperty("--color",`var(--${ko[l]})`)},d=(e,t="application/vnd.google-earth.kml+xml")=>{const n=new Blob(e,{type:t});return URL.createObjectURL(n)};return ce((()=>(u(),()=>{i&&i.startsWith("blob:")&&URL.revokeObjectURL(i)}))),e.$$set=e=>{"label"in e&&n(0,s=e.label)},[s,l,i,c,a,function(e){const t=Yn(),o=["_mapsme.kml","_avenza.kml","_googleearth.kml"][l];let s=t.name;if(s?(s=s.trim(),n(3,c=s.replace(/[ \/]/g,"_").replace(/:/g,"")+o)):n(3,c="editolido"+o),i&&i.startsWith("blob:")&&URL.revokeObjectURL(i),0===l)n(2,i=d([t.render()]));else if(1===l)n(2,i=d([t.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS})]));else{if(2!==l)return e.preventDefault(),!1;n(2,i=d([t.render({styleTemplate:editolido.googleEarthStyleTemplate})]))}},function(e){e.target.blur(),1===l?go.removeItem(r):go.setItem(r,l),o("save",[r,l]),u()},function(){l=J(this),n(1,l)},function(e){fe[e?"unshift":"push"]((()=>{a=e,n(4,a)}))}]}class Lo extends Ge{constructor(e){super(),We(this,e,Co,To,a,{label:0})}}function So(e){let t,n,o,s,a,i,c,u,d,p,f,y,$,x,b,w;const T=e[8].default,P=m(T,e,e[7],null),k=P||function(e){let t;return{c(){t=N("Couleur")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}();return{c(){t=I("kmlcolor"),n=I("label"),o=I("input"),k&&k.c(),s=z(),a=I("picker"),i=I("label"),c=I("input"),p=z(),f=I("input"),U(o,"name",e[3]),o.checked=e[1],U(o,"type","checkbox"),U(n,"for",e[3]),U(n,"class","form-control"),U(c,"type","color"),U(i,"style",u=co(e[2])),U(f,"type","range"),U(f,"min","30"),U(f,"max","255"),U(a,"class","form-control"),U(a,"style",y=io(e[2][0])),U(t,"class","input-group checkbox-combo")},m(r,l){O(r,t,l),S(t,n),S(n,o),k&&k.m(n,null),S(t,s),S(t,a),S(a,i),S(i,c),G(c,e[2][0]),S(a,p),S(a,f),G(f,e[2][1]),x=!0,b||(w=[R(o,"change",e[9]),R(c,"input",e[10]),A(d=e[4].call(null,i,e[2])),R(f,"change",e[11]),R(f,"input",e[11]),A($=e[5].call(null,t,e[0]))],b=!0)},p(e,[t]){(!x||2&t)&&(o.checked=e[1]),P&&P.p&&(!x||128&t)&&g(P,T,e,e[7],x?h(T,e[7],t,null):v(e[7]),null),4&t&&G(c,e[2][0]),(!x||4&t&&u!==(u=co(e[2])))&&U(i,"style",u),d&&l(d.update)&&4&t&&d.update.call(null,e[2]),4&t&&G(f,e[2][1]),(!x||4&t&&y!==(y=io(e[2][0])))&&U(a,"style",y),$&&l($.update)&&1&t&&$.update.call(null,e[0])},i(e){x||(qe(k,e),x=!0)},o(e){Ie(k,e),x=!1},d(e){e&&F(t),k&&k.d(e),b=!1,r(w)}}}function Mo(e,t,n){let{$$slots:o={},$$scope:s}=t;const r=de();let{kmlColor:l="FF0000FF"}=t,{checked:a}=t,{name:i}=t;const c=i+"-color",u=i+"-display";let d=lo;const p=st(r,500);return e.$$set=e=>{"kmlColor"in e&&n(0,l=e.kmlColor),"checked"in e&&n(1,a=e.checked),"name"in e&&n(6,i=e.name),"$$scope"in e&&n(7,s=e.$$scope)},[l,a,d,u,function(e){return{update(e){const[t,o]=e;n(0,l=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),p("change",{name:c,value:l})}}},function(e){return n(2,d=ao(l)),{update(e){n(2,d=ao(e)),p("change",{name:c,value:e.toUpperCase()})}}},i,s,o,function(t){pe.call(this,e,t)},function(){d[0]=this.value,n(2,d)},function(){d[1]=Q(this.value),n(2,d)}]}class Eo extends Ge{constructor(e){super(),We(this,e,Mo,So,a,{kmlColor:0,checked:1,name:6})}}function Oo(e,t,n){const o=e.slice();return o[8]=t[n],o}function Fo(e,t,n){const o=e.slice();return o[8]=t[n],o}function qo(e,t){let n,o,s,r,l,a=t[8].label+"";return{key:e,first:null,c(){n=I("option"),o=N(a),n.__value=s=t[8].id,n.value=n.__value,n.selected=r=t[8].id===t[0],n.disabled=l=!t[2]&&t[8].ofpRequired,this.first=n},m(e,t){O(e,n,t),S(n,o)},p(e,o){t=e,1&o&&r!==(r=t[8].id===t[0])&&(n.selected=r),4&o&&l!==(l=!t[2]&&t[8].ofpRequired)&&(n.disabled=l)},d(e){e&&F(n)}}}function Io(e,t){let n,o,s,r,l=t[8].label+"";return{key:e,first:null,c(){n=I("option"),o=N(l),n.__value=s=t[8].id,n.value=n.__value,n.selected=r=t[8].id===t[1],this.first=n},m(e,t){O(e,n,t),S(n,o)},p(e,o){t=e,2&o&&r!==(r=t[8].id===t[1])&&(n.selected=r)},d(e){e&&F(n)}}}function Do(t){let n,o,s,l,a,i,c,u,d,p,m,f,h,g,v=[],y=new Map,$=[],x=new Map,b=_o;const w=e=>e[8].id;for(let e=0;e<b.length;e+=1){let n=Fo(t,b,e),o=w(n);y.set(o,v[e]=qo(o,n))}let T=Ro;const P=e=>e[8].id;for(let e=0;e<T.length;e+=1){let n=Oo(t,T,e),o=P(n);x.set(o,$[e]=Io(o,n))}return{c(){n=I("div"),o=I("div"),s=I("div"),l=I("select");for(let e=0;e<v.length;e+=1)v[e].c();a=z(),i=I("label"),i.textContent="Style",c=z(),u=I("div"),d=I("div"),p=I("select");for(let e=0;e<$.length;e+=1)$[e].c();m=z(),f=I("label"),f.textContent="Noms",U(l,"name","airport-pin"),U(l,"class","form-select"),void 0===t[0]&&be((()=>t[4].call(l))),U(i,"for","airport-pin"),U(i,"class","svelte-f39dqa"),U(s,"class","form-floating"),U(o,"class","col svelte-f39dqa"),U(p,"name","airport-label"),U(p,"class","form-select"),void 0===t[1]&&be((()=>t[6].call(p))),U(f,"for","airport-label"),U(f,"class","svelte-f39dqa"),U(d,"class","form-floating"),U(u,"class","col svelte-f39dqa"),U(n,"class","row g-2 svelte-f39dqa")},m(e,r){O(e,n,r),S(n,o),S(o,s),S(s,l);for(let e=0;e<v.length;e+=1)v[e].m(l,null);K(l,t[0]),S(s,a),S(s,i),S(n,c),S(n,u),S(u,d),S(d,p);for(let e=0;e<$.length;e+=1)$[e].m(p,null);K(p,t[1]),S(d,m),S(d,f),h||(g=[A(wo.call(null,l)),R(l,"change",t[4]),R(l,"change",t[5]),A(wo.call(null,p)),R(p,"change",t[6]),R(p,"change",t[7])],h=!0)},p(e,[t]){5&t&&(b=_o,v=Ve(v,t,w,1,e,b,y,l,Re,qo,null,Fo)),1&t&&K(l,e[0]),2&t&&(T=Ro,$=Ve($,t,P,1,e,T,x,p,Re,Io,null,Oo)),2&t&&K(p,e[1])},i:e,o:e,d(e){e&&F(n);for(let e=0;e<v.length;e+=1)v[e].d();for(let e=0;e<$.length;e+=1)$[e].d();h=!1,r(g)}}}const No=0,_o=[{label:"statuts",id:No,ofpRequired:!0},{label:"vert/rouge",id:1,ofpRequired:!1},{label:"bleu/vert/rouge",id:3,ofpRequired:!1},{label:"médical",id:2,ofpRequired:!1},{label:"reco & eao",id:4,ofpRequired:!1}],zo=_o.filter((e=>!1===e.ofpRequired)).map((e=>e.id)),jo=0,Ro=[{label:"ICAO",id:jo},{label:"IATA",id:1}];function Vo(e,t,n){let o;p(e,Ln,(e=>n(2,o=e)));const s=de();let{selectedPin:r=No}=t,{selectedLabel:l=jo}=t;return e.$$set=e=>{"selectedPin"in e&&n(0,r=e.selectedPin),"selectedLabel"in e&&n(1,l=e.selectedLabel)},[r,l,o,s,function(){r=J(this),n(0,r)},e=>{e.target.blur(),s("change",{name:"airport-pin",value:r})},function(){l=J(this),n(1,l)},e=>{e.target.blur(),s("change",{name:"airport-label",value:l})}]}class Uo extends Ge{constructor(e){super(),We(this,e,Vo,Do,a,{selectedPin:0,selectedLabel:1})}}function Bo(t){let n,o,s,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x;return{c(){n=I("div"),o=I("label"),s=N(t[2]),l=z(),a=I("button"),i=D("svg"),c=D("use"),d=z(),p=I("div"),m=N(t[0]),f=z(),h=I("button"),g=D("svg"),v=D("use"),U(o,"for",t[1]),U(o,"class","input-group-text svelte-1d7l614"),H(c,"xlink:href","#zoom-out-symbol"),U(i,"class","zoom"),U(a,"class","form-control svelte-1d7l614"),U(a,"type","button"),a.disabled=u=t[0]<=t[3],U(p,"class","form-control svelte-1d7l614"),H(v,"xlink:href","#zoom-in-symbol"),U(g,"class","zoom"),U(h,"class","form-control svelte-1d7l614"),U(h,"type","button"),h.disabled=y=t[0]>=t[4],U(n,"class","input-group input-group-sm mb-2")},m(e,r){O(e,n,r),S(n,o),S(o,s),S(n,l),S(n,a),S(a,i),S(i,c),S(n,d),S(n,p),S(p,m),S(n,f),S(n,h),S(h,g),S(g,v),$||(x=[R(a,"click",t[6]),R(h,"click",t[5])],$=!0)},p(e,[t]){4&t&&W(s,e[2]),2&t&&U(o,"for",e[1]),9&t&&u!==(u=e[0]<=e[3])&&(a.disabled=u),1&t&&W(m,e[0]),17&t&&y!==(y=e[0]>=e[4])&&(h.disabled=y)},i:e,o:e,d(e){e&&F(n),$=!1,r(x)}}}function Ho(e,t,n){const o=de();let{name:s}=t,{label:r}=t,{value:l}=t,{min:a=.6}=t,{max:i=2}=t,{step:c=.1}=t,{decimals:u=1}=t;const d=st(o,100);return e.$$set=e=>{"name"in e&&n(1,s=e.name),"label"in e&&n(2,r=e.label),"value"in e&&n(0,l=e.value),"min"in e&&n(3,a=e.min),"max"in e&&n(4,i=e.max),"step"in e&&n(7,c=e.step),"decimals"in e&&n(8,u=e.decimals)},[l,s,r,a,i,()=>{const e=l;n(0,l=Math.min(Math.max(parseFloat(l)+c,a),i).toFixed(u)),l!==e&&d("change",{name:s,value:l})},()=>{const e=l;n(0,l=Math.min(Math.max(parseFloat(l)-c,a),i).toFixed(u)),l!==e&&d("change",{name:s,value:l})},c,u]}class Qo extends Ge{constructor(e){super(),We(this,e,Ho,Bo,a,{name:1,label:2,value:0,min:3,max:4,step:7,decimals:8})}}function Wo(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",{detail:{origin:e,target:t.target}}))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Go(e){const t=[];for(let n=0;n<e.length;n++){const o=n>0?e[n][0]-e[n-1][0]:0;Math.abs(o)>180?o>=180?t.push([e[n][0]-360,e[n][1]]):o<180&&t.push([e[n][0]+360,e[n][1]]):t.push([e[n][0],e[n][1]])}return t}function Zo(e,t={}){return{type:"Feature",geometry:{type:"Point",coordinates:[e[0],e[1]]},properties:t}}function Ko(e){return{type:"geojson",data:{type:"FeatureCollection",features:e}}}function Jo(e,t={}){return{type:"Feature",geometry:{type:"LineString",coordinates:Go(e)},properties:t}}const Xo=10,Yo="#f8f9fa",es="#212529",ts=({ratio:e,size:t=10,extraFactor:n=1})=>{const o=rs(e,t,n);return o>=10?o/2:0},ns=({ratio:e,size:t=10,extraFactor:n=1})=>rs(e,t,n)/4,os=(e,t)=>{const[n,o,s]=(e=>[e.slice(6,8),e.slice(4,6),e.slice(2,4),e.slice(0,2)])(e).map((e=>parseInt(e,16)));return.299*n+.587*o+.114*s+255*(1-t)>186?es:Yo},ss=(e,t=1,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?1:o},rs=(e,t=10,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?Xo:o},ls=(e,t=2)=>{const n=e*t;return isNaN(n)?1:n},as=e=>["case",["==",1,["get","overrideTextColor"]],ss(e/1,.2*3),.2],is=(e,t)=>t?["case",["==",1,["get","overrideIconColor"]],t,e]:e,cs=(e,t)=>t?["case",["==",1,["get","overrideTextColor"]],t,e]:e,us=(e,t,n=.8)=>t?["case",["==",1,["get","overrideTextColor"]],Math.max(t,n),Math.max(e,n)]:Math.max(e,n),ds=(e,t)=>{const[n]=ro(e),[o]=t?ro(t):[null,null];return cs(n,o)},ps=(e,t,n=.8)=>{const[,o]=ro(e),[,s]=t?ro(t):[null,null];return us(o,s,n)};function ms(e,t,n,o,s,r,l,a=10){const i=function(e){switch(e){case"rmain":return"route";case"ralt":return"alternate";case"rnat":return"nat";default:return e}}(t),c=s[`${i}Display`],u=s[`${i}Color`],d=rs(s.iconTextChange,a),p=ss(s.iconSizeChange);e.addSource(`${t}-marker-source`,Ko(((e,t,n)=>{let o=[];const s=e.length;for(let r=0;r<s;r++){const s=t?t([e[r].longitude,e[r].latitude]):[e[r].longitude,e[r].latitude];s&&o.push(n?n(s,e[r]):s)}return o})(n,o,((e,t)=>Zo(e,{title:t.name.replace(/00\.0/g,"")}))))),e.addLayer(vs(t,u,c,d,p,r,l))}function fs(e,t,n,o,s,r,l,a){o?e.addSource(`${t}-line-source`,Ko(o(n).map((e=>Jo(e))))):e.addSource(`${t}-line-source`,{type:"geojson",data:Jo(n.map((e=>[e.longitude,e.latitude])))}),e.addLayer(ys(t,s,r,l,a))}function hs(e,t,n,o,s,r,l,a){if(o){const s=n.length,r=[];for(let e=0;e<s;e++){const t=o(n[e]),s=t.length;for(let e=0;e<s;e++)r.push(Jo(t[e]))}e.addSource(`${t}-line-source`,Ko(r))}else e.addSource(`${t}-line-source`,Ko(n.map((e=>Jo(e.map((e=>[e.longitude,e.latitude])))))));e.addLayer(ys(t,s,r,l,a))}const gs=(e,t=0,n=10,o=2)=>["interpolate",["linear"],["zoom"],t,e,n,e*o];function vs(e,t,n,o,s,r,l){const[a,i]=ro(t);return{id:`${e}-marker-layer`,type:"symbol",source:`${e}-marker-source`,layout:{"icon-image":"sdf-triangle","icon-size":as(s),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!1,visibility:n?"visible":"none","text-field":["get","title"],"text-size":gs(o,r,l),"text-offset":[0,.7],"text-anchor":"top"},paint:{"icon-color":is(a),"icon-halo-width":1,"icon-halo-color":"#000","text-halo-color":Yo,"text-color":cs(a),"text-opacity":us(i)}}}function ys(e,t,n,o=2,s=!1){const[r,l]=ro(t);return{id:`${e}-line-layer`,type:"line",source:`${e}-line-source`,layout:{"line-join":"round","line-cap":"round",visibility:n?"visible":"none"},paint:{"line-color":r,"line-opacity":l,"line-width":o,"line-dasharray":s?[10,10]:[1]}}}function $s(e,t,n=1){const{map:o,value:s}=t,r=`${e}-marker-layer`;return o.getLayer(r)&&o.setLayoutProperty(r,"icon-size",as(ss(s,n))),!0}function xs(e,t,n=10){const{map:o,value:s,mapOptions:r}=t,l=r.interpolateMinZoom||r.mapboxOptions.minZoom||0,a=r.interpolateMaxZoom||r.mapboxOptions.maxZoom||10,i=`${e}-marker-layer`;return o.getLayer(i)&&o.setLayoutProperty(i,"text-size",gs(rs(s,n),l,a)),!0}function bs(e,t,n=2){const{map:o,value:s}=t,r=`${e}-line-layer`;return o.getLayer(r)&&o.setPaintProperty(r,"line-width",ls(s,n)),!0}function As(e,t){const{map:n,value:o}=t,s=`${e}-line-layer`,r=`${e}-marker-layer`,[l,a]=ro(o);if(n.getLayer(s)&&(n.setPaintProperty(s,"line-color",l),n.setPaintProperty(s,"line-opacity",a)),n.getLayer(r)){const e=n.getLayoutProperty(r,"icon-image"),t=Array.isArray(e)?e.slice(-1).pop():e;n.setPaintProperty(r,"text-color",cs(l)),n.setPaintProperty(r,"text-opacity",us(a)),"sdf-triangle"===t&&n.setPaintProperty(r,"icon-color",is(l))}return!0}function ws(e,t,n){const{map:o}=n,s=`${e}-line-layer`,r=`${e}-marker-layer`;return o.getLayer(s)&&o.setLayoutProperty(s,"visibility",t?"visible":"none"),o.getLayer(r)&&o.setLayoutProperty(r,"visibility",t?"visible":"none"),!0}const Ts=e=>e&&(e.id.startsWith("vb_")||["ed_eqe_physical_fr","jb_theworld"].includes(e.id)),Ps="ogimet";var ks={show:ws.bind(null,Ps,!0),hide:ws.bind(null,Ps,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:s,mapOptions:r}=e;if(!n||Ts(r))return;const l=o.ogimetDisplay,{affineAndClip:a}=s,i=ls(o.lineWidthChange,1.5);fs(t,Ps,n.ogimetData.route.points,a,o.ogimetColor,l,i)},changeLine:As.bind(null,Ps),changeLineWidth:e=>bs(Ps,e,1.5)};const Cs=e=>e&&e.id.startsWith("vb_"),Ls="fir-reg-line-layer",Ss="fir-reg-orange-stripe-layer",Ms="fir-reg-red-stripe-layer",Es=[Ss,Ms,Ls],Os="fir-reg-source";function Fs(e){for(let t=0;t<e.length;t++){const n=t>0?e[t][0]-e[t-1][0]:0;if(Math.abs(n)>180)return!0}return!1}function qs({map:e,kmlOptions:t,mapOptions:n}){const o=t.firDisplay&&!t.firHide.includes(n.id);for(const t of Es)e.getLayer(t)&&e.setLayoutProperty(t,"visibility",o?"visible":"none")}var Is={show:e=>qs(e),hide:e=>qs(e),add:e=>{const{ofp:t,map:n,mapData:o,kmlOptions:s,mapOptions:r}=e;if(!t||Cs(r))return;const{affineAndClamp:l,affineAndClip:a}=o,i=s.firDisplay&&!s.firHide.includes(r.id);fetch("data/fir-reg.2402.geojson").then((e=>e.json())).then((e=>{if("jb_south"===r.id)for(let t=0;t<e.features.length;t++){const n=e.features[t].geometry.coordinates[0];e.features[t].geometry.coordinates=a(n.map((([e,t])=>({latitude:t,longitude:e}))),"polygon")}else if(l)for(let t=0;t<e.features.length;t++){const n=e.features[t].geometry.coordinates[0].map((e=>l(e)));"jb_pacific"===r.id&&Fs(n)?e.features[t].geometry.coordinates=[[]]:e.features[t].geometry.coordinates=[n]}n.addSource(Os,{type:"geojson",data:e}),n.addLayer({id:Ss,type:"fill",source:Os,layout:{visibility:i?"visible":"none"},paint:{"fill-pattern":"stripe-orange","fill-opacity":.4},filter:["!",["==","FIR-RED",["get","type"]]]}),n.addLayer({id:Ms,type:"fill",source:Os,layout:{visibility:i?"visible":"none"},paint:{"fill-pattern":"stripe-red","fill-opacity":.35},filter:["==","FIR-RED",["get","type"]]}),n.addLayer({id:Ls,type:"line",source:Os,layout:{visibility:i?"visible":"none"},paint:{"line-color":["case",["==","FIR-RED",["get","type"]],"rgb(255,0,0)","rgb(255,127,0)"],"line-width":1,"line-opacity":["case",["==","FIR-RED",["get","type"]],.35,.4]}})}))}};const Ds=e=>e&&e.id.startsWith("vb_"),Ns="great-circle";var _s={show:ws.bind(null,Ns,!0),hide:ws.bind(null,Ns,!1),add:e=>{const{ofp:t,kmlOptions:n,mapData:o,map:s,mapOptions:r}=e;if(!t||Ds(r))return;const l=n.greatCircleDisplay,{affineAndClip:a}=o,i=`${t.infos.depICAO}-${t.infos.destICAO}`,c=t.route,u=new editolido.Route([c.points[0],c.points[c.points.length-1]]).split(300,{name:`Ortho ${i}`}),d=ls(n.lineWidthChange,1.5);fs(s,Ns,u.points,a,n.greatCircleColor,l,d)},changeLine:As.bind(null,Ns),changeLineWidth:e=>bs(Ns,e,1.5)};function zs(e){let t,n,o,s,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,w,T,P,k,C,L,M,E,q;const D=[Rs,js],_=[];function j(e,t){return e[8]?1:0}l=j(e),a=_[l]=D[l](e),h=new Uo({props:{selectedPin:e[0].airportPin,selectedLabel:e[0].airportLabel}}),h.$on("change",e[9]),x=new Qo({props:{name:"icon-text-change",label:"Labels",value:e[0].iconTextChange,min:.8,max:2}}),x.$on("change",e[9]);let B=e[8]&&ar(e);function H(e,t){return e[7]?ir:cr}T=new Qo({props:{name:"icon-size-change",label:"Icônes",value:e[0].iconSizeChange}}),T.$on("change",e[9]);let Q=H(e),W=Q(e);return{c(){t=I("div"),n=I("button"),o=z(),s=I("form"),a.c(),i=z(),c=I("fieldset"),u=I("legend"),d=I("input"),m=N("Aéroports"),f=z(),Be(h.$$.fragment),g=z(),v=I("fieldset"),y=I("legend"),y.textContent="Aspect général",$=z(),Be(x.$$.fragment),b=z(),B&&B.c(),w=z(),Be(T.$$.fragment),P=z(),k=I("div"),W.c(),U(n,"type","button"),U(n,"tabindex","0"),U(n,"class","btn-close float-end"),U(n,"aria-label","Close"),U(d,"name","airport-display"),d.checked=p=e[0].airportDisplay,U(d,"type","checkbox"),U(u,"class","d-flex align-items-center"),U(c,"class","form-group svelte-1eddrr9"),U(v,"class","form-group svelte-1eddrr9"),U(k,"class","svelte-1eddrr9"),U(s,"class","svelte-1eddrr9"),U(t,"class","settings svelte-1eddrr9"),ee(t,"sidebar",e[6]),ee(t,"focusmode",e[7])},m(r,a){O(r,t,a),S(t,n),S(t,o),S(t,s),_[l].m(s,null),S(s,i),S(s,c),S(c,u),S(u,d),S(u,m),S(c,f),He(h,c,null),S(s,g),S(s,v),S(v,y),S(v,$),He(x,v,null),S(v,b),B&&B.m(v,null),S(v,w),He(T,v,null),S(s,P),S(s,k),W.m(k,null),M=!0,E||(q=[R(n,"click",e[21]),R(d,"change",e[9]),R(s,"submit",V(e[20])),A(C=Wo.call(null,t)),R(t,"click_outside",e[15])],E=!0)},p(e,n){let o=l;l=j(e),l===o?_[l].p(e,n):(Oe(),Ie(_[o],1,1,(()=>{_[o]=null})),Fe(),a=_[l],a?a.p(e,n):(a=_[l]=D[l](e),a.c()),qe(a,1),a.m(s,i)),(!M||1&n&&p!==(p=e[0].airportDisplay))&&(d.checked=p);const r={};1&n&&(r.selectedPin=e[0].airportPin),1&n&&(r.selectedLabel=e[0].airportLabel),h.$set(r);const c={};1&n&&(c.value=e[0].iconTextChange),x.$set(c),e[8]?B?(B.p(e,n),256&n&&qe(B,1)):(B=ar(e),B.c(),qe(B,1),B.m(v,w)):B&&(Oe(),Ie(B,1,1,(()=>{B=null})),Fe());const u={};1&n&&(u.value=e[0].iconSizeChange),T.$set(u),Q===(Q=H(e))&&W?W.p(e,n):(W.d(1),W=Q(e),W&&(W.c(),W.m(k,null))),(!M||64&n)&&ee(t,"sidebar",e[6]),(!M||128&n)&&ee(t,"focusmode",e[7])},i(e){M||(qe(a),qe(h.$$.fragment,e),qe(x.$$.fragment,e),qe(B),qe(T.$$.fragment,e),be((()=>{L||(L=_e(t,Tt,{duration:300,x:200,y:0},!0)),L.run(1)})),M=!0)},o(e){Ie(a),Ie(h.$$.fragment,e),Ie(x.$$.fragment,e),Ie(B),Ie(T.$$.fragment,e),L||(L=_e(t,Tt,{duration:300,x:200,y:0},!1)),L.run(0),M=!1},d(e){e&&F(t),_[l].d(),Qe(h),Qe(x),B&&B.d(),Qe(T),W.d(),e&&L&&L.end(),E=!1,r(q)}}}function js(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,A,w,T,P,k,C,L,M,E,q,D,_,j,V,B=Ds(e[1]),H=Ts(e[1]);function Q(e,t){return 2&t&&(a=null),null==a&&(a=!!Cs(e[1])),a?Us:e[0].firDisplay?Vs:void 0}let W=Q(e,-1),G=W&&W(e);function Z(e,t){return 2&t&&(c=null),null==c&&(c=!!Cs(e[1])),c?Ws:e[0].firDisplay?Qs:void 0}let K=Z(e,-1),J=K&&K(e);p=new Eo({props:{name:"route",kmlColor:e[0].routeColor,checked:e[0].routeDisplay,$$slots:{default:[Ks]},$$scope:{ctx:e}}}),p.$on("change",e[9]);let X=e[7]&&Js();g=new Eo({props:{name:"alternate",kmlColor:e[0].alternateColor,checked:e[0].alternateDisplay,$$slots:{default:[Xs]},$$scope:{ctx:e}}}),g.$on("change",e[9]),$=new Eo({props:{name:"nat",kmlColor:e[0].natColor,checked:e[0].natDisplay,$$slots:{default:[Ys]},$$scope:{ctx:e}}}),$.$on("change",e[9]),T=new Eo({props:{name:"great-circle",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay,$$slots:{default:[tr]},$$scope:{ctx:e}}}),T.$on("change",e[9]);let Y=B&&nr();L=new Eo({props:{name:"ogimet",kmlColor:e[0].ogimetColor,checked:e[0].ogimetDisplay,$$slots:{default:[sr]},$$scope:{ctx:e}}}),L.$on("change",e[9]);let ee=H&&rr();return D=new Eo({props:{name:"etops",kmlColor:e[0].etopsColor,checked:e[0].etopsDisplay,$$slots:{default:[lr]},$$scope:{ctx:e}}}),D.$on("change",e[9]),{c(){t=I("fieldset"),n=I("div"),o=I("label"),s=I("input"),l=N("FIR REG\n                    "),G&&G.c(),i=z(),J&&J.c(),u=z(),d=I("fieldset"),Be(p.$$.fragment),m=z(),X&&X.c(),f=z(),h=I("fieldset"),Be(g.$$.fragment),v=z(),y=I("fieldset"),Be($.$$.fragment),x=z(),b=I("small"),b.textContent="Un track incomplet sera rouge",A=z(),w=I("fieldset"),Be(T.$$.fragment),P=z(),Y&&Y.c(),k=z(),C=I("fieldset"),Be(L.$$.fragment),M=z(),ee&&ee.c(),E=z(),q=I("fieldset"),Be(D.$$.fragment),U(s,"name","fir-display"),s.checked=r=e[0].firDisplay,U(s,"type","checkbox"),U(o,"for","fir-display"),U(o,"class","form-control"),U(n,"class","input-group checkbox-combo"),U(t,"class","form-group spaceright svelte-1eddrr9"),U(d,"class","form-group svelte-1eddrr9"),U(h,"class","form-group svelte-1eddrr9"),U(b,"class","form-text text-muted svelte-1eddrr9"),U(y,"class","form-group svelte-1eddrr9"),U(w,"class","form-group svelte-1eddrr9"),U(C,"class","form-group svelte-1eddrr9"),U(q,"class","form-group svelte-1eddrr9")},m(r,a){O(r,t,a),S(t,n),S(n,o),S(o,s),S(o,l),G&&G.m(o,null),S(t,i),J&&J.m(t,null),O(r,u,a),O(r,d,a),He(p,d,null),S(d,m),X&&X.m(d,null),O(r,f,a),O(r,h,a),He(g,h,null),O(r,v,a),O(r,y,a),He($,y,null),S(y,x),S(y,b),O(r,A,a),O(r,w,a),He(T,w,null),S(w,P),Y&&Y.m(w,null),O(r,k,a),O(r,C,a),He(L,C,null),S(C,M),ee&&ee.m(C,null),O(r,E,a),O(r,q,a),He(D,q,null),_=!0,j||(V=R(s,"change",e[9]),j=!0)},p(e,n){(!_||1&n&&r!==(r=e[0].firDisplay))&&(s.checked=r),W===(W=Q(e,n))&&G?G.p(e,n):(G&&G.d(1),G=W&&W(e),G&&(G.c(),G.m(o,null))),K===(K=Z(e,n))&&J?J.p(e,n):(J&&J.d(1),J=K&&K(e),J&&(J.c(),J.m(t,null)));const l={};1&n&&(l.kmlColor=e[0].routeColor),1&n&&(l.checked=e[0].routeDisplay),268435584&n&&(l.$$scope={dirty:n,ctx:e}),p.$set(l),e[7]?X||(X=Js(),X.c(),X.m(d,null)):X&&(X.d(1),X=null);const a={};1&n&&(a.kmlColor=e[0].alternateColor),1&n&&(a.checked=e[0].alternateDisplay),268435456&n&&(a.$$scope={dirty:n,ctx:e}),g.$set(a);const i={};1&n&&(i.kmlColor=e[0].natColor),1&n&&(i.checked=e[0].natDisplay),268435456&n&&(i.$$scope={dirty:n,ctx:e}),$.$set(i);const c={};1&n&&(c.kmlColor=e[0].greatCircleColor),1&n&&(c.checked=e[0].greatCircleDisplay),268435458&n&&(c.$$scope={dirty:n,ctx:e}),T.$set(c),2&n&&(B=Ds(e[1])),B?Y||(Y=nr(),Y.c(),Y.m(w,null)):Y&&(Y.d(1),Y=null);const u={};1&n&&(u.kmlColor=e[0].ogimetColor),1&n&&(u.checked=e[0].ogimetDisplay),268435458&n&&(u.$$scope={dirty:n,ctx:e}),L.$set(u),2&n&&(H=Ts(e[1])),H?ee||(ee=rr(),ee.c(),ee.m(C,null)):ee&&(ee.d(1),ee=null);const m={};1&n&&(m.kmlColor=e[0].etopsColor),1&n&&(m.checked=e[0].etopsDisplay),268435456&n&&(m.$$scope={dirty:n,ctx:e}),D.$set(m)},i(e){_||(qe(p.$$.fragment,e),qe(g.$$.fragment,e),qe($.$$.fragment,e),qe(T.$$.fragment,e),qe(L.$$.fragment,e),qe(D.$$.fragment,e),_=!0)},o(e){Ie(p.$$.fragment,e),Ie(g.$$.fragment,e),Ie($.$$.fragment,e),Ie(T.$$.fragment,e),Ie(L.$$.fragment,e),Ie(D.$$.fragment,e),_=!1},d(e){e&&F(t),G&&G.d(),J&&J.d(),e&&F(u),e&&F(d),Qe(p),X&&X.d(),e&&F(f),e&&F(h),Qe(g),e&&F(v),e&&F(y),Qe($),e&&F(A),e&&F(w),Qe(T),Y&&Y.d(),e&&F(k),e&&F(C),Qe(L),ee&&ee.d(),e&&F(E),e&&F(q),Qe(D),j=!1,V()}}}function Rs(t){let n;return{c(){n=I("p"),n.textContent="Mode sans OFP restreint",U(n,"class","svelte-1eddrr9")},m(e,t){O(e,n,t)},p:e,i:e,o:e,d(e){e&&F(n)}}}function Vs(e){let t;function n(e,t){return e[3]?Hs:Bs}let o=n(e),s=o(e);return{c(){s.c(),t=j()},m(e,n){s.m(e,n),O(e,t,n)},p(e,r){o===(o=n(e))&&s?s.p(e,r):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&F(t)}}}function Us(t){let n,o;return{c(){n=D("svg"),o=D("use"),H(o,"xlink:href","#eye-off-symbol"),U(n,"class","deactivated eye svelte-1eddrr9")},m(e,t){O(e,n,t),S(n,o)},p:e,d(e){e&&F(n)}}}function Bs(t){let n,o,s,r;return{c(){n=D("svg"),o=D("use"),H(o,"xlink:href","#eye-symbol"),U(n,"class","eye svelte-1eddrr9")},m(e,l){O(e,n,l),S(n,o),s||(r=R(n,"click",t[16]),s=!0)},p:e,d(e){e&&F(n),s=!1,r()}}}function Hs(t){let n,o,s,r;return{c(){n=D("svg"),o=D("use"),H(o,"xlink:href","#eye-off-symbol"),U(n,"class","eye svelte-1eddrr9")},m(e,l){O(e,n,l),S(n,o),s||(r=R(n,"click",t[16]),s=!0)},p:e,d(e){e&&F(n),s=!1,r()}}}function Qs(e){let t,n=e[3]&&Gs();return{c(){n&&n.c(),t=j()},m(e,o){n&&n.m(e,o),O(e,t,o)},p(e,o){e[3]?n||(n=Gs(),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&F(t)}}}function Ws(t){let n;return{c(){n=I("small"),n.textContent="Calque désactivé sur cette projection",U(n,"class","deactivated form-text text-muted svelte-1eddrr9")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Gs(e){let t;return{c(){t=I("small"),t.textContent="Calque masqué sur cette projection",U(t,"class","form-text text-muted svelte-1eddrr9")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Zs(e){let t,n;return{c(){t=D("svg"),n=D("use"),H(n,"xlink:href","#checkmark-symbol"),U(t,"class","checkmark svelte-1eddrr9")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&F(t)}}}function Ks(e){let t,n,o,s,r,l=e[7]&&Zs();return{c(){t=N("Route\n                "),n=I("button"),l&&l.c(),o=N("FOCUS"),U(n,"class","getfocus btn btn-sm btn-outline-info svelte-1eddrr9"),ee(n,"active",e[7])},m(a,i){O(a,t,i),O(a,n,i),l&&l.m(n,null),S(n,o),s||(r=R(n,"click",V(e[13])),s=!0)},p(e,t){e[7]?l||(l=Zs(),l.c(),l.m(n,o)):l&&(l.d(1),l=null),128&t&&ee(n,"active",e[7])},d(e){e&&F(t),e&&F(n),l&&l.d(),s=!1,r()}}}function Js(e){let t;return{c(){t=I("small"),t.textContent="Cliquez sur FOCUS pour sortir du mode",U(t,"class","text-center mt-0 svelte-1eddrr9")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Xs(e){let t;return{c(){t=N("Dégagement")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Ys(e){let t;return{c(){t=N("Tracks")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function er(e){let t,n;return{c(){t=D("svg"),n=D("use"),H(n,"xlink:href","#eye-off-symbol"),U(t,"class","deactivated eye svelte-1eddrr9")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&F(t)}}}function tr(e){let t,n,o=Ds(e[1]),s=o&&er();return{c(){t=N("Orthodromie\n                "),s&&s.c(),n=j()},m(e,o){O(e,t,o),s&&s.m(e,o),O(e,n,o)},p(e,t){2&t&&(o=Ds(e[1])),o?s||(s=er(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){e&&F(t),s&&s.d(e),e&&F(n)}}}function nr(e){let t;return{c(){t=I("small"),t.textContent="Calque désactivé sur cette projection",U(t,"class","deactivated form-text text-muted svelte-1eddrr9")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function or(e){let t,n;return{c(){t=D("svg"),n=D("use"),H(n,"xlink:href","#eye-off-symbol"),U(t,"class","deactivated eye svelte-1eddrr9")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&F(t)}}}function sr(e){let t,n,o=Ts(e[1]),s=o&&or();return{c(){t=N("Route GRAMET\n                "),s&&s.c(),n=j()},m(e,o){O(e,t,o),s&&s.m(e,o),O(e,n,o)},p(e,t){2&t&&(o=Ts(e[1])),o?s||(s=or(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){e&&F(t),s&&s.d(e),e&&F(n)}}}function rr(e){let t;return{c(){t=I("small"),t.textContent="Calque désactivé sur cette projection",U(t,"class","deactivated form-text text-muted svelte-1eddrr9")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function lr(e){let t;return{c(){t=N("ETOPS")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function ar(e){let t,n;return t=new Qo({props:{name:"line-width-change",label:"Lignes",value:e[0].lineWidthChange,max:3}}),t.$on("change",e[9]),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.value=e[0].lineWidthChange),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function ir(e){let t,n,o,s;return{c(){t=I("button"),n=N("RESET Réglages mode FOCUS"),t.disabled=e[4],U(t,"class","resetfocus btn btn-danger btn-sm svelte-1eddrr9"),U(t,"type","button")},m(r,l){O(r,t,l),S(t,n),o||(s=R(t,"click",e[14]),o=!0)},p(e,n){16&n&&(t.disabled=e[4])},d(e){e&&F(t),o=!1,s()}}}function cr(e){let t,n,o,s,l,a,i,c,u,d,p,m=!e[2]&&ur(e);return{c(){t=I("button"),n=N("Mémoriser"),s=z(),l=I("button"),a=N("Restaurer"),c=z(),m&&m.c(),u=j(),t.disabled=o=!e[5],U(t,"class","btn btn-primary btn-sm svelte-1eddrr9"),U(t,"type","button"),l.disabled=i=!e[5],U(l,"class","btn btn-secondary btn-sm svelte-1eddrr9"),U(l,"type","button")},m(o,r){O(o,t,r),S(t,n),O(o,s,r),O(o,l,r),S(l,a),O(o,c,r),m&&m.m(o,r),O(o,u,r),d||(p=[R(t,"click",e[12]),R(l,"click",e[11])],d=!0)},p(e,n){32&n&&o!==(o=!e[5])&&(t.disabled=o),32&n&&i!==(i=!e[5])&&(l.disabled=i),e[2]?m&&(m.d(1),m=null):m?m.p(e,n):(m=ur(e),m.c(),m.m(u.parentNode,u))},d(e){e&&F(t),e&&F(s),e&&F(l),e&&F(c),m&&m.d(e),e&&F(u),d=!1,r(p)}}}function ur(t){let n,o,s;return{c(){n=I("button"),n.textContent="Reset",U(n,"class","btn btn-outline-dark btn-sm ms-auto svelte-1eddrr9"),U(n,"type","button")},m(e,r){O(e,n,r),o||(s=R(n,"click",t[10]),o=!0)},p:e,d(e){e&&F(n),o=!1,s()}}}function dr(e){let t,n,o=e[6]&&zs(e);return{c(){o&&o.c(),t=j()},m(e,s){o&&o.m(e,s),O(e,t,s),n=!0},p(e,[n]){e[6]?o?(o.p(e,n),64&n&&qe(o,1)):(o=zs(e),o.c(),qe(o,1),o.m(t.parentNode,t)):o&&(Oe(),Ie(o,1,1,(()=>{o=null})),Fe())},i(e){n||(qe(o),n=!0)},o(e){Ie(o),n=!1},d(e){o&&o.d(e),e&&F(t)}}}function pr(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}function mr(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function fr(e,t){return JSON.stringify(e)===JSON.stringify(t)}function hr(e,t,n){let o,s,r,l,a,i,c;p(e,An,(e=>n(6,a=e))),p(e,wn,(e=>n(7,i=e))),p(e,Ln,(e=>n(8,c=e)));const u=de(),d=ho.optionsKML;let m,f,{kmlOptions:h}=t,{mapOptions:g}=t;const v=ho.focusKML;let y=vo({...go.getItem(d)||{}});const $=e=>Object.keys(e).reduce(((t,n)=>(t[n]=("routeDisplay"===n||!n.endsWith("Display"))&&e[n],t)),{});function x(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,s=pr(t);h[s]!==o&&(n(0,h[s]=o,h),u("change",{name:t,value:o}))}function A(e){let t=!1;for(const[o,s]of Object.entries(e))h[o]!==s&&(n(0,h[o]=s,h),u("change",{name:mr(o),value:s}),t=!0);t&&n(0,h={...h})}function w(){i&&(go.setItem(v,h),f&&A(f),m=void 0,b(wn,i=!1,i))}return e.$$set=e=>{"kmlOptions"in e&&n(0,h=e.kmlOptions),"mapOptions"in e&&n(1,g=e.mapOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(2,o=fr(h,fo)),524289&e.$$.dirty&&n(5,s=!fr(y,h)),262145&e.$$.dirty&&n(4,r=!!f&&fr($(f),h)),3&e.$$.dirty&&n(3,l=!!g&&h.firHide.split(",").includes(g.id))},[h,g,o,l,r,s,a,i,c,x,function(){A(fo)},function(){A(y)},function(){if(o)go.removeItem(d);else{const e={};for(const t of Object.keys(h).filter((e=>h[e]!==fo[e])))e[t]=h[t];go.setItem(d,e)}u("save"),n(19,y={...h})},function(e){e.target.blur(),i?w():(n(18,f={...h}),m=vo({...go.getItem(v)||$(h)}),b(wn,i=!0,i),A(m)),b(An,a=!1,a)},function(){go.removeItem(v),f&&(m=$(f),A(m))},function(){b(An,a=!1,a)},function(){const e=h.firHide.split(",").filter((e=>e.length>0)),t=e.indexOf(g.id);t>=0?e.splice(t,1):(e.push(g.id),e.sort()),x({detail:{name:"fir-hide",value:e.join(",")}})},w,f,y,function(t){pe.call(this,e,t)},()=>{b(An,a=!a,a),a||gt()}]}class gr extends Ge{constructor(e){super(),We(this,e,hr,dr,a,{kmlOptions:0,mapOptions:1,endFocusMode:17})}get endFocusMode(){return this.$$.ctx[17]}}function vr(e){let t;return{c(){t=N("Orthodromie")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function yr(e){let t,n,o,s,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,A,w,T,P,k,C,L,M,E,q,D,_,j,V,B,H,Q,W,G,Z,K,J,X,Y;return l=new mo({props:{name:"route",kmlColor:e[0].routeColor,selected:e[0].routePin}}),l.$on("change",e[4]),f=new mo({props:{name:"alternate",kmlColor:e[0].alternateColor,selected:e[0].alternatePin}}),f.$on("change",e[4]),A=new mo({props:{name:"nat",kmlColor:e[0].natColor,selected:e[0].natPin}}),A.$on("change",e[4]),C=new Eo({props:{name:"great-circle",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay,$$slots:{default:[vr]},$$scope:{ctx:e}}}),C.$on("change",e[4]),{c(){t=I("div"),n=I("fieldset"),o=I("legend"),o.textContent="Route",s=z(),Be(l.$$.fragment),a=z(),i=I("fieldset"),c=I("legend"),u=I("input"),p=N("Dégagement"),m=z(),Be(f.$$.fragment),h=z(),g=I("fieldset"),v=I("legend"),y=I("input"),x=N("Tracks"),b=z(),Be(A.$$.fragment),w=z(),T=I("small"),T.textContent="Positionné à l'entrée des tracks, un track incomplet restera rouge.",P=z(),k=I("fieldset"),Be(C.$$.fragment),L=z(),M=I("div"),E=I("button"),q=N("Mémoriser"),_=z(),j=I("button"),V=N("Restaurer"),H=z(),Q=I("button"),W=N("Comme Carte"),G=z(),Z=I("button"),K=N("Reset"),U(n,"class","form-group svelte-1ib2evr"),U(u,"name","alternate-display"),u.checked=d=e[0].alternateDisplay,U(u,"type","checkbox"),U(i,"class","form-group svelte-1ib2evr"),U(y,"name","nat-display"),y.checked=$=e[0].natDisplay,U(y,"type","checkbox"),U(T,"class","form-text text-muted"),U(g,"class","form-group svelte-1ib2evr"),U(k,"class","form-group svelte-1ib2evr"),E.disabled=D=!e[3],U(E,"class","btn btn-primary btn-sm svelte-1ib2evr"),U(E,"type","button"),j.disabled=B=!e[3],U(j,"class","btn btn-secondary btn-sm ms-3 svelte-1ib2evr"),U(j,"type","button"),Q.disabled=e[2],U(Q,"class","btn btn-outline-secondary btn-sm ms-auto svelte-1ib2evr"),U(Q,"type","button"),Z.disabled=e[1],U(Z,"class","btn btn-outline-secondary btn-sm ms-auto svelte-1ib2evr"),U(Z,"type","button"),U(M,"class","mt-4 mb-2 d-flex svelte-1ib2evr")},m(r,d){O(r,t,d),S(t,n),S(n,o),S(n,s),He(l,n,null),S(t,a),S(t,i),S(i,c),S(c,u),S(c,p),S(i,m),He(f,i,null),S(t,h),S(t,g),S(g,v),S(v,y),S(v,x),S(g,b),He(A,g,null),S(g,w),S(g,T),S(t,P),S(t,k),He(C,k,null),S(t,L),S(t,M),S(M,E),S(E,q),S(M,_),S(M,j),S(j,V),S(M,H),S(M,Q),S(Q,W),S(M,G),S(M,Z),S(Z,K),J=!0,X||(Y=[R(u,"change",e[4]),R(y,"change",e[4]),R(E,"click",e[8]),R(j,"click",e[5]),R(Q,"click",e[7]),R(Z,"click",e[6])],X=!0)},p(e,[t]){const n={};1&t&&(n.kmlColor=e[0].routeColor),1&t&&(n.selected=e[0].routePin),l.$set(n),(!J||1&t&&d!==(d=e[0].alternateDisplay))&&(u.checked=d);const o={};1&t&&(o.kmlColor=e[0].alternateColor),1&t&&(o.selected=e[0].alternatePin),f.$set(o),(!J||1&t&&$!==($=e[0].natDisplay))&&(y.checked=$);const s={};1&t&&(s.kmlColor=e[0].natColor),1&t&&(s.selected=e[0].natPin),A.$set(s);const r={};1&t&&(r.kmlColor=e[0].greatCircleColor),1&t&&(r.checked=e[0].greatCircleDisplay),32768&t&&(r.$$scope={dirty:t,ctx:e}),C.$set(r),(!J||8&t&&D!==(D=!e[3]))&&(E.disabled=D),(!J||8&t&&B!==(B=!e[3]))&&(j.disabled=B),(!J||4&t)&&(Q.disabled=e[2]),(!J||2&t)&&(Z.disabled=e[1])},i(e){J||(qe(l.$$.fragment,e),qe(f.$$.fragment,e),qe(A.$$.fragment,e),qe(C.$$.fragment,e),J=!0)},o(e){Ie(l.$$.fragment,e),Ie(f.$$.fragment,e),Ie(A.$$.fragment,e),Ie(C.$$.fragment,e),J=!1},d(e){e&&F(t),Qe(l),Qe(f),Qe(A),Qe(C),X=!1,r(Y)}}}function $r(e,t){return JSON.stringify(e)===JSON.stringify(t)}function xr(e,t,n){let o,s,r;const l=ho.exportKML;let a=vo({...go.getItem(l)||{}},Jn),i={...Jn,...a};const c=["routeDisplay","routeColor","alternateDisplay","alternateColor","natDisplay","natColor","greatCircleDisplay","greatCircleColor"];let{mapOptions:u}=t;const d=Object.keys(u).filter((e=>c.includes(e))).reduce(((e,t)=>(e[t]="routeDisplay"===t||u[t],e)),{});function p(e){let t=!1;for(const[o,s]of Object.entries(e))if(i[o]!==s){n(0,i[o]=s,i);eo(mr(o),s),t=!0}t&&n(0,i={...i})}for(const[e,t]of Object.entries(i))if(Jn[e]!==t){eo(mr(e),t)}return e.$$set=e=>{"mapOptions"in e&&n(9,u=e.mapOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=$r(Jn,i)),1025&e.$$.dirty&&n(3,s=!$r(a,i)),1&e.$$.dirty&&n(2,r=$r({...i,...d},i))},[i,o,r,s,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,s=pr(t);i[s]!==o&&(n(0,i[s]=o,i),eo(t,o))},()=>p(a),()=>p(Jn),()=>p({...i,...d}),function(){if(o)go.removeItem(l);else{const e={};for(const t of Object.keys(i).filter((e=>i[e]!==Jn[e])))e[t]=i[t];go.setItem(l,e)}n(10,a={...i})},u,a]}class br extends Ge{constructor(e){super(),We(this,e,xr,yr,a,{mapOptions:9})}}function Ar(e){let t,n,o,s,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,A,w,T,P,k,C,L,M,E,q,D;return u=new br({props:{mapOptions:e[0]}}),A=new Lo({props:{label:"Télécharger"}}),A.$on("save",e[3]),M=new Ao({}),M.$on("save",e[4]),{c(){t=I("div"),n=I("div"),o=I("div"),s=I("div"),l=I("form"),a=I("fieldset"),i=I("legend"),i.innerHTML='Réglages pour l&#39;export<a class="help svelte-14ki1x8" href="#/help_export">?</a>',c=z(),Be(u.$$.fragment),d=z(),p=I("div"),m=I("form"),f=I("fieldset"),h=I("legend"),h.innerHTML='Export<a class="help svelte-14ki1x8" href="#/help_export">?</a>',g=z(),v=I("fieldset"),y=I("legend"),y.textContent="KML",$=z(),x=I("p"),x.textContent="Choisissez un format (MapsMe, Avenza Maps ou Google Earth) et téléchargez le fichier KML.",b=z(),Be(A.$$.fragment),w=z(),T=I("fieldset"),P=I("legend"),P.textContent="Raccourcis",k=z(),C=I("p"),C.innerHTML='Sur iOS on peut lancer un raccourci.\n                            <a href="https://www.icloud.com/shortcuts/886cc07d24d74d83bb0859643242c2df" target="_blank">Exemple de raccourci à installer\n                            </a>. Le raccourci reçoit le KML, la route Lido et le GRAMET.',L=z(),Be(M.$$.fragment),U(i,"class","svelte-14ki1x8"),U(a,"class","form svelte-14ki1x8"),U(l,"class","settings svelte-14ki1x8"),U(s,"class","col-12 col-md-6 d-flex pt-2 pt-md-0 svelte-14ki1x8"),U(h,"class","svelte-14ki1x8"),U(v,"class","form-group"),U(T,"class","form-group mt-4"),U(f,"class","form svelte-14ki1x8"),U(m,"class","settings svelte-14ki1x8"),U(p,"class","col-12 col-md-6 d-flex export svelte-14ki1x8"),U(o,"class","row"),U(n,"class","card-body"),U(t,"class","card mb-3 svelte-14ki1x8")},m(r,F){O(r,t,F),S(t,n),S(n,o),S(o,s),S(s,l),S(l,a),S(a,i),S(a,c),He(u,a,null),S(o,d),S(o,p),S(p,m),S(m,f),S(f,h),S(f,g),S(f,v),S(v,y),S(v,$),S(v,x),S(v,b),He(A,v,null),S(f,w),S(f,T),S(T,P),S(T,k),S(T,C),S(T,L),He(M,T,null),E=!0,q||(D=[R(l,"submit",V(e[2])),R(m,"submit",V(e[1]))],q=!0)},p(e,[t]){const n={};1&t&&(n.mapOptions=e[0]),u.$set(n)},i(e){E||(qe(u.$$.fragment,e),qe(A.$$.fragment,e),qe(M.$$.fragment,e),E=!0)},o(e){Ie(u.$$.fragment,e),Ie(A.$$.fragment,e),Ie(M.$$.fragment,e),E=!1},d(e){e&&F(t),Qe(u),Qe(A),Qe(M),q=!1,r(D)}}}function wr(e,t,n){let{kmlOptions:o}=t;return e.$$set=e=>{"kmlOptions"in e&&n(0,o=e.kmlOptions)},[o,function(t){pe.call(this,e,t)},function(t){pe.call(this,e,t)},function(t){pe.call(this,e,t)},function(t){pe.call(this,e,t)}]}class Tr extends Ge{constructor(e){super(),We(this,e,wr,Ar,a,{kmlOptions:0})}}function Pr(t){let n;return{c(){n=N(" ")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function kr(t){let n,o,s;return{c(){n=I("button"),n.textContent="Partager l'App",U(n,"class","btn btn-link svelte-18lgs6b")},m(e,t){O(e,n,t),o||(s=R(n,"click",ft),o=!0)},p:e,d(e){e&&F(n),o=!1,s()}}}function Cr(t){let n,o,s,r,l,a,i;let u=(!0===navigator.standalone&&navigator.share?kr:Pr)(t);return{c(){n=I("div"),o=I("div"),s=I("h1"),s.innerHTML='<strong class="d-none">OFP2MAP </strong>Cartographie pour l&#39;OFP',r=z(),l=I("img"),i=z(),u.c(),c(l.src,a="svg/Air_France_Logo.svg")||U(l,"src","svg/Air_France_Logo.svg"),U(l,"alt","logo Air France"),U(l,"class","svelte-18lgs6b"),U(o,"class","col-12 col-lg-8 svelte-18lgs6b"),U(n,"class","row svelte-18lgs6b")},m(e,t){O(e,n,t),S(n,o),S(o,s),S(o,r),S(o,l),S(o,i),u.m(o,null)},p(e,[t]){u.p(e,t)},i:e,o:e,d(e){e&&F(n),u.d()}}}class Lr extends Ge{constructor(e){super(),We(this,e,null,Cr,a,{})}}function Sr(t){let n,o,s,l,a,i,c,u;return{c(){n=I("label"),o=I("span"),o.textContent="OFP…",s=z(),l=I("span"),l.textContent="Changer",a=z(),i=I("input"),U(o,"class","d-block d-sm-none"),U(l,"class","d-none d-sm-block"),U(i,"id",Nr),U(i,"name",Nr),U(i,"type","file"),U(i,"accept","application/pdf"),i.hidden=!0,U(n,"tabindex","0"),U(n,"class","input-group-text btn btn-outline-secondary btn-sm svelte-mtoy1z")},m(e,r){O(e,n,r),S(n,o),S(n,s),S(n,l),S(n,a),S(n,i),c||(u=[R(i,"change",t[2]),R(n,"keydown",_r)],c=!0)},p:e,d(e){e&&F(n),c=!1,r(u)}}}function Mr(e){let t,n,o,s,l,a,i,c,u,d,p;return{c(){t=I("div"),n=I("span"),n.innerHTML='<span class="d-block d-sm-none">Choisir</span> \n            <span class="d-none d-sm-block">Choisir un OFP</span>',o=z(),s=I("label"),l=I("span"),l.textContent="OFP…",a=z(),i=I("span"),i.textContent="Sélectionner",c=z(),u=I("input"),U(n,"class","input-group-text svelte-mtoy1z"),U(l,"class","d-block d-sm-none"),U(i,"class","d-none d-sm-block"),U(u,"id",Nr),U(u,"name",Nr),U(u,"type","file"),U(u,"accept","application/pdf"),u.disabled=e[0],u.hidden=!0,U(s,"tabindex","0"),U(s,"class","input-group-text btn btn-primary svelte-mtoy1z"),U(s,"for",Nr),U(t,"class","input-group svelte-mtoy1z"),ee(t,"blink",!e[1])},m(r,m){O(r,t,m),S(t,n),S(t,o),S(t,s),S(s,l),S(s,a),S(s,i),S(s,c),S(s,u),d||(p=[R(n,"click",e[5]),R(u,"change",e[2]),R(u,"click",Dr,{once:!0}),R(s,"keydown",_r)],d=!0)},p(e,n){1&n&&(u.disabled=e[0]),2&n&&ee(t,"blink",!e[1])},d(e){e&&F(t),d=!1,r(p)}}}function Er(t){let n,o,s;function r(e,t){return e[1]?Sr:Mr}let l=r(t),a=l(t);return{c(){n=I("form"),a.c(),U(n,"class","form-inline")},m(e,r){O(e,n,r),a.m(n,null),o||(s=R(n,"submit",V(t[4])),o=!0)},p(e,[t]){l===(l=r(e))&&a?a.p(e,t):(a.d(1),a=l(e),a&&(a.c(),a.m(n,null)))},i:e,o:e,d(e){e&&F(n),a.d(),o=!1,s()}}}const Or=[{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.min.js"},{type:"script",url:"./js/lidojs.1.6.59.min.js"},{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.min.js"},{type:"script",url:"./js/wmo.1.6.59.var.js"},{type:"script",url:"https://unpkg.com/mapbox-gl@1.13.2/dist/mapbox-gl.js"},{type:"script",url:"https://unpkg.com/pinch-zoom-element-js@1.1.2/dist/pinch-zoom-min.js"},{type:"link",url:"https://unpkg.com/mapbox-gl@1.13.2/dist/mapbox-gl.css"}],Fr=async(e,t)=>{const n=await e.getPage(t);return(await n.getTextContent()).items.map((e=>e.str)).join(1===t?" ":"")},qr=new class{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}};let Ir;function Dr(){!function(e,t,n){let o=e.length;function s(){o=--o,o<1&&n()}t()?n():e.forEach((({type:e,url:t,options:n={async:!0,defer:!0}})=>{const r="script"===e,l=document.createElement(r?"script":"link");(t.startsWith("http")||t.startsWith("//"))&&(l.crossOrigin="anonymous");let a=!0;r?(l.src=t,l.async=n.async,l.defer=n.defer):(l.href=t,"prefetch"in n?(l.rel="prefetch",o-=1,a=!1):"preload"in n?(l.rel="preload",o-=1,a=!1):(l.rel="stylesheet",o-=1,a=!1)),a&&(l.onload=s),document.body.appendChild(l)}))}(Or,(()=>!!window["pdfjs-dist/build/pdf"]),(()=>{const e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.worker.min.js",Ir&&!Ir.destroyed||(Ir=new e.PDFWorker),qr.resolve(!0)}))}let Nr="file";function _r(e){if("Enter"===e.key){const t=e.target.querySelector('input[type="file"]');if(t)return t.click(),!1}return!0}function zr(e,t,n){let o,s,r,l,a;p(e,Ln,(e=>n(1,o=e))),p(e,Sn,(e=>n(6,s=e))),p(e,Mn,(e=>n(7,r=e))),p(e,On,(e=>n(8,l=e))),p(e,Tn,(e=>n(9,a=e)));let{kmlOptions:i}=t,c=!1;const u=de(),d=e=>{const t=new FileReader;return new Promise(((n,o)=>{t.onload=e=>{if(!Ir||Ir.destroyed){const e=window["pdfjs-dist/build/pdf"];Ir=new e.PDFWorker}(async e=>{const t=window["pdfjs-dist/build/pdf"],n=[];let o=0;const s=await t.getDocument(e).promise,r=s.numPages;for(let e=1;e<=r;e+=1){const t=await Fr(s,e);if(t.includes("(Long copy #1)"))n.push(t),o+=1;else{if(0!==o)break;(t.includes("FPL SUMMARY")||t.includes("CREW PAIRING"))&&n.push(t)}}return n.join("\n")})({data:e.target.result,verbosity:0,worker:Ir}).then((e=>{if(e)try{const t=new editolido.Ofp("_PDFJS_"+e);try{f(t),(e=>{localStorage&&e&&(localStorage.setItem(et,vt(e)),localStorage.setItem(Ye,e.text),localStorage.setItem(tt,e.infos.ofpIN.getTime()),localStorage.setItem(ot,e.infos.ofpOFF.getTime()),localStorage.removeItem(nt))})(t),n(t)}catch(e){o(e)}}catch(e){o(e)}else o(Error("OFP non reconnu. Attention il y a 2 OFP dans PilotMission, il faut bien choisir celui nommé « Dossier de vol OFP »."))}),(e=>{o(e)}))},t.onerror=e=>{o(Error("Fichier illisible !"))},t.readAsArrayBuffer(e)}))};function m(e){b(Tn,a=!1,a),Dr(),qr.promise.then((()=>(b(Sn,s="loading",s),u("change"),window.location.hash="#/map",new Promise(((t,n)=>{setTimeout((()=>{try{const n=new editolido.Ofp(e);f(n),n.reloaded=!0,t(n)}catch(e){n(e)}}),100)})).then((e=>{b(Ln,o=e,o),b(On,l=e.infos.aircraftType,l),b(Sn,s="success",s);const t=(e=>{const t=e?yt(ot,e):null;return t?parseInt(t,10):null})(e);b(Mn,r=t?new Date(t):new Date(e.infos.ofpOFF.getTime()),r)})).catch((e=>{b(Sn,s=e,s),b(Ln,o=void 0,o),bt()})).finally((()=>{gt()})))))}function f(e){const t=new editolido.GeoGridIndex;t.data=window.WMO;const n=editolido.ogimetData(e,t);n.proxyImg=`https://cjq5hglsy6.execute-api.eu-west-3.amazonaws.com/default/gramet/${n.proxy}__${n.route.name.replace(/[^a-z0-9\-_]/giu,"_")}.png`,n.route.description=n.wmo.join(" "),e.ogimetData=n;let o=0,s=e.infos.averageFL;const r=e.route.segments.map((([e,t])=>(o+=e.distanceTo(t),[t,o,s])));r.unshift([e.route.points[0],0]),e.distanceMatrix=r;let l=[];try{l=e.wptNamesEET(e.route.points)}catch(e){}0===l.length?document.body.style.setProperty("--plane-halo-color","red"):document.body.style.setProperty("--plane-halo-color","var(--plane-color)"),e.timeMatrix=l,e.departure=e.route.points[0],e.arrival=e.route.points[e.route.points.length-1],e.reloaded=!1,Yn(),function(e,t){let n={...Jn,...t};const o=Yn();Xn(o,n);const s=e.description;if(o.setName(s),!e)return;const r=`${e.infos.depICAO}-${e.infos.destICAO}`,l=new editolido.Route(e.wptCoordinates(),{name:r,description:s}),a=new editolido.Route(e.wptCoordinatesAlternate(),{name:"Route Dégagement"}),i=new editolido.Route([l.points[0],l.points[l.points.length-1]]).split(300,{name:`Ortho ${r}`});let c=[];for(let t of e.tracks){let e=t.isComplete?"rnat":"rnat_incomplete";o.addLine(e,t);let n=new editolido.GeoPoint(t.points[0],{name:t.name,description:t.description});o.addPoint(e,n),t.isMine&&(c.push(n),n=new editolido.GeoPoint(t.points[t.points.length-1],{name:t.name,description:t.description}),c.push(n),o.addPoint(e,n))}o.addLine("greatcircle",i),o.addLine("rmain",l),o.addPoints("rmain",l,{excluded:c}),o.addLine("ralt",a),o.addPoints("ralt",a)}(e,i)}ce((()=>{const e=yt(Ye,null);e&&m(e)}));return e.$$set=e=>{"kmlOptions"in e&&n(3,i=e.kmlOptions)},[c,o,function(e){n(0,c=!0),b(Tn,a=!1,a),Dr();const t=e.target,i=t.files[0],p=t.closest("form");i?qr.promise.then((()=>(b(Sn,s="loading",s),u("change"),window.location.hash="#/map",d(i).then((e=>{b(Ln,o=e,o),b(On,l=e.infos.aircraftType,l),b(Sn,s="success",s),b(Mn,r=new Date(e.infos.ofpOFF.getTime()),r)})).catch((e=>{b(Sn,s=e,s),b(Ln,o=void 0,o),bt()})).finally((()=>{p.blur(),p.reset(),t.blur(),gt(),n(0,c=!1)}))))):n(0,c=!1)},i,function(t){pe.call(this,e,t)},e=>_r({key:"Enter",target:e.target.closest("div").querySelector("label")})]}class jr extends Ge{constructor(e){super(),We(this,e,zr,Er,a,{kmlOptions:3})}}function Rr(e){let t,o;const s=e[3].default,r=m(s,e,e[2],null);let l=[{href:e[0]},e[1]],a={};for(let e=0;e<l.length;e+=1)a=n(a,l[e]);return{c(){t=I("a"),r&&r.c(),B(t,a)},m(e,n){O(e,t,n),r&&r.m(t,null),o=!0},p(e,[n]){r&&r.p&&(!o||4&n)&&g(r,s,e,e[2],o?h(s,e[2],n,null):v(e[2]),null),B(t,a=function(e,t){const n={},o={},s={$$scope:1};let r=e.length;for(;r--;){const l=e[r],a=t[r];if(a){for(const e in l)e in a||(o[e]=1);for(const e in a)s[e]||(n[e]=a[e],s[e]=1);e[r]=a}else for(const e in l)s[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}(l,[(!o||1&n)&&{href:e[0]},e[1]]))},i(e){o||(qe(r,e),o=!0)},o(e){Ie(r,e),o=!1},d(e){e&&F(t),r&&r.d(e)}}}function Vr(e,t,o){const s=["href"];let r=$(t,s),{$$slots:l={},$$scope:a}=t,{href:i}=t;const c=i&&!i.startsWith("#")?Object.assign({rel:"noreferrer",target:"_blank"},r):r;return e.$$set=e=>{t=n(n({},t),y(e)),o(5,r=$(t,s)),"href"in e&&o(0,i=e.href),"$$scope"in e&&o(2,a=e.$$scope)},[i,c,a,l]}class Ur extends Ge{constructor(e){super(),We(this,e,Vr,Rr,a,{href:0})}}function Br(e,t,n){const o=e.slice();return o[7]=t[n],o}function Hr(e){let t,n,o;return n=new Ur({props:{href:"https://p169.p3.n0.cdn.getcloudapp.com/items/yAu14Y4x/23c3a918-e425-4d89-a53d-7f450449013b.mp4",$$slots:{default:[Qr]},$$scope:{ctx:e}}}),{c(){t=I("p"),Be(n.$$.fragment)},m(e,s){O(e,t,s),He(n,t,null),o=!0},i(e){o||(qe(n.$$.fragment,e),o=!0)},o(e){Ie(n.$$.fragment,e),o=!1},d(e){e&&F(t),Qe(n)}}}function Qr(e){let t;return{c(){t=N("Tutoriel vidéo")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Wr(e){let t,n,o,s,l,a,i=Mt.filter(e[5]),c=[];for(let t=0;t<i.length;t+=1)c[t]=Gr(Br(e,i,t));return{c(){t=I("div"),n=I("select"),o=I("option"),s=N("pas d'ofp ?");for(let e=0;e<c.length;e+=1)c[e].c();o.__value=void 0,o.value=o.__value,U(n,"tabindex","-1"),U(n,"class","form-control-sm svelte-139xh43"),n.disabled=e[0],U(t,"class","footer svelte-139xh43")},m(r,i){O(r,t,i),S(t,n),S(n,o),S(o,s);for(let e=0;e<c.length;e+=1)c[e].m(n,null);l||(a=[R(n,"click",Dr,{once:!0}),R(n,"change",e[4])],l=!0)},p(e,t){if(0&t){let o;for(i=Mt.filter(e[5]),o=0;o<i.length;o+=1){const s=Br(e,i,o);c[o]?c[o].p(s,t):(c[o]=Gr(s),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=i.length}1&t&&(n.disabled=e[0])},d(e){e&&F(t),q(c,e),l=!1,r(a)}}}function Gr(t){let n,o,s,r=t[7]+"";return{c(){n=I("option"),o=N(r),n.__value=s=t[7],n.value=n.__value},m(e,t){O(e,n,t),S(n,o)},p:e,d(e){e&&F(n)}}}function Zr(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v;t=new Lr({});let y=e[3]&&Hr(e),$=!e[1]&&!e[2]&&Wr(e);return{c(){Be(t.$$.fragment),n=z(),o=I("div"),s=I("div"),r=I("div"),l=I("div"),l.textContent="Facile à utiliser",a=z(),i=I("div"),c=I("p"),c.innerHTML='Dans <b class="svelte-139xh43">Pilot Mission</b>, onglet <b class="svelte-139xh43">Dossier de vol</b>, affichez le PDF nommé <b class="svelte-139xh43">Dossier de vol OFP</b>. Sur la gauche, cliquez sur le carré avec une flèche vers le haut. Choisissez <b class="svelte-139xh43">Enregistrer dans Fichiers</b>. Dans l&#39;app, c&#39;est cet OFP qu&#39;il faut sélectionner.',u=z(),y&&y.c(),d=z(),p=I("div"),p.innerHTML='<div class="card feature offline svelte-139xh43"><div class="card-header svelte-139xh43">RAPIDE ET OFFLINE</div> \n    <div class="card-body"><p class="card-text">L&#39;OFP ne quitte pas votre iPad ou votre ordinateur. Conçu pour le PilotPad, peut s&#39;utiliser en vol sans réseau et fonctionne avec les dernières technologies: PWA, Service Worker, fully responsive, cartes WebGL...</p></div></div>',m=z(),f=I("div"),f.innerHTML='<div class="card feature maps svelte-139xh43"><div class="card-header svelte-139xh43">Multiples Projections</div> \n    <div class="card-body"><ul class="card-text svelte-139xh43"><li class="svelte-139xh43">trois LAMBERT conformes</li> \n        <li class="svelte-139xh43">deux ATLAS POLITIQUES</li> \n        <li class="svelte-139xh43">deux ATLAS PHYSIQUES</li> \n        <li class="svelte-139xh43">une carte VFR</li> \n        <li class="svelte-139xh43">une MERCATOR (zoom x 12)</li> \n        <li class="svelte-139xh43">cartes Artique et Amérique Nord</li> \n        <li class="svelte-139xh43">une Stéréographique Polaire</li></ul> \n      <p class="card-text">Export KML compatible Mapsme, Avenza et Google Earth.</p></div></div>',h=z(),$&&$.c(),g=j(),U(l,"class","card-header svelte-139xh43"),U(c,"class","card-text"),U(i,"class","card-body"),U(r,"class","card feature usage svelte-139xh43"),U(s,"class","col-12 col-lg-4"),U(p,"class","col-12 col-lg-4"),U(f,"class","col-12 col-lg-4"),U(o,"class","row cards svelte-139xh43")},m(e,x){He(t,e,x),O(e,n,x),O(e,o,x),S(o,s),S(s,r),S(r,l),S(r,a),S(r,i),S(i,c),S(i,u),y&&y.m(i,null),S(o,d),S(o,p),S(o,m),S(o,f),O(e,h,x),$&&$.m(e,x),O(e,g,x),v=!0},p(e,[t]){e[3]?y?8&t&&qe(y,1):(y=Hr(e),y.c(),qe(y,1),y.m(i,null)):y&&(Oe(),Ie(y,1,1,(()=>{y=null})),Fe()),e[1]||e[2]?$&&($.d(1),$=null):$?$.p(e,t):($=Wr(e),$.c(),$.m(g.parentNode,g))},i(e){v||(qe(t.$$.fragment,e),qe(y),v=!0)},o(e){Ie(t.$$.fragment,e),Ie(y),v=!1},d(e){Qe(t,e),e&&F(n),e&&F(o),y&&y.d(),e&&F(h),$&&$.d(e),e&&F(g)}}}function Kr(e,t,n){let o,s,r,l;p(e,Sn,(e=>n(6,o=e))),p(e,Ln,(e=>n(1,s=e))),p(e,On,(e=>n(2,r=e))),p(e,zn,(e=>n(3,l=e)));let a=!1;return[a,s,r,l,function(e){n(0,a=!0),b(Sn,o="loading",o),b(On,r=e.target.value,r),Dr(),qr.promise.then((()=>{b(Ln,s=void 0,s),Yn(),b(Sn,o="success",o)})).catch((e=>{b(Sn,o=e,o)})).then((()=>{n(0,a=!1),window.location.hash="#/map"}))},e=>!Et.includes(e)]}class Jr extends Ge{constructor(e){super(),We(this,e,Kr,Zr,a,{})}}const Xr={NY:"United States",TY:"Japan",AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BQ:"British Antarctic Territory",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",CW:"Curaçao",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts & Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre & Miquelon",VC:"Saint Vincent & Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome & Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",SX:"Sint Maarten",ZA:"South Africa",GS:"South Georgia & Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard & Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks & Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis & Futuna",EH:"Western Sahara",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},Yr="airport-layer",el="airport-emer-layer",tl="airport-etops-layer",nl=[el,Yr,tl],ol="airport-source",sl="#062DF8",rl="#7800d5",ll="#000",al="#0525cc",il="#095",cl="#B02",ul="#C71",dl="#ea80d8",pl="#dbe000",ml="#fbfe98",fl="#00b0f1",hl=e=>{const t=e?e.infos.ralts:[];let n=[];return e&&e.infos.EEP&&e.infos.EXP&&e.infos.raltPoints.length>0&&(n=[e.infos.EEP.name,e.infos.EXP.name]),[t,n.concat(t)]},gl=["==",1,["get","h"]],vl=["!=",0,["get","r"]],yl=["==",5,["get","r"]],$l=["in",["get","r"],["literal",[1,3,5]]],xl=e=>["==",e,["get","level"]],bl=xl(0),Al=e=>["<",["coalesce",["get",`${e}`],11],10],wl=e=>{const[t]=hl(e);return t.length>0?["in",["get","name"],["literal",t]]:["to-boolean",!1]},Tl=e=>e===No,Pl=e=>0===e?["get","name"]:["get","iata"],kl=(e,t={"text-color":sl,"font-scale":1.1})=>["case",gl,["format",e,{}," ✚",t],e],Cl=e=>["case",yl,["format","©",{"text-color":rl},e,{}],e],Ll=["case",$l,"sdf-camera","sdf-airport"],Sl=({aircraftType:e,kmlOptions:{airportPin:t}})=>2===t?["all",gl,Al(e)]:4===t?["all",vl,Al(e)]:Al(e),Ml=({ofp:e,kmlOptions:{airportPin:t}})=>{const[,n]=hl(e),o=["in",["get","name"],["literal",n]];return 2===t?["all",o,gl]:4===t?["all",o,vl]:o},El=({aircraftType:e,kmlOptions:{airportPin:t}})=>2===t?["to-boolean",!1]:4===t?["all",vl,["!",Al(e)]]:["!",Al(e)],Ol=({aircraftType:e,ofp:t})=>{const[,n]=hl(t);return["case",["in",["get","name"],["literal",t?[t.departure.name,t.arrival.name].concat(n):n]],0,["case",gl,1,["get",`${e}`]]]},Fl={[No]:({aircraftType:e})=>["case",["==",9,["get",`${e}`]],dl,["==",8,["get",`${e}`]],dl,["==",7,["get",`${e}`]],pl,["==",6,["get",`${e}`]],pl,["==",5,["get",`${e}`]],ml,["==",4,["get",`${e}`]],ml,["==",3,["get",`${e}`]],fl,["==",2,["get",`${e}`]],fl,"#000"],1:({ofpLoaded:e})=>e?["case",bl,il,ul]:il,3:({ofpLoaded:e})=>{const t=["case",gl,al,il];return e?["case",bl,t,ul]:t},2:({ofpLoaded:e})=>e?["case",bl,sl,ul]:sl,4:()=>["case",$l,rl,"#984fd4"]},ql=({ofp:e,aircraftType:t,kmlOptions:{airportPin:n}})=>Fl[n]({aircraftType:t,ofpLoaded:!!e}),Il=({ofp:e,kmlOptions:{airportPin:t}})=>4===t?cl:e?["case",xl(1),"#D70",cl]:cl,Dl=e=>{const{ofp:t,kmlOptions:{airportPin:n,etopsColor:o}}=e;return 4===n?ql(e):["case",wl(t),ro(o)[0],ql(e)]},Nl=({kmlOptions:{airportPin:e}})=>4===e?Ll:"sdf-airport",_l=({kmlOptions:{airportPin:e}})=>4===e?Ll:"sdf-triangle",zl=({ofp:e,kmlOptions:{airportPin:t}})=>{switch(t){case No:return e?["case",xl(2),"sdf-star","sdf-airport"]:"sdf-airport";case 4:return Ll;default:return e?["case",["!=",0,["get","level"]],"sdf-star","sdf-airport"]:"sdf-airport"}},jl=(e,t,n=1.8)=>["interpolate",["linear"],["zoom"],t.interpolateMinZoom||t.mapboxOptions.minZoom||0,e,t.interpolateMaxZoom||t.mapboxOptions.maxZoom||10,e*n],Rl=({mapOptions:e,kmlOptions:{iconSizeChange:t,airportPin:n}})=>{let o=.6;return Tl(n)&&(o=.5),jl(ss(t,o),e)},Vl=({mapOptions:e,kmlOptions:{iconSizeChange:t,airportPin:n}})=>{let o=1;return Tl(n)&&(o=.9),jl(ss(t,o),e)},Ul=({mapOptions:e,kmlOptions:{iconSizeChange:t}})=>jl(ss(t,.5),e),Bl=()=>1,Hl=Bl,Ql=Bl,Wl=({kmlOptions:{airportPin:e}})=>Tl(e)?es:Yo,Gl=({kmlOptions:{airportPin:e}})=>e===No?es:Yo,Zl=()=>Yo,Kl=({ofp:e,kmlOptions:{airportPin:t}})=>e&&t===No?["case",bl,ll,"#d47200"]:ll,Jl=e=>{const{ofp:t,kmlOptions:{etopsColor:n}}=e;return["case",wl(t),ro(n)[0],Kl(e)]},Xl=()=>ll,Yl=({ofp:e,kmlOptions:{airportPin:t,airportLabel:n}})=>{const o=Pl(n);switch(t){case 3:case 2:return e?["case",bl,o,kl(o,{"text-color":al,"font-scale":1.1})]:o;case 4:return Cl(o);default:return kl(o)}},ea=({ofp:e,kmlOptions:{airportPin:t,airportLabel:n}})=>{const o=Pl(n);switch(t){case 3:case 2:return["case",wl(e),kl(o),o];case 4:return Cl(o);default:return kl(o)}},ta=({kmlOptions:{airportPin:e,airportLabel:t}})=>{const n=Pl(t);return 4===e?Cl(n):n},na=(e,{ratio:t,size:n,magnification:o=2,extraFactor:s=1})=>{const r=e.interpolateMinZoom||e.mapboxOptions.minZoom||0,l=e.interpolateMaxZoom||e.mapboxOptions.maxZoom||10,a=rs(t,n,s);return["interpolate",["linear"],["zoom"],r,a,l,a*o]},oa=({mapOptions:e,kmlOptions:{iconTextChange:t}})=>na(e,{ratio:t,size:8,extraFactor:1.15}),sa=({mapOptions:e,kmlOptions:{iconTextChange:t}})=>na(e,{ratio:t,size:9}),ra=oa,la=({kmlOptions:{iconTextChange:e}})=>ts({ratio:e,size:8,extraFactor:1.15}),aa=la,ia=({kmlOptions:{iconTextChange:e}})=>ns({ratio:e,size:8,extraFactor:1.15}),ca=ia,ua=({kmlOptions:{airportPin:e}})=>4===e||2===e,da=ua,pa=ua,ma=({kmlOptions:{airportPin:e}})=>4===e||2===e,fa=ma,ha=ma,ga=e=>{const t=e.map;return t.getLayer(Yr)&&(t.setPaintProperty(Yr,"icon-color",ql(e)),t.setPaintProperty(Yr,"text-color",Kl(e))),!0},va=e=>{const t=e.map;return t.getLayer(tl)&&(t.setPaintProperty(tl,"icon-color",Dl(e)),t.setPaintProperty(tl,"text-color",Jl(e))),!0},ya=e=>{const t=e.map;return t.getLayer(el)&&(t.setPaintProperty(el,"icon-color",Il(e)),t.setPaintProperty(el,"text-color",Xl())),!0},$a=({map:e},t)=>{e.getLayer(tl)&&e.setLayoutProperty(tl,"visibility",t?"visible":"none")};function xa({map:e},t){for(const n of nl)if(e.getLayer(n)){if(n===tl)continue;e.setLayoutProperty(n,"visibility",t?"visible":"none")}}const ba={type:"symbol",layout:{"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1},paint:{"text-halo-color":Yo,"text-opacity":.8}};var Aa={show:e=>xa(e,!0),hide:e=>xa(e,!1),add:e=>{const{map:t,mapData:{affineOrDrop:n},ofp:o,kmlOptions:{airportDisplay:s,etopsDisplay:r}}=e;fetch("data/airports.2402.geojson").then((e=>e.json())).then((l=>{if(n){const e=[];for(let t of l.features)t.geometry.coordinates=n(t.geometry.coordinates),void 0!==t.geometry.coordinates&&e.push(t);l.features=e}t.addSource(ol,{type:"geojson",data:l});const a={...ba};a.id=el,a.source=ol,a.filter=El(e),a.layout["icon-image"]=zl(e),a.layout["icon-size"]=Ul(e),a.layout.visibility=s?"visible":"none",a.layout["text-field"]=ta(e),a.layout["text-size"]=ra(e),a.layout["text-allow-overlap"]=pa(e),a.layout["text-ignore-placement"]=ha(e),a.paint["icon-color"]=Il(e),a.paint["icon-halo-width"]=Ql(),a.paint["icon-halo-color"]=Zl(),a.paint["text-color"]=Xl(),a.paint["text-halo-width"]=ca(e),t.addLayer(a);const i={...ba};i.id=Yr,i.source=ol,i.filter=Sl(e),i.layout["symbol-sort-key"]=Ol(e),i.layout["icon-image"]=Nl(e),i.layout["icon-size"]=Rl(e),i.layout.visibility=s?"visible":"none",i.layout["text-field"]=Yl(e),i.layout["text-size"]=oa(e),i.layout["text-allow-overlap"]=ua(e),i.layout["text-ignore-placement"]=ma(e),i.paint["icon-color"]=ql(e),i.paint["icon-halo-width"]=1,i.paint["icon-halo-color"]=Wl(e),i.paint["text-color"]=Kl(e),i.paint["text-halo-width"]=ia(e),t.addLayer(i);const c={...ba};c.id=tl,c.source=ol,c.filter=Ml(e),c.layout["icon-image"]=_l(e),c.layout["icon-size"]=Vl(e),c.layout.visibility=r?"visible":"none",c.layout["text-field"]=ea(e),c.layout["text-size"]=sa(e),c.layout["text-allow-overlap"]=da(e),c.layout["text-ignore-placement"]=fa(e),c.paint["icon-color"]=Dl(e),c.paint["icon-halo-width"]=Hl(),c.paint["icon-halo-color"]=Gl(e),c.paint["text-color"]=Jl(e),c.paint["text-halo-width"]=(({kmlOptions:{iconTextChange:e}})=>ns({ratio:e,size:10}))(e),t.addLayer(c);const u=function(e,{focusAfterOpen:n=!1,closeOnMove:s=!0,closeButton:r=!0}={}){const l=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties.title,i=e.features[0].properties.name,c=editolido.icao2iata(i),u=d(Fn),p=e.features[0].properties.level;let m="",f="0";switch(e.features[0].properties[u]){case 2:case 3:m="Destination & RCF",f="3";break;case 4:case 5:m="Dégagement à destination",f="2";break;case 6:case 7:m="Dégagement en route",f="2 ERA";break;case 8:case 9:m="Appui ou adéquat en route",f="1"}let h,g;switch(e.features[0].properties.r){case 0:h="A",g=!1;break;case 1:h="A",g=!0;break;case 2:h="B",g=!1;break;case 3:h="B",g=!0;break;case 4:h="C",g=!1;break;case 5:h="C",g=!0}const v=1===e.features[0].properties.h&&"0"!==f,y=e.features[0].properties.cc;let $=`<div class="airport${o?"":" no-ofp"}">`;$+=`<h1><span class="title">${i}/${c}</span><span class="flag">${function(e){const t=[...e.toUpperCase()].map((e=>e.codePointAt()+127397));return String.fromCodePoint(...t)}(y)}</span><span class="cc">${(e=>Xr[e]||"")(y)}</span></h1>`,$+=`<h2>${a}${v?" <b>🄷</b>":""}</h2>`,o&&($+=`<p class="status status-${f.charAt(0)}">STATUT ${f}</p>`),o&&p>0&&($+=`<p class="security-${p}">${1==p?"ORANGE":"RED"}</p>`),$+=`<p class="reco reco-${h}">reco ${h}${g?" EAO":""}</p>`,o&&m&&($+=`<p class="status-text">${m}</p>`),$+="</div>";let x=new mapboxgl.Popup({closeButton:r,focusAfterOpen:n,closeOnMove:s});return x.on("close",(()=>{x=void 0})),x.setLngLat(l).setHTML($).addTo(t)};let p;for(const e of nl)t.on("mouseenter",e,(e=>{p&&p.remove(),t.getCanvas().style.cursor="pointer",p=u(e,{closeButton:!1})})),t.on("mouseleave",e,(()=>{p&&p.remove(),t.getCanvas().style.cursor=""})),t.on("click",e,(e=>{p&&p.remove(),p=u(e)}))}))},changeMarker:function(e){const t=e.map;t.getLayer(Yr)&&(ga(e),t.setLayoutProperty(Yr,"icon-image",Nl(e)),t.setPaintProperty(Yr,"icon-halo-width",1),t.setPaintProperty(Yr,"icon-halo-color",Wl(e)),t.setLayoutProperty(Yr,"icon-size",Rl(e)),t.setLayoutProperty(Yr,"text-field",Yl(e)),t.setLayoutProperty(Yr,"text-allow-overlap",ua(e)),t.setLayoutProperty(Yr,"text-ignore-placement",ma(e)),t.setFilter(Yr,Sl(e))),t.getLayer(tl)&&(va(e),t.setLayoutProperty(tl,"icon-image",_l(e)),t.setPaintProperty(tl,"icon-halo-width",Hl()),t.setPaintProperty(tl,"icon-halo-color",Gl(e)),t.setLayoutProperty(tl,"icon-size",Vl(e)),t.setLayoutProperty(tl,"text-field",ea(e)),t.setLayoutProperty(tl,"text-allow-overlap",da(e)),t.setLayoutProperty(tl,"text-ignore-placement",fa(e)),t.setFilter(tl,Ml(e))),t.getLayer(el)&&(ya(e),t.setLayoutProperty(el,"icon-image",zl(e)),t.setPaintProperty(el,"icon-halo-width",Ql()),t.setPaintProperty(el,"icon-halo-color",Zl()),t.setLayoutProperty(el,"icon-size",Ul(e)),t.setLayoutProperty(el,"text-field",ta(e)),t.setLayoutProperty(el,"text-allow-overlap",pa(e)),t.setLayoutProperty(el,"text-ignore-placement",ha(e)),t.setFilter(el,El(e)))},change:function(e){const t=e.map;t.setFilter(Yr,Sl(e)),t.setFilter(tl,Ml(e)),t.setFilter(el,El(e)),ga(e),va(e),ya(e),t.setLayoutProperty(Yr,"symbol-sort-key",Ol(e))},changeIconText:e=>{const t=e.map;t.getLayer(Yr)&&(t.setLayoutProperty(Yr,"text-size",oa(e)),t.setPaintProperty(Yr,"text-halo-width",1),t.setPaintProperty(Yr,"text-halo-blur",la(e))),t.getLayer(tl)&&(t.setLayoutProperty(tl,"text-size",sa(e)),t.setPaintProperty(tl,"text-halo-width",Hl()),t.setPaintProperty(tl,"text-halo-blur",(({kmlOptions:{iconTextChange:e}})=>ts({ratio:e,size:10}))(e))),t.getLayer(el)&&(t.setLayoutProperty(el,"text-size",ra(e)),t.setPaintProperty(el,"text-halo-width",Ql()),t.setPaintProperty(el,"text-halo-blur",aa(e)))},changeIconSize:e=>{const t=e.map;t.getLayer(Yr)&&t.setLayoutProperty(Yr,"icon-size",Rl(e)),t.getLayer(tl)&&t.setLayoutProperty(tl,"icon-size",Vl(e)),t.getLayer(el)&&t.setLayoutProperty(el,"icon-size",Ul(e))},changeLabel:e=>{const t=e.map;t.getLayer(Yr)&&t.setLayoutProperty(Yr,"text-field",Yl(e)),t.getLayer(tl)&&t.setLayoutProperty(tl,"text-field",ea(e)),t.getLayer(el)&&t.setLayoutProperty(el,"text-field",ta(e))}};const wa="etops-ep-circle-line-layer",Ta="etops-etops-circle-line-layer";function Pa(e,t){const{map:n}=e;n.getLayer(Ta)&&n.setLayoutProperty(Ta,"visibility",t?"visible":"none"),n.getLayer(wa)&&n.setLayoutProperty(wa,"visibility",t?"visible":"none"),$a(e,t)}var ka={show:e=>Pa(e,!0),hide:e=>Pa(e,!1),add:function(e){const{map:t,mapData:n,ofp:o,kmlOptions:s}=e;if(!o)return;const r=ls(s.lineWidthChange,1);if(o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0){const{affineAndClip:l}=n,a=o.infos.maxETOPS,i=s.etopsDisplay;hs(t,"etops-ep-circle",[o.infos.EEP.circle(420,48),o.infos.EXP.circle(420,48)],l,s.routeColor,i,r,!0),hs(t,"etops-etops-circle",o.infos.raltPoints.map((e=>e.circle(7*a))),l,s.etopsColor,i,r,!0),$a(e,i)}},changeLine:e=>function(e){const{map:t}=e,[n,o]=ro(e.value);t.getLayer(Ta)&&(t.setPaintProperty(Ta,"line-color",n),t.setPaintProperty(Ta,"line-opacity",o)),va(e)}(e),changeLineWidth:function(e){const{map:t,value:n}=e,o=ls(n,1);return t.getLayer(Ta)&&t.setPaintProperty(Ta,"line-width",o),t.getLayer(wa)&&t.setPaintProperty(wa,"line-width",o),!0}};const Ca="ralt";var La={show:ws.bind(null,Ca,!0),hide:ws.bind(null,Ca,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:s,mapOptions:r}=e;if(!n)return;const{affineAndClip:l,affineOrDrop:a}=s,i=r.interpolateMinZoom||r.mapboxOptions.minZoom||0,c=r.interpolateMaxZoom||r.mapboxOptions.maxZoom||10,u=new editolido.Route(n.wptCoordinatesAlternate(),{name:"Route Dégagement"}),d=ls(o.lineWidthChange);fs(t,Ca,u.points,l,o.alternateColor,o.alternateDisplay,d),ms(t,Ca,u.points,a,o,i,c)},changeLine:As.bind(null,Ca),changeIconText:xs.bind(null,Ca),changeLineWidth:bs.bind(null,Ca),changeIconSize:$s.bind(null,Ca)};const Sa="rnat",Ma=(e,t,n,o,s,r)=>({id:`${e}-marker-layer`,type:"symbol",source:`${e.replace("-labels","")}-line-source`,layout:{visibility:n?"visible":"none","text-field":["get","title"],"text-size":gs(o,s,r),"text-offset":[0,-.1],"text-anchor":"bottom","text-ignore-placement":!0,"text-allow-overlap":!0,"symbol-placement":"line-center"},paint:{"text-halo-color":"#000","text-color":ds(t),"text-opacity":ps(t,null,.9)}});function Ea(e){const{map:t,kmlOptions:n}=e,o="rnat-marker-layer",s="rmain-marker-layer";if(t.getLayer(o)){const e=n.iconTextChange;if(t.setPaintProperty(o,"text-color",ds(n.natColor,n.routeColor)),t.setPaintProperty(o,"text-opacity",ps(n.natColor,n.routeColor,.9)),t.getLayer(s)){const r=t.getPaintProperty(s,"text-opacity"),l=os(n.routeColor,r),a=["==",1,["get","overrideTextColor"]];t.setPaintProperty(o,"text-halo-color",["case",a,l,"rgba(0, 0, 0, 0)"]),t.setPaintProperty(o,"text-halo-width",["case",a,ns({ratio:e}),0]),t.setPaintProperty(o,"text-halo-blur",["case",a,ts({ratio:e}),0])}}return!0}var Oa={show:e=>[Sa,"rnat-incomplete","rnat-labels","rnat-incomplete-labels"].forEach((t=>ws(t,!0,e))),hide:e=>[Sa,"rnat-incomplete","rnat-labels","rnat-incomplete-labels"].forEach((t=>ws(t,!1,e))),add:function(e){const{map:t,ofp:n,mapData:o,kmlOptions:s,mapOptions:r}=e;if(!n)return;const{affineOrDrop:l,affineAndClip:a}=o,i=l,c=a,u=s.natColor,d=s.natDisplay,p=r.interpolateMinZoom||r.mapboxOptions.minZoom||0,m=r.interpolateMaxZoom||r.mapboxOptions.maxZoom||10,f={rnat:[],"rnat-incomplete":[]},h={rnat:[],"rnat-incomplete":[]};for(let e of n.tracks){const t=e.isComplete?"rnat":"rnat-incomplete",n=e.name.slice(-1),o=e.infos.direction,s="WEST"===o?`< ${n}`:"EAST"===o?`${n} >`:n;if(c){const n=c(e.points),o=n.length;for(let e=0;e<o;e++)f[t].push(Jo(n[e],{title:s}))}else f[t].push(Jo(e.points.map((e=>[e.longitude,e.latitude])),{title:e.name.slice(-1)}));const r=e.points[0];let l=i?i([r.longitude,r.latitude]):[r.longitude,r.latitude];l&&h[t].push(Zo(l,{title:`${e.isMine?e.name+"\n":""}${r.name}`,description:e.description,track:e.name,point:r.name,isMine:e.isMine,direction:o,overrideTextColor:e.isMine?1:0}));const a=e.points[e.points.length-1];l=i?i([a.longitude,a.latitude]):[a.longitude,a.latitude],l&&h[t].push(Zo(l,{title:`${e.isMine?e.name+"\n":""}${a.name}`,description:e.description,track:e.name,point:a.name,isMine:e.isMine,direction:o,noPin:1,overrideTextColor:e.isMine?1:0}))}t.addSource("rnat-marker-source",Ko(h.rnat)),t.addSource("rnat-incomplete-marker-source",Ko(h["rnat-incomplete"])),t.addSource("rnat-line-source",Ko(f.rnat)),t.addSource("rnat-incomplete-line-source",Ko(f["rnat-incomplete"]));const g=rs(s.iconTextChange,9),v=ls(s.lineWidthChange,1),y=ss(s.iconSizeChange);t.addLayer(ys("rnat",u,d,v)),t.addLayer(ys("rnat-incomplete",s.natIncompleteColor,d,v)),t.addLayer(vs("rnat",u,d,g,y,p,m)),Ea(e),t.setLayoutProperty("rnat-marker-layer","symbol-sort-key",["case",["==",1,["get","overrideTextColor"]],0,1]),t.addLayer(vs("rnat-incomplete",u,d,g,y,p,m));const $=rs(s.iconTextChange,10);t.addLayer(Ma("rnat-labels",u,d,$,p,m)),t.addLayer(Ma("rnat-incomplete-labels",s.natIncompleteColor,d,$,p,m));const x=(e,{closeButton:o=!0,focusAfterOpen:s=!1,closeOnMove:r=!0}={})=>{const l=e.features[0].geometry.coordinates.slice();for(;Math.abs(e.lngLat.lng-l[0])>180;)l[0]+=e.lngLat.lng>l[0]?360:-360;const a=e.features[0].properties;let i=new mapboxgl.Popup({closeButton:o,focusAfterOpen:s,closeOnMove:r});i.setLngLat(l);const c=Mn.subscribe((e=>{let t=a.description.replace(a.point,`<b>${a.point}</b>`),o=[void 0,void 0,void 0];a.isMine&&(o=n.timeMatrix.filter((([e])=>editolido.isARINC(a.point)?editolido.arinc_normalizer(a.point).asDM===e.name:a.point===e.name)).pop()||o);const[,s,r]=o;let l=r?` - FL${r}`:"";const c="WEST"===a.direction?"WB":"EAST"===a.direction?"EB":"";if(r&&c){const e=new RegExp(String.raw`(LVLS ${c})([\d\s]*)( ${r} )`,"u"),n=t.replace(e,"<strong>$1</strong>$2<strong><b>$3</b></strong>");t=t!=n?n:t.replace(`LVLS ${c}`,`<strong class="error">LVLS ${c}</strong>`)}const u=s&&e?" - ETO: "+new Date(e.getTime()+6e4*s).toISOString().substring(11,16)+"z":"";let d=`<div class="track"><h1>${a.track}${u}${l}</h1><p>${t}</p>`;i.setHTML(d)})),u=()=>{c(),i&&i.off("close",u),i=void 0,t.getCanvas().focus()};return i.on("close",u),i.addTo(t)};let b;for(const e of["rnat-marker-layer","rnat-incomplete-marker-layer"])t.on("click",e,(function(e){b&&b.remove(),b=x(e,{closeOnMove:!1})})),t.on("mouseenter",e,(function(e){t.getCanvas().style.cursor="pointer",b&&b.remove(),b=x(e,{closeButton:!1})})),t.on("mouseleave",e,(function(){b&&b.remove(),t.getCanvas().style.cursor=""}));o.initialLoad&&(()=>{const e=n.tracks.filter((e=>e.isMine)).pop();if(e&&e.points.length>0){const t=e.points[0],n=o.affineOrDrop,s=n?n([t.longitude,t.latitude]):[t.longitude,t.latitude];if(s){const[n,o]=s,r={lngLat:{lng:n,lat:o},features:[{properties:{track:e.name,point:t.name,isMine:!0,description:e.description,direction:e.infos.direction},geometry:{coordinates:[n,o]}}]};x(r,{closeButton:!0,focusAfterOpen:!1,closeOnMove:!1})}}})()},changeLine:function(e){return As(Sa,e)&&As("rnat-labels",e),Ea(e),!0},changeIconText:function(e){[Sa,"rnat-incomplete"].forEach((t=>xs(t,e,9))),["rnat-labels","rnat-incomplete-labels"].forEach((t=>xs(t,e,10))),Ea(e)},changeLineWidth:e=>[Sa,"rnat-incomplete"].forEach((t=>bs(t,e,1))),changeIconSize:e=>[Sa,"rnat-incomplete"].forEach((t=>$s(t,e)))};const Fa="rmain";function qa(e){const{map:t,kmlOptions:n}=e,o=n.iconTextChange,s="rmain-marker-layer";if(t.getLayer(s)){const e=t.getPaintProperty(s,"text-opacity"),r=os(n.routeColor,e);t.setPaintProperty(s,"text-halo-color",r),t.setPaintProperty(s,"text-halo-width",ns({ratio:o})),t.setPaintProperty(s,"text-halo-blur",ts({ratio:o}))}return!0}var Ia={show:ws.bind(null,Fa,!0),hide:ws.bind(null,Fa,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:s,mapOptions:r}=e;if(!n)return;const{affineAndClip:l,affineOrDrop:a}=s,i=r.interpolateMinZoom||r.mapboxOptions.minZoom||0,c=r.interpolateMaxZoom||r.mapboxOptions.maxZoom||10,u=n.route;u.name=`${n.infos.depICAO}-${n.infos.destICAO}`,u.description=n.description;const d=ls(o.lineWidthChange);fs(t,Fa,u.points,l,o.routeColor,!0,d),ms(t,Fa,u.points,a,o,i,c,9),qa(e)},changeLine:e=>(As(Fa,e),function({map:e,kmlOptions:{routeColor:t}}){const[n,o]=ro(t);e.getLayer(wa)&&(e.setPaintProperty(wa,"line-color",n),e.setPaintProperty(wa,"line-opacity",o))}(e),Ea(e),qa(e),!0),changeIconText:e=>xs(Fa,e,9)&&qa(e),changeLineWidth:bs.bind(null,Fa),changeIconSize:$s.bind(null,Fa)};const Da=[["fir",Is],["airport",Aa],["etops",ka],["greatcircle",_s],["ogimet",ks],["ralt",La],["rmain",Ia],["rnat",Oa]],Na=(e,t)=>(e.ofp||"airport"!==t||(zo.includes(e.kmlOptions.airportPin)||(e.kmlOptions.airportPin=zo[0]),"airport-pin"!==e.name||zo.includes(e.value)||(e.value=zo[0])),e),_a=2*Math.PI,za=Math.PI/4,ja=function(e){return Math.abs(e)<=3.14159265359?e:e-function(e){return e<0?-1:1}(e)*_a};var Ra={init:function(){},forward:function(e){var t=e.x,n=e.y,o=ja(t-this.long0),s=Math.tan(n/2),r=Math.sin(za*s),l=r*r,a=this.x0+this.a*o*(.74482-.34588*l),i=this.y0+1.70711*this.a*s;return e.x=a,e.y=i,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.y/1.70711/this.a,n=Math.sin(za*t),o=n*n,s=ja(this.long0+e.x/this.a/(.74482-.34588*o)),r=2*Math.atan(t);return e.x=s,e.y=r,e},names:["The Times","times"]};const Va=Math.abs,Ua=Math.asin,Ba=Math.cos,Ha=Math.sin,Qa=Math.sqrt,Wa=1.340264,Ga=-.081106,Za=893e-6,Ka=.003796,Ja=Qa(3)/2;var Xa={init:function(){},forward:function(e){const t=e.x,n=e.y,o=Ua(Ja*Ha(n)),s=o*o,r=s*s*s;return e.x=this.a*t*Ba(o)/(Ja*(Wa+3*Ga*s+r*(7*Za+9*Ka*s))),e.y=this.a*o*(Wa+Ga*s+r*(Za+Ka*s)),e},inverse:function(e){const t=e.y/this.a,n=e.x/this.a;let o=t,s=o*o,r=s*s*s;for(var l,a=0;a<12&&(o-=l=(o*(Wa+Ga*s+r*(Za+Ka*s))-t)/(Wa+3*Ga*s+r*(7*Za+9*Ka*s)),s=o*o,r=s*s*s,!(Va(l)<1e-12));++a);return e.x=Ja*n*(Wa+3*Ga*s+r*(7*Za+9*Ka*s))/Ba(o),e.y=Ua(Ha(o)/Ja),e},names:["Equal Earth","eqearth"]};function Ya(e,t,n,o,s,r,l=!1){window.proj4.Proj.projections.get("times")||window.proj4.Proj.projections.add(Ra),window.proj4.Proj.projections.get("eqearth")||window.proj4.Proj.projections.add(Xa);let a={container:e,center:[0,49],zoom:2,attributionControl:!0,customAttribution:(()=>{const e=Cs(t)?"Airports © Olivier Ravet":"Airports/FIR © Olivier Ravet";return t.copyright?`© ${t.copyright} - ${e}`:t.id.startsWith("jb_")||t.id.startsWith("ed_")?`Yammer/QGIS & Avenza maps - ${e}`:`Yammer/Maps.me - ${e}`})(),trackResize:!1};const i=new mapboxgl.Map({...t.mapboxOptions,...a});let c,u,d;i.loadImage("sdf/maki-camera-sdf.png",(function(e,t){e||i.addImage("sdf-camera",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-triangle-sdf.png",(function(e,t){e||i.addImage("sdf-triangle",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-circle-sdf.png",(function(e,t){e||i.addImage("sdf-airport",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-star-sdf.png",(function(e,t){e||i.addImage("sdf-star",t,{pixelRatio:2,sdf:!0})})),i.loadImage("images/stripe-orange.png",(function(e,t){e||i.addImage("stripe-orange",t,{pixelRatio:2,sdf:!0})})),i.loadImage("images/stripe-red.png",(function(e,t){e||i.addImage("stripe-red",t,{pixelRatio:2,sdf:!0})})),window.proj4.defs("WGS84","+proj=longlat +datum=WGS84"),window.proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");const p=e=>{if(0===e.length)return[];let n=[];if(t.allow180Crossing)n=[e];else{let t=[];for(let o=0;o<e.length;o++){const s=o>0?e[o].longitude-e[o-1].longitude:0;Math.abs(s)>180?(t.length&&n.push(t),t=[e[o]]):t.push(e[o])}t.length&&n.push(t)}return n.map((e=>e.map((e=>[e.longitude,e.latitude]))))};let m,f=p,h=e=>window.proj4("WGS84","EPSG:3857",e),g=e=>window.proj4("EPSG:3857","WGS84",e);if(t.extent){let e,n,o,s;if(window.proj4.defs("CUSTOM",t.proj4),t.affineTransform)[e,n,o,s]=t.affineTransform;else{const r=[-20026376.39,-20048966.1,20026376.39,20048966.1],[l,a,i,c]=t.extent;let[u,d,p,m]=r;if(t.ratio){const e=r[3]-r[1],n=r[2]-r[0],[o,s]=t.ratio;if(o>s){const t=s/o*e;[u,d,p,m]=[r[0],r[3]-t,r[2],r[3]]}else if(s>o){const e=o/s*n;[u,d,p,m]=[r[0],r[1],r[0]+e,r[3]]}}e=(p-u)/(i-l),n=u-e*l,o=(m-d)/(c-a),s=d-o*a}const[r,l,a,i]=t.viewport?t.viewport:t.extent,m=e=>window.proj4("WGS84","CUSTOM",e),v=t=>[e*t[0]+n,o*t[1]+s],y=e=>g(v(e));h=e=>v(m(e)),c=e=>g(h(e)),u=e=>{let[t,n]=m(e);return t=lt(t,r,a),n=lt(n,l,i),y([t,n])},d=e=>{let[t,n]=m(e);if(at(t,r,a)&&at(n,l,i))return y([t,n])},f=(e,n)=>{if(0===e.length)return[];let o=p(e);const s=[];for(let e=0;e<o.length;e++){const r=o[e].map(m);let l;l="polygon"===n?[ut(r,t.extent)]:dt(r,t.extent),s.push(l.map((e=>e.map((e=>y(e))))))}return s.flat()}}let v=[];if(n){for(const e of n.tracks)v=v.concat(e.points);v=v.concat(n.route.points,n.wptCoordinatesAlternate()),m=((e,t,n=[1/0,1/0,-1/0,-1/0])=>{for(const[o,s]of e.map((e=>t?t([e.longitude,e.latitude]):[e.longitude,e.latitude])))n[0]>o&&(n[0]=o),n[1]>s&&(n[1]=s),n[2]<o&&(n[2]=o),n[3]<s&&(n[3]=s);return n[0]-=1,n[1]-=1,n[2]+=1,n[3]+=1,n})(v,u),i.fitBounds(m,{padding:{top:30,bottom:80,left:30,right:30}})}const y=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!1},fitBoundsOptions:{maxZoom:3},trackUserLocation:!0});if(c){const e=y._onSuccess;y._onSuccess=function(t){const[n,o]=c([t.coords.longitude,t.coords.latitude]);return e.apply(this,[{coords:{longitude:n,latitude:o,accuracy:t.coords.accuracy}}])}}const $={map:i,affine:c,affineAndClamp:u,affineAndClip:f,affineOrDrop:d,bbox:m,mapOptions:t,geolocate:y,initialLoad:l};i.addControl(new class{onAdd(e){return this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl  mapboxgl-ctrl-group",this._button=document.createElement("button"),this._button.className="mapboxgl-ctrl-layers",this._button.setAttribute("type","button"),this._button.setAttribute("title","Personnaliser la carte"),this._focusModeUnsubscribe=wn.subscribe((e=>this._button.innerHTML=(e=>e?'<svg><use xlink:href="#single-layer-symbol"/></svg>':'<svg><use xlink:href="#layers-symbol"/></svg>')(e))),this._container.appendChild(this._button),this._toggleSidebar=()=>An.update((e=>!e)),this._button.addEventListener("click",this._toggleSidebar),this._container}onRemove(){this._button.removeEventListener("click",this._toggleSidebar),this._focusModeUnsubscribe(),this._container.parentNode.removeChild(this._container),this._map=void 0}}),i.addControl(y);const x=e=>{let t;187!==e.keyCode||"-"!==e.key&&"_"!==e.key||(e.preventDefault(),e.stopPropagation(),t=new KeyboardEvent("keydown",{location:e.location,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat,isComposing:e.isComposing,charCode:e.charCode,key:e.key,code:e.code,bubbles:!0,keyCode:189,which:189}),i.getCanvas().dispatchEvent(t))},b=()=>Pn.set(!1),A=function(e,t,n,o,s){let r,l,a,i=null,c=0;const u=function(){c=new Date,i=null,a=e.apply(r,l)};return function(){var d=new Date;c||n||(c=d);var p=t-(d-c);return r=s||this,l=arguments,p<=0?(clearTimeout(i),i=null,c=d,a=e.apply(r,l)):!i&&o&&(i=setTimeout(u,p)),a}}((e=>kn.set(Math.floor(10*(e.target.getZoom()+Number.EPSILON))/10)),100),w=document.querySelector(".mapboxgl-ctrl-geolocate");return i.on("load",(function(){(e=>{const{map:t,mapOptions:n}=e;n.tiles&&(t.addSource("jb-raster",{type:"raster",tiles:n.tiles,tileSize:n.tileSize}),t.addLayer({id:"jb-layer",type:"raster",source:"jb-raster",minzoom:0,maxzoom:22,paint:{"raster-opacity":1}})),Da.forEach((([t,n])=>n.add&&n.add(Na(e,t))))})({ofp:n,kmlOptions:o,mapData:$,map:i,mapOptions:t,aircraftType:s}),w&&w.addEventListener("click",gt),y.on("trackuserlocationstart",b),r&&r(i,t),i.on("zoom",A),kn.set(i.getZoom()),i.getCanvasContainer().addEventListener("keydown",x,{capture:!0})})),i.on("remove",(function(){w&&w.removeEventListener("click",gt),y.off("trackuserlocationstart",b),i.off("zoom",A),i.getCanvasContainer().removeEventListener("keydown",x)})),$}const ei={version:8,name:"Blank pour App",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template","mapbox:sdk-support":{js:"1.9.0",android:"8.6.0",ios:"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},center:[0,0],zoom:1.2946207284336362,bearing:0,pitch:0,sources:{},sprite:"mapbox://sprites/flyingeek/ckbhlmwdm0mn51imw8t4dddqs/ck2u8j60r58fu0sgyxrigm3cu",glyphs:"mapbox://fonts/flyingeek/{fontstack}/{range}.pbf",layers:[],created:"2020-06-16T07:22:32.952Z",id:"ckbhlmwdm0mn51imw8t4dddqs",modified:"2020-06-16T07:23:29.539Z",owner:"flyingeek",visibility:"public",draft:!1},ti=globalThis.matchMedia&&globalThis.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?256:512,ni=[{label:"Mercator 🔎",id:"mercator",mapboxOptions:{style:"mapbox://styles/flyingeek/cknj4nmwu0t8117ny6rk7dwbg",renderWorldCopies:!1,maxZoom:12},cacheName:"denizotjbv2",interpolateMinZoom:2,interpolateMaxZoom:7,cacheZoom:6,routeCacheZoom:7},{label:"Lambert North",id:"jb_north",extent:[-7441575.3298294,-5719574.1644927,7383398.17621086,9105399.34154755],proj4:"+proj=lcc +lat_1=30 +lat_2=65 +lat_0=47.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5.5},tiles:["https://ofp2map-northv3.netlify.app/northv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"northv3",cacheAll:!0,tileSize:ti,interpolateMinZoom:2,subLabel:"recommandée au nord du 30N"},{label:"Lambert South",id:"jb_south",extent:[-12613000.20107552,-12796118.19556621,13437104.14597977,13253986.15148908],validity:[-12613903.56963206,-9420000.1608799,13437054.51836624,5862747.38325809],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5.5},tiles:["https://ofp2map-southv3.netlify.app/southv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"southv3",cacheAll:!0,tileSize:ti,interpolateMinZoom:2,subLabel:"recommandée au sud du 30N"},{label:"Lambert Pacific",id:"jb_pacific",extent:[-8306365.14297095,-7788164.66141786,6519185.45830619,7037385.93985927],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=-140 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-pacificv1.netlify.app/pacificv1/{z}/{x}/{y}.jpg"],cacheName:"pacificv1",cacheZoom:4,cacheAll:!0,tileSize:ti,interpolateMinZoom:3,allow180Crossing:!0,subLabel:"recommandée au sud du 30N"},{label:"Stéréographique",id:"jb_stereo",extent:[-6193510.3681528,-5728703.23331308,5748784.52059092,6213591.65543064],proj4:"+proj=sterea +lat_0=90 +lat_ts=90 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +units=m +no_defs ",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5.5},tiles:["https://ofp2map-stereov1.netlify.app/stereov1/{z}/{x}/{y}.jpg"],cacheName:"stereov1",cacheZoom:4,cacheAll:!0,tileSize:ti,interpolateMinZoom:3,allow180Crossing:!0,subLabel:"recommandée au nord du 60N"},{label:"Artic",id:"ed_artic",copyright:"Perry-Castañeda Library",ratio:[6486,5619],extent:[-3402191.5741,-2914604.22852291,3372208.41558015,2954244.6062],proj4:"+proj=laea +lat_0=90 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs ",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:4},tiles:["https://ofp2map-articv1.netlify.app/articv1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,4],[8,7],[16,14],[32,28]],cacheZoom:5,cacheName:"articv1",cacheAll:!0,interpolateMinZoom:1,allow180Crossing:!0,tileSize:ti},{label:"The World",id:"jb_theworld",affineTransform:[1.314746085506463,-45260.546626176685,1.315,648e4],extent:[-15201502.45260082,-8478963.56607166,15262747.04890729,10300929.57326125],proj4:"+proj=times +ellps=sphere +no_defs +wktext +lon_0=0 +x_0=0 +y_0=0",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-theworldv2.netlify.app/theworldv2/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,10],[32,20],[64,40]],cacheZoom:5,cacheName:"theworldv2",cacheAll:!0,interpolateMinZoom:3,tileSize:ti},{label:"=Politique=",id:"ed_eqe_political_fr",copyright:"equal-earth.com",affineTransform:[1.1035985722623456,-1541.9992757886648,1.099369559054978,9295511.039313361],extent:[-18144998.3989,-9405510.7777095,18144670.32165249,9729041.8204],proj4:"+proj=eqearth +datum=WGS84 +wktext",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:6.5},tiles:["https://ofp2map-eqepoliticalfrv1.netlify.app/eqepoliticalfrv1/{z}/{x}/{y}.jpg"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,9],[32,17],[64,34]],cacheZoom:6,cacheName:"eqepoliticalfrv1",cacheAll:!0,interpolateMinZoom:2,tileSize:ti},{label:"=Physique=",id:"ed_eqe_physical_fr",copyright:"equal-earth.com",affineTransform:[1.104,-855.8520345054567,1.1,931e4],extent:[-18145536.6946,-10300589.33644032,18143985.81684419,9720047.1747],proj4:"+proj=eqearth +datum=WGS84 +wktext",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-eqephysicalfrv1.netlify.app/eqephysicalfrv1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,9],[32,18],[64,36]],cacheZoom:5,cacheName:"eqephysicalfrv1",cacheAll:!0,interpolateMinZoom:3,tileSize:ti},{label:"NAM Physical",id:"ed_nam_physical_meters",copyright:"shadedrelief.com",ratio:[15930,16495],extent:[-4642624.68806983,-4140497.45357531,4029960.50029886,4839684.133502],proj4:"+proj=laea +lat_0=45 +lon_0=-95 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-namphysicalmetersv1.netlify.app/namphysicalmetersv1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,4],[8,8],[16,16],[31,32],[62,64]],cacheZoom:5,cacheName:"namphysicalmetersv1",cacheAll:!0,interpolateMinZoom:2,allow180Crossing:!0,tileSize:ti},{label:atob("Q2FydGFCb3NzeQ==")+" 2022",id:"vb_2022",copyright:atob("Q2FydGFCb3NzeQ==")+".com",ratio:[29173,27529],extent:[26979.23194704,-430635.24167577,1262481.71772459,735242.38253052],proj4:"+proj=lcc +lat_1=45.89893890000052 +lat_2=47.69601440000037 +lat_0=46.8 +lon_0=2.33722917 +x_0=600000 +y_0=200000 +datum=WGS84 +units=m +no_defs ",mapboxOptions:{style:ei,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-cb2022v1.netlify.app/cb2022v1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,4],[8,8],[16,16],[32,31]],cacheName:"cb2022v1",cacheZoom:5,cacheAll:!0,interpolateMinZoom:.5,tileSize:ti}],oi="&force_cache",si=Object.fromEntries(ni.map((e=>[e.cacheName,e.matrix]))),ri=/_(\d+)_(\d+)_(\d+)_/;class li{constructor(e,t,n){this.dbName=e,this.dbPromise=new Promise(((o,s)=>{const r=indexedDB.open(e,t);r.onsuccess=()=>{o(r)},r.onerror=()=>{s("Error while opening DB")},r.onupgradeneeded=n?n.bind(null,r):()=>{}}))}getImageIdFromURL(e){return e.pathname.replace(/[/.]/g,"_")}async fetchImageFromDB(e,t){const n=await this.dbPromise;return new Promise(((o,s)=>{const r=n.result.transaction(t,"readonly").objectStore(t).get(e);r.onsuccess=()=>{o(r.result)},r.onerror=()=>{s("Something went wrong while fetching image from DB ")}}))}async putImageInDB(e,t,n){const o=await this.dbPromise;return new Promise(((s,r)=>{const l=o.result.transaction(t,"readwrite").objectStore(t),a=l.put(n,e);a.onsuccess=()=>{const t=l.get(e);t.onsuccess=()=>{s(t.result)}},a.onerror=()=>{r("Something went wrong while putting image in DB ")}}))}getCacheHandler(e){return this._cacheHandler.bind(this,e)}getReadOnlyCacheHandler(e){return this._cacheReadOnlyHandler.bind(this,e)}async isNotCached(e,t){const n=this.getImageIdFromURL(t),o=await this.dbPromise;return new Promise(((s,r)=>{const l=o.result.transaction(e,"readonly").objectStore(e).getKey(n);l.onsuccess=()=>{s(void 0===l.result?t:null)},l.onerror=()=>{r("Something went wrong while checking if cached from DB ")}}))}async countTiles(e){const t=await this.dbPromise;return new Promise(((n,o)=>{const s=t.result.transaction(e,"readonly").objectStore(e).count();s.onsuccess=()=>n(s.result),s.onerror=()=>o("Something went wrong while counting entries from DB")}))}async close(){(await this.dbPromise).result.close()}async clear(e){const t=await this.dbPromise;return new Promise(((n,o)=>{const s=t.result.transaction(e,"readwrite").objectStore(e),r=s.clear();r.onsuccess=()=>n(s),r.onerror=()=>o(`Something went wrong while purging ${e}`)}))}async _cacheHandler(e,{request:t,url:n}){const o=this.getImageIdFromURL(n),s=si[e];if(s){const[,e,t,n]=(ri.exec(o)||[]).map((e=>parseInt(e,10)));if(e&&(t>s[e][0]-1||n>s[e][1]-1))return new Response("",{status:404,statusText:"non existing tile (sw)"})}return this.fetchImageFromDB(o,e).then((n=>n?new Response(n):fetch(t).then((e=>e.clone().blob())).then((t=>t.type.startsWith("image/")||"application/x-protobuf"===t.type?this.putImageInDB(o,e,t).then((e=>new Response(e))):new Response("",{status:404,statusText:"invalid image found (sw)"})))))}async _cacheReadOnlyHandler(e,{request:t,url:n}){const o=new URL(n.href.replace(oi,"")),s=o.href!==n.href,r=s?new Request(o,t):t,l=this.getImageIdFromURL(o);return this.fetchImageFromDB(l,e).then((t=>t?new Response(t):fetch(r).then((e=>e.clone().blob())).then((t=>t.type.startsWith("image/")||"application/x-protobuf"===t.type?s?this.putImageInDB(l,e,t).then((e=>new Response(e))):new Response(t):new Response("",{status:404,statusText:"invalid image found (sw)"})))))}}function ai(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}function ii(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}function ci(e,t){return ui(e.split(Math.PI/Math.pow(2,t),{preserve:!0,converter:null}).points,t)}function ui(e,t){const n=Math.pow(2,t)-1,o=[];for(const s of e){const e=Math.trunc(ai(s.longitude,t)),r=Math.trunc(ii(s.latitude,t));for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++){const l=e+t,a=r+s;l>=0&&l<=n&&a>=0&&a<=n&&o.push(`${l}_${a}`)}}return o}function di(e,t,n,o,s=""){return new URL(`https://api.mapbox.com/v4/denizotjb.9001lcsf,denizotjb.494jxmoa,mapbox.mapbox-streets-v8,denizotjb.1x3i1g8r,denizotjb.bifqeinj,denizotjb.cz0kdfpx,denizotjb.aop85z8z,mapbox.mapbox-terrain-v2/${t}/${n}/${o}.vector.pbf?sku=${e._requestManager._skuToken}&access_token=${mapboxgl.accessToken}${s}`)}const pi=async(e,t)=>{const{map:n,mapOptions:o,bbox:s}=t;if(!n)return[];const r=new li("lido-tiles");if(o.cacheAll){const e=await r.countTiles(o.cacheName);let t;if(t=o.matrix?o.matrix.map((([e,t])=>e*t)):[...Array(o.cacheZoom+1).keys()].map((e=>Math.pow(2,e)*Math.pow(2,e))),e>=t.reduce(((e,t)=>e+t),0))return r.close(),caches[o.id]=!0,[]}const l=[];if(o.tiles){const[e,t]=[[s[0],s[1]],[s[2],s[3]]];for(let n=0;n<=o.cacheZoom;n++){let s,a;const i=Math.pow(2,n);let c,u;o.cacheAll?(s={x:0,y:i-1},a={x:i-1,y:0}):(s={x:ai(e[0],n),y:ii(e[1],n)},a={x:ai(t[0],n),y:ii(t[1],n)}),o.matrix?[c,u]=o.matrix[n]:[c,u]=[i,i];for(let e=s.x;e<=a.x;e++)for(let t=a.y;t<=s.y;t++)if(e>=0&&t>=0&&e<c&&t<u){const s=new URL(o.tiles[0].replace("{z}",n).replace("{x}",e).replace("{y}",t));l.push(r.isNotCached(o.cacheName,s))}}}else{const t=[],s=e.wptCoordinatesAlternate();e.route&&e.route.points.length>0&&t.push(e.route.points[0],e.route.points[e.route.points.length-1]),s.length>0&&t.push(s[s.length-1]);for(let s=0;s<=o.cacheZoom;s++)for(const a of new Set(ci(e.route,s).concat(ui(t,s)))){const[e,t]=a.split("_"),i=new URL(`https://api.mapbox.com/v4/denizotjb.6nts91f3/${s}/${e}/${t}@2x.webp?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`);l.push(r.isNotCached(o.cacheName,i)),l.push(r.isNotCached(o.cacheName,di(n,s,e,t)))}if(o.routeCacheZoom){const s=o.cacheName+"_hd";for(let a=o.cacheZoom+1;a<=o.routeCacheZoom;a++)for(const o of new Set(ci(e.route,a).concat(ui(t,a)))){const[e,t]=o.split("_"),i=di(n,a,e,t,oi);l.push(r.isNotCached(s,i))}for(let e=o.routeCacheZoom+1;e<=9;e++)for(const o of new Set(ui(t,e))){const[t,a]=o.split("_"),i=di(n,e,t,a,oi);l.push(r.isNotCached(s,i))}}}return Promise.all(l).then((e=>e.filter((e=>null!==e)))).finally((()=>r.close()))};function mi(e){let t,n,o,s,r,l,a,i,c,u,d;const p=e[4].default,f=m(p,e,e[3],null);return{c(){t=D("svg"),n=D("circle"),o=D("path"),s=D("path"),l=D("line"),a=D("polyline"),i=D("line"),c=D("polyline"),u=z(),f&&f.c(),U(n,"cx","54"),U(n,"cy","54"),U(n,"r","50"),U(n,"class","svelte-1skpmaj"),U(o,"d","M50,5A45 45 0 1 1 49.9999 5"),U(o,"transform","translate(4,4)"),U(o,"class","svelte-1skpmaj"),U(s,"d",r=e[0]()),U(s,"transform","translate(4,4)"),U(s,"class","svelte-1skpmaj"),U(l,"x1","54"),U(l,"y1","36"),U(l,"x2","54"),U(l,"y2","72"),U(l,"class","svelte-1skpmaj"),U(a,"points","36 54, 54 72, 72 54"),U(a,"class","svelte-1skpmaj"),U(i,"x1","54"),U(i,"y1","36"),U(i,"x2","54"),U(i,"y2","72"),U(i,"class","svelte-1skpmaj"),U(c,"points","36 54, 54 72, 72 54"),U(c,"class","svelte-1skpmaj"),U(t,"viewBox","0 0 108 108"),U(t,"class","svelte-1skpmaj")},m(e,r){O(e,t,r),S(t,n),S(t,o),S(t,s),S(t,l),S(t,a),S(t,i),S(t,c),O(e,u,r),f&&f.m(e,r),d=!0},p(e,[t]){(!d||1&t&&r!==(r=e[0]()))&&U(s,"d",r),f&&f.p&&(!d||8&t)&&g(f,p,e,e[3],d?h(p,e[3],t,null):v(e[3]),null)},i(e){d||(qe(f,e),d=!0)},o(e){Ie(f,e),d=!1},d(e){e&&F(t),e&&F(u),f&&f.d(e)}}}function fi(e,t,n){let o,{$$slots:s={},$$scope:r}=t,{value:l=0}=t,{max:a=100}=t;return e.$$set=e=>{"value"in e&&n(1,l=e.value),"max"in e&&n(2,a=e.max),"$$scope"in e&&n(3,r=e.$$scope)},e.$$.update=()=>{6&e.$$.dirty&&n(0,o=()=>{if(l<=0)return"";if(l>=a)return"M50,5A45 45 0 1 1 49.9999 5";{const e=2*Math.PI*(l/a),t=50+45*Math.cos(e-Math.PI/2),n=50+45*Math.sin(e-Math.PI/2);let o="M50,5";return e>Math.PI&&(o+="A45 45 0 0 1 50 95"),o+=`A45 45 0 0 1 ${t} ${n}`,o}})},[o,l,a,r,s]}class hi extends Ge{constructor(e){super(),We(this,e,fi,mi,a,{value:1,max:2})}}function gi(e,t,n){const o=e.slice();return o[8]=t[n],o}function vi(t){let n,o,s;return{c(){n=I("option"),o=N("???"),n.__value=void 0,n.value=n.__value,n.selected=s=!0},m(e,t){O(e,n,t),S(n,o)},p:e,d(e){e&&F(n)}}}function yi(e){let t,n,o,s,r=e[8]+"";return{c(){t=I("option"),n=N(r),t.__value=o=e[8],t.value=t.__value,t.selected=s=e[8]===e[4]},m(e,o){O(e,t,o),S(t,n)},p(e,n){16&n&&s!==(s=e[8]===e[4])&&(t.selected=s)},d(e){e&&F(t)}}}function $i(e){let t,n=e[8]===e[4]||e[2]&&e[8]===e[2]||!Et.includes(e[8]),o=n&&yi(e);return{c(){o&&o.c(),t=j()},m(e,n){o&&o.m(e,n),O(e,t,n)},p(e,s){20&s&&(n=e[8]===e[4]||e[2]&&e[8]===e[2]||!Et.includes(e[8])),n?o?o.p(e,s):(o=yi(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&F(t)}}}function xi(t){let n,o,s,l,a,i=!t[4]&&vi(),c=Mt,u=[];for(let e=0;e<c.length;e+=1)u[e]=$i(gi(t,c,e));return{c(){n=I("select"),i&&i.c(),o=j();for(let e=0;e<u.length;e+=1)u[e].c();U(n,"tabindex",s=t[1]?-1:0),U(n,"name","aircraftType"),U(n,"class","svelte-1xpiicm"),void 0===t[3]&&be((()=>t[7].call(n)))},m(e,s){O(e,n,s),i&&i.m(n,null),S(n,o);for(let e=0;e<u.length;e+=1)u[e].m(n,null);t[6](n),K(n,t[3]),l||(a=[R(n,"change",t[7]),R(n,"change",t[5]),A(wo.call(null,n))],l=!0)},p(e,[t]){if(e[4]?i&&(i.d(1),i=null):i?i.p(e,t):(i=vi(),i.c(),i.m(n,o)),20&t){let o;for(c=Mt,o=0;o<c.length;o+=1){const s=gi(e,c,o);u[o]?u[o].p(s,t):(u[o]=$i(s),u[o].c(),u[o].m(n,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=c.length}2&t&&s!==(s=e[1]?-1:0)&&U(n,"tabindex",s),8&t&&K(n,e[3])},i:e,o:e,d(e){e&&F(n),i&&i.d(),q(u,e),t[6](null),l=!1,r(a)}}}function bi(e,t,n){let o,s,r,l;p(e,Ln,(e=>n(1,s=e))),p(e,On,(e=>n(3,r=e))),p(e,Fn,(e=>n(4,l=e)));let{aircraftTypeSelectElement:a=null}=t;return e.$$set=e=>{"aircraftTypeSelectElement"in e&&n(0,a=e.aircraftTypeSelectElement)},e.$$.update=()=>{2&e.$$.dirty&&n(2,o=s?s.infos.aircraftType:void 0)},[a,s,o,r,l,function(t){pe.call(this,e,t)},function(e){fe[e?"unshift":"push"]((()=>{a=e,n(0,a)}))},function(){r=J(this),On.set(r)}]}class Ai extends Ge{constructor(e){super(),We(this,e,bi,xi,a,{aircraftTypeSelectElement:0})}}function wi(e,t,n){let o,s;p(e,Vn,(e=>n(1,o=e)));let{mapData:r}=t;const l=window.document.createElement("div");l.classList.add("mapboxgl-user-location-dot","map-plane");const a=e=>{if(s){const t=r.affine,[n,o]=t?t([e.longitude,e.latitude]):[e.longitude,e.latitude];s.setLngLat([n,o])}};return ce((()=>{s=new mapboxgl.Marker(l),a(o.map),s.addTo(r.map)})),ue((()=>{s&&(s.remove(),s=void 0)})),e.$$set=e=>{"mapData"in e&&n(0,r=e.mapData)},e.$$.update=()=>{2&e.$$.dirty&&a(o.map)},[r,o]}class Ti extends Ge{constructor(e){super(),We(this,e,wi,null,a,{mapData:0})}}function Pi(e,t,n){const o=e.slice();return o[9]=t[n],o}function ki(e,t){let n,o,s,r,l,a=(t[9].id===t[3]?`${t[9].label.toUpperCase()}`:t[9].label)+"";return{key:e,first:null,c(){n=I("option"),o=N(a),s=z(),n.__value=r=t[9],n.value=n.__value,n.selected=l=t[9].id===t[0].id,this.first=n},m(e,t){O(e,n,t),S(n,o),S(n,s)},p(e,s){t=e,8&s&&a!==(a=(t[9].id===t[3]?`${t[9].label.toUpperCase()}`:t[9].label)+"")&&W(o,a),33&s&&l!==(l=t[9].id===t[0].id)&&(n.selected=l)},d(e){e&&F(n)}}}function Ci(e){let t,n,o=e[4].toFixed(1)+"";return{c(){t=I("label"),n=N(o),U(t,"for",e[1]),U(t,"class","svelte-1w1kck0")},m(e,o){O(e,t,o),S(t,n)},p(e,s){16&s&&o!==(o=e[4].toFixed(1)+"")&&W(n,o),2&s&&U(t,"for",e[1])},d(e){e&&F(t)}}}function Li(t){let n,o,s,l,a,i=[],c=new Map,u=t[5];const d=e=>e[9].id;for(let e=0;e<u.length;e+=1){let n=Pi(t,u,e),o=d(n);c.set(o,i[e]=ki(o,n))}let p="mercator"===t[0].id&&Ci(t);return{c(){n=I("div"),o=I("select");for(let e=0;e<i.length;e+=1)i[e].c();s=z(),p&&p.c(),U(o,"id",t[1]),U(o,"name",t[1]),U(o,"class","form-select form-select-sm svelte-1w1kck0"),U(o,"aria-label","Choix de la projection"),o.disabled=t[2],void 0===t[0]&&be((()=>t[8].call(o))),ee(o,"extend","mercator"===t[3]&&"mercator"===t[0].id),U(n,"class","input-group")},m(e,r){O(e,n,r),S(n,o);for(let e=0;e<i.length;e+=1)i[e].m(o,null);K(o,t[0]),S(n,s),p&&p.m(n,null),l||(a=[R(o,"change",t[8]),R(o,"change",t[7]),A(wo.call(null,o))],l=!0)},p(e,[t]){41&t&&(u=e[5],i=Ve(i,t,d,1,e,u,c,o,Re,ki,null,Pi)),2&t&&U(o,"id",e[1]),2&t&&U(o,"name",e[1]),4&t&&(o.disabled=e[2]),33&t&&K(o,e[0]),9&t&&ee(o,"extend","mercator"===e[3]&&"mercator"===e[0].id),"mercator"===e[0].id?p?p.p(e,t):(p=Ci(e),p.c(),p.m(n,null)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&F(n);for(let e=0;e<i.length;e+=1)i[e].d();p&&p.d(),l=!1,r(a)}}}function Si(e,t,n){if(!e.proj4)return!1;try{const o=e.validity?e.validity:e.extent;for(let s of[t,n]){const[t,n]=window.proj4(e.proj4,[s.longitude,s.latitude]);if(t<o[0]||t>o[2]||n<o[1]||n>o[3])return!1}}catch(e){return!1}return!0}function Mi(e,t,n){let o;p(e,kn,(e=>n(4,o=e)));let{name:s="map-style"}=t,{ofp:r}=t,{selected:l=ni[0]}=t,{disabled:a}=t,i=l.id;const c=r?ni:ni.filter((e=>!e.id.startsWith("vb_")&&"jb_theworld"!==e.id));return ce((()=>{if(l.id===ni[0].id&&r){const e=r.route.points[0],t=r.route.points[r.route.points.length-1],o=ni.find((e=>"vb_2022"===e.id)),s=ni.find((e=>"jb_north"===e.id));Si(o,e,t)?n(0,l=o):e.distanceTo(t,editolido.rad_to_nm)<=1500||(r.route.points.filter((e=>e.latitude>=75)).length>0?n(0,l=ni.find((e=>"jb_stereo"===e.id))):t.latitude>30&&e.latitude>30?n(0,l=s):t.longitude<-80&&e.longitude<-80?n(0,l=ni.find((e=>"jb_pacific"===e.id))):(t.latitude>30||e.latitude>30)&&e.atFraction(t,.5).latitude>=30&&Si(s,e,t)?n(0,l=s):n(0,l=ni.find((e=>"jb_south"===e.id))))}n(3,i=l.id);const e=(e=>e?yt(nt,e):null)(r);e?n(0,l=ni.filter((t=>t.id===e)).pop()||l):xt(l.id)})),e.$$set=e=>{"name"in e&&n(1,s=e.name),"ofp"in e&&n(6,r=e.ofp),"selected"in e&&n(0,l=e.selected),"disabled"in e&&n(2,a=e.disabled)},[l,s,a,i,o,c,r,function(t){pe.call(this,e,t)},function(){l=J(this),n(0,l),n(5,c)}]}class Ei extends Ge{constructor(e){super(),We(this,e,Mi,Li,a,{name:1,ofp:6,selected:0,disabled:2})}}function Oi(t){let n,o,s,l,a;return{c(){n=I("label"),o=I("input"),U(o,"name",t[0]),U(o,"type","checkbox"),o.checked=s=t[2]>=0,U(o,"class","svelte-ockvdx"),U(n,"for",t[0]),U(n,"class","svelte-ockvdx"),ee(n,"btn-simulator-play",t[2]<0),ee(n,"btn-simulator-stop",t[2]>=0)},m(e,s){O(e,n,s),S(n,o),t[4](o),l||(a=[R(o,"change",t[3]),R(n,"click",t[3])],l=!0)},p(e,[t]){1&t&&U(o,"name",e[0]),4&t&&s!==(s=e[2]>=0)&&(o.checked=s),1&t&&U(n,"for",e[0]),4&t&&ee(n,"btn-simulator-play",e[2]<0),4&t&&ee(n,"btn-simulator-stop",e[2]>=0)},i:e,o:e,d(e){e&&F(n),t[4](null),l=!1,r(a)}}}function Fi(e,t,n){let o;p(e,Cn,(e=>n(2,o=e)));let s,{name:r="simulator"}=t;return e.$$set=e=>{"name"in e&&n(0,r=e.name)},[r,s,o,()=>{n(1,s.checked=!s.checked,s),b(Cn,o=s.checked?0:-1,o)},function(e){fe[e?"unshift":"push"]((()=>{s=e,n(1,s)}))}]}class qi extends Ge{constructor(e){super(),We(this,e,Fi,Oi,a,{name:0})}}const Ii=Lt(),Di=Lt({});function Ni(e,{ofp:t,pos:n,fl:o}){e.id="grametTrigger";const s=document.getElementById("gt-plane");let r,l,a,i,c,u=parseFloat(n),d=t,p=o;const m=e.clientHeight,f=e.clientWidth,h=getComputedStyle(document.body),g=parseFloat(h.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),v=e=>65*c+(i-130*c)*e/100,y=e=>{const t=v(e),n=65*c,o=f/3,s=n+o,r=i-n-(f-o);return t>s&&t<r?o-t:t<=s?o-s:o-r},$=(e,t,n,o)=>{e&&(e.style.left=n+(v(t)-e.clientWidth/2)+"px",e.style.top=(g-Math.round(-6e-4*o*o+.8985*o+46.264))*c-e.clientHeight/2+"px")},x=()=>{const t=l.height||700;a=l.cloneNode(),a.id="grametImg",a.style.display="none",a.crossOrigin="anonymous",a.addEventListener("load",b),a.addEventListener("error",A);let n=document.getElementById("grametImg");document.body.appendChild(a),n&&(n.removeEventListener("load",b),n.removeEventListener("error",A),n.remove(),n=void 0),l.style.height=t/g*m+"px",l.style.objectFit="contain",l.style.position="absolute",l.style.opacity=.01,e.appendChild(l),i=l.clientWidth;const o=l.clientHeight/t;c=o;const s=y(u);l.style.top=`-${33*o}px`,l.style.left=`${s}px`},b=()=>{Ii.set("success"),s.style.display="block",l.style.opacity=1;const e=y(u);$(s,u,e,p)},A=()=>{s.style.display="none",Ii.set("error")},w=()=>{var e;l&&(l.removeEventListener("load",x),l.removeEventListener("error",A),l.remove(),l=void 0),Tn.set(!1),a&&(a.removeEventListener("load",b),a.removeEventListener("error",A),a.remove(),a=void 0),r&&(e=r,URL.revokeObjectURL(e)),r=void 0},T=async e=>{l=document.createElement("img"),Ii.set("loading"),s.style.display="none",fetch(e.ogimetData.proxyImg).then((function(e){e.ok?(Di.set({status:e.status,text:e.statusText||"OK"}),e.blob().then((e=>{l&&(r=URL.createObjectURL(e),l.addEventListener("load",x),l.addEventListener("error",A),l.src=r)}))):(A(),e.headers?Di.set({status:e.status,text:e.statusText||e.headers.get("X-ofp2map-status")}):Di.set({status:e.status,text:e.statusText||""}))})).catch((function(e){A(),Di.set({status:0,text:e.message})}))};return T(t),{update({ofp:e,pos:t,fl:n}){if(u=parseFloat(t),e!==d)d=e,w(),T(e);else{const e=y(u);l.style.left=e+"px",p=n,$(s,u,e,n)}},destroy(){w()}}}const _i=(e,{pos:t,fl:n})=>{const o=e.parentNode.querySelector("svg"),s=document.getElementById("grametImg"),r=getComputedStyle(document.body),l=parseFloat(r.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),a=parseFloat(e.parentNode.dataset.maxHeight||"370"),i=s.width,c=s.height,u=document.querySelector("nav").clientWidth;let d;d=0!==i?Math.min(u/i*c,a):Math.min(c,a);let p,m,f=parseFloat(t),h=0,g=0,v=n;const y=e=>(65+(i-130)*e/100)*p,$=(e,t,n)=>{e.style.left=h+(y(t)-e.clientWidth/2+2)+"px",e.style.top=(l+33-2-Math.round(-6e-4*n*n+.8985*n+46.264))*p-e.clientHeight/2+g+"px"},x=e=>{const t=y(e),n=u/3,o=0+n,s=i*p-0-(u-n);return t>o&&t<s?n-t:t<=o?n-o:n-s},b=()=>{h=e.x,g=e.y,p=e.scale,m=u<=i*p,$(o,f,v)};return f<=0||f>=100?(p=0===i?a/(l+70):Math.min(u/i,d/(l+70)),g=0):(p=(d-11)/(l+37),g=-33*p),u>i*p?(h=(u-i*p)/2,m=!1):(h=x(f),m=!0),$(o,f,v),s.style.display="block",e.style.maxHeight=`${a}px`,e.appendChild(s),e.setTransform({scale:p,x:h,y:g}),e.addEventListener("change",b),{update({pos:t,fl:n}){f=parseFloat(t),v=n,m&&(h=x(f),e.setTransform({x:h})),$(o,f,n)},destroy(){s.style.display="none",document.getElementById("grametTrigger")&&document.body.appendChild(s),e.removeEventListener("change",b)}}},zi=e=>{const t=document.getElementById("grametImg"),n=t.width,o=t.height||700,s=parseFloat(e.dataset.maxHeight||"370"),r=document.querySelector("nav").clientWidth;let l=1;0!==n&&(l=r/n);const a=Math.min(l*o,s);e.style.height=`${a}px`};function ji(e){let t,n;return t=new qi({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Ri(e){let t,n,o,s,a,i,c,u,d,p,m,f=(0===e[0].gramet||100===e[0].gramet||e[1]>=0)&&ji();return{c(){var e,o,r;t=I("div"),n=I("pinch-zoom"),s=z(),a=D("svg"),i=D("use"),c=z(),f&&f.c(),r="0.1",(o="min-scale")in(e=n)?e[o]="boolean"==typeof e[o]&&""===r||r:U(e,o,r),H(i,"xlink:href","#plane-symbol"),U(a,"class","svelte-1f3zd1d"),U(t,"class","pinch-zoom-parent svelte-1f3zd1d"),U(t,"data-max-height",Vi)},m(r,l){O(r,t,l),S(t,n),S(t,s),S(t,a),S(a,i),S(t,c),f&&f.m(t,null),d=!0,p||(m=[A(o=_i.call(null,n,{pos:e[0].gramet,fl:e[0].fl})),A(zi.call(null,t))],p=!0)},p(n,[s]){e=n,o&&l(o.update)&&1&s&&o.update.call(null,{pos:e[0].gramet,fl:e[0].fl}),0===e[0].gramet||100===e[0].gramet||e[1]>=0?f?3&s&&qe(f,1):(f=ji(),f.c(),qe(f,1),f.m(t,null)):f&&(Oe(),Ie(f,1,1,(()=>{f=null})),Fe())},i(e){d||(qe(f),be((()=>{u||(u=_e(t,Tt,{y:Vi},!0)),u.run(1)})),d=!0)},o(e){Ie(f),u||(u=_e(t,Tt,{y:Vi},!1)),u.run(0),d=!1},d(e){e&&F(t),f&&f.d(),e&&u&&u.end(),p=!1,r(m)}}}const Vi=370;function Ui(e,t,n){let o,s;return p(e,Vn,(e=>n(0,o=e))),p(e,Cn,(e=>n(1,s=e))),[o,s]}class Bi extends Ge{constructor(e){super(),We(this,e,Ui,Ri,a,{})}}function Hi(e,t){let n=t;const o=()=>{n&&document&&document.visibilityState&&"visible"===document.visibilityState&&n.resize()},s=new IntersectionObserver((e=>{e.forEach((e=>{1===e.intersectionRatio&&o()}))}),{threshold:1});return s.observe(e),document.addEventListener("visibilitychange",o,!1),window.addEventListener("orientationchange",o),{update(e){n=e},destroy(){s.unobserve(e),s.disconnect(),window.removeEventListener("orientationchange",o),document.removeEventListener("visibilitychange",o),n&&n.remove()}}}function Qi(e){let t,n,o,s;const r=[Gi,Wi],l=[];function a(e,t){return void 0===e[3]&&e[1]?0:1}return t=a(e),n=l[t]=r[t](e),{c(){n.c(),o=j()},m(e,n){l[t].m(e,n),O(e,o,n),s=!0},p(e,s){let i=t;t=a(e),t===i?l[t].p(e,s):(Oe(),Ie(l[i],1,1,(()=>{l[i]=null})),Fe(),n=l[t],n?n.p(e,s):(n=l[t]=r[t](e),n.c()),qe(n,1),n.m(o.parentNode,o))},i(e){s||(qe(n),s=!0)},o(e){Ie(n),s=!1},d(e){l[t].d(e),e&&F(o)}}}function Wi(e){let t,n,o,s,r;return n=new hi({props:{value:e[10]>=0?e[10]:0,max:e[9]}}),{c(){t=I("div"),Be(n.$$.fragment),U(t,"class","cacheButton svelte-16kcllo"),ee(t,"cacheError",e[11]),ee(t,"cacheProgress",e[10]>=0||e[9]>0),ee(t,"hidden",!e[1]||e[15]||!0===e[8][e[6].id])},m(a,i){O(a,t,i),He(n,t,null),o=!0,s||(r=R(t,"click",(function(){l(e[13]?tc:e[22])&&(e[13]?tc:e[22]).apply(this,arguments)})),s=!0)},p(s,r){e=s;const l={};1024&r[0]&&(l.value=e[10]>=0?e[10]:0),512&r[0]&&(l.max=e[9]),n.$set(l),(!o||2048&r[0])&&ee(t,"cacheError",e[11]),(!o||1536&r[0])&&ee(t,"cacheProgress",e[10]>=0||e[9]>0),(!o||33090&r[0])&&ee(t,"hidden",!e[1]||e[15]||!0===e[8][e[6].id])},i(e){o||(qe(n.$$.fragment,e),o=!0)},o(e){Ie(n.$$.fragment,e),o=!1},d(e){e&&F(t),Qe(n),s=!1,r()}}}function Gi(t){let n;return{c(){n=I("div"),U(n,"class","lds-dual-ring svelte-16kcllo")},m(e,t){O(e,n,t)},p:e,i:e,o:e,d(e){e&&F(n)}}}function Zi(e){let t,n,o,s=e[6].subLabel+"";return{c(){t=I("div"),n=I("small"),o=N(s),U(t,"class","projection-info svelte-16kcllo")},m(e,s){O(e,t,s),S(t,n),S(n,o)},p(e,t){64&t[0]&&s!==(s=e[6].subLabel+"")&&W(o,s)},d(e){e&&F(t)}}}function Ki(t){let n;return{c(){n=I("div"),n.innerHTML="<small>Veuillez patienter...</small>",U(n,"class","projection-info svelte-16kcllo")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Ji(e){let t;return{c(){t=I("div"),t.textContent="Votre navigateur ne supporte pas l'affichage d'images au format .webp",U(t,"class","nowebp svelte-16kcllo")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Xi(e){let t,n;return t=new Ti({props:{mapData:e[5]}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};32&n[0]&&(o.mapData=e[5]),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Yi(e){let t,n;return t=new Bi({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function ec(e){let t,n,o,s,r,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,w,T,P=!e[14]&&e[5]&&e[5].mapOptions&&e[5].mapOptions.tiles&&e[5].mapOptions.tiles[0].endsWith(".webp");function k(t){e[24](t)}let C={ofp:e[1],disabled:e[10]>=0};void 0!==e[6]&&(C.selected=e[6]),a=new Ei({props:C}),fe.push((()=>Ue(a,"selected",k))),a.$on("change",e[19]);let L=e[6]&&window.indexedDB&&Qi(e);function M(e,t){return e[10]>=0?Ki:e[6]&&e[6].subLabel?Zi:void 0}let E=M(e),q=E&&E(e),D=P&&Ji(),N=e[5]&&!!e[1]&&(e[16]||e[17]>=0)&&Xi(e);function _(t){e[25](t)}let R={};function V(t){e[27](t)}void 0!==e[7]&&(R.aircraftTypeSelectElement=e[7]),f=new Ai({props:R}),fe.push((()=>Ue(f,"aircraftTypeSelectElement",_))),f.$on("change",e[20]);let B={mapOptions:e[6]};void 0!==e[0]&&(B.kmlOptions=e[0]),v=new gr({props:B}),e[26](v),fe.push((()=>Ue(v,"kmlOptions",V))),v.$on("change",e[21]),v.$on("save",e[28]);let H=e[18]&&Yi();return{c(){t=I("div"),o=z(),s=I("div"),r=I("div"),Be(a.$$.fragment),c=z(),L&&L.c(),u=z(),q&&q.c(),d=z(),D&&D.c(),p=z(),N&&N.c(),m=z(),Be(f.$$.fragment),g=z(),Be(v.$$.fragment),$=z(),H&&H.c(),x=j(),U(t,"id",e[2]),U(t,"class","svelte-16kcllo"),U(r,"class","projection svelte-16kcllo"),U(s,"class","mapmenu svelte-16kcllo")},m(l,i){O(l,t,i),O(l,o,i),O(l,s,i),S(s,r),He(a,r,null),S(r,c),L&&L.m(r,null),S(s,u),q&&q.m(s,null),S(s,d),D&&D.m(s,null),O(l,p,i),N&&N.m(l,i),O(l,m,i),He(f,l,i),O(l,g,i),He(v,l,i),O(l,$,i),H&&H.m(l,i),O(l,x,i),b=!0,w||(T=A(n=Hi.call(null,t,e[4])),w=!0)},p(e,o){(!b||4&o[0])&&U(t,"id",e[2]),n&&l(n.update)&&16&o[0]&&n.update.call(null,e[4]);const c={};2&o[0]&&(c.ofp=e[1]),1024&o[0]&&(c.disabled=e[10]>=0),!i&&64&o[0]&&(i=!0,c.selected=e[6],Ae((()=>i=!1))),a.$set(c),e[6]&&window.indexedDB?L?(L.p(e,o),64&o[0]&&qe(L,1)):(L=Qi(e),L.c(),qe(L,1),L.m(r,null)):L&&(Oe(),Ie(L,1,1,(()=>{L=null})),Fe()),E===(E=M(e))&&q?q.p(e,o):(q&&q.d(1),q=E&&E(e),q&&(q.c(),q.m(s,d))),16416&o[0]&&(P=!e[14]&&e[5]&&e[5].mapOptions&&e[5].mapOptions.tiles&&e[5].mapOptions.tiles[0].endsWith(".webp")),P?D||(D=Ji(),D.c(),D.m(s,null)):D&&(D.d(1),D=null),e[5]&&e[1]&&(e[16]||e[17]>=0)?N?(N.p(e,o),196642&o[0]&&qe(N,1)):(N=Xi(e),N.c(),qe(N,1),N.m(m.parentNode,m)):N&&(Oe(),Ie(N,1,1,(()=>{N=null})),Fe());const u={};!h&&128&o[0]&&(h=!0,u.aircraftTypeSelectElement=e[7],Ae((()=>h=!1))),f.$set(u);const p={};64&o[0]&&(p.mapOptions=e[6]),!y&&1&o[0]&&(y=!0,p.kmlOptions=e[0],Ae((()=>y=!1))),v.$set(p),e[18]?H?262144&o[0]&&qe(H,1):(H=Yi(),H.c(),qe(H,1),H.m(x.parentNode,x)):H&&(Oe(),Ie(H,1,1,(()=>{H=null})),Fe())},i(e){b||(qe(a.$$.fragment,e),qe(L),qe(N),qe(f.$$.fragment,e),qe(v.$$.fragment,e),qe(H),b=!0)},o(e){Ie(a.$$.fragment,e),Ie(L),Ie(N),Ie(f.$$.fragment,e),Ie(v.$$.fragment,e),Ie(H),b=!1},d(n){n&&F(t),n&&F(o),n&&F(s),Qe(a),L&&L.d(),q&&q.d(),D&&D.d(),n&&F(p),N&&N.d(n),n&&F(m),Qe(f,n),n&&F(g),e[26](null),Qe(v,n),n&&F($),H&&H.d(n),n&&F(x),w=!1,T()}}}const tc=()=>!1;function nc(e,t,n){let o,s,r,l,a,i;p(e,Fn,(e=>n(29,s=e))),p(e,jn,(e=>n(23,r=e))),p(e,Pn,(e=>n(16,l=e))),p(e,Cn,(e=>n(17,a=e))),p(e,Tn,(e=>n(18,i=e)));const c=de();let u,m,f,h,{kmlOptions:g}=t,{ofp:v}=t;const y={};let $,x,b,A;const w=()=>{n(3,A=f?y[f.id]:void 0)};let T,{id:P="map"}=t;async function k(){if(n(9,$=0),n(10,x=-1),n(11,b=!1),w(),v&&void 0===A)try{n(3,A=await pi(v,m)),Array.isArray(A)&&f&&n(8,y[f.id]=0===A.length,y)}catch(e){}const e=document.querySelector(`#${P} .mapboxgl-ctrl-attrib-inner`);e&&(e.appendChild(document.createTextNode(" | ")),e.appendChild(h),e.appendChild(document.createTextNode(`${"2402".substring(0,2)}.${"2402".substring(2,4)}`)))}const C=e=>{(e=>{const t=e.name,n=rt(t),o=Na(e,n),s=o.value;if("icontext"===n)return Da.forEach((([,e])=>e.changeIconText&&e.changeIconText(o)));if("linewidth"===n)return Da.forEach((([,e])=>e.changeLineWidth&&e.changeLineWidth(o)));if("iconsize"===n)return Da.forEach((([,e])=>e.changeIconSize&&e.changeIconSize(o)));const r=Object.fromEntries(Da)[n];r&&(t.endsWith("-display")?s?r.show&&r.show(o):r.hide&&r.hide(o):t.endsWith("-hide")?r.hide&&r.hide(o):t.endsWith("-label")?r.changeLabel&&r.changeLabel(o):t.endsWith("-pin")?r.changeMarker&&r.changeMarker(o):t.endsWith("-color")?r.changeLine&&r.changeLine(o):t.endsWith("-change")&&r.change&&r.change(o))})({map:u,mapData:m,name:e.detail.name,value:e.detail.value,ofp:v,kmlOptions:g,mapOptions:f,aircraftType:s}),c("save")};let L=!1;let S=!0;return(async()=>{const e=e=>{n(14,S=!(!e||"load"!==e.type)&&1==t.width)},t=new Image;t.onerror=e,t.onload=e,t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})(),ce((()=>{mapboxgl.accessToken="pk.eyJ1IjoiZmx5aW5nZWVrIiwiYSI6ImNrYXpmZzhuYjBpczUycW1pZzZ1b2Z4NjAifQ.5S-VzSXpJkui8NDMlTU51Q",n(5,m=Ya(P,f,v,g,s,k,!v||!v.reloaded)),Pn.reset(),n(4,u=m.map)})),ue((()=>{T.endFocusMode(),n(4,u=void 0),n(5,m=void 0)})),e.$$set=e=>{"kmlOptions"in e&&n(0,g=e.kmlOptions),"ofp"in e&&n(1,v=e.ofp),"id"in e&&n(2,P=e.id)},e.$$.update=()=>{8&e.$$.dirty[0]&&n(15,o=!0===A||Array.isArray(A)&&0===A.length),8388608&e.$$.dirty[0]&&"/map"===r&&xe().then(gt)},[g,v,P,A,u,m,f,h,y,$,x,b,T,L,S,o,l,a,i,function(e){e.target.blur();const t=d(Pn);u&&u.remove(),Pn.set(!1),xt(f.id),n(5,m=Ya(P,f,v,g,s,k)),gt(),n(4,u=m.map),w(),setTimeout((async()=>{await xe,Pn.set(t)}),0)},function(e){e.target.blur(),gt(),C({detail:{value:s,name:"airport-change"}})},C,async e=>{if(L)return!1;n(13,L=!0),n(10,x=0);try{if(n(9,$=1),n(11,b=!1),await pt(4e3,fetch(`./manifest.json?dummy=${Date.now()}`,{cache:"no-store"})),"mercator"===f.id?(await(async()=>{const e=new li("lido-tiles");return e.clear("denizotjbv2_hd").finally((()=>e.close()))})(),n(3,A=await pi(v,m))):Array.isArray(A)||n(3,A=await pi(v,m)),n(9,$=A.length),await async function(e,t){const n=e;let o=0,s=0;const r=new AbortController,l=r.signal;return await new Promise(((e,a)=>{const i=setInterval((async()=>{if(0===n.filter((e=>e)).length&&(clearInterval(i),e()),o>=5||s>n.length-1)return;const c=s++,u=n[c];o++;try{await fetch(u,{signal:l}),t&&t()}catch(e){clearInterval(i),r.abort(),a(e)}o--,delete n[c]}),100)}))}(A,(()=>{x>=0&&n(10,x++,x)})),!(x>=$))throw new Error("incomplete download of the cache");n(8,y[f.id]=!0,y)}catch(e){n(11,b=!0),n(8,y[f.id]=!1,y)}finally{n(13,L=!1),n(10,x=-1),n(8,y),w()}},r,function(e){f=e,n(6,f)},function(e){h=e,n(7,h)},function(e){fe[e?"unshift":"push"]((()=>{T=e,n(12,T)}))},function(e){g=e,n(0,g)},function(t){pe.call(this,e,t)}]}class oc extends Ge{constructor(e){super(),We(this,e,nc,ec,a,{kmlOptions:0,ofp:1,id:2},null,[-1,-1])}}var sc=["bottom-right","bottom-center","bottom-left","top-right","top-center","top-left","right-bottom","right-center","right-top","left-bottom","left-center","left-top"];const rc="right",lc="left",ac="top",ic="bottom";function cc(){return"undefined"!=typeof window&&"undefined"!=typeof document}const uc=(e,{top:t,bottom:n,left:o,right:s,height:r,width:l,clientWidth:a,clientHeight:i})=>{const c=t>r,u=n+r<i,d=o>l,p=s+l<a;return{top:()=>!c&&u?ic:ac,bottom:()=>c&&!u?ac:ic,left:()=>!d&&p?rc:lc,right:()=>!p&&d?lc:rc}[e]()},dc=(e,{top:t,bottom:n,left:o,right:s,height:r,width:l,clientWidth:a,clientHeight:i})=>{const c=t+(n-t)/2,u=n>r,d=t+r<i,p=c-r/2>0&&c+r/2<i,m=s>l,f=o+l<a,h={top:()=>!u&&d?ic:ac,center:()=>p?"center":h.top(),bottom:()=>!d&&u?ac:ic,left:()=>!m&&f?rc:lc,right:()=>!f&&m?lc:rc};return h[e]()},{window:pc}=je,mc=e=>({isOpen:1024&e[0]}),fc=e=>({toggle:e[12],isOpen:e[10],open:e[13],close:e[14]}),hc=e=>({isOpen:1024&e[0]}),gc=e=>({toggle:e[12],isOpen:e[10],open:e[13],close:e[14]});function vc(e){let t,n,o;const s=e[26].content,r=m(s,e,e[25],fc);return{c(){t=I("div"),r&&r.c(),U(t,"class",n=x(`content ${e[4]||""}`)+" svelte-d6atc3")},m(n,s){O(n,t,s),r&&r.m(t,null),e[28](t),o=!0},p(e,l){r&&r.p&&(!o||33555456&l[0])&&g(r,s,e,e[25],o?h(s,e[25],l,mc):v(e[25]),fc),(!o||16&l[0]&&n!==(n=x(`content ${e[4]||""}`)+" svelte-d6atc3"))&&U(t,"class",n)},i(e){o||(qe(r,e),o=!0)},o(e){Ie(r,e),o=!1},d(n){n&&F(t),r&&r.d(n),e[28](null)}}}function yc(e){let t,n,o,s,l,a,i,c,u,d;const p=e[26].parent,f=m(p,e,e[25],gc);let y=e[10]&&vc(e);return{c(){t=I("div"),n=I("div"),f&&f.c(),o=z(),s=I("div"),y&&y.c(),U(n,"class","svelte-d6atc3"),U(s,"class","content-wrapper svelte-d6atc3"),U(s,"style",l=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`),U(t,"class",a=x(`overlay ${e[11]}`)+" svelte-d6atc3"),U(t,"style",i=`z-index:${e[0]}; ${e[1]}`)},m(r,l){O(r,t,l),S(t,n),f&&f.m(n,null),e[27](n),S(t,o),S(t,s),y&&y.m(s,null),e[29](t),c=!0,u||(d=[R(pc,"mousedown",e[15]),R(pc,"keydown",e[16])],u=!0)},p(e,n){f&&f.p&&(!c||33555456&n[0])&&g(f,p,e,e[25],c?h(p,e[25],n,hc):v(e[25]),gc),e[10]?y?(y.p(e,n),1024&n[0]&&qe(y,1)):(y=vc(e),y.c(),qe(y,1),y.m(s,null)):y&&(Oe(),Ie(y,1,1,(()=>{y=null})),Fe()),(!c||961&n[0]&&l!==(l=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`))&&U(s,"style",l),(!c||2048&n[0]&&a!==(a=x(`overlay ${e[11]}`)+" svelte-d6atc3"))&&U(t,"class",a),(!c||3&n[0]&&i!==(i=`z-index:${e[0]}; ${e[1]}`))&&U(t,"style",i)},i(e){c||(qe(f,e),qe(y),c=!0)},o(e){Ie(f,e),Ie(y),c=!1},d(n){n&&F(t),f&&f.d(n),e[27](null),y&&y.d(),e[29](null),u=!1,r(d)}}}function $c(e,t,o){let s,r,l,a;const i=["isOpen","updateOnScroll","closeOnScroll","position","closeOnClickOutside","zIndex","onWindowKeyDown","style"];let c=$(t,i),{$$slots:u={},$$scope:d}=t;const p=de(),m=sc[0];let f,h,g,{isOpen:v=!1}=t,{updateOnScroll:x=!1}=t,{closeOnScroll:b=!1}=t,{position:A=m}=t,{closeOnClickOutside:w=!1}=t,{zIndex:T=1}=t,{onWindowKeyDown:P=(()=>{})}=t,{style:k=""}=t,C=null,L=0,S=0,M=0,E=0;function O(){cc()&&(window.addEventListener("resize",z),b?window.addEventListener("scroll",N):x&&window.addEventListener("scroll",z))}function F(){cc()&&(window.removeEventListener("resize",z),window.removeEventListener("scroll",z),window.removeEventListener("scroll",N))}var q;function I(e){const t=v,n=!0===e||!1===e?e:!v;(n&&r&&l||!n)&&o(17,v=n),t!==v&&(p("toggle",v),v?(O(),p("open")):(p("close"),F()))}function D(){a||I(!0)}function N(){a&&I(!1)}function _(e){const t=e.path||e.composedPath();return t.includes(f)||t.includes(h)}async function z(){if(await xe(),!a)return;sc.includes(A)||o(18,A=m);const{top:e,bottom:t,left:n,right:s,width:r,height:l}=f.getBoundingClientRect(),{height:i,width:c}=h.getBoundingClientRect(),u=((e,t)=>{const n=Math.min(document.body.clientHeight,document.documentElement.clientHeight),o=Math.min(document.body.clientWidth,document.documentElement.clientWidth);Object.assign(t,{clientWidth:o,clientHeight:n});const[s,r]=e.split("-");return`${uc(s,t)}-${dc(r,t)}`})(A,{top:e,bottom:t,left:n,right:s,height:i,width:c});C!==u&&o(4,C=u),o(6,L=e),o(7,S=n),o(8,M=r),o(9,E=l)}return ce((()=>{a&&O()})),ue((()=>{cc()&&F()})),q=z,ie().$$.before_update.push(q),e.$$set=e=>{t=n(n({},t),y(e)),o(36,c=$(t,i)),"isOpen"in e&&o(17,v=e.isOpen),"updateOnScroll"in e&&o(19,x=e.updateOnScroll),"closeOnScroll"in e&&o(20,b=e.closeOnScroll),"position"in e&&o(18,A=e.position),"closeOnClickOutside"in e&&o(21,w=e.closeOnClickOutside),"zIndex"in e&&o(0,T=e.zIndex),"onWindowKeyDown"in e&&o(22,P=e.onWindowKeyDown),"style"in e&&o(1,k=e.style),"$$scope"in e&&o(25,d=e.$$scope)},e.$$.update=()=>{if(o(11,s=c.class||""),4&e.$$.dirty[0]&&o(24,r=!f||!!f.childNodes.length),8&e.$$.dirty[0]&&o(23,l=!h||!!h.childNodes.length),16777216&e.$$.dirty[0]&&!r)throw new Error("parent slot is required");if(8388608&e.$$.dirty[0]&&!l)throw new Error("content slot is required");25296896&e.$$.dirty[0]&&o(10,a=v&&r&&l)},[T,k,f,h,C,g,L,S,M,E,a,s,I,D,N,function(e){w&&a&&!_(e)&&N()},function(e){P&&a&&P(e,{isOpen:a,open:D,close:N,toggle:I,contains:_})},v,A,x,b,w,P,l,r,d,u,function(e){fe[e?"unshift":"push"]((()=>{f=e,o(2,f)}))},function(e){fe[e?"unshift":"push"]((()=>{h=e,o(3,h)}))},function(e){fe[e?"unshift":"push"]((()=>{g=e,o(5,g)}))}]}class xc extends Ge{constructor(e){super(),We(this,e,$c,yc,a,{isOpen:17,updateOnScroll:19,closeOnScroll:20,position:18,closeOnClickOutside:21,zIndex:0,onWindowKeyDown:22,style:1},null,[-1,-1])}}function bc(e){let t,n;return t=new xc({props:{position:"bottom-center",$$slots:{content:[Sc,({close:e})=>({11:e}),({close:e})=>e?2048:0],parent:[wc,({toggle:e})=>({12:e}),({toggle:e})=>e?4096:0]},$$scope:{ctx:e}}}),t.$on("close",gt),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};14380&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Ac(e){let t,n,o,s,a,i,c,u,d,p,m=e[1]&&Mc();return c=new xc({props:{position:"bottom-center",style:"margin-right: 0 !important;",isOpen:e[0],$$slots:{content:[Oc,({close:e})=>({11:e}),({close:e})=>e?2048:0],parent:[Ec]},$$scope:{ctx:e}}}),{c(){t=I("div"),n=D("svg"),o=D("circle"),s=z(),m&&m.c(),i=z(),Be(c.$$.fragment),U(o,"cx","50"),U(o,"cy","50"),U(o,"r","50"),U(n,"id","gt-plane"),U(n,"viewBox","0 0 100 100"),U(n,"xmlns","http://www.w3.org/2000/svg"),U(n,"class","svelte-js6g0z"),U(t,"class","gramet-thumbnail svelte-js6g0z"),ee(t,"open",e[1])},m(r,l){O(r,t,l),S(t,n),S(n,o),S(t,s),m&&m.m(t,null),O(r,i,l),He(c,r,l),u=!0,d||(p=[A(a=Ni.call(null,t,{ofp:e[2],pos:e[4].gramet,fl:e[4].fl})),R(t,"click",e[6])],d=!0)},p(e,n){e[1]?m||(m=Mc(),m.c(),m.m(t,null)):m&&(m.d(1),m=null),a&&l(a.update)&&20&n&&a.update.call(null,{ofp:e[2],pos:e[4].gramet,fl:e[4].fl}),(!u||2&n)&&ee(t,"open",e[1]);const o={};1&n&&(o.isOpen=e[0]),10240&n&&(o.$$scope={dirty:n,ctx:e}),c.$set(o)},i(e){u||(qe(c.$$.fragment,e),u=!0)},o(e){Ie(c.$$.fragment,e),u=!1},d(e){e&&F(t),m&&m.d(),e&&F(i),Qe(c,e),d=!1,r(p)}}}function wc(e){let t,n,o;return{c(){t=I("button"),t.innerHTML='<svg class="gramet-error svelte-js6g0z"><use xlink:href="#info-symbol"></use></svg>',U(t,"slot","parent"),U(t,"class","btn btn-light svelte-js6g0z")},m(s,r){O(s,t,r),n||(o=R(t,"click",(function(){l(e[12])&&e[12].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&F(t),n=!1,o()}}}function Tc(e){let t;return{c(){t=N("ogimet")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Pc(e){let t,n,o,s=0!==e[5].status&&Lc(e);return{c(){t=I("p"),t.textContent="A certaines heures le site ogimet est saturé, il faut essayer 2 ou 3 fois en temporisant de 30 secondes à chaque essai.",n=z(),s&&s.c(),o=j()},m(e,r){O(e,t,r),O(e,n,r),s&&s.m(e,r),O(e,o,r)},p(e,t){0!==e[5].status?s?s.p(e,t):(s=Lc(e),s.c(),s.m(o.parentNode,o)):s&&(s.d(1),s=null)},d(e){e&&F(t),e&&F(n),s&&s.d(e),e&&F(o)}}}function kc(t){let n;return{c(){n=I("p"),n.textContent="Le serveur ogimet indique qu'il est indisponible (no grib data). Sa mise à jour débute normalement à 00:00z et peut durer jusqu'à 05:00z..."},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Cc(e){let t,n,o,s,r,l=e[5].text+"";return{c(){t=I("p"),n=N('Erreur construction route GRAMET: Station "'),o=I("code"),s=N(l),r=N("\" non reconnue par ogimet,\n                    merci de me remonter l'information pour que je corrige l'application. Inutile de réessayer.")},m(e,l){O(e,t,l),S(t,n),S(t,o),S(o,s),S(t,r)},p(e,t){32&t&&l!==(l=e[5].text+"")&&W(s,l)},d(e){e&&F(t)}}}function Lc(e){let t,n,o,s,r=(e[5].text||e[5].status)+"";return{c(){t=I("p"),n=N("Pour information, le proxy a retourné: "),o=I("code"),s=N(r)},m(e,r){O(e,t,r),S(t,n),S(t,o),S(o,s)},p(e,t){32&t&&r!==(r=(e[5].text||e[5].status)+"")&&W(s,r)},d(e){e&&F(t)}}}function Sc(e){let t,n,o,s,a,i,c,u,d,p,m,f,h,g,v,y,$;function x(e,t){return 409===e[5].status?Cc:"no grib data"===e[5].text?kc:Pc}f=new Ur({props:{href:e[2].ogimetData.url,target:"_blank",$$slots:{default:[Tc]},$$scope:{ctx:e}}});let b=x(e),A=b(e);return{c(){t=I("div"),n=I("div"),o=I("div"),s=I("span"),s.textContent="😱: Erreur de récupération du Gramet",a=z(),i=I("button"),c=z(),u=I("div"),d=I("p"),p=I("a"),p.textContent="essayez à nouveau",m=N(" ou allez sur "),Be(f.$$.fragment),h=N("."),g=z(),A.c(),U(i,"type","button"),U(i,"class","btn-close ms-auto"),U(i,"aria-label","Close"),U(o,"class","card-header"),U(p,"href","."),U(u,"class","card-body"),U(n,"class","card"),Z(n,"position","absolute"),U(t,"slot","content"),Z(t,"width","350px")},m(r,x){O(r,t,x),S(t,n),S(n,o),S(o,s),S(o,a),S(o,i),S(n,c),S(n,u),S(u,d),S(d,p),S(d,m),He(f,d,null),S(d,h),S(u,g),A.m(u,null),v=!0,y||($=[R(i,"click",(function(){l(e[11])&&e[11].apply(this,arguments)})),R(p,"click",V(e[9]))],y=!0)},p(t,n){e=t;const o={};4&n&&(o.href=e[2].ogimetData.url),8192&n&&(o.$$scope={dirty:n,ctx:e}),f.$set(o),b===(b=x(e))&&A?A.p(e,n):(A.d(1),A=b(e),A&&(A.c(),A.m(u,null)))},i(e){v||(qe(f.$$.fragment,e),v=!0)},o(e){Ie(f.$$.fragment,e),v=!1},d(e){e&&F(t),Qe(f),A.d(),y=!1,r($)}}}function Mc(e){let t,n;return{c(){t=D("svg"),n=D("use"),H(n,"xlink:href","#close-symbol"),U(t,"class","gramet-close svelte-js6g0z")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&F(t)}}}function Ec(t){let n;return{c(){n=I("div"),U(n,"slot","parent"),U(n,"class","d-none")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Oc(e){let t,n,o,s,a,i,c,u,d,p,m,f;return{c(){t=I("div"),n=I("div"),o=I("div"),s=I("span"),s.textContent="Nouveau GRAMET disponible",a=z(),i=I("button"),c=z(),u=I("div"),d=I("p"),p=I("button"),p.textContent="Mettre à jour",U(i,"type","button"),U(i,"class","btn-close ms-auto"),U(i,"aria-label","Close"),U(o,"class","card-header"),U(p,"class","btn btn-primary"),U(d,"class","text-center mt-3"),U(u,"class","card-body"),U(n,"class","card"),Z(n,"left","calc(-1rem - 35px)"),Z(n,"max-width","290px"),Z(n,"top","20px"),U(t,"slot","content"),Z(t,"width","290px")},m(r,h){O(r,t,h),S(t,n),S(n,o),S(o,s),S(o,a),S(o,i),S(n,c),S(n,u),S(u,d),S(d,p),m||(f=[R(i,"click",(function(){l(e[11])&&e[11].apply(this,arguments)})),R(p,"click",e[7])],m=!0)},p(t,n){e=t},d(e){e&&F(t),m=!1,r(f)}}}function Fc(e){let t,n,o,s,r,l;const a=[Ac,bc],i=[];function c(e,t){return"error"!==e[3]?0:1}return t=c(e),n=i[t]=a[t](e),{c(){n.c(),o=j()},m(n,a){i[t].m(n,a),O(n,o,a),s=!0,r||(l=R(window,"orientationchange",e[8]),r=!0)},p(e,[s]){let r=t;t=c(e),t===r?i[t].p(e,s):(Oe(),Ie(i[r],1,1,(()=>{i[r]=null})),Fe(),n=i[t],n?n.p(e,s):(n=i[t]=a[t](e),n.c()),qe(n,1),n.m(o.parentNode,o))},i(e){s||(qe(n),s=!0)},o(e){Ie(n),s=!1},d(e){i[t].d(e),e&&F(o),r=!1,l()}}}function qc(e,t,n){let o,s,r,l,a;p(e,Tn,(e=>n(1,o=e))),p(e,Ln,(e=>n(2,s=e))),p(e,Ii,(e=>n(3,r=e))),p(e,Vn,(e=>n(4,l=e))),p(e,Di,(e=>n(5,a=e)));let i=!1;const c=()=>{b(Ii,r="reload",r),b(Tn,o=!1,o),n(0,i=!1),xe().then((()=>{"reload"===r&&b(Ii,r="loading",r)})),gt()},u=async e=>{if("workbox-broadcast-update"===e.data.meta&&"CACHE_UPDATED"===e.data.type){const{updatedURL:t}=e.data.payload;t===s.ogimetData.proxyImg&&(o?n(0,i=!0):c())}};navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",u),ue((()=>{navigator&&navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",u)}));return[i,o,s,r,l,a,()=>{"success"===r&&b(Tn,o=!o,o),o||gt()},c,e=>{document&&"visible"===document.visibilityState&&c()},()=>b(Ii,r="loading",r)]}class Ic extends Ge{constructor(e){super(),We(this,e,qc,Fc,a,{})}}var Dc={"OFP2MAP-AURORA":{version:3,url:"https://www.icloud.com/shortcuts/0da61ab87f40469db1842622b4d951ff",description:"NOAA Aurora Forecast 30-90mn et prévisions à 3 jours. Ce plugin affiche la prévision à court terme sur une carte, et une prévision à long terme (source différente de celle de l'app). Il permet de valider les prévisions de Kp affichées dans les éphémérides."},"OFP2MAP-ETOPS":{version:8,url:"https://www.icloud.com/shortcuts/a6b08496789943608ea28c15e359b64d",description:"Affiche un cartouche ETOPS actualisé. Il est recommandé de ne plus utiliser ce plugin, Pilot Mission/FlightLog/ETOPS fait la même chose."},"OFP2MAP-FAA WIPs":{version:3,url:"https://www.icloud.com/shortcuts/7e37cedd78d944bf8ceffb7477e356ec",description:"Affiche la carte des travaux sol sur les terrains US - NE FONCTIONNE PLUS -"},"OFP2MAP-FTL":{version:13,url:"https://www.icloud.com/shortcuts/eda9cdcdfcf241d0a4bbf976cc27d47f",description:"Calcul en réalisation des limitations TSV (AF & FTL) et des repos PNC"},"OFP2MAP-MENU":{version:3,url:"https://www.icloud.com/shortcuts/ee982ff186cb4e34854e47b961397451",description:"Menu affichant l'ensemble des plugins installés, utile pour un accès rapide."},"OFP2MAP-PLANE FINDER":{version:3,url:"https://www.icloud.com/shortcuts/c3f12a087f7247ec8693af535a1c098b",description:"Recherche l'avion avec flightaware.com."},"OFP2MAP-PLUGIN":{version:4,url:"https://www.icloud.com/shortcuts/21d47d9f925b45d8a40bfd81e237ab2f",description:"Modèle à dupliquer pour coder un plugin, permet de visualiser les données disponibles."}};function Nc(e){let t,n,o,s,r,l,a=e[5].infos.minFuelMarginETOPS.toFixed(1)+"";return{c(){t=I("p"),n=N("Marge ETOPS: "),o=N(a),s=N(" T"),r=z(),l=I("hr"),U(t,"class","svelte-c7hyki"),U(l,"class","svelte-c7hyki")},m(e,a){O(e,t,a),S(t,n),S(t,o),S(t,s),O(e,r,a),O(e,l,a)},p(e,t){32&t&&a!==(a=e[5].infos.minFuelMarginETOPS.toFixed(1)+"")&&W(o,a)},d(e){e&&F(t),e&&F(r),e&&F(l)}}}function _c(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v=e[5].infos.flightNo+"",y=e[5].infos.depICAO+"",$=e[5].infos.destICAO+"",x=e[5].infos.ofpTextDate+"",b=e[5].infos.ofp.includes("/")?"":"ofp: ",A=e[5].infos.ofp+"",w=e[5].infos.ralts.length>0&&zc(e);return{c(){t=I("p"),n=I("b"),o=N(v),s=z(),r=N(y),l=N("-"),a=N($),i=z(),c=I("p"),u=N(x),d=z(),p=N(b),m=N(A),f=z(),w&&w.c(),h=z(),g=I("hr"),Z(t,"line-height","normal"),Z(t,"margin-top","0.5em"),U(t,"class","svelte-c7hyki"),Z(c,"line-height","normal"),U(c,"class","svelte-c7hyki"),U(g,"class","svelte-c7hyki")},m(e,v){O(e,t,v),S(t,n),S(n,o),S(t,s),S(t,r),S(t,l),S(t,a),O(e,i,v),O(e,c,v),S(c,u),S(c,d),S(c,p),S(c,m),O(e,f,v),w&&w.m(e,v),O(e,h,v),O(e,g,v)},p(e,t){32&t&&v!==(v=e[5].infos.flightNo+"")&&W(o,v),32&t&&y!==(y=e[5].infos.depICAO+"")&&W(r,y),32&t&&$!==($=e[5].infos.destICAO+"")&&W(a,$),32&t&&x!==(x=e[5].infos.ofpTextDate+"")&&W(u,x),32&t&&b!==(b=e[5].infos.ofp.includes("/")?"":"ofp: ")&&W(p,b),32&t&&A!==(A=e[5].infos.ofp+"")&&W(m,A),e[5].infos.ralts.length>0?w?w.p(e,t):(w=zc(e),w.c(),w.m(h.parentNode,h)):w&&(w.d(1),w=null)},d(e){e&&F(t),e&&F(i),e&&F(c),e&&F(f),w&&w.d(e),e&&F(h),e&&F(g)}}}function zc(e){let t,n,o,s,r=e[5].infos.minFuelMarginETOPS.toFixed(1)+"";return{c(){t=I("p"),n=N("Marge ETOPS: "),o=N(r),s=N(" T"),U(t,"class","svelte-c7hyki")},m(e,r){O(e,t,r),S(t,n),S(t,o),S(t,s)},p(e,t){32&t&&r!==(r=e[5].infos.minFuelMarginETOPS.toFixed(1)+"")&&W(o,r)},d(e){e&&F(t)}}}function jc(t){let n,o,s,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,A,w,T,P,k,C,L,M,E,q,D,_,j,B,H,Q,W;function G(e,t){return e[1]?_c:e[5].infos.ralts.length>0?Nc:void 0}let Z=G(t),K=Z&&Z(t),J=navigator&&navigator.share&&function(t){let n,o,s,r,l,a;return{c(){n=I("hr"),o=z(),s=I("li"),r=I("a"),r.innerHTML='<span class="icon svelte-c7hyki">🧩</span>Plugins',U(n,"class","svelte-c7hyki"),U(r,"class","text-reset text-decoration-none svelte-c7hyki"),U(r,"href","#top"),U(s,"class","svelte-c7hyki")},m(e,i){O(e,n,i),O(e,o,i),O(e,s,i),S(s,r),l||(a=R(r,"click",V(t[2])),l=!0)},p:e,d(e){e&&F(n),e&&F(o),e&&F(s),l=!1,a()}}}(t);return{c(){n=I("menu"),K&&K.c(),o=z(),s=I("li"),a=I("a"),i=I("span"),i.innerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAACEUExURf////zW1/FJUPBAR/BCSe87QvaKjv74+PFRV+0cJO4uNf3g4faMkPm2ufvKy+0iKvR3fP7z8/BES/BARv7w8PV8ge0gKPrFx/q7vu0eJvaIjP3r7O84P/FNU/739//7+/Nma+4rM/zU1v7x8fNsce4oL/rAwvm5u+8zOu85QPA/RfNobS/40rMAAAABYktHRACIBR1IAAAAB3RJTUUH6AIWDTAjTIi8vgAAAGBJREFUGNONz0cSgCAQRFFUDBgwZ1TM6f73s5xiNq78u9e7JuR3mm5QSk0LbTvszfVw8MEsQPMQHKHjBJxmOOTgokRXNQwNuhXgrlceJHiclOcFvG7KuzzEKa6b/z/17QGm3AW2JvXFcgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyNC0wMi0yMlQxMzo0ODozNSswMDowMChp0C0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjQtMDItMjJUMTM6NDg6MzUrMDA6MDBZNGiRAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDI0LTAyLTIyVDEzOjQ4OjM1KzAwOjAwDiFJTgAAAABJRU5ErkJggg==" alt="af icon"/> \n        ',c=N("AF flight status"),d=z(),p=I("li"),m=I("a"),f=I("span"),f.innerHTML='<img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAgICAgJCAkKCgkNDgwODRMREBARExwUFhQWFBwrGx8bGx8bKyYuJSMlLiZENS8vNUROQj5CTl9VVV93cXecnNEBCAgICAkICQoKCQ0ODA4NExEQEBETHBQWFBYUHCsbHxsbHxsrJi4lIyUuJkQ1Ly81RE5CPkJOX1VVX3dxd5yc0f/CABEIABQAFAMBIgACEQEDEQH/xAAwAAEAAgMAAAAAAAAAAAAAAAAAAgYDBQcBAAIDAQAAAAAAAAAAAAAAAAABAgMEBf/aAAwDAQACEAMQAAAA4ntoWnpZqOLYYg0Af//EACcQAAMAAgEBBgcAAAAAAAAAAAECAwQRAAUSExQhIjEWICMyQXFy/9oACAEBAAE/AACeDo2XTpkuowU2ibtB+wpJnT3UH+wdg8vC2PVpWk86LraupRhvz8w2jxr4OMGTGj3r/UXxFdj3+1pzB9BX8Ek8+OM89L61BH8M+VkQeK4yiIQKxanqTR23LXtej1rV3djtmZizH9k/J//EABwRAAEDBQAAAAAAAAAAAAAAAAIAAREDEBIhMf/aAAgBAgEBPwAyqaxFNMNPb//EABkRAQACAwAAAAAAAAAAAAAAAAEAAhARQf/aAAgBAwEBPwAKdY6z/9k=" alt="FlightAware logo"/> \n        ',h=N("FlightAware"),v=z(),y=I("li"),$=I("a"),$.innerHTML='<span class="icon svelte-c7hyki"><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAgICAgJCAkKCgkNDgwODRMREBARExwUFhQWFBwrGx8bGx8bKyYuJSMlLiZENS8vNUROQj5CTl9VVV93cXecnNEBCAgICAkICQoKCQ0ODA4NExEQEBETHBQWFBYUHCsbHxsbHxsrJi4lIyUuJkQ1Ly81RE5CPkJOX1VVX3dxd5yc0f/CABEIABQAFAMBIgACEQEDEQH/xAAuAAEAAwEBAAAAAAAAAAAAAAAABAUGBwMBAQEBAQAAAAAAAAAAAAAAAAUBAAP/2gAMAwEAAhADEAAAAOJ2/nqO4HO05k7OeUnJCu//xAAjEAACAQMDBAMAAAAAAAAAAAABAgMABAURE1ESITFCQ5Gx/9oACAEBAAE/ALeDdYatoOanUx4+SARA/I0vKr20X7810msRbRzShZG0H4OTWZgePHLbxKdl+mRW5FbZHYLVoAkQUe+oas1dTyT3DM5IQKqL6qAop2ZmJJr/xAAaEQACAgMAAAAAAAAAAAAAAAAAARAxESFx/9oACAECAQE/AMUaHa5H/8QAHhEBAAEDBQEAAAAAAAAAAAAAAQQAAgMQEyFRUrL/2gAIAQMBAT8Alyy2Zhwvseit4q8GeKDxd9Gn/9k=" alt="Aurora icon"/> \n        </span>Space Weather',x=z(),b=I("li"),A=I("a"),w=I("span"),w.innerHTML='<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAU9JREFUOE+llL1SwkAQx3dBtLKysbGUMDa+gW8iJngZCi3ofAcrCp1x4EiY+Ci+gYVDgqWFjZWVDuaci1y8LHdJgJS53d/+9xNhza/TvTuYRdcfNjdck5ebO+54EE/9IfXfGChBbY+LJGQFhhHouLwnECYm9RRAoStAaVBVBgo9ce8PX6ZX79KvAKwDU8F0qK4yB5pg1IkqV+9tbyLSZnr0yv03K5CmpWB6YJPKDEjV2WDStuNHIl1852L/Vf51fAVYBitTqeq4FVAgpPOANfWZ3AqopyuhxpQBcZQEl33bLJqaov6ZgctIWRo9/pkEbL+qdkpdYbBJp2XHGqYJEAC385DdyDfHfxRi8ZXFU+nXHmxaAts81l29pyRkZ8ce7yPAgw7HnV2Ix92cs9FxUMBGaw9mo/Pq8yV3E6D86NgWoPLA6rXCn9ZpHF08l523X54wxBWFLBNqAAAAAElFTkSuQmCC" alt="turbli icon"/> \n        ',T=N("turbli"),k=z(),C=I("li"),L=I("a"),M=I("span"),M.innerHTML='<img src="data:image/webp;base64,UklGRrYBAABXRUJQVlA4WAoAAAAQAAAAEwAAEwAAQUxQSKgAAAABgFhbmyHpq6mZ6GwzGDsSKxKvFYHxb33rqhAiQoHbNsqYd/ALQGl4MqPTh/uLaU5BKwBKIbLjH9wEAfXDLVLEkEaE7APKixpF+AflnUNo+CmG/6B5ZxyeHYX/ovDEV7QxKazM7fDB1RWNDQxvH+mAr25w6eLczVxK1gWXQVW9d3krhPluf1ONlu3tB9D2Pxr8+Tj/P395jP/w7z/Pzy4eHq7mJR+0AgBWUDgg6AAAAPAFAJ0BKhQAFAA+kTyYSCWjIqEoDVCwEglAFiPQj4E6AD0n0AA0kadkh0koZp4NXExH+CklnjoAAP7gq+JXrKdjT96/tOz+imG5vSZevgyNxp0KBpLfrdDfYoXFlMv8zMQnVXfGP0a7YZ1lxT2FfzM4F6oILrVSzf0O592fHJvo8Hc5vo7xmnlWAQOrkQOGiecTWQ12Yc1A3V9SKheYNK4Ofh+l3cqYVcUhYNuUHteS5t/S+5PuXxqnJLWGpRe9W/9WkINrcV4j+A9jocr6ljFPAiM8u3IH+6TtHgNomYm3AaiuesAAAAA=" alt="pièce 1 euro"/>',E=z(),q=I("span"),D=I("span"),D.textContent="Pile",_=z(),j=I("span"),j.textContent="Face",H=z(),J&&J.c(),U(i,"class","icon svelte-c7hyki"),U(a,"class","text-reset text-decoration-none svelte-c7hyki"),U(a,"href",u=t[3](t[5].infos.flightNo,t[5].infos.depIATA,t[5].infos.ofpOUT.toISOString())),U(a,"target","_blank"),U(s,"class","svelte-c7hyki"),U(f,"class","icon svelte-c7hyki"),U(m,"class","text-reset text-decoration-none svelte-c7hyki"),U(m,"href",g="https://fr.flightaware.com/live/flight/"+t[5].infos.aircraftRegistration.replace("-","")),U(m,"target","_blank"),U(p,"class","svelte-c7hyki"),U($,"class","text-reset text-decoration-none svelte-c7hyki"),U($,"href","https://ofp2map-plugins.netlify.app/aurora.html"),U($,"target","_blank"),U(y,"class","svelte-c7hyki"),U(w,"class","icon svelte-c7hyki"),U(A,"class","text-reset text-decoration-none svelte-c7hyki"),U(A,"href",P="https://turbli.com/"+t[5].infos.depIATA+"/"+t[5].infos.destIATA+"/"+t[5].infos.ofpOUT.toISOString().split("T")[0]+"/"+t[5].infos.flightNo.replace(/([A-Z]+)(0*)([1-9]\d*)/,"$1-$3")),U(A,"target","_blank"),U(b,"class","svelte-c7hyki"),U(M,"class","icon svelte-c7hyki"),U(D,"class","side head svelte-c7hyki"),U(j,"class","side tail svelte-c7hyki"),U(q,"class",B="coin "+t[4]+" svelte-c7hyki"),U(L,"class","text-reset text-decoration-none svelte-c7hyki"),U(L,"href","https://ofp2map-plugins.netlify.app/pile-ou-face/index.html"),U(L,"target","_blank"),U(C,"class","svelte-c7hyki"),U(n,"class","svelte-c7hyki")},m(e,r){O(e,n,r),K&&K.m(n,null),S(n,o),S(n,s),S(s,a),S(a,i),S(a,c),S(n,d),S(n,p),S(p,m),S(m,f),S(m,h),S(n,v),S(n,y),S(y,$),S(n,x),S(n,b),S(b,A),S(A,w),S(A,T),S(n,k),S(n,C),S(C,L),S(L,M),S(L,E),S(L,q),S(q,D),S(q,_),S(q,j),S(n,H),J&&J.m(n,null),Q||(W=[R(a,"click",(function(){l(t[0])&&t[0].apply(this,arguments)})),R(m,"click",(function(){l(t[0])&&t[0].apply(this,arguments)})),R($,"click",(function(){l(t[0])&&t[0].apply(this,arguments)})),R(A,"click",(function(){l(t[0])&&t[0].apply(this,arguments)})),R(L,"click",(function(){l(t[0])&&t[0].apply(this,arguments)}))],Q=!0)},p(e,[s]){Z===(Z=G(t=e))&&K?K.p(t,s):(K&&K.d(1),K=Z&&Z(t),K&&(K.c(),K.m(n,o))),32&s&&u!==(u=t[3](t[5].infos.flightNo,t[5].infos.depIATA,t[5].infos.ofpOUT.toISOString()))&&U(a,"href",u),32&s&&g!==(g="https://fr.flightaware.com/live/flight/"+t[5].infos.aircraftRegistration.replace("-",""))&&U(m,"href",g),32&s&&P!==(P="https://turbli.com/"+t[5].infos.depIATA+"/"+t[5].infos.destIATA+"/"+t[5].infos.ofpOUT.toISOString().split("T")[0]+"/"+t[5].infos.flightNo.replace(/([A-Z]+)(0*)([1-9]\d*)/,"$1-$3"))&&U(A,"href",P),16&s&&B!==(B="coin "+t[4]+" svelte-c7hyki")&&U(q,"class",B),navigator&&navigator.share&&J.p(t,s)},i:e,o:e,d(e){e&&F(n),K&&K.d(),J&&J.d(),Q=!1,r(W)}}}const Rc=e=>e.timeMatrix.length>0?e.timeMatrix.map((([e,t,n])=>({name:e.name,tte:t,fl:n,latitude:e.latitude.toFixed(6),longitude:e.longitude.toFixed(6)}))):e.route.points.map((e=>({name:e.name,latitude:e.latitude.toFixed(6),longitude:e.longitude.toFixed(6)})));function Vc(e,t,n){let o,s,r;p(e,Mn,(e=>n(6,s=e))),p(e,Ln,(e=>n(5,r=e)));let{close:l}=t,{addInfos:a=!1}=t;return e.$$set=e=>{"close"in e&&n(0,l=e.close),"addInfos"in e&&n(1,a=e.addInfos)},n(4,o=Math.random()<.5?"flipHead":"flipTail"),[l,a,async e=>{if(!navigator||!navigator.share)return e.preventDefault(),!1;const t=e.target.closest("a")||e.target;t.classList.add("animate");const n=r,o=s,l=["EEP","EXP","raltPoints","inFlightStart","inFlightReleased","levels","rawFPL"],a=Object.fromEntries(Object.entries(n.infos).filter((([e,t])=>!l.includes(e))));let i;try{i=(n.text.match(/^(?:.+?)Main OFP(?:.+?)(?:--ROUTE\/FL)/s).pop()||"")+"\n\n"+n.infos.rawFPL}catch(e){i=n.text}const c={title:"OFP2MAP",text:JSON.stringify({...a,lidoFPL:n.lidoRoute(!1).join(" "),realOFF:o,altnETOPS:n.infos.ralts,route:Rc(n),plugins:Dc,rawText:i})};try{await navigator.share(c)}catch(e){t.classList.remove("animate")}return!1},(e,t,n)=>{try{const o=new Date(n),s=parseFloat(editolido.tzOffset(t,n));return`https://wwws.airfrance.fr/flight-status/flight-list?date=${new Date(o.getTime()+36e5*s).toISOString().split("T")[0].replace(/-/g,"")}&flightNumber=${e}`}catch(e){return"https://wwws.airfrance.fr/flight-status"}},o,r]}class Uc extends Ge{constructor(e){super(),We(this,e,Vc,jc,a,{close:0,addInfos:1,shareOFP:2,afURL:3})}get shareOFP(){return this.$$.ctx[2]}get afURL(){return this.$$.ctx[3]}}function Bc(e){let t;return{c(){t=I("p"),t.textContent="ETOPS",U(t,"class","etops svelte-odxu0u")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Hc(e){let t,n,o,s,r,a,i,c,u,d,p,m,f,h,g,v,y,$,x=e[0].infos.flightNo+"",b=e[0].infos.depICAO+"",A=e[0].infos.destICAO+"",w=e[0].infos.ofpTextDate+"",T=e[0].infos.ofp.includes("/")?"":"ofp: ",P=e[0].infos.ofp+"";return{c(){t=I("a"),n=I("p"),o=I("b"),s=N(x),r=z(),a=N(b),i=N("-"),c=N(A),u=z(),d=I("p"),p=N(w),m=z(),f=N(T),h=N(P),g=z(),v=I("span"),v.textContent="🧩",U(n,"class","svelte-odxu0u"),U(v,"class","plugin svelte-odxu0u"),U(d,"class","svelte-odxu0u"),U(t,"href","#top"),U(t,"slot","parent"),U(t,"class","details cursor-pointer svelte-odxu0u")},m(x,b){O(x,t,b),S(t,n),S(n,o),S(o,s),S(n,r),S(n,a),S(n,i),S(n,c),S(t,u),S(t,d),S(d,p),S(d,m),S(d,f),S(d,h),S(d,g),S(d,v),y||($=R(t,"click",V((function(){l(e[3])&&e[3].apply(this,arguments)}))),y=!0)},p(t,n){e=t,1&n&&x!==(x=e[0].infos.flightNo+"")&&W(s,x),1&n&&b!==(b=e[0].infos.depICAO+"")&&W(a,b),1&n&&A!==(A=e[0].infos.destICAO+"")&&W(c,A),1&n&&w!==(w=e[0].infos.ofpTextDate+"")&&W(p,w),1&n&&T!==(T=e[0].infos.ofp.includes("/")?"":"ofp: ")&&W(f,T),1&n&&P!==(P=e[0].infos.ofp+"")&&W(h,P)},d(e){e&&F(t),y=!1,$()}}}function Qc(e){let t,n,o,s;return n=new Uc({props:{close:e[2]}}),{c(){t=I("div"),Be(n.$$.fragment),U(t,"slot","content"),Z(t,"cursor","pointer"),Z(t,"width","190px"),U(t,"class","menu")},m(e,o){O(e,t,o),He(n,t,null),s=!0},p(e,t){const o={};4&t&&(o.close=e[2]),n.$set(o)},i(e){s||(qe(n.$$.fragment,e),o||be((()=>{o=Ne(t,Pt,{duration:200}),o.start()})),s=!0)},o(e){Ie(n.$$.fragment,e),s=!1},d(e){e&&F(t),Qe(n)}}}function Wc(e){let t;return{c(){t=I("p"),t.textContent="ETOPS",U(t,"class","etops svelte-odxu0u")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Gc(e){let t,n,o;return{c(){t=I("a"),t.innerHTML='<span class="plugin svelte-odxu0u">🧩</span>',U(t,"slot","parent"),U(t,"class","details cursor-pointer svelte-odxu0u"),U(t,"href","#top")},m(s,r){O(s,t,r),n||(o=R(t,"click",V((function(){l(e[3])&&e[3].apply(this,arguments)}))),n=!0)},p(t,n){e=t},d(e){e&&F(t),n=!1,o()}}}function Zc(e){let t,n,o,s;return n=new Uc({props:{close:e[2],addInfos:"true"}}),{c(){t=I("div"),Be(n.$$.fragment),U(t,"slot","content"),Z(t,"cursor","pointer"),Z(t,"width","190px"),Z(t,"translate","-50%"),U(t,"class","menu")},m(e,o){O(e,t,o),He(n,t,null),s=!0},p(e,t){const o={};4&t&&(o.close=e[2]),n.$set(o)},i(e){s||(qe(n.$$.fragment,e),o||be((()=>{o=Ne(t,Pt,{duration:200}),o.start()})),s=!0)},o(e){Ie(n.$$.fragment,e),s=!1},d(e){e&&F(t),Qe(n)}}}function Kc(e){let t,n,o,s,r,l,a,i,c=e[1]<20&&Bc();o=new xc({props:{position:"bottom-center",isOpen:!1,closeOnClickOutside:!0,$$slots:{content:[Qc,({close:e})=>({2:e}),({close:e})=>e?4:0],parent:[Hc,({toggle:e})=>({3:e}),({toggle:e})=>e?8:0]},$$scope:{ctx:e}}}),o.$on("close",gt);let u=e[1]<20&&Wc();return a=new xc({props:{position:"bottom-center",isOpen:!1,closeOnClickOutside:!0,$$slots:{content:[Zc,({close:e})=>({2:e}),({close:e})=>e?4:0],parent:[Gc,({toggle:e})=>({3:e}),({toggle:e})=>e?8:0]},$$scope:{ctx:e}}}),a.$on("close",gt),{c(){t=I("div"),c&&c.c(),n=z(),Be(o.$$.fragment),s=z(),r=I("div"),u&&u.c(),l=z(),Be(a.$$.fragment),U(t,"class","infos svelte-odxu0u"),U(r,"class","pluginonly svelte-odxu0u")},m(e,d){O(e,t,d),c&&c.m(t,null),S(t,n),He(o,t,null),O(e,s,d),O(e,r,d),u&&u.m(r,null),S(r,l),He(a,r,null),i=!0},p(e,[s]){e[1]<20?c||(c=Bc(),c.c(),c.m(t,n)):c&&(c.d(1),c=null);const i={};29&s&&(i.$$scope={dirty:s,ctx:e}),o.$set(i),e[1]<20?u||(u=Wc(),u.c(),u.m(r,l)):u&&(u.d(1),u=null);const d={};28&s&&(d.$$scope={dirty:s,ctx:e}),a.$set(d)},i(e){i||(qe(o.$$.fragment,e),qe(a.$$.fragment,e),i=!0)},o(e){Ie(o.$$.fragment,e),Ie(a.$$.fragment,e),i=!1},d(e){e&&F(t),c&&c.d(),Qe(o),e&&F(s),e&&F(r),u&&u.d(),Qe(a)}}}function Jc(e,t,n){let o,s;return p(e,Ln,(e=>n(0,s=e))),e.$$.update=()=>{1&e.$$.dirty&&n(1,o=s.infos.minFuelMarginETOPS/(s.infos.tripFuel/s.infos.flightTime))},[s,o]}class Xc extends Ge{constructor(e){super(),We(this,e,Jc,Kc,a,{})}}function Yc(e){let t,n,o,s,l,a,i,c,u,d,p,m,f;return{c(){t=I("div"),n=D("svg"),o=D("use"),s=z(),l=I("label"),a=N("Heure de décollage"),i=z(),c=I("input"),H(o,"xlink:href","#takeoff-symbol"),U(n,"class","svelte-i2189x"),ee(n,"show",e[2]||e[3]>=0),ee(n,"hide",!(e[2]||e[3]>=0)),U(l,"for",e[0]),U(l,"class","svelte-i2189x"),U(c,"id",e[0]),U(c,"name",e[0]),U(c,"type","time"),c.value=u=e[4](e[1].getUTCHours(),e[1].getUTCMinutes()),U(c,"tabindex",d=navigator.standalone?"-1":null),U(c,"class","svelte-i2189x"),U(t,"class","svelte-i2189x")},m(r,u){O(r,t,u),S(t,n),S(n,o),S(t,s),S(t,l),S(l,a),S(t,i),S(t,c),m||(f=[R(n,"click",e[5]),A(p=wo.call(null,c)),R(c,"change",e[6])],m=!0)},p(e,t){12&t&&ee(n,"show",e[2]||e[3]>=0),12&t&&ee(n,"hide",!(e[2]||e[3]>=0)),1&t&&U(l,"for",e[0]),1&t&&U(c,"id",e[0]),1&t&&U(c,"name",e[0]),2&t&&u!==(u=e[4](e[1].getUTCHours(),e[1].getUTCMinutes()))&&c.value!==u&&(c.value=u)},d(e){e&&F(t),m=!1,r(f)}}}function eu(t){let n,o=t[1]&&Yc(t);return{c(){o&&o.c(),n=j()},m(e,t){o&&o.m(e,t),O(e,n,t)},p(e,[t]){e[1]?o?o.p(e,t):(o=Yc(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(e){o&&o.d(e),e&&F(n)}}}function tu(e,t,n){let o,s,r,l,a;p(e,Ln,(e=>n(7,s=e))),p(e,Mn,(e=>n(1,r=e))),p(e,Pn,(e=>n(2,l=e))),p(e,Cn,(e=>n(3,a=e)));let{name:i="take-off"}=t;const c=(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return e.$$set=e=>{"name"in e&&n(0,i=e.name)},e.$$.update=()=>{128&e.$$.dirty&&(o=new Date(s.infos.ofpOFF.getTime()))},[i,r,l,a,c,()=>{b(Pn,l=!l,l),gt()},e=>{let t,n;""==e.target.value?(n=o.getUTCHours(),t=o.getUTCMinutes(),e.target.blur(),gt(),e.target.value=c(n,t)):(n=parseFloat(e.target.value.slice(0,2)),t=parseFloat(e.target.value.slice(3)));let l=new Date(o);l.setUTCMinutes(t),l.setUTCHours(n);const a=(l.getTime()-o.getTime())/6e4;a<-720?l=new Date(l.getTime()+864e5):a>720&&(l=new Date(l.getTime()-864e5)),b(Mn,r=l,r),$t(tt,l.getTime()+6e4*s.infos.flightTime+6e4*s.infos.taxiTimeIN),$t(ot,l.getTime()),l.toISOString()!==o.toISOString()?e.target.classList.add("changed"):e.target.classList.remove("changed")},s]}class nu extends Ge{constructor(e){super(),We(this,e,tu,eu,a,{name:0})}}function ou(t){let n,o,s;return{c(){n=I("button"),U(n,"class","reload btn btn-outline-secondary btn-sm svelte-kjth35")},m(e,r){O(e,n,r),o||(s=R(n,"click",t[0]),o=!0)},p:e,i:e,o:e,d(e){e&&F(n),o=!1,s()}}}function su(e){return[()=>{window.location.hash="#/",window.location.reload()}]}class ru extends Ge{constructor(e){super(),We(this,e,su,ou,a,{})}}function lu(t){let n,o,s;return{c(){n=I("button"),n.innerHTML='<svg class="svelte-nu4inh"><use xlink:href="#share-symbol"></use></svg>',U(n,"tabindex","0"),U(n,"class","share btn btn-outline-secondary btn-sm svelte-nu4inh")},m(e,t){O(e,n,t),o||(s=R(n,"click",ft),o=!0)},p:e,i:e,o:e,d(e){e&&F(n),o=!1,s()}}}class au extends Ge{constructor(e){super(),We(this,e,null,lu,a,{})}}const iu=Math.PI,cu=Math.sin,uu=Math.cos,du=Math.tan,pu=Math.asin,mu=Math.acos,fu=Math.atan2,hu=180/iu,gu=iu/180,vu=2451545,yu=e=>e.valueOf()/864e5-.5+2440588,$u=e=>(yu(e)-vu)/36525,xu=e=>((e,t)=>(e%t+t)%t)(280.46646+e*(36000.76983+3032e-7*e),360),bu=e=>357.52911+e*(35999.05029-1537e-7*e),Au=e=>xu(e)+(e=>{const t=gu*bu(e);return cu(t)*(1.914602-e*(.004817+14e-6*e))+cu(2*t)*(.019993-101e-6*e)+289e-6*cu(3*t)})(e),wu=e=>Au(e)-.00569-.00478*cu(gu*(125.04-1934.136*e)),Tu=e=>{const t=(e=>23+(26+(21.448-e*(46.815+e*(59e-5-.001813*e)))/60)/60)(e);return t+.00256*uu(gu*(125.04-1934.136*e))},Pu=e=>{const t=gu*Tu(e),n=gu*wu(e),o=cu(t)*cu(n);return pu(o)},ku=e=>{var t=gu*Tu(e),n=gu*wu(e),o=uu(t)*cu(n),s=uu(n);return fu(o,s)},Cu=(e,t)=>{const{longitude:n}=t,o=e.getUTCHours(),s=e.getUTCMinutes(),r=e.getUTCSeconds(),l=$u(e),a=(e=>{const t=(e=>.016708634-e*(42037e-9+1.267e-7*e))(e),n=gu*Tu(e),o=gu*xu(e),s=gu*bu(e),r=Math.pow(du(n/2),2),l=r*cu(2*o)-2*t*cu(s)+4*t*r*cu(s)*uu(2*o)-.5*r*r*cu(4*o)-1.25*t*t*cu(2*s);return hu*l*4})(l)+4*n,i=Pu(l);let c=(60*o+s+r/60+a)%1440/4-180;c<-180&&(c+=360);const u=t.latitude*gu;let d=cu(u)*cu(i)+uu(u)*uu(i)*uu(gu*c);d>1?d=1:d<-1&&(d=-1);const p=mu(d);return{elevation:90-hu*p}},Lu=[[-15,"night"],[-12,"astronomical twilight"],[-6,"nautical twilight"],[-.833,"civil twilight"]],Su=new Map([["night",([e,t])=>Eu(e,t)?"astronomicalDawn":"nightStart"],["astronomical twilight",([e,t])=>Eu(e,t)?"nauticalDawn":"astronomicalDusk"],["nautical twilight",([e,t])=>Eu(e,t)?"civilDawn":"nauticalDusk"],["civil twilight",([e,t])=>Eu(e,t)?"sunrise":"civilDusk"],["day",([e,t])=>Eu(e,t)?"dayStart":"sunset"]]),Mu=Array.from(Su.keys()),Eu=(e,t)=>Mu.indexOf(t)>=Mu.indexOf(e),Ou=(e,t,n=0)=>{const o=Cu(e,t).elevation,s=1.15*Math.sqrt(100*n)/60;for(const[e,t]of Lu)if(o<=e-s)return{state:t,elevation:o};return{state:"day",elevation:o}},Fu=e=>yu(e)-vu,qu=23.4397*gu,Iu=(e,t)=>fu(cu(e)*uu(qu)-du(t)*cu(qu),uu(e)),Du=(e,t)=>pu(cu(t)*uu(qu)+uu(t)*cu(qu)*cu(e)),Nu=e=>{const t=gu*(134.963+13.064993*e),n=gu*(93.272+13.22935*e),o=gu*(218.316+13.176396*e)+6.289*gu*cu(t),s=5.128*gu*cu(n),r=385001-20905*uu(t);return{ra:Iu(o,s),dec:Du(o,s),dist:r}},_u=e=>{const t=$u(e),n={dec:Pu(t),ra:ku(t)},o=Nu(Fu(e)),s=149598e3,r=mu(cu(n.dec)*cu(o.dec)+uu(n.dec)*uu(o.dec)*uu(n.ra-o.ra)),l=fu(s*cu(r),o.dist-s*uu(r)),a=fu(uu(n.dec)*cu(n.ra-o.ra),cu(n.dec)*uu(o.dec)-uu(n.dec)*cu(o.dec)*uu(n.ra-o.ra));return{fraction:(1+uu(l))/2,phase:.5+.5*l*(a<0?-1:1)/Math.PI,angle:a}},zu=function(e,t){var n=-t.longitude*gu,o=t.latitude*gu,s=Fu(e),r=Nu(s),l=((e,t)=>gu*(280.16+360.9856235*e)-t)(s,n)-r.ra,a=((e,t,n)=>pu(cu(t)*cu(n)+uu(t)*uu(n)*uu(e)))(l,o,r.dec);return{altitude:a,parallacticAngle:fu(cu(l),du(o)*uu(r.dec)-cu(r.dec)*uu(l))}},ju=(e,t,n=0)=>{const o=1.15*gu*Math.sqrt(100*n)/60,s=zu(e,t).altitude;return{state:s>-.005794821282742547-o,elevation:hu*s}},Ru=new Map([[!1,()=>"moonrise"],[!0,()=>"moonset"]]),Vu={name:"sun",getState:Ou,stateMap:Su},Uu={name:"moon",getState:ju,stateMap:Ru};function*Bu({prev:e,next:t,takeOffTime:n,flightTime:o,segmentLength:s,getState:r,stateMap:l,increment:a=3e4}){let i=e.state;const c=6e4*e.sum,u=6e4*t.sum;for(let d=c+a;d<=u;d+=a){let a=e.fl;d>=u&&(a=t.fl);const p=new Date(n+d);let m;const f=u-c;if(0===f)m=t.p;else{const n=(d-c)/f;m=e.p.atFraction(t.p,n,s)}const{state:h}=r(p,m,a);if(h!==i){const e=Math.round(1e3*d/o)/10,n=l.get(i)([i,h]);if(yield{position:m,type:n,date:p,fl:a,relpos:e},h===t.state)break}i=h}}const Hu=()=>({[Uu.name]:[],[Vu.name]:[],route:[]}),Qu=St([Ln,Mn],(([e,t])=>{if(!t||!e||0===e.timeMatrix.length)return Hu();const n=t.getTime(),o=Hu(),s=e.timeMatrix,r=e.distanceMatrix;let l=s.length-1;const a=6e4*s[l][1],i=[];for(const e of[Vu,Uu]){const t=[];let c=null;for(const[o,[u,d,p]]of s.entries()){let s=p;0!==o&&o!==l||(s=0);const m=new Date(n+6e4*d),f=e.getState(m,u,s).state,h={p:u,sum:d,fl:s,state:f};if(c&&f!==c.state){const s={prev:c,next:h,takeOffTime:n,flightTime:a,segmentLength:r[o][1]-r[o-1][1],getState:e.getState,stateMap:e.stateMap,increment:"sun"===e.name?3e4:6e4};for(const n of Bu(s))t.push(n),e===Vu&&i.push(n)}c=h,e===Vu&&i.push({position:u,type:f,date:m,relpos:Math.round(1e3*d*6e4/a)/10})}o[e.name]=t}return o.route=i,o}),Hu()),Wu=e=>{switch(e){case 0:case 1:case 2:return"#69B34C";case 3:return"#ACB334";case 4:return"#FAB733";case 5:return"#FF8E15";case 6:return"#FF4E11";case 7:case 8:case 9:return"#FF0D0D";default:return"lightgray"}},Gu=Lt(),Zu=e=>{try{const t=[];for(let n=e.length-1;n>=1;n--){const[o,s]=e[n],r=Date.parse(o.replace(" ","T")+"Z");t.push([r,parseFloat(s)])}t.length>0&&Gu.set(t)}catch(e){}},Ku=St([En,Mn,Gu],(([e,t,n])=>{if(!e||!t||!n)return;let o=[];const s=t.getTime(),r=e-t;const l=e.getTime()+0,a=ht(n,(e=>e[0]<=l)),i=s+0,c=ht(n,(e=>e[0]<=i));c>=0&&a>=0&&(o=n.slice(a,c+1));const u=o.map((e=>({date:new Date(e[0]-0),kp:e[1],relpos:Math.round(1e4*(e[0]-0-s)/r)/100})));return{timetable:u,get:e=>{if(e)for(let t=0;t<u.length;t++)if(e>=u[t].date)return u[t].kp;return-1}}})),Ju=St([Qu,Ku],(([e,t])=>{if(0===e.route.length||!t)return[];const n=[];let o=[];for(const{position:s,date:r,type:l,relpos:a}of e.route){const e=t.get(r);["night","astronomicalDusk","astronomicalDawn"].includes(l)&&Math.round(Yu(s))<=e?o.push({position:s,date:r,relpos:a,predictedKp:e}):o.length>0&&(n.push(o),o=[])}o.length>0&&n.push(o);const s=[],r=3e5;for(const e of n){const t=e.length-1,n=e[0].date.getTime(),o=e[t].date.getTime(),l=1===e.length?3e5:0,a=Math.floor((n-l)/r)*r,i=Math.ceil((o+l)/r)*r,c=a/n*e[0].relpos,u=i/o*e[t].relpos;s.push({period:[new Date(a),new Date(i)],relpos:[c,u]})}return s})),Xu=[80.7,-72.7],Yu=e=>{if(e.latitude<=40)return[-90,99];const t=90-e.distanceTo(new editolido.GeoPoint(Xu),editolido.rad_to_deg);return t>66.5?0:(66.5-t)/2};function ed(t,n,o){let s,r=e;p(t,Ku,(e=>o(0,s=e))),t.$$.on_destroy.push((()=>r()));const l=async e=>{if("workbox-broadcast-update"===e.data.meta&&"CACHE_UPDATED"===e.data.type){const{updatedURL:t}=e.data.payload;"https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"===t&&(navigator.serviceWorker.removeEventListener("message",l),fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").then((e=>e.json())).then((e=>Zu(e))).finally((()=>setTimeout((()=>navigator.serviceWorker.addEventListener("message",l)),5e3))))}};return ce((()=>{navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",l);const e=Ln.subscribe((async()=>{await(async()=>{let e=!1;if(window.caches){const t=await window.caches.open("lido-noaa").then((e=>e.keys()));for(const n of t)if("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"===n.url){e=!0;break}}return e})()&&void 0!==s?fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").catch((()=>{})):(async()=>{fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").then((e=>e.json())).then((e=>Zu(e))).catch((function(e){}))})()}));return()=>{e(),navigator&&navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",l)}})),[]}class td extends Ge{constructor(e){super(),We(this,e,ed,null,a,{})}}function nd(e,t,n){const o=e.slice();return o[11]=t[n].period,o[12]=t[n].relpos,o}function od(e,t,n){const o=e.slice();return o[15]=t[n].type,o[12]=t[n].relpos,o[16]=t[n].date,o[17]=t[n].position,o}function sd(e,t,n){const o=e.slice();return o[20]=t[n],o[22]=n,o}function rd(e){let t;return{c(){t=I("p"),t.textContent="Les prédictions de Kp sont indisponibles."},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function ld(e){let t,n,o,s,r=("civilDawn"===e[20].type||"civilDusk"===e[20].type)&&ad(e);return{c(){t=D("line"),r&&r.c(),s=j(),U(t,"stroke","gray"),U(t,"stroke-width","1"),U(t,"x1",n=vd(e[20].relpos)),U(t,"y1","30"),U(t,"x2",o=vd(e[20].relpos)),U(t,"y2","32")},m(e,n){O(e,t,n),r&&r.m(e,n),O(e,s,n)},p(e,l){16&l&&n!==(n=vd(e[20].relpos))&&U(t,"x1",n),16&l&&o!==(o=vd(e[20].relpos))&&U(t,"x2",o),"civilDawn"===e[20].type||"civilDusk"===e[20].type?r?r.p(e,l):(r=ad(e),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(e){e&&F(t),r&&r.d(e),e&&F(s)}}}function ad(e){let t,n,o,s;return{c(){t=D("text"),n=N(yd),U(t,"fill",o="civilDawn"===e[20].type?"#FCBF49":"#000B18"),U(t,"text-anchor","middle"),U(t,"x",s=vd(e[20].relpos)),U(t,"y","44")},m(e,o){O(e,t,o),S(t,n)},p(e,n){16&n&&o!==(o="civilDawn"===e[20].type?"#FCBF49":"#000B18")&&U(t,"fill",o),16&n&&s!==(s=vd(e[20].relpos))&&U(t,"x",s)},d(e){e&&F(t)}}}function id(e){let t,n,o,s;return{c(){t=D("rect"),U(t,"x",n=vd(e[4].sun[e[22]-1].relpos)),U(t,"width",o=gd*(e[20].relpos-e[4].sun[e[22]-1].relpos)+"%"),U(t,"fill",s=$d(e[4].sun[e[22]-1].type)),U(t,"y","20"),U(t,"height","10px")},m(e,n){O(e,t,n)},p(e,r){16&r&&n!==(n=vd(e[4].sun[e[22]-1].relpos))&&U(t,"x",n),16&r&&o!==(o=gd*(e[20].relpos-e[4].sun[e[22]-1].relpos)+"%")&&U(t,"width",o),16&r&&s!==(s=$d(e[4].sun[e[22]-1].type))&&U(t,"fill",s)},d(e){e&&F(t)}}}function cd(e){let t,n,o;return{c(){t=D("rect"),U(t,"x",vd(0)),U(t,"width",n=gd*e[20].relpos+"%"),U(t,"fill",o=$d(e[0].state)),U(t,"y","20"),U(t,"height","10px")},m(e,n){O(e,t,n)},p(e,s){16&s&&n!==(n=gd*e[20].relpos+"%")&&U(t,"width",n),1&s&&o!==(o=$d(e[0].state))&&U(t,"fill",o)},d(e){e&&F(t)}}}function ud(e){let t,n,o=["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e[20].type),s=o&&ld(e);let r=function(e,t){return 0===e[22]?cd:id}(e),l=r(e);return{c(){s&&s.c(),t=j(),l.c(),n=j()},m(e,o){s&&s.m(e,o),O(e,t,o),l.m(e,o),O(e,n,o)},p(e,n){16&n&&(o=["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e[20].type)),o?s?s.p(e,n):(s=ld(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),l.p(e,n)},d(e){s&&s.d(e),e&&F(t),l.d(e),e&&F(n)}}}function dd(e){let t,n,o,s,r,l,a,i;return{c(){t=D("line"),s=D("text"),r=N("☾"),U(t,"stroke","gray"),U(t,"stroke-width","1"),U(t,"x1",n=vd(e[12])),U(t,"y1","18"),U(t,"x2",o=vd(e[12])),U(t,"y2","20"),U(s,"fill",l="moonrise"===e[15]?"#FCBF49":"gray"),U(s,"text-anchor","middle"),U(s,"x",a=vd(e[12])),U(s,"y","16"),U(s,"transform",i=e[9](e[16],e[17],vd(e[12],e[2]),9))},m(e,n){O(e,t,n),O(e,s,n),S(s,r)},p(e,r){16&r&&n!==(n=vd(e[12]))&&U(t,"x1",n),16&r&&o!==(o=vd(e[12]))&&U(t,"x2",o),16&r&&l!==(l="moonrise"===e[15]?"#FCBF49":"gray")&&U(s,"fill",l),16&r&&a!==(a=vd(e[12]))&&U(s,"x",a),20&r&&i!==(i=e[9](e[16],e[17],vd(e[12],e[2]),9))&&U(s,"transform",i)},d(e){e&&F(t),e&&F(s)}}}function pd(e){let t,n,o,s,r,l,a,i,c,u=hd(e[11][0])+"",d=hd(e[11][1])+"";return{c(){t=D("rect"),s=D("text"),r=N(u),a=D("text"),i=N(d),U(t,"stroke","lime"),U(t,"stroke-opacity","60%"),U(t,"fill","transparent"),U(t,"stroke-width","2"),U(t,"x",n=vd(e[12][0])),U(t,"y","18"),U(t,"width",o=gd*(e[12][1]-e[12][0])+"%"),U(t,"height","14"),U(s,"fill","green"),U(s,"text-anchor","middle"),U(s,"font-size","0.7em"),U(s,"x",l=vd(e[12][0]+(e[12][1]-e[12][0])/2)),U(s,"y","15"),U(a,"fill","green"),U(a,"text-anchor","middle"),U(a,"font-size","0.7em"),U(a,"x",c=vd(e[12][0]+(e[12][1]-e[12][0])/2)),U(a,"y","42")},m(e,n){O(e,t,n),O(e,s,n),S(s,r),O(e,a,n),S(a,i)},p(e,p){32&p&&n!==(n=vd(e[12][0]))&&U(t,"x",n),32&p&&o!==(o=gd*(e[12][1]-e[12][0])+"%")&&U(t,"width",o),32&p&&u!==(u=hd(e[11][0])+"")&&W(r,u),32&p&&l!==(l=vd(e[12][0]+(e[12][1]-e[12][0])/2))&&U(s,"x",l),32&p&&d!==(d=hd(e[11][1])+"")&&W(i,d),32&p&&c!==(c=vd(e[12][0]+(e[12][1]-e[12][0])/2))&&U(a,"x",c)},d(e){e&&F(t),e&&F(s),e&&F(a)}}}function md(e){let t;return{c(){t=I("div"),t.innerHTML='<span class="svelte-1x2hvh5">zone favorable aux aurores boréales</span>',U(t,"class","aurora-legend svelte-1x2hvh5")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function fd(t){let n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v,y=hd(t[7])+"",$=hd(t[8])+"",x=!t[3]&&rd(),b=t[4].sun,A=[];for(let e=0;e<b.length;e+=1)A[e]=ud(sd(t,b,e));let w=t[4].moon,T=[];for(let e=0;e<w.length;e+=1)T[e]=dd(od(t,w,e));let P=t[5],k=[];for(let e=0;e<P.length;e+=1)k[e]=pd(nd(t,P,e));let C=t[5].length>0&&md();return{c(){n=I("div"),x&&x.c(),o=z(),s=I("div"),r=D("svg"),l=D("rect");for(let e=0;e<A.length;e+=1)A[e].c();i=j();for(let e=0;e<T.length;e+=1)T[e].c();c=j();for(let e=0;e<k.length;e+=1)k[e].c();u=D("circle"),p=D("text"),m=N(y),f=D("text"),h=N($),v=z(),C&&C.c(),U(l,"x",vd(0)),U(l,"width",100*gd+"%"),U(l,"fill",a=$d(t[1].state)),U(l,"y","20"),U(l,"height","10px"),U(u,"fill","#FCBF49"),U(u,"stroke","black"),U(u,"stroke-width","0.5"),U(u,"cx",d=vd(t[6])),U(u,"cy","25"),U(u,"r","2.5"),U(p,"fill","black"),U(p,"text-anchor","middle"),U(p,"x","5%"),U(p,"y","56"),U(f,"fill","black"),U(f,"text-anchor","middle"),U(f,"x","95%"),U(f,"y","56"),U(r,"width","100%"),U(r,"height","60px"),U(r,"xmlns","http://www.w3.org/2000/svg"),be((()=>t[10].call(s)))},m(e,a){O(e,n,a),x&&x.m(n,null),S(n,o),S(n,s),S(s,r),S(r,l);for(let e=0;e<A.length;e+=1)A[e].m(r,null);S(r,i);for(let e=0;e<T.length;e+=1)T[e].m(r,null);S(r,c);for(let e=0;e<k.length;e+=1)k[e].m(r,null);S(r,u),S(r,p),S(p,m),S(r,f),S(f,h),g=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=I("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=Y();let s;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=R(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{s=R(n.contentWindow,"resize",t)}),S(e,n),()=>{(o||s&&n.contentWindow)&&s(),F(n)}}(s,t[10].bind(s)),S(n,v),C&&C.m(n,null)},p(e,[t]){if(e[3]?x&&(x.d(1),x=null):x||(x=rd(),x.c(),x.m(n,o)),2&t&&a!==(a=$d(e[1].state))&&U(l,"fill",a),17&t){let n;for(b=e[4].sun,n=0;n<b.length;n+=1){const o=sd(e,b,n);A[n]?A[n].p(o,t):(A[n]=ud(o),A[n].c(),A[n].m(r,i))}for(;n<A.length;n+=1)A[n].d(1);A.length=b.length}if(532&t){let n;for(w=e[4].moon,n=0;n<w.length;n+=1){const o=od(e,w,n);T[n]?T[n].p(o,t):(T[n]=dd(o),T[n].c(),T[n].m(r,c))}for(;n<T.length;n+=1)T[n].d(1);T.length=w.length}if(32&t){let n;for(P=e[5],n=0;n<P.length;n+=1){const o=nd(e,P,n);k[n]?k[n].p(o,t):(k[n]=pd(o),k[n].c(),k[n].m(r,u))}for(;n<k.length;n+=1)k[n].d(1);k.length=P.length}64&t&&d!==(d=vd(e[6]))&&U(u,"cx",d),128&t&&y!==(y=hd(e[7])+"")&&W(m,y),256&t&&$!==($=hd(e[8])+"")&&W(h,$),e[5].length>0?C||(C=md(),C.c(),C.m(n,null)):C&&(C.d(1),C=null)},i:e,o:e,d(e){e&&F(n),x&&x.d(),q(A,e),q(T,e),q(k,e),g(),C&&C.d()}}}const hd=(e,t=!1)=>e?t?e.toJSON().slice(11,19):e.getUTCSeconds(e)<30?e.toJSON().slice(11,16):new Date(e.getTime()+6e4).toJSON().slice(11,16):t?"--:--:--":"--:--",gd=.9,vd=(e,t)=>t?""+t*(5+gd*e)/100:5+gd*e+"%",yd="✽",$d=e=>{switch(e){case"dayStart":case"day":case"sunrise":return"#89d4ff";case"sunset":case"civil twilight":case"civilDawn":return"#2383C2";case"civilDusk":case"nautical twilight":case"nauticalDawn":return"#0052A2";case"nauticalDusk":case"astronomical twilight":case"astronomicalDawn":case"astronomicalDusk":case"night":case"nighStart":return"#000B18";default:return"red"}};function xd(e,t,n){let o,s,r,l,a,i;p(e,Ku,(e=>n(3,o=e))),p(e,Qu,(e=>n(4,s=e))),p(e,Ju,(e=>n(5,r=e))),p(e,Rn,(e=>n(6,l=e))),p(e,Mn,(e=>n(7,a=e))),p(e,En,(e=>n(8,i=e)));let c=364;let{departureSun:u}=t,{arrivalSun:d}=t;return e.$$set=e=>{"departureSun"in e&&n(0,u=e.departureSun),"arrivalSun"in e&&n(1,d=e.arrivalSun)},[u,d,c,o,s,r,l,a,i,(e,t,n,o)=>`rotate(${180*-(_u(e).angle-zu(e,t).parallacticAngle)/Math.PI+132}, ${n}, ${o})`,function(){c=this.clientWidth,n(2,c)}]}class bd extends Ge{constructor(e){super(),We(this,e,xd,fd,a,{departureSun:0,arrivalSun:1})}}function Ad(e,t,n){const o=e.slice();return o[7]=t[n].date,o[8]=t[n].kp,o[9]=t[n].relpos,o[11]=n,o}function wd(t){let n;return{c(){n=I("p"),n.textContent="Les prévisions sont disponibles de J-7 à J+2",U(n,"class","svelte-1t8wt3o")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Td(t){let n;return{c(){n=I("p"),n.textContent="Les prévisions de Kp sont indisponibles.",U(n,"class","svelte-1t8wt3o")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Pd(e){let t,n,o,s,r,l,a,i=hd(e[3])+"",c=hd(e[4])+"",u=e[1],d=[];for(let t=0;t<u.length;t+=1)d[t]=Cd(Ad(e,u,t));let p=0===e[5].length&&!!e[0]&&Ld();return{c(){t=D("svg");for(let e=0;e<d.length;e+=1)d[e].c();n=D("circle"),s=D("text"),r=N(i),l=D("text"),a=N(c),p&&p.c(),U(n,"fill","#FCBF49"),U(n,"stroke","black"),U(n,"stroke-width","0.5"),U(n,"cx",o=vd(e[2])),U(n,"cy","20"),U(n,"r","2.5"),U(s,"fill","black"),U(s,"text-anchor","middle"),U(s,"x","5%"),U(s,"y","49"),U(l,"fill","black"),U(l,"text-anchor","middle"),U(l,"x","95%"),U(l,"y","49"),U(t,"width","100%"),U(t,"height","53px"),U(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){O(e,t,o);for(let e=0;e<d.length;e+=1)d[e].m(t,null);S(t,n),S(t,s),S(s,r),S(t,l),S(l,a),p&&p.m(t,null)},p(e,s){if(66&s){let o;for(u=e[1],o=0;o<u.length;o+=1){const r=Ad(e,u,o);d[o]?d[o].p(r,s):(d[o]=Cd(r),d[o].c(),d[o].m(t,n))}for(;o<d.length;o+=1)d[o].d(1);d.length=u.length}4&s&&o!==(o=vd(e[2]))&&U(n,"cx",o),8&s&&i!==(i=hd(e[3])+"")&&W(r,i),16&s&&c!==(c=hd(e[4])+"")&&W(a,c),0===e[5].length&&e[0]?p||(p=Ld(),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},d(e){e&&F(t),q(d,e),p&&p.d()}}}function kd(e){let t,n,o,s=hd(e[7])+"";return{c(){t=D("text"),n=N(s),U(t,"fill","gray"),U(t,"text-anchor","middle"),U(t,"font-size","0.7em"),U(t,"x",o=vd(e[9])),U(t,"y","31")},m(e,o){O(e,t,o),S(t,n)},p(e,r){2&r&&s!==(s=hd(e[7])+"")&&W(n,s),2&r&&o!==(o=vd(e[9]))&&U(t,"x",o)},d(e){e&&F(t)}}}function Cd(e){let t,n,o,s,r,l,a,i,c=Math.round(e[8])+"",u=e[9]>5&&e[9]<95&&kd(e);return{c(){t=D("rect"),r=D("text"),l=N(c),u&&u.c(),i=j(),U(t,"fill",n=Wu(Math.round(e[8]))),U(t,"x",o=vd(e[6](e[9]))),U(t,"y","7"),U(t,"width",s=gd*(e[6](0===e[11]?100:e[1][e[11]-1].relpos-.2)-e[6](e[9]))+"%"),U(t,"height","14px"),U(r,"fill","white"),U(r,"stroke","white"),U(r,"text-anchor","middle"),U(r,"font-size","0.7em"),U(r,"x",a=vd((e[6](e[9])+e[6](0===e[11]?100:e[1][e[11]-1].relpos))/2)),U(r,"y","17")},m(e,n){O(e,t,n),O(e,r,n),S(r,l),u&&u.m(e,n),O(e,i,n)},p(e,d){2&d&&n!==(n=Wu(Math.round(e[8])))&&U(t,"fill",n),2&d&&o!==(o=vd(e[6](e[9])))&&U(t,"x",o),2&d&&s!==(s=gd*(e[6](0===e[11]?100:e[1][e[11]-1].relpos-.2)-e[6](e[9]))+"%")&&U(t,"width",s),2&d&&c!==(c=Math.round(e[8])+"")&&W(l,c),2&d&&a!==(a=vd((e[6](e[9])+e[6](0===e[11]?100:e[1][e[11]-1].relpos))/2))&&U(r,"x",a),e[9]>5&&e[9]<95?u?u.p(e,d):(u=kd(e),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(e){e&&F(t),e&&F(r),u&&u.d(e),e&&F(i)}}}function Ld(e){let t,n;return{c(){t=D("text"),n=N("aucune aurore boréale prévue sur la route"),U(t,"fill","gray"),U(t,"text-anchor","middle"),U(t,"font-size","0.8em"),U(t,"x","50%"),U(t,"y","49")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&F(t)}}}function Sd(t){let n;function o(e,t){return e[1].length>0?Pd:e[0]?wd:Td}let s=o(t),r=s(t);return{c(){n=I("div"),r.c()},m(e,t){O(e,n,t),r.m(n,null)},p(e,[t]){s===(s=o(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n,null)))},i:e,o:e,d(e){e&&F(n),r.d()}}}function Md(e,t,n){let o,s,r,l,a,i;p(e,Ku,(e=>n(0,s=e))),p(e,Rn,(e=>n(2,r=e))),p(e,Mn,(e=>n(3,l=e))),p(e,En,(e=>n(4,a=e))),p(e,Ju,(e=>n(5,i=e)));return e.$$.update=()=>{1&e.$$.dirty&&n(1,o=s?s.timetable:[])},[s,o,r,l,a,i,e=>Math.min(100,Math.max(0,e))]}class Ed extends Ge{constructor(e){super(),We(this,e,Md,Sd,a,{})}}function Od(e){let t,n,o;const s=e[5].default,r=m(s,e,e[4],null);return{c(){t=I("div"),r&&r.c(),U(t,"class","moon svelte-1ae9xab"),U(t,"style",n=e[1]()),ee(t,"rise","moonrise"===e[0])},m(e,n){O(e,t,n),r&&r.m(t,null),o=!0},p(e,[l]){r&&r.p&&(!o||16&l)&&g(r,s,e,e[4],o?h(s,e[4],l,null):v(e[4]),null),(!o||2&l&&n!==(n=e[1]()))&&U(t,"style",n),(!o||1&l)&&ee(t,"rise","moonrise"===e[0])},i(e){o||(qe(r,e),o=!0)},o(e){Ie(r,e),o=!1},d(e){e&&F(t),r&&r.d(e)}}}const Fd=e=>Math.round(100*e.fraction),qd=e=>{const t=e.phase,n=Fd(e);return n<=0?"Nouvelle lune":t<.5&&n<50?"Premier croissant":t<.5&&50===n?"Premier quartier":t<.5&&n<100?"Gibbeuse croissante":100===n?"Pleine Lune":t>=.5&&n>50?"Gibbeuse décroissante":t>=.5&&50===n?"Dernier quartier":"Dernier croissant"};function Id(e,t,n){let o,{$$slots:s={},$$scope:r}=t,{date:l}=t,{position:a}=t,{type:i=null}=t;return e.$$set=e=>{"date"in e&&n(2,l=e.date),"position"in e&&n(3,a=e.position),"type"in e&&n(0,i=e.type),"$$scope"in e&&n(4,r=e.$$scope)},e.$$.update=()=>{12&e.$$.dirty&&n(1,o=()=>{if(!l||!a)return 0;const e=_u(l),t=e.phase>=.5?Math.PI/2:-Math.PI/2;return`transform: rotate(${-(e.angle-zu(l,a).parallacticAngle)+t}rad);`})},[i,o,l,a,r,s]}class Dd extends Ge{constructor(e){super(),We(this,e,Id,Od,a,{date:2,position:3,type:0})}}function Nd(e,t,n){const o=e.slice();return o[14]=t[n],o}function _d(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function zd(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function jd(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function Rd(t){let n,o,s,r,l,a;return{c(){n=D("rect"),r=D("rect"),U(n,"fill",o=$d(t[17])),U(n,"y",s=0+6*t[19]),U(n,"x","0"),U(n,"width","45%"),U(n,"height","5"),U(r,"fill",l=$d(t[12][t[12].length-1-t[19]])),U(r,"y",a=0+6*t[19]),U(r,"x","55%"),U(r,"width","45%"),U(r,"height","5")},m(e,t){O(e,n,t),O(e,r,t)},p:e,d(e){e&&F(n),e&&F(r)}}}function Vd(t){let n;return{c(){n=I("tr"),n.innerHTML='<td colspan="4" class="svelte-fe56h4">Aucun événement</td>',U(n,"class","svelte-fe56h4")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Ud(e){let t,n,o,s=e[11](e[17].type)+"",r=e[17].type.startsWith("civil"),l=r&&Qd(e);return{c(){t=I("td"),n=N(s),o=N(" en montée\n                        "),l&&l.c(),U(t,"colspan","4"),U(t,"class","svelte-fe56h4")},m(e,s){O(e,t,s),S(t,n),S(t,o),l&&l.m(t,null)},p(e,o){512&o&&s!==(s=e[11](e[17].type)+"")&&W(n,s),512&o&&(r=e[17].type.startsWith("civil")),r?l?l.p(e,o):(l=Qd(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(e){e&&F(t),l&&l.d()}}}function Bd(e){let t,n,o,s=e[10](e[5].arrival,e[6],e[8])+"";return{c(){t=I("td"),n=N("Atterrissage "),o=N(s),U(t,"colspan","4"),U(t,"class","svelte-fe56h4")},m(e,s){O(e,t,s),S(t,n),S(t,o)},p(e,t){352&t&&s!==(s=e[10](e[5].arrival,e[6],e[8])+"")&&W(o,s)},d(e){e&&F(t)}}}function Hd(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f=e[11](e[17].type)+"",h=e[17].type.startsWith("civil"),g=hd(e[17].date)+"",v=e[17].fl+"",y=h&&Wd(e);return{c(){t=I("td"),n=N(f),o=z(),y&&y.c(),s=z(),r=I("td"),a=z(),i=I("td"),c=N(g),u=z(),d=I("td"),p=N("FL"),m=N(v),U(t,"class","svelte-fe56h4"),U(r,"class",l="color "+e[17].type+"-color svelte-fe56h4"),U(i,"class","svelte-fe56h4"),U(d,"class","svelte-fe56h4")},m(e,l){O(e,t,l),S(t,n),S(t,o),y&&y.m(t,null),O(e,s,l),O(e,r,l),O(e,a,l),O(e,i,l),S(i,c),O(e,u,l),O(e,d,l),S(d,p),S(d,m)},p(e,o){512&o&&f!==(f=e[11](e[17].type)+"")&&W(n,f),512&o&&(h=e[17].type.startsWith("civil")),h?y?y.p(e,o):(y=Wd(e),y.c(),y.m(t,null)):y&&(y.d(1),y=null),512&o&&l!==(l="color "+e[17].type+"-color svelte-fe56h4")&&U(r,"class",l),512&o&&g!==(g=hd(e[17].date)+"")&&W(c,g),512&o&&v!==(v=e[17].fl+"")&&W(m,v)},d(e){e&&F(t),y&&y.d(),e&&F(s),e&&F(r),e&&F(a),e&&F(i),e&&F(u),e&&F(d)}}}function Qd(e){let t;return{c(){t=I("span"),t.textContent=`${yd}`,U(t,"class","svelte-fe56h4"),ee(t,"rise","civilDawn"===e[17].type)},m(e,n){O(e,t,n)},p(e,n){512&n&&ee(t,"rise","civilDawn"===e[17].type)},d(e){e&&F(t)}}}function Wd(e){let t;return{c(){t=I("span"),t.textContent=`${yd}`,U(t,"class","svelte-fe56h4"),ee(t,"rise","civilDawn"===e[17].type)},m(e,n){O(e,t,n)},p(e,n){512&n&&ee(t,"rise","civilDawn"===e[17].type)},d(e){e&&F(t)}}}function Gd(e){let t,n;function o(e,t){return 0!==e[17].fl?Hd:e[6]&&e[17].date>=e[6]?Bd:Ud}let s=o(e),r=s(e);return{c(){t=I("tr"),r.c(),n=z(),U(t,"class","svelte-fe56h4")},m(e,o){O(e,t,o),r.m(t,null),S(t,n)},p(e,l){s===(s=o(e))&&r?r.p(e,l):(r.d(1),r=s(e),r&&(r.c(),r.m(t,n)))},d(e){e&&F(t),r.d()}}}function Zd(e){let t;return{c(){t=N(e[1])},m(e,n){O(e,t,n)},p(e,n){2&n&&W(t,e[1])},d(e){e&&F(t)}}}function Kd(t){let n;return{c(){n=I("tr"),n.innerHTML='<td colspan="4" class="svelte-fe56h4">Aucun événement</td>',U(n,"class","svelte-fe56h4")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Jd(e){let t,n,o,s,r,l=e[11](e[17].type)+"";return s=new Dd({props:{position:e[17].position,type:e[17].type,date:e[17].date,$$slots:{default:[ep]},$$scope:{ctx:e}}}),{c(){t=I("td"),n=N(l),o=N(" en montée "),Be(s.$$.fragment),U(t,"colspan","4"),U(t,"class","svelte-fe56h4")},m(e,l){O(e,t,l),S(t,n),S(t,o),He(s,t,null),r=!0},p(e,t){(!r||512&t)&&l!==(l=e[11](e[17].type)+"")&&W(n,l);const o={};512&t&&(o.position=e[17].position),512&t&&(o.type=e[17].type),512&t&&(o.date=e[17].date),4194306&t&&(o.$$scope={dirty:t,ctx:e}),s.$set(o)},i(e){r||(qe(s.$$.fragment,e),r=!0)},o(e){Ie(s.$$.fragment,e),r=!1},d(e){e&&F(t),Qe(s)}}}function Xd(e){let t,n,o,s,r,l=e[11](e[17].type)+"";return s=new Dd({props:{position:e[17].position,type:e[17].type,date:e[17].date,$$slots:{default:[tp]},$$scope:{ctx:e}}}),{c(){t=I("td"),n=N(l),o=N(" en descente "),Be(s.$$.fragment),U(t,"colspan","4"),U(t,"class","svelte-fe56h4")},m(e,l){O(e,t,l),S(t,n),S(t,o),He(s,t,null),r=!0},p(e,t){(!r||512&t)&&l!==(l=e[11](e[17].type)+"")&&W(n,l);const o={};512&t&&(o.position=e[17].position),512&t&&(o.type=e[17].type),512&t&&(o.date=e[17].date),4194306&t&&(o.$$scope={dirty:t,ctx:e}),s.$set(o)},i(e){r||(qe(s.$$.fragment,e),r=!0)},o(e){Ie(s.$$.fragment,e),r=!1},d(e){e&&F(t),Qe(s)}}}function Yd(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h=e[11](e[17].type)+"",g=hd(e[17].date)+"",v=e[17].fl+"";return s=new Dd({props:{position:e[17].position,type:e[17].type,date:e[17].date,$$slots:{default:[np]},$$scope:{ctx:e}}}),{c(){t=I("td"),n=N(h),o=z(),Be(s.$$.fragment),r=z(),l=I("td"),a=z(),i=I("td"),c=N(g),u=z(),d=I("td"),p=N("FL"),m=N(v),U(t,"class","svelte-fe56h4"),U(l,"class","color svelte-fe56h4"),U(i,"class","svelte-fe56h4"),U(d,"class","svelte-fe56h4")},m(e,h){O(e,t,h),S(t,n),S(t,o),He(s,t,null),O(e,r,h),O(e,l,h),O(e,a,h),O(e,i,h),S(i,c),O(e,u,h),O(e,d,h),S(d,p),S(d,m),f=!0},p(e,t){(!f||512&t)&&h!==(h=e[11](e[17].type)+"")&&W(n,h);const o={};512&t&&(o.position=e[17].position),512&t&&(o.type=e[17].type),512&t&&(o.date=e[17].date),4194306&t&&(o.$$scope={dirty:t,ctx:e}),s.$set(o),(!f||512&t)&&g!==(g=hd(e[17].date)+"")&&W(c,g),(!f||512&t)&&v!==(v=e[17].fl+"")&&W(m,v)},i(e){f||(qe(s.$$.fragment,e),f=!0)},o(e){Ie(s.$$.fragment,e),f=!1},d(e){e&&F(t),Qe(s),e&&F(r),e&&F(l),e&&F(a),e&&F(i),e&&F(u),e&&F(d)}}}function ep(e){let t;return{c(){t=N(e[1])},m(e,n){O(e,t,n)},p(e,n){2&n&&W(t,e[1])},d(e){e&&F(t)}}}function tp(e){let t;return{c(){t=N(e[1])},m(e,n){O(e,t,n)},p(e,n){2&n&&W(t,e[1])},d(e){e&&F(t)}}}function np(e){let t;return{c(){t=N(e[1])},m(e,n){O(e,t,n)},p(e,n){2&n&&W(t,e[1])},d(e){e&&F(t)}}}function op(e){let t,n,o,s,r;const l=[Yd,Xd,Jd],a=[];function i(e,t){return 0!==e[17].fl?0:e[6]&&e[17].date>=e[6]?1:2}return n=i(e),o=a[n]=l[n](e),{c(){t=I("tr"),o.c(),s=z(),U(t,"class","svelte-fe56h4")},m(e,o){O(e,t,o),a[n].m(t,null),S(t,s),r=!0},p(e,r){let c=n;n=i(e),n===c?a[n].p(e,r):(Oe(),Ie(a[c],1,1,(()=>{a[c]=null})),Fe(),o=a[n],o?o.p(e,r):(o=a[n]=l[n](e),o.c()),qe(o,1),o.m(t,s))},i(e){r||(qe(o),r=!0)},o(e){Ie(o),r=!1},d(e){e&&F(t),a[n].d()}}}function sp(t){let n,o,s,r,l,a;return{c(){n=D("rect"),r=D("text"),l=N(t[14]),U(n,"stroke",o=Wu(t[14])),U(n,"stroke-width","1"),U(n,"fill","transparent"),U(n,"x",s=2+15*t[14]),U(n,"y","2"),U(n,"width","12"),U(n,"height","12"),U(r,"fill","gray"),U(r,"text-anchor","middle"),U(r,"font-size","0.7em"),U(r,"x",a=8+15*t[14]),U(r,"y","11.5")},m(e,t){O(e,n,t),O(e,r,t),S(r,l)},p:e,d(e){e&&F(n),e&&F(r)}}}function rp(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,A,w,T,P,k,C,L,M,E,_,j,R,V,B,H,Q,G,Z,K=qd(e[2])+"",J=Fd(e[2])+"",X=e[7]?"":"non visible";n=new bd({props:{arrivalSun:e[8],departureSun:e[0]}});let Y=e[12],ee=[];for(let t=0;t<Y.length;t+=1)ee[t]=Rd(jd(e,Y,t));let te=e[9].sun.filter(lp),ne=[];for(let t=0;t<te.length;t+=1)ne[t]=Gd(zd(e,te,t));let oe=null;te.length||(oe=Vd()),A=new Dd({props:{date:e[3],position:e[4].map,$$slots:{default:[Zd]},$$scope:{ctx:e}}});let se=e[9].moon,re=[];for(let t=0;t<se.length;t+=1)re[t]=op(_d(e,se,t));const le=e=>Ie(re[e],1,1,(()=>{re[e]=null}));let ae=null;se.length||(ae=Kd());let ie=[0,1,2,3,4,5,6,7,8,9],ce=[];for(let t=0;t<10;t+=1)ce[t]=sp(Nd(e,ie,t));return G=new Ed({}),{c(){t=I("div"),Be(n.$$.fragment),o=z(),s=I("table"),r=I("thead"),l=I("tr"),a=I("th"),a.textContent="Soleil",i=z(),c=I("th"),u=D("svg");for(let e=0;e<ee.length;e+=1)ee[e].c();d=z(),p=I("th"),p.textContent="Heure",m=z(),f=I("th"),f.textContent="FL",h=z(),g=I("tbody");for(let e=0;e<ne.length;e+=1)ne[e].c();oe&&oe.c(),v=z(),y=I("thead"),$=I("tr"),x=I("th"),b=N("Lune "),Be(A.$$.fragment),w=z(),T=N(K),P=z(),k=N(J),C=N("% "),L=N(X),M=z(),E=I("tbody");for(let e=0;e<re.length;e+=1)re[e].c();ae&&ae.c(),_=z(),j=I("thead"),R=I("tr"),V=I("th"),B=N("Prévisions de Kp\n                    "),H=D("svg");for(let e=0;e<10;e+=1)ce[e].c();Q=z(),Be(G.$$.fragment),U(a,"scope","col"),U(a,"class","svelte-fe56h4"),U(u,"width","100%"),U(u,"height","27px"),U(u,"xmlns","http://www.w3.org/2000/svg"),U(c,"scope","col"),U(c,"class","color svelte-fe56h4"),U(p,"scope","col"),U(p,"class","svelte-fe56h4"),U(f,"scope","col"),U(f,"class","svelte-fe56h4"),U(l,"class","svelte-fe56h4"),U(r,"class","svelte-fe56h4"),U(g,"class","svelte-fe56h4"),U(x,"scope","col"),U(x,"colspan","4"),U(x,"class","svelte-fe56h4"),U($,"class","svelte-fe56h4"),U(y,"class","svelte-fe56h4"),U(E,"class","svelte-fe56h4"),U(H,"width","150px"),U(H,"height","13px"),U(H,"xmlns","http://www.w3.org/2000/svg"),U(H,"class","svelte-fe56h4"),U(V,"scope","col"),U(V,"colspan","4"),U(V,"class","kp svelte-fe56h4"),U(R,"class","svelte-fe56h4"),U(j,"class","svelte-fe56h4"),U(s,"class","table svelte-fe56h4"),U(t,"class","card-body")},m(e,F){O(e,t,F),He(n,t,null),S(t,o),S(t,s),S(s,r),S(r,l),S(l,a),S(l,i),S(l,c),S(c,u);for(let e=0;e<ee.length;e+=1)ee[e].m(u,null);S(l,d),S(l,p),S(l,m),S(l,f),S(s,h),S(s,g);for(let e=0;e<ne.length;e+=1)ne[e].m(g,null);oe&&oe.m(g,null),S(s,v),S(s,y),S(y,$),S($,x),S(x,b),He(A,x,null),S(x,w),S(x,T),S(x,P),S(x,k),S(x,C),S(x,L),S(s,M),S(s,E);for(let e=0;e<re.length;e+=1)re[e].m(E,null);ae&&ae.m(E,null),S(s,_),S(s,j),S(j,R),S(R,V),S(V,B),S(V,H);for(let e=0;e<10;e+=1)ce[e].m(H,null);S(t,Q),He(G,t,null),Z=!0},p(e,[t]){const o={};if(256&t&&(o.arrivalSun=e[8]),1&t&&(o.departureSun=e[0]),n.$set(o),4096&t){let n;for(Y=e[12],n=0;n<Y.length;n+=1){const o=jd(e,Y,n);ee[n]?ee[n].p(o,t):(ee[n]=Rd(o),ee[n].c(),ee[n].m(u,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Y.length}if(3936&t){let n;for(te=e[9].sun.filter(lp),n=0;n<te.length;n+=1){const o=zd(e,te,n);ne[n]?ne[n].p(o,t):(ne[n]=Gd(o),ne[n].c(),ne[n].m(g,null))}for(;n<ne.length;n+=1)ne[n].d(1);ne.length=te.length,!te.length&&oe?oe.p(e,t):te.length?oe&&(oe.d(1),oe=null):(oe=Vd(),oe.c(),oe.m(g,null))}const s={};if(8&t&&(s.date=e[3]),16&t&&(s.position=e[4].map),4194306&t&&(s.$$scope={dirty:t,ctx:e}),A.$set(s),(!Z||4&t)&&K!==(K=qd(e[2])+"")&&W(T,K),(!Z||4&t)&&J!==(J=Fd(e[2])+"")&&W(k,J),(!Z||128&t)&&X!==(X=e[7]?"":"non visible")&&W(L,X),2626&t){let n;for(se=e[9].moon,n=0;n<se.length;n+=1){const o=_d(e,se,n);re[n]?(re[n].p(o,t),qe(re[n],1)):(re[n]=op(o),re[n].c(),qe(re[n],1),re[n].m(E,null))}for(Oe(),n=se.length;n<re.length;n+=1)le(n);Fe(),!se.length&&ae?ae.p(e,t):se.length?ae&&(ae.d(1),ae=null):(ae=Kd(),ae.c(),ae.m(E,null))}if(0&t){let n;for(ie=[0,1,2,3,4,5,6,7,8,9],n=0;n<10;n+=1){const o=Nd(e,ie,n);ce[n]?ce[n].p(o,t):(ce[n]=sp(o),ce[n].c(),ce[n].m(H,null))}for(;n<10;n+=1)ce[n].d(1)}},i(e){if(!Z){qe(n.$$.fragment,e),qe(A.$$.fragment,e);for(let e=0;e<se.length;e+=1)qe(re[e]);qe(G.$$.fragment,e),Z=!0}},o(e){Ie(n.$$.fragment,e),Ie(A.$$.fragment,e),re=re.filter(Boolean);for(let e=0;e<re.length;e+=1)Ie(re[e]);Ie(G.$$.fragment,e),Z=!1},d(e){e&&F(t),Qe(n),q(ee,e),q(ne,e),oe&&oe.d(),Qe(A),q(re,e),ae&&ae.d(),q(ce,e),Qe(G)}}}const lp=e=>["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e.type);function ap(e,t,n){let o,s,r,l,a,i;p(e,Vn,(e=>n(4,r=e))),p(e,Ln,(e=>n(5,l=e))),p(e,En,(e=>n(6,a=e))),p(e,Qu,(e=>n(9,i=e)));let{departureSun:c}=t,{moonEmoji:u}=t,{moonIllumination:d}=t,{estimatedDate:m}=t;const f={astronomicalDawn:"Aube astronomique",astronomicalDusk:"Nuit astronomique",nauticalDawn:"Aube nautique",nauticalDusk:"Nuit nautique",civilDawn:"Aube civile",civilDusk:"Nuit civile",sunrise:"Lever du soleil",sunset:"Coucher du soleil",day:"Jour",night:"Nuit",moonrise:"Lever de lune",moonset:"Coucher de lune"},h=Mu.slice(1);return e.$$set=e=>{"departureSun"in e&&n(0,c=e.departureSun),"moonEmoji"in e&&n(1,u=e.moonEmoji),"moonIllumination"in e&&n(2,d=e.moonIllumination),"estimatedDate"in e&&n(3,m=e.estimatedDate)},e.$$.update=()=>{96&e.$$.dirty&&n(8,o=l&&a?((e,t,n)=>{const{state:o,elevation:s}=Ou(e,t,n);return{state:o,isRising:s<Cu(new Date(e.getTime()+6e5),t).elevation}})(a,l.arrival,0):""),24&e.$$.dirty&&n(7,s=r&&m?ju(m,r.map,r.fl).state:"")},[c,u,d,m,r,l,a,s,o,i,(e,t,{state:n,isRising:o})=>e&&t?"day"===n?"de jour":"night"===n||"astronomical twilight"===n?"de nuit":"nautical twilight"===n?o?"durant l'aube nautique":"durant le crépuscule nautique":"civil twilight"===n?o?"durant l'aube civile":"durant le crépuscule civil":`#ERREUR ${n}#`:"",e=>f[e]||e,h]}class ip extends Ge{constructor(e){super(),We(this,e,ap,rp,a,{departureSun:0,moonEmoji:1,moonIllumination:2,estimatedDate:3})}}function cp(e,t,n){const o=e.slice();return o[17]=t[n],o}function up(e){let t,n;return t=new xc({props:{class:"sun-overlay",position:"bottom-center",isOpen:!1,$$slots:{content:[gp,({close:e})=>({15:e}),({close:e})=>e?32768:0],parent:[hp,({toggle:e})=>({16:e}),({toggle:e})=>e?65536:0]},$$scope:{ctx:e}}}),t.$on("close",gt),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};1147375&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function dp(t){let n;return{c(){n=N(t[2])},m(e,t){O(e,n,t)},p(e,t){4&t&&W(n,e[2])},i:e,o:e,d(e){e&&F(n)}}}function pp(e){let t,n;return t=new Dd({props:{position:e[5].map,date:e[1],$$slots:{default:[mp]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.position=e[5].map),2&n&&(o.date=e[1]),1048640&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function mp(e){let t;return{c(){t=N(e[6])},m(e,n){O(e,t,n)},p(e,n){64&n&&W(t,e[6])},d(e){e&&F(t)}}}function fp(e){let t,n,o,s,r=e[17].type.includes("rise")?"↥":"↧",l=hd(e[17].date)+"";return{c(){t=I("p"),n=N(r),o=z(),s=N(l),U(t,"class","svelte-1h1oq9w")},m(e,r){O(e,t,r),S(t,n),S(t,o),S(t,s)},p(e,t){128&t&&r!==(r=e[17].type.includes("rise")?"↥":"↧")&&W(n,r),128&t&&l!==(l=hd(e[17].date)+"")&&W(s,l)},d(e){e&&F(t)}}}function hp(e){let t,n,o,s,r,a,i,c,u;const d=[pp,dp],p=[];function m(e,t){return"moon"===e[2]?0:1}o=m(e),s=p[o]=d[o](e);let f=e[7].slice(0,3),h=[];for(let t=0;t<f.length;t+=1)h[t]=fp(cp(e,f,t));return{c(){t=I("div"),n=I("p"),s.c(),r=z(),a=I("div");for(let e=0;e<h.length;e+=1)h[e].c();U(n,"class","icon svelte-1h1oq9w"),U(a,"class","details svelte-1h1oq9w"),ee(a,"two",2===e[7].length),ee(a,"three",e[7].length>=3),U(t,"slot","parent"),U(t,"class","sun svelte-1h1oq9w"),ee(t,"aurora",e[8].length>0)},m(s,d){O(s,t,d),S(t,n),p[o].m(n,null),S(t,r),S(t,a);for(let e=0;e<h.length;e+=1)h[e].m(a,null);i=!0,c||(u=R(t,"click",(function(){l(e[16])&&e[16].apply(this,arguments)})),c=!0)},p(r,l){let c=o;if(o=m(e=r),o===c?p[o].p(e,l):(Oe(),Ie(p[c],1,1,(()=>{p[c]=null})),Fe(),s=p[o],s?s.p(e,l):(s=p[o]=d[o](e),s.c()),qe(s,1),s.m(n,null)),128&l){let t;for(f=e[7].slice(0,3),t=0;t<f.length;t+=1){const n=cp(e,f,t);h[t]?h[t].p(n,l):(h[t]=fp(n),h[t].c(),h[t].m(a,null))}for(;t<h.length;t+=1)h[t].d(1);h.length=f.length}(!i||128&l)&&ee(a,"two",2===e[7].length),(!i||128&l)&&ee(a,"three",e[7].length>=3),(!i||256&l)&&ee(t,"aurora",e[8].length>0)},i(e){i||(qe(s),i=!0)},o(e){Ie(s),i=!1},d(e){e&&F(t),p[o].d(),q(h,e),c=!1,u()}}}function gp(e){let t,n,o,s,r,a,i,c,u,d,p;return i=new ip({props:{departureSun:e[3],moonEmoji:e[6],estimatedDate:e[1],moonIllumination:e[0]}}),{c(){t=I("div"),n=I("h6"),o=I("span"),o.textContent="Éphémérides du vol",s=z(),r=I("button"),a=z(),Be(i.$$.fragment),U(r,"type","button"),U(r,"class","btn-close ms-auto"),U(r,"aria-label","Close"),U(n,"class","card-header"),U(t,"slot","content"),Z(t,"width","390px"),Z(t,"max-width","99vw"),U(t,"class","card")},m(c,m){O(c,t,m),S(t,n),S(n,o),S(n,s),S(n,r),S(t,a),He(i,t,null),u=!0,d||(p=R(r,"click",(function(){l(e[15])&&e[15].apply(this,arguments)})),d=!0)},p(t,n){e=t;const o={};8&n&&(o.departureSun=e[3]),64&n&&(o.moonEmoji=e[6]),2&n&&(o.estimatedDate=e[1]),1&n&&(o.moonIllumination=e[0]),i.$set(o)},i(e){u||(qe(i.$$.fragment,e),c||be((()=>{c=Ne(t,Pt,{duration:200}),c.start()})),u=!0)},o(e){Ie(i.$$.fragment,e),u=!1},d(e){e&&F(t),Qe(i),d=!1,p()}}}function vp(e){let t,n,o,s;t=new td({});let r=e[4]&&e[4].timeMatrix.length>0&&up(e);return{c(){Be(t.$$.fragment),n=z(),r&&r.c(),o=j()},m(e,l){He(t,e,l),O(e,n,l),r&&r.m(e,l),O(e,o,l),s=!0},p(e,[t]){e[4]&&e[4].timeMatrix.length>0?r?(r.p(e,t),16&t&&qe(r,1)):(r=up(e),r.c(),qe(r,1),r.m(o.parentNode,o)):r&&(Oe(),Ie(r,1,1,(()=>{r=null})),Fe())},i(e){s||(qe(t.$$.fragment,e),qe(r),s=!0)},o(e){Ie(t.$$.fragment,e),Ie(r),s=!1},d(e){Qe(t,e),e&&F(n),r&&r.d(e),e&&F(o)}}}function yp(e,t,n){let o,s,r,l,a,i,c,u,d,m,f,h,g,v;p(e,Qu,(e=>n(12,m=e))),p(e,Ln,(e=>n(4,f=e))),p(e,Mn,(e=>n(13,h=e))),p(e,Vn,(e=>n(5,g=e))),p(e,Ju,(e=>n(8,v=e)));return e.$$.update=()=>{8208&e.$$.dirty&&n(3,o=f&&h?Vu.getState(h,f.departure,0):""),8208&e.$$.dirty&&n(11,s=f&&h?Uu.getState(h,f.departure,0):""),8240&e.$$.dirty&&n(1,r=h&&g?new Date(h.getTime()+6e4*g.reltime):h||f.infos.ofpOFF),4096&e.$$.dirty&&n(9,l=m.sun.filter((e=>["sunrise","sunset"].includes(e.type)))),6144&e.$$.dirty&&n(10,a=m.moon.length>0||s.state),1544&e.$$.dirty&&n(2,i=l.length>0?"☀️":((e,t)=>"day"===e.state?"☀️":t?"moon":"🔭")(o,a)),4612&e.$$.dirty&&n(7,c="☀️"===i?l:"moon"===i?m.moon:[]),2&e.$$.dirty&&n(0,u=r?_u(r):{}),1&e.$$.dirty&&n(6,d=(e=>{const t=e.phase,n=e.fraction;return t&&n?n<=.02?"🌑":t<.5&&n<=.34?"🌒":t<.5&&n<=.65?"🌓":t<.5&&n<.97?"🌔":n>=.97?"🌕":t>=.5&&n>.65?"🌖":t>=.5&&n>.34?"🌗":"🌘":"☽"})(u))},[u,r,i,o,f,g,d,c,v,l,a,s,m,h]}class $p extends Ge{constructor(e){super(),We(this,e,yp,vp,a,{})}}function xp(e){let t,n;return{c(){t=I("figcaption"),n=N(e[2])},m(e,o){O(e,t,o),S(t,n)},p(e,t){4&t&&W(n,e[2])},d(e){e&&F(t)}}}function bp(e){let t,n;return{c(){t=I("figcaption"),n=N(e[1])},m(e,o){O(e,t,o),S(t,n)},p(e,t){2&t&&W(n,e[1])},d(e){e&&F(t)}}}function Ap(t){let n,o,s,r,l,a,i=t[2]&&xp(t),u=t[1]&&bp(t);return{c(){n=I("figure"),i&&i.c(),o=z(),s=I("video"),r=I("source"),a=z(),u&&u.c(),c(r.src,l=t[4])||U(r,"src",l),U(r,"type","video/mp4"),U(s,"tabindex",t[3]),s.controls=!0,Z(s,"background-image","url("+t[6](...t[0].split("\\n"))+")"),U(s,"poster",t[5]),U(s,"class","svelte-11ueog7")},m(e,t){O(e,n,t),i&&i.m(n,null),S(n,o),S(n,s),S(s,r),S(n,a),u&&u.m(n,null)},p(e,[t]){e[2]?i?i.p(e,t):(i=xp(e),i.c(),i.m(n,o)):i&&(i.d(1),i=null),16&t&&!c(r.src,l=e[4])&&U(r,"src",l),8&t&&U(s,"tabindex",e[3]),1&t&&Z(s,"background-image","url("+e[6](...e[0].split("\\n"))+")"),32&t&&U(s,"poster",e[5]),e[1]?u?u.p(e,t):(u=bp(e),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&F(n),i&&i.d(),u&&u.d()}}}const wp=/[\r\n%#()<>?[\\\]^`{|}]/g;function Tp(e,t,n){let{src:o}=t,{title:s}=t,{figcaption:r=""}=t,{topcaption:l=""}=t,{forcePreview:a=!0}=t,{tabindex:i=0}=t;const c=(e,t)=>`data:image/svg+xml,${`\n            <svg xmlns="http://www.w3.org/2000/svg" width="574" height="400" dominant-baseline="middle" text-anchor="middle" font-size="2rem">\n                <text x="0" y="0" style="currentColor">\n                    <tspan x="282" y="115">${e}</tspan>\n                    <tspan x="282" y="155">${t}</tspan>\n                </text>\n            </svg>\n        `.replace(/(?:(^\s+)|(\s+)$)/gmu," ").replace(/>\s+</gmu,"><").replace(/"/g,"'").trim().replace(wp,encodeURIComponent)}`,u=new URL(o);let d=c(...s.split("\\n"));return a&&(u.hash="t=0.001",d=!1),u.searchParams.set("dnd",1),e.$$set=e=>{"src"in e&&n(7,o=e.src),"title"in e&&n(0,s=e.title),"figcaption"in e&&n(1,r=e.figcaption),"topcaption"in e&&n(2,l=e.topcaption),"forcePreview"in e&&n(8,a=e.forcePreview),"tabindex"in e&&n(3,i=e.tabindex)},[s,r,l,i,u,d,c,o,a]}class Pp extends Ge{constructor(e){super(),We(this,e,Tp,Ap,a,{src:7,title:0,figcaption:1,topcaption:2,forcePreview:8,tabindex:3})}}function kp(e){let t,n,o,s;const r=e[3].default,l=m(r,e,e[2],null),a=l||function(e){let t;return{c(){t=N("Hello World")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}();return{c(){t=I("a"),a&&a.c(),U(t,"class","svelte-htxed5")},m(r,l){O(r,t,l),a&&a.m(t,null),n=!0,o||(s=R(t,"click",V(e[0])),o=!0)},p(e,[t]){l&&l.p&&(!n||4&t)&&g(l,r,e,e[2],n?h(r,e[2],t,null):v(e[2]),null)},i(e){n||(qe(a,e),n=!0)},o(e){Ie(a,e),n=!1},d(e){e&&F(t),a&&a.d(e),o=!1,s()}}}function Cp(e,t,n){let{$$slots:o={},$$scope:s}=t,{value:r=""}=t;return e.$$set=e=>{"value"in e&&n(1,r=e.value),"$$scope"in e&&n(2,s=e.$$scope)},[function(){if(window.speechSynthesis&&r){const e=new SpeechSynthesisUtterance(r);speechSynthesis.speak(e)}},r,s,o]}class Lp extends Ge{constructor(e){super(),We(this,e,Cp,kp,a,{value:1})}}function Sp(e,t,n){const o=e.slice();return o[4]=t[n][0],o[5]=t[n][1].url,o[6]=t[n][1].description,o[7]=t[n][1].version,o}function Mp(e){let t;return{c(){t=N("[ofpˈtumæp]")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Ep(e){let t,n,o;return t=new Ur({props:{href:"https://p169.p3.n0.cdn.getcloudapp.com/items/yAu14Y4x/23c3a918-e425-4d89-a53d-7f450449013b.mp4",$$slots:{default:[Op]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment),n=N(".")},m(e,s){He(t,e,s),O(e,n,s),o=!0},i(e){o||(qe(t.$$.fragment,e),o=!0)},o(e){Ie(t.$$.fragment,e),o=!1},d(e){Qe(t,e),e&&F(n)}}}function Op(e){let t;return{c(){t=N("Tutoriel vidéo")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Fp(t){let n,o;return{c(){n=N(t[2]),o=N(".com")},m(e,t){O(e,n,t),O(e,o,t)},p:e,d(e){e&&F(n),e&&F(o)}}}function qp(e){let t;return{c(){t=N("ce lien")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Ip(e){let t;return{c(){t=N("bug génant")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Dp(e){let t;return{c(){t=N("ogimet.com")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Np(e){let t;return{c(){t=N("Guide d'interprétation")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function _p(e){let t;return{c(){t=N("vidéo")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function zp(t){let n,o,s,r=t[4]+"",l=t[7]+"";return{c(){n=N(r),o=N(" v"),s=N(l)},m(e,t){O(e,n,t),O(e,o,t),O(e,s,t)},p:e,d(e){e&&F(n),e&&F(o),e&&F(s)}}}function jp(e){let t,n,o,s,r,l,a=e[6]+"";return n=new Ur({props:{href:e[5],$$slots:{default:[zp]},$$scope:{ctx:e}}}),{c(){t=I("li"),Be(n.$$.fragment),o=z(),s=N(a),r=z()},m(e,a){O(e,t,a),He(n,t,null),S(t,o),S(t,s),S(t,r),l=!0},p(e,t){const o={};1024&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){l||(qe(n.$$.fragment,e),l=!0)},o(e){Ie(n.$$.fragment,e),l=!1},d(e){e&&F(t),Qe(n)}}}function Rp(e){let t;return{c(){t=N("liste des commits")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Vp(e){let t;return{c(){t=N("=Physique=")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Up(e){let t;return{c(){t=N("=Politique=")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Bp(e){let t;return{c(){t=N("NAM Physical")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Hp(e){let t;return{c(){t=N("The Perry-Castañeda Library")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Qp(t){let n,o;return{c(){n=N(t[2]),o=N(".com")},m(e,t){O(e,n,t),O(e,o,t)},p:e,d(e){e&&F(n),e&&F(o)}}}function Wp(e){let t;return{c(){t=N("l'app")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Gp(e){let t;return{c(){t=N("le proxy")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Zp(t){let n;return{c(){n=I("span"),n.innerHTML="Fly<span>Tax</span>",U(n,"class","flytax")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Kp(e){let t;return{c(){t=N("The World HD")},m(e,n){O(e,t,n)},d(e){e&&F(t)}}}function Jp(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,A,w,T,P,k,C,L,M,E,D,_,j,R,V,B,H,Q,W,G,Z,K,J,X,Y,ee,te,ne,oe,se,re,le,ae,ie,ce,ue,de,pe,me,fe,he,ge,ve,ye,$e,xe,be,Ae,we,Te,Pe,ke,Ce,Le,Se,Me,Ee,De,Ne,_e,ze,je,Re,Ve,Ue,We,Ge,Ze,Ke,Je,Xe,Ye,et,tt,nt,ot,st,rt,lt,at,it,ct,ut,dt,pt,mt,ft,ht,gt,vt,yt,$t,xt,bt,At,wt,Tt,Pt,kt,Ct,Lt,St,Mt,Et,Ot,Ft,qt,It,Dt,Nt,_t,zt,jt,Rt,Vt,Ut,Bt,Ht,Qt,Wt,Gt,Zt,Kt,Jt,Xt,Yt,en,tn,nn,on,sn,rn,ln,an,cn,un,dn,pn,mn,fn,hn,gn,vn,yn,$n,xn,bn,An,wn,Tn,Pn,kn,Cn,Ln,Sn,Mn,En,On,Fn,qn,In,Dn,Nn,_n,zn,jn,Rn,Vn,Un,Bn,Hn,Qn,Wn,Gn,Zn,Kn,Jn,Xn,Yn,eo,to,no,oo,so,ro,lo,ao,io,co,uo,po,mo,fo,ho,go,vo,yo,$o,xo,bo,Ao,wo,To,Po,ko,Co,Lo,So,Mo,Eo,Oo,Fo,qo,Io,Do,No=window.atob("VmluY2VudCBCb3NzeQ==")+"";l=new Lp({props:{value:"oefpé`toumape",$$slots:{default:[Mp]},$$scope:{ctx:e}}});let _o=e[1]&&Ep(e);he=new Ur({props:{href:`https://www.${e[2].toLowerCase()}.com`,$$slots:{default:[Fp]},$$scope:{ctx:e}}});let zo=!0!==navigator.standalone&&function(e){let t,n,o,s;return n=new Ur({props:{href:"http://flyingeek.github.io/lido-online/index.html",$$slots:{default:[qp]},$$scope:{ctx:e}}}),{c(){t=N("Pour mémoire, dans un navigateur, il suffit de partager l'url ou "),Be(n.$$.fragment),o=N(".")},m(e,r){O(e,t,r),He(n,e,r),O(e,o,r),s=!0},i(e){s||(qe(n.$$.fragment,e),s=!0)},o(e){Ie(n.$$.fragment,e),s=!1},d(e){e&&F(t),Qe(n,e),e&&F(o)}}}(e);je=new Ur({props:{href:"https://bugs.webkit.org/show_bug.cgi?id=238318",$$slots:{default:[Ip]},$$scope:{ctx:e}}}),Xe=new hi({props:{value:"0"}}),rt=new hi({props:{value:"0"}}),dt=new hi({props:{value:"33"}}),ft=new hi({props:{value:"0"}}),Mt=new Ur({props:{href:e[0],$$slots:{default:[Dp]},$$scope:{ctx:e}}}),Nt=new Ur({props:{href:"http://www.ogimet.com/guia_gramet.phtml.en",$$slots:{default:[Np]},$$scope:{ctx:e}}}),pn=new Ur({props:{href:"https://www.youtube.com/watch?v=Y7QdgkLEMtI",$$slots:{default:[_p]},$$scope:{ctx:e}}}),hn=new Pp({props:{tabindex:"-1",src:"https://p169.p3.n0.cdn.getcloudapp.com/items/yAu14LGP/55eed601-f463-4eee-8d47-87d290d3ceb2.mp4",title:"Installation\\nPLUGIN",forcePreview:!1,figcaption:"🎥 Installation d'un plugin (internet requis)"}});let jo=Object.entries(Dc),Ro=[];for(let t=0;t<jo.length;t+=1)Ro[t]=jp(Sp(e,jo,t));const Vo=e=>Ie(Ro[e],1,1,(()=>{Ro[e]=null}));return Pn=new Pp({props:{tabindex:"-1",src:"https://p169.p3.n0.cdn.getcloudapp.com/items/KouJeA4l/42ec3a9e-a573-41cb-bd34-763da10c514c.mp4",title:"Utilisation\\nOFP2MAP-MENU",forcePreview:!1,figcaption:"🎥 plugin OFP2MAP-MENU (internet requis)"}}),qn=new Ur({props:{href:"https://github.com/flyingeek/lido-online/commits/master",$$slots:{default:[Rp]},$$scope:{ctx:e}}}),Bn=new Ur({props:{href:"https://equal-earth.com/physical/",$$slots:{default:[Vp]},$$scope:{ctx:e}}}),Qn=new Ur({props:{href:"http://equal-earth.com",$$slots:{default:[Up]},$$scope:{ctx:e}}}),Gn=new Ur({props:{href:"http://www.shadedrelief.com/north-america/",$$slots:{default:[Bp]},$$scope:{ctx:e}}}),Yn=new Ur({props:{href:"https://maps.lib.utexas.edu/maps/polar.html",$$slots:{default:[Hp]},$$scope:{ctx:e}}}),ro=new Ur({props:{href:`https://www.${e[2].toLowerCase()}.com`,$$slots:{default:[Qp]},$$scope:{ctx:e}}}),yo=new Ur({props:{href:"https://github.com/flyingeek/lido-online",$$slots:{default:[Wp]},$$scope:{ctx:e}}}),xo=new Ur({props:{href:"https://github.com/flyingeek/ofp-gramet-aws",$$slots:{default:[Gp]},$$scope:{ctx:e}}}),Mo=new Ur({props:{href:"https://flyingeek.github.io/flytax/",rel:"noopener",$$slots:{default:[Zp]},$$scope:{ctx:e}}}),qo=new Ur({props:{href:"https://apps.apple.com/app/id364904503",$$slots:{default:[Kp]},$$scope:{ctx:e}}}),{c(){t=I("section"),n=I("h2"),n.textContent="Préambule",o=z(),s=I("p"),r=N("OFP2MAP "),Be(l.$$.fragment),a=N(" est une application PWA (ou Web Application), elle peut être lancée soit depuis un navigateur, soit depuis l'écran d'accueil de l'iPad. Initialement, simple convertisseur de l'OFP en KML, OFP2MAP est devenu une vraie application de cartographie. OFP2MAP nécessite des navigateurs récents pour fonctionner. Safari 14 iOS/Mac est compatible, Chrome 83 fonctionne aussi."),i=z(),c=I("p"),c.textContent="L'OFP ne transite sur aucun serveur, seule une route calculée (basée sur au plus 21 stations météo) est transmise à l'hébergeur du proxy (voir plus bas) puis à Ogimet.com pour récupérer le Gramet. L'app ne collecte aucune donnée.",u=z(),d=I("p"),d.innerHTML='Avant d&#39;utiliser OFP2MAP en vol, il est préférable de lire la rubrique <a href="#/help_offline">Mode hors ligne</a>. Ensuite le mémo visuel devrait vous permettre de vous débrouiller. Vos retours seront appréciés pour faire évoluer l&#39;app. En cas de problèmes, merci de m&#39;envoyer l&#39;OFP concerné par mail.',p=z(),m=I("section"),m.innerHTML='<h2 id="md_mémo-visuel">Mémo visuel</h2> \n<svg viewBox="0 0 1194 834" style="width: 100%; height: auto; display: block"><image xlink:href="./images/map-help.webp" x="0" y="0" height="100%" width="100%"></image><a xlink:href="#/help_utilisation"><title>Choix projection</title><rect x="7" y="64" width="147" height="137" fill="transparent"></rect></a><a xlink:href="#/help_offline"><title>Mode hors ligne</title><rect x="162" y="74" width="151" height="162" fill="transparent"></rect></a><a xlink:href="#/help_ephemerides"><title>Éphémérides du vol</title><polygon points="369,108,368,180,545,175,547,109,639,69,692,69,693,26,632,27,621,59,529,105" fill="transparent"></polygon></a><a xlink:href="#/help_gramet"><title>GRAMET</title><polygon points="576,142,575,252,753,250,753,142,702,142,739,64,791,64,792,26,720,25,725,62,685,142" fill="transparent"></polygon></a><a xlink:href="#/help_position"><title>Position Estimée</title><polygon points="820,25,821,137,790,136,791,240,874,247,879,146,938,142,926,90,898,88,903,26" fill="transparent"></polygon></a><a xlink:href="#/help_gramet"><title>GRAMET</title><polygon points="737,391,738,430,852,425,850,388" fill="transparent"></polygon></a><a xlink:href="#/help_etops"><title>ETOPS</title><polygon points="916,201,922,334,1021,310,1009,205,962,197,951,20,932,18,937,67,946,79,949,201" fill="transparent"></polygon></a><a xlink:href="#/help_etops"><title>ETOPS</title><rect x="559" y="568" width="215" height="104" fill="transparent"></rect></a><a xlink:href="#/help_export"><title>Export</title><rect x="163" y="35" width="64" height="25" fill="transparent"></rect></a><a xlink:href="#/help_plugins"><title>Plugins</title><polygon points="1023,26,1076,26,1076,66,1089,94,1084,127,967,125,964,95,1017,95" fill="transparent"></polygon></a><a xlink:href="#/help_reglages_des_calques"><title>Réglages des calques</title><rect x="1152" y="76" width="39" height="33" fill="transparent"></rect></a><a xlink:href="#/help_reglages_des_calques"><title>Réglages des calques</title><rect x="1048" y="200" width="90" height="45" fill="transparent"></rect></a><a xlink:href="#/help_position"><title>Position GPS</title><rect x="1068" y="293" width="112" height="89" fill="transparent"></rect></a><a xlink:href="#/help_position"><title>Position GPS</title><rect x="1155" y="117" width="31" height="30" fill="transparent"></rect></a><a xlink:href="#/help_reglages_des_calques"><title>Style terrains</title><rect x="88" y="541" width="144" height="97" fill="transparent"></rect></a><a xlink:href="#/help_updates"><title>Cycle AIRAC</title><rect x="1108" y="721" width="82" height="58" fill="transparent"></rect></a></svg>',f=z(),h=I("br"),g=z(),v=I("section"),y=I("h2"),y.textContent="Utilisation",$=z(),x=I("ol"),b=I("li"),A=I("p"),w=N("Dans Pilot Mission, onglet "),T=I("strong"),T.textContent="Dossier de vol",P=N(", affichez le PDF nommé "),k=I("strong"),k.textContent="Dossier de vol OFP",C=N(". Sur la gauche, cliquez sur le carré avec une flèche vers le haut. Choisissez "),L=I("strong"),L.textContent="Enregistrer dans Fichiers",M=N(". Dans l'app, c'est cet OFP qu'il faut ensuite sélectionner. "),_o&&_o.c(),E=z(),D=I("li"),_=I("p"),_.textContent=`La carte par défaut dépend de la distance: ${e[2]}, puis Mercator jusqu'à 1500nm puis Lambert. Il est possible sur la carte, en haut à gauche, de basculer sur d'autres projections :`,j=z(),R=I("ul"),V=I("li"),V.innerHTML="<p><strong>Mercator</strong></p> \n<p>Projection Web Mercator avec un thème est inspiré des cartes VFR. Il y a 12 niveaux de zoom, dont 6 disponibles off-line</p>",B=z(),H=I("li"),H.innerHTML="<p><strong>Lambert North</strong></p> \n<p>Les parallèles sécants sont 30N et 65N, elle est recommandée au-dessus du 30N</p>",Q=z(),W=I("li"),W.innerHTML="<p><strong>Lambert South &amp; Pacific</strong></p> \n<p>Les parallèles sécants sont 30N et 15S, elles sont recommandées sous 30N</p>",G=z(),Z=I("li"),Z.innerHTML="<p><strong>Stéréographique</strong></p> \n<p>Une carte stéréographique polaire, son domaine d&#39;utilisation est au dessus du 60N</p>",K=z(),J=I("li"),J.innerHTML="<p><strong>Artic</strong></p> \n<p>Une carte physique basée sur une projection azimutale équivalente de Lambert centrée sur le pôle nord</p>",X=z(),Y=I("li"),Y.innerHTML="<p><strong>The World</strong></p> \n<p>Un Atlas politique, c&#39;est une projection Times. Les étiquettes sont en anglais.</p>",ee=z(),te=I("li"),te.innerHTML="<p><strong>=Politique=</strong></p> \n<p>Un Atlas politique basé sur une projection Equal Earth (qui montre les continents et les pays à leur taille réelle). Les étiquettes sont en français. Cet Atlas est moins chargé que The World.</p>",ne=z(),oe=I("li"),oe.innerHTML="<p><strong>=Physique=</strong></p> \n<p>Un Atlas physique basé sur une projection Equal Earth. Les étiquettes sont en français.</p>",se=z(),re=I("li"),re.innerHTML="<p><strong>NAM Physical</strong></p> \n<p>Un Atlas physique du continent Nord-Américain. Les étiquettes sont en anglais, les altitudes sont en mètres. C&#39;est une projection azimutale de Lambert centrée sur 45N095W.</p>",le=z(),ae=I("li"),ie=I("p"),ce=I("strong"),ce.textContent=`${e[2]} 2022`,ue=z(),de=I("p"),pe=N("Une carte VFR qui couvre France/Belgique/Luxembourg/Suisse. "),me=N(No),fe=N(" a autorisé son utilisation. La dernière version est disponible sur "),Be(he.$$.fragment),ge=N("."),ve=z(),ye=I("ol"),ye.innerHTML='<li>Navigation dans la carte: on peut avec un doigt déplacer la carte, zoomer ou orienter la carte avec deux doigts.\n<strong><span class="big">☞</span> Il est aussi possible de modifier l&#39;angle de vue en balayant de bas en haut avec deux doigts</strong>.</li>',$e=z(),xe=I("br"),be=z(),Ae=I("blockquote"),Ae.innerHTML="<p>OFP2MAP est compatible avec l&#39;utilisation d&#39;une souris, d&#39;un trackpad ou d&#39;un clavier, y compris sur iPad.<br/> \n<kbd>◀︎</kbd>  <kbd>▶︎</kbd>  <kbd>▲</kbd>  <kbd>▼</kbd> pour translater, simultanément avec <kbd><strong>⇧</strong></kbd> pour tilter ou orienter. <kbd>+</kbd> et <kbd>-</kbd> pour le zoom. Il faut que la carte ait le focus (indiqué en bas à gauche par une bordure bleu), au besoin cliquez la carte ou utilisez <kbd>⇥</kbd>.</p>",we=z(),Te=I("section"),Pe=I("h2"),Pe.textContent="Particularités de l'iPad",ke=z(),Ce=I("p"),Ce.textContent="OFP2MAP ne peut être lancé que depuis l'écran d'accueil, l'application se lance en plein écran. On ne peut pas recharger la page comme dans un navigateur : il faudra pour cela aller dans le menu d'aide (cet écran) ou un bouton spécifique sera affiché en haut en mode portrait et en bas à gauche en mode paysage. En mode \"Split View\" ou sur iPhone le bouton est dans le menu général (Hamburger).",Le=z(),Se=I("p"),Me=N("Pour partager le lien vers OFP2MAP, utilisez le bouton situé en haut sur cette page, ou le lien situé sous le logo sur la page d'accueil, puis utilisez AirDrop. "),zo&&zo.c(),Ee=z(),De=I("p"),De.textContent="À noter que parfois, des bugs d'affichage peuvent apparaître :  lorsque l'on retourne sur l'app, l'app est zoomée, il faut alors juste dézoomer en utilisant un pinch de deux doigts sur la barre de menu. Il est aussi possible de fermer (tuer) l'app,  même en mode déconnecté, pour la relancer.",Ne=z(),_e=I("p"),ze=N("Sous ios15 un "),Be(je.$$.fragment),Re=N(" existe dans l'application: il est parfois impossible de changer de carte ou de mofifier l'heure de décollage. Il faut tuer l'app et la relancer."),Ve=z(),Ue=I("blockquote"),Ue.innerHTML="<p>Sur un iPhone, sous iOS15+, il est recommandé d&#39;installer OFP2MAP sur l&#39;écran d&#39;accueil</p>",We=z(),Ge=I("section"),Ze=I("h2"),Ke=N("Mode hors ligne "),Je=I("span"),Be(Xe.$$.fragment),Ye=z(),et=I("p"),et.textContent="Une fois un premier OFP chargé, il est possible même en mode déconnecté de charger un autre OFP pour l'exporter. Le cache de l'App vous permettra de naviguer sur les cartes déjà visualisées. Pour mettre en cache les cartes, il suffit de les consulter.",tt=z(),nt=I("p"),ot=N("Pour mettre rapidement en cache un vol, il existe à droite du sélecteur de carte, un bouton de mise en cache de la projection : "),st=I("span"),Be(rt.$$.fragment),lt=N(". Ce bouton ne s'affiche que si la projection n'est pas encore dans le cache. Sur la MERCATOR, seule la route sera mise en cache et le niveau de détails sera limité à un zoom < 8 (jusqu'à zoom < 11 sur les terrains de départ, destination et dégagement). Pour les autres projections, c'est la totalité de la carte qui sera mise en cache."),at=z(),it=I("p"),ct=N("Le bouton affiche la progression du téléchargement : "),ut=I("span"),Be(dt.$$.fragment),pt=N(", puis il disparait une fois la projection en cache. En cas d'erreur, il affiche: "),mt=I("span"),Be(ft.$$.fragment),ht=N(", et vous pouvez faire une nouvelle tentative."),gt=z(),vt=I("p"),vt.textContent=`Les premières mises en cache peuvent prendre du temps : sur la Mercator, un vol LC peut nécessiter le téléchargement de 70Mo de données. Les caches des autres projections utilisent : 7Mo pour la NORTH, 4Mo pour la PACIFIC, 7Mo pour la SOUTH, 32Mo pour THE WORLD, 32Mo pour NAM Physical, 40Mo pour =Physique=, 45Mo pour =Politique=, 14Mo pour Artic, et 48Mo pour ${e[2]}.`,yt=z(),$t=I("p"),$t.textContent="Si vous êtes connecté à un réseau limité (4G AF, Wifi en vol), le cache peut ne pas se charger, dans ce cas, désactivez temporairement le réseau, fermez (tuez) l'application et rechargez l'OFP.",xt=z(),bt=I("blockquote"),bt.innerHTML="<p>Il faut penser à mettre en cache la Mercator à chaque vol et il n&#39;est pas possible d&#39;utiliser la 4G AF ou le Wifi PN en vol.</p>",At=z(),wt=I("section"),wt.innerHTML='<h2 id="md_réglages-des-calques-svelte-md-block-tag-166">Réglages des calques <svg><use xlink:href="#layers-symbol"></use></svg></h2> \n<p><figure class="right"><img src="./images/layers-settings.webp" alt="layers settings help"/><figcaption>Réglages des calques</figcaption></figure>La carte, en haut à droite, dispose d&#39;un bouton pour personnaliser les calques et les couleurs. Un calque contient un type d&#39;information, par exemple les cercles ETOPS, les FIR réglementées, les tracks, la route...\nIl est possible d&#39;afficher ou de masquer chaque calque en utilisant la coche qui précède son nom. La plupart des calques permettent de choisir la couleur et l&#39;opacité.</p> \n<p>Les réglages s&#39;appliquent globalement, c&#39;est à dire, pour toutes les projections. Exception : pour les FIR, <svg class="eye"><use xlink:href="#eye-symbol"></use></svg> permet, en plus, de masquer le calque sur la projection actuelle. Il est alors indiqué <svg class="eye"><use xlink:href="#eye-off-symbol"></use></svg> calque masqué sur cette projection.\n<br/>\nDans un soucis de lisibilité, certains calques sont automatiquement désactivés, il est alors indiqué  <svg class="eye deactivated"><use xlink:href="#eye-off-symbol"></use></svg> ⚠️ calque désactivé sur cette projection.</p> \n<p>Pour les aéroports (le type avion est déterminé dans l&#39;OFP), il est possible de choisir entre 5 styles:</p> \n<ul><li><strong>statuts</strong> reprend les couleurs du statut telles que définies dans le Manex C.</li> \n<li><strong>vert/rouge</strong> reprend le code couleur des Regional Planning Chart, il y ajoute le symbole <span style="color: #062DF8;">✚</span> pour les terrains de support médical, et, pour les distinguer des adéquats orange, les emergency orange sont représentés par une étoile.</li> \n<li><strong>bleu/vert/rouge</strong> permet de distinguer les adéquats de support médical par la couleur de l&#39;icône.</li> \n<li><strong>médical</strong> n&#39;affiche que les terrains de support médical</li> \n<li><strong>reco &amp; eao</strong> n&#39;affiche que les terrains de reconnaissance de type B et C. Les types C sont indiqués par le symbole ©, les types B disposant d&#39;un EAO par 🎥</li></ul> \n<blockquote><p>Le statut est aussi disponible en cliquant sur un terrain (popup).</p></blockquote> \n<p>Trois boutons permettent la sauvegarde, la restauration ou un retour aux valeurs par défaut. Le bouton RESTAURER permet, après avoir fait des modifications temporaires (non sauvegardées), de revenir rapidement aux réglages précédents.</p> \n<blockquote><p>Pour vous entraîner, je vous recommande de modifier la couleur des terrains en vert/rouge sur LC ou bleu/vert/rouge sur MC, et de sauvegarder votre choix.</p></blockquote> \n<p><strong>Mode FOCUS </strong></p> \n<p>C&#39;est un mode pensé pour basculer rapidement sur d&#39;autres réglages pour un usage ponctuel. Par défaut le mode FOCUS n&#39;affiche que la route. Il s&#39;active en cliquant sur FOCUS dans le champ ROUTE. Pour quitter ce mode, réaffichez les réglages et cliquez à nouveau sur le bouton.</p> \n<p>Le mode FOCUS est personnalisable : Après avoir activé le mode MODE FOCUS, réaffichez les réglages et modifiez les à votre convenance. Lorsque vous quitterez le mode FOCUS, ce jeu de réglages sera sauvegardé séparément et il sera rechargé à la prochaine activation.</p> \n<p>Si nécessaire, un bouton permet de revenir aux valeurs par défaut.</p> \n<blockquote><p>Idées pour utiliser ce mode : changer la couleur de la route pour The World; avoir un jeu de réglages pour la présentation aux pax; ...</p></blockquote>',Tt=z(),Pt=I("section"),kt=I("h2"),kt.textContent="GRAMET",Ct=z(),Lt=I("p"),St=N("Le GRAMET est un météogramme représentant le temps et l'espace. Il indique, en tout point de la route, et à l'heure de passage estimée, une coupe verticale de la météo prévue.\nLe GRAMET est réalisé par "),Be(Mt.$$.fragment),Et=N(" à partir d'une route calculée. Il est possible d'afficher le GRAMET et sa route sur la carte. La route est particulièrement utile lors des vols océaniques car il n'y a aucune station en mer.\nPour construire la route du GRAMET, on utilise non pas les waypoints, mais au plus 21 stations météo (WMO). Il y a au total 13000 WMO dans le monde. Le GRAMET débute toujours à l'heure hh:00. Pour un decollage à 19h30, il débutera à 19h, pour un décollage à 19h31, il débutera à 20h. Pour les OFP anciens, c'est l'heure actuelle qui est envoyée. En mode déconnecté, OFP2MAP utilise la version du GRAMET qu'il a mis en cache pendant 48h. Après l'heure de décollage initialement prévue, vous pouvez forcer une mise à jour, soit en rechargeant l'ofp, soit en changeant brièvement de page."),Ot=z(),Ft=I("p"),Ft.innerHTML='Pour afficher le Gramet, cliquez sur sa miniature dans la barre de menu. Pour afficher la route, direction le réglage des calques de la carte. Par défaut elle est affichée en bleu. En fonction de l&#39;heure de décollage (modifiable), le Gramet et sa miniature affichent la position avion. Avant l&#39;horaire prévu de décollage, un bouton play <span class="btn-simulator-play" style="font-size: 24px; line-height:24px; --stroke-width: 2px"></span> permet de lancer une animation.',qt=z(),It=I("p"),Dt=N("Pour mieux comprendre le GRAMET, je vous conseille son "),Be(Nt.$$.fragment),_t=N("."),zt=z(),jt=I("blockquote"),jt.innerHTML='<p>Le site ogimet est indisponible lorsqu&#39;il met à jour ses données, cela intervient le plus souvent entre minuit et 6h (heure française), il renvoie alors une erreur &quot;503 no grib data&quot;. Par ailleurs, ogimet est saturé  dans la tranche 18h30-20h00, et cela peut entraîner des erreurs s&#39;il met plus de 30 secondes à répondre. Cliquer sur <svg style="stroke: red; transform: rotate(180deg); height: 20px; width: 20px;"><use xlink:href="#info-symbol"></use></svg> vous affichera des consignes.</p>',Rt=z(),Vt=I("section"),Vt.innerHTML='<h2 id="md_position-avion-svelte-md-block-tag-172svelte-md-block-tag-173">Position avion <svg style="transform: scale(1.4,1.4); margin-left:5px;"><use xlink:href="#takeoff-symbol"></use></svg><svg style="transform: scale(1.4,1.4); margin-left:8px;"><use xlink:href="#geolocate-symbol"></use></svg></h2> \n<p>L&#39;avion dans la barre de menu <svg><use xlink:href="#takeoff-symbol"></use></svg> permet d&#39;afficher ou de masquer la position estimée <svg style="color: var(--plane-color)"><use xlink:href="#location-symbol"></use></svg> sur la route en prenant en compte les estimées de l&#39;OFP. En cas d&#39;erreur lors de reconnaissance des waypoints, la position sera basée sur un simple ratio horaire, merci de me transmettre l&#39;OFP dans ce cas (ce sera signalé par un avion rouge dans la barre de menu et par l&#39;absence des éphémérides). L&#39;heure de décollage est modifiable et permet d&#39;ajuster la position estimée à la minute près.</p> \n<p>La position estimée est affichée en permanence sur le GRAMET, la miniature du GRAMET et les timelines des éphémérides. Pour un OFP ancien, la position estimée sera toujours la destination.</p> \n<p>OFP2MAP peut aussi utiliser un GPS. En cliquant sur <svg><use xlink:href="#geolocate-symbol"></use></svg>, la position GPS <svg style="color: #1da1f2"><use xlink:href="#location-symbol"></use></svg> sera affichée sur la carte. Si la localisation GPS semble ne pas fonctionner (au sol ou en vol avec un gps externe), vérifiez que vous n&#39;avez pas désactivé la localisation dans iPad / Réglages / Confidentialité / Service de localisation / Sites Safari. Vous devez choisir «Lorsque l&#39;app est active» ou «Demander la prochaine fois». Le Bouton <svg><use xlink:href="#geolocate-symbol"></use></svg> a trois positions: OFF, ON centré, ON non centré. Si, dans la position ON centré, vous déplacez la carte, il passe en ON non centré. L&#39;appui suivant le repassera en ON centré. Un dernier appui le mettra sur OFF.</p> \n<blockquote><p>C&#39;est toujours la position estimée qui est utilisée pour les éphémérides</p></blockquote>',Ut=z(),Bt=I("section"),Bt.innerHTML='<h2 id="md_etops">ETOPS</h2> \n<p>La capacité ETOPS est determinée depuis l&#39;OFP et les cercles sont tracés. Un drapeau <span style="background-color: var(--bs-warning); padding: 0 3px; font-size: 9px;">ETOPS</span> apparait dans le pavé d&#39;information de l&#39;OFP si le carburant est limitatif (20mn, soit environ 2T de marge sur 777). La marge minimum de carburant ETOPS est affiché si vous cliquez sur le pavé d&#39;information. Pour avoir plus d&#39;informations, consultez Pilot Mission/FlightLog/ETOPS.</p> \n<p>Les appuis ETOPS sont affichés avec l&#39;icône <span class="big" style="color: #FC2403FF;">▲</span> (dans la couleur des cercles ETOPS). Les adéquats d&#39;entrée et de sortie ETOPS avec le symbole <span class="big" style="color: #095;">▲</span> (dans la couleur des adéquats du style utilisé). La couleur des cercles des points d&#39;entrée et de sortie est celle de la route.</p> \n<blockquote><p>Il faut cliquer sur l’icône d’un appui ETOPS pour connaître son statut et son niveau sûreté</p></blockquote>',Ht=z(),Qt=I("section"),Qt.innerHTML='<h2 id="md_éphémérides-☀️🌘🔭">Éphémérides ☀️🌘🔭</h2> \n<figure class="right"><img src="./images/ephemerides.webp" alt="éphémerides exemple"/><figcaption>Exemple avec aurore boréale prévue</figcaption></figure> \n<p>Les éphémérides du vol utilisent uniquement la position estimée (réglée par l&#39;heure de décollage). Un clic sur le widget révèle les éphémérides avec 2 timelines. La première synthétise le jour et la nuit le long du vol ainsi que les zones favorables à l&#39;observation des aurores boréales. La seconde montre les prévisions de Kp. Le Kp permet de prédire les aurores boréales. Entre ces deux timelines, la Lune est un objet dynamique: l&#39;angle des cornes va se modifier en fonction de la position estimée et cet angle est également calculé pour les levers et les couchers. Pour le soleil, l&#39;aube nautique est indiquée, car ce n&#39;est pas tout à fait la nuit: en vol l&#39;horizon est partiellement discernable, et au sol on distingue encore le relief.</p> \n<p>Le symbole du widget est dynamique:</p> \n<ul><li>☀️ si le soleil est visible pendant le vol</li> \n<li>🌕🌖🌗🌘🌑🌒🌓🌔 si seule la lune est visible pendant le vol</li> \n<li>🔭 si vous restez dans le noir</li> \n<li>un <span class="aurora">halo vert</span> se superpose si les conditions sont favorables à l&#39;observation d&#39;aurores boréales</li></ul> \n<p><strong>Précision des calculs :</strong> si vous avez bien recalé la position estimée d&#39;OFP2MAP sur la carte (en modifiant l&#39;heure de décollage), la précision attendue est de ±2 min sous 72° de latitude et de 10 min au-delà. Pour la lune, on est plutôt sur une précision de ±5 min. Le calcul n&#39;est valable que pour la croisière, reportez vous à EWAS pour un calcul précis au départ ou à destination.</p> \n<p><strong>Correction d&#39;altitude :</strong> Si votre niveau de vol est différent de l&#39;OFP, appliquez une correction de 15s/1000ft pour le soleil. Exemple: FL OFP 400, FL réel 360, il faut ajouter 1min pour le lever, et soustraire 1min pour le coucher.</p> \n<details><summary tabindex="-1"><b>Cliquez ici</b> pour afficher un rappel sur la chronologie des événements astronomiques</summary> \n<p>Pour le soleil:</p> \n<table class="table"><thead><tr><th>Angle</th><th>▲ Soleil levant</th><th>▼ Soleil couchant</th></tr></thead> \n<tbody><tr><td>-0.83°</td><td>↑ Lever du soleil (fin aube civile)</td><td>↓ Coucher du soleil (début crépuscule civil)</td></tr> \n<tr><td>-6°</td><td>↑ début aube civile (jour civil)</td><td>↓ fin du crépuscule civil (début nuit civile)</td></tr> \n<tr><td>-12°</td><td>↑ début aube nautique (jour nautique)</td><td>↓ fin du crépuscule nautique (début nuit nautique)</td></tr></tbody></table> \n<p>Et pour la lune:</p> \n<table class="table moon"><thead><tr><th>Jour</th><th>Nom</th><th>Hémisphère nord</th><th>Hémisphère sud</th></tr></thead> \n<tbody><tr><td>1</td><td>Nouvelle lune</td><td>🌑</td><td>🌑</td></tr> \n<tr><td></td><td>Premier croissant</td><td>🌒</td><td>🌘</td></tr> \n<tr><td>7</td><td>Premier quartier</td><td>🌓</td><td>🌗</td></tr> \n<tr><td></td><td>Lune gibbeuse croissante</td><td>🌔</td><td>🌖</td></tr> \n<tr><td>14</td><td>Pleine lune</td><td>🌕</td><td>🌕</td></tr> \n<tr><td></td><td>Lune gibbeuse décroissante</td><td>🌖</td><td>🌔</td></tr> \n<tr><td>21</td><td>Dernier quartier</td><td>🌗</td><td>🌓</td></tr> \n<tr><td></td><td>Dernier croissant</td><td>🌘</td><td>🌒</td></tr></tbody></table></details> \n<blockquote><p>Les éphémérides utilisent uniquement la position estimée. Si l&#39;avion est rouge, les éphémérides ne s&#39;affichent pas et il faut m&#39;envoyer l&#39;OFP par mail.</p></blockquote>',Wt=z(),Gt=I("section"),Gt.innerHTML='<h2 id="md_export-kml">Export KML</h2> \n<p>La Page Export permet d&#39;exporter la route et les tracks au format KML, elle dispose de ses propres réglages pour générer le KML. Pour l&#39;export il est possible d&#39;ajouter des repères. Les repères sont utiles pour afficher des informations textuelles dans MapsMe ou Avenza. Le bouton [COMME CARTE] permet de récupérer les couleurs choisies pour la carte.</p> \n<p>Sur iPad, lors du téléchargement, l&#39;export des fichiers KML affiche une page un peu particulière, utilisez le bouton <svg style="vertical-align: bottom;"><use xlink:href="#share-symbol"></use></svg> pour choisir l&#39;app qui recevra le fichier. Cliquez en haut à gauche sur OK pour revenir à OFP2MAP. Alternativement, vous pouvez utiliser , sur cette même page, [Options...] pour définir une app qui recevra les fichiers kml par défaut, puis utiliser Ouvrir dans « nom de l&#39;app ».</p> \n<p>Un raccourci peut être lancé depuis la page Export, il recevra les fichiers KML, la route Lido et le Gramet. Le nom du raccourci est modifiable, il faut que le raccourci soit installé avant de le lancer.</p>',Zt=z(),Kt=I("section"),Kt.innerHTML='<h2 id="md_ftl">FTL</h2> \n<p>Le calcul FTL est effectué uniquement à partir de la rotation CDB incluse dans l&#39;OFP.</p> \n<p>La Page FTL calcule les limitations de TSV en réalisation conformément au Manex. OFP2MAP ne peut calculer que les limitations standard ou avec repos en vol (MANEX 07.05.04.A ou 07.05.04.C). Pilot Mission sur la page Equipage vous donnera (parfois) les limitations satisfaisant le MANEX 07.05.04.A ou 07.05.04.B.</p> \n<p>Pour rappel dans le cas 07.05.04B (TSV avec prolongation sans repos envol), la marge CDB ne doit s&#39;appliquer qu&#39;en faisant le calcul standard (07.05.04A). Autrement dit <strong>le calcul en incluant les marges d&#39;OFP2MAP est toujours juste</strong> puisqu&#39;à ce jour AF ne fait pas se service fractionné (07.05.04.D).</p> \n<p><strong>Concernant les PNC</strong>, la butée n&#39;est pas calculée car c&#39;est inutile: Au départ de Paris, il y a une butée horaire de départ (la marge CDB ne s&#39;applique pas), et sur les vols retours, le TSV AF peut être dépassé sous réserve d&#39;adaptation du service et/ou de repos additionnel (RADD). Enfin, le TSV FTL max des PNC est toujours (à rotation identique) le TSV FTL max des pilotes, seul le repos devant être pris à bord change. OFP2MAP vous indique le repos PNC mini pour le TSV max FTL. Il est à noter que les limitations PNC de Pilot Mission sont calculées en considérant un repos à bord d&#39;une durée correspondante au repos mini PNC AF, ce qui est peu utile...</p>',Jt=z(),Xt=I("section"),Yt=I("h2"),Yt.textContent="Plugins 🧩",en=z(),tn=I("p"),tn.textContent="Bug: Sur un iPad en ios 17.2, il faut faire une rotation de l'écran pour voir le résultat d'un plugin. Pour cette raison les plugins de base sont à présent intégrés à OFP2MAP.",nn=z(),on=I("p"),on.textContent="Il reste néanmoins possible de lancer un plugin depuis le pavé d'informations du vol dans la barre de menu, en choisissant Plugins dans le menu.",sn=z(),rn=I("details"),ln=I("summary"),ln.innerHTML="<b>Cliquez ici</b> pour afficher l&#39;ancienne documentation sur les plugins",an=z(),cn=I("div"),un=I("p"),dn=N("Les plugins sont des raccourcis qui doivent être installés au préalable. Si vous avez supprimé l'application Raccourcis, installez là depuis l'App Store et redémarrez votre iPad. Pour installer un plugin,\ncliquez sur le raccourci désiré, puis vous revenez sur OFP2MAP, cliquez sur 🧩 et faites défiler pour sélectionner le plugin. En cas d'alerte \"raccourcis non fiables\", consultez cette "),Be(pn.$$.fragment),mn=N("."),fn=z(),Be(hn.$$.fragment),gn=z(),vn=I("p"),vn.innerHTML="<strong>Liste des plugins :</strong>",yn=z(),$n=I("ul");for(let e=0;e<Ro.length;e+=1)Ro[e].c();xn=z(),bn=I("p"),bn.innerHTML='OFP2MAP-ETOPS et OFP2MAP-FTL fonctionnent en mode offline. Les autres plugins nécessitent d&#39;être connecté. Vous pouvez sauvegarder leurs résultats au format PDF en utilisant <svg style="vertical-align: bottom;"><use xlink:href="#share-symbol"></use></svg>.',An=z(),wn=I("blockquote"),wn.innerHTML="<p>Pour un accès plus rapide aux plugins, je recommande d&#39;installer OFP2MAP-MENU. Il faut ensuite le remonter dans le menu contextuel qui s&#39;affiche en cliquant 🧩.</p>",Tn=z(),Be(Pn.$$.fragment),kn=z(),Cn=I("section"),Ln=I("h2"),Ln.textContent="Mise à jour",Sn=z(),Mn=I("p"),Mn.textContent="L'app détecte les mises à jour automatiquement, normalement vous n'avez rien à faire. Eventuellement un prompt peut\napparaitre vous demandant d'autoriser cette mise à jour. La version AIRAC et le type avion détecté dans l'OFP sont affichés en bas à droite de la carte dans le champ d'attribution.",En=z(),On=I("p"),Fn=N("Après une mise à jour, les dernières nouveautés d'OFP2MAP s'affichent. Le bouton CHANGELOG en haut de cette page permet de consulter l'historique, et vous pouvez aussi consulter la "),Be(qn.$$.fragment),In=N(" sur GitHub. Je poste les nouveautés importantes dans Yammer/Mapsme et Teams/MyConcorde."),Dn=z(),Nn=I("section"),_n=I("h2"),_n.textContent="Crédits 🙏",zn=z(),jn=I("ul"),Rn=I("li"),Rn.textContent="Les données terrains/FIR sont fournies par Olivier Ravet forum Yammer/Mapsme",Vn=z(),Un=I("li"),Be(Bn.$$.fragment),Hn=N(", "),Be(Qn.$$.fragment),Wn=N(" et "),Be(Gn.$$.fragment),Zn=N(" sont des cartes mises dans le domaine public par Tom Patterson."),Kn=z(),Jn=I("li"),Xn=N("Artic est une carte de "),Be(Yn.$$.fragment),eo=z(),to=I("li"),no=N("La dernière version de la carte "),oo=N(e[2]),so=N(" est disponible sur le site "),Be(ro.$$.fragment),lo=z(),ao=I("li"),ao.textContent="Les autres cartes sont de Jean-Baptiste Denizot (OPL 777) forum Yammer/QGIS & Avenza Maps",io=z(),co=I("li"),co.textContent="Le GRAMET provient du site ogimet.com",uo=z(),po=I("li"),po.textContent="Le site est développé en javascript à l'aide du framework SVELTE, les principales librairies utilisées sont PDFJS (conversion pdf en texte), MapboxGL (moteur de carte), proj4js (transformation de cooordonnées), Workbox (service workers).",mo=z(),fo=I("li"),fo.textContent="La partie serveur (un simple proxy pour pouvoir récupérer l'image du GRAMET) est en python.",ho=z(),go=I("li"),vo=N("Eric Delord CDB 777 est l'auteur. Le code source est disponible sur GitHub pour "),Be(yo.$$.fragment),$o=N(" et "),Be(xo.$$.fragment),bo=z(),Ao=I("p"),Ao.textContent="Vous pouvez me contacter sur l’email AF (erdelord@…), sur le canal Team/MyConcorde, sur les forums Yammer mentionnés, ou sur mon compte Twitter @flyingeek.",wo=z(),To=I("p"),To.textContent="L'hébergement des images est normalement fourni par alwaysdata.com (pack gratuit) mais en raison d'un blacklistage sur le réseau internet d'AF, les fonds de cartes sont à présent hébergés sur netlify. Le proxy gramet est lui dorénavant hébergé sur aws. Le site est hébergé sur GitHub.",Po=z(),ko=I("h3"),ko.textContent="Liens",Co=z(),Lo=I("ul"),So=I("li"),Be(Mo.$$.fragment),Eo=N(" une aide aux calculs des frais professionnels (même auteur)."),Oo=z(),Fo=I("li"),Be(qo.$$.fragment),Io=N(" un très bon atlas offline pour l'iPad (prix 3$)."),U(n,"id","md_préambule"),U(t,"id","/help"),U(m,"id","/help_memovisuel"),U(y,"id","md_utilisation"),U(ye,"start","3"),U(v,"id","/help_utilisation"),U(Pe,"id","md_particularités-de-lipad"),U(Te,"id","/help_ipad"),U(Je,"class","cacheButton"),U(Ze,"id","md_mode-hors-ligne-svelte-md-block-tag-57"),U(st,"class","cacheButton"),U(ut,"class","cacheButton cacheProgress"),U(mt,"class","cacheButton cacheError"),U(Ge,"id","/help_offline"),U(wt,"id","/help_reglages_des_calques"),U(kt,"id","md_gramet"),U(Pt,"id","/help_gramet"),U(Vt,"id","/help_position"),U(Bt,"id","/help_etops"),U(Qt,"id","/help_ephemerides"),U(Gt,"id","/help_export"),U(Kt,"id","/help_ftl"),U(Yt,"id","md_plugins-🧩"),U(ln,"tabindex","-1"),U(Xt,"id","/help_plugins"),U(Ln,"id","md_mise-à-jour"),U(Cn,"id","/help_updates"),U(_n,"id","md_crédits-🙏"),U(ko,"id","md_liens"),U(Nn,"id","/help_credits")},m(e,F){O(e,t,F),S(t,n),S(t,o),S(t,s),S(s,r),He(l,s,null),S(s,a),S(t,i),S(t,c),S(t,u),S(t,d),O(e,p,F),O(e,m,F),O(e,f,F),O(e,h,F),O(e,g,F),O(e,v,F),S(v,y),S(v,$),S(v,x),S(x,b),S(b,A),S(A,w),S(A,T),S(A,P),S(A,k),S(A,C),S(A,L),S(A,M),_o&&_o.m(A,null),S(x,E),S(x,D),S(D,_),S(D,j),S(D,R),S(R,V),S(R,B),S(R,H),S(R,Q),S(R,W),S(R,G),S(R,Z),S(R,K),S(R,J),S(R,X),S(R,Y),S(R,ee),S(R,te),S(R,ne),S(R,oe),S(R,se),S(R,re),S(R,le),S(R,ae),S(ae,ie),S(ie,ce),S(ae,ue),S(ae,de),S(de,pe),S(de,me),S(de,fe),He(he,de,null),S(de,ge),S(v,ve),S(v,ye),S(v,$e),S(v,xe),S(v,be),S(v,Ae),O(e,we,F),O(e,Te,F),S(Te,Pe),S(Te,ke),S(Te,Ce),S(Te,Le),S(Te,Se),S(Se,Me),zo&&zo.m(Se,null),S(Te,Ee),S(Te,De),S(Te,Ne),S(Te,_e),S(_e,ze),He(je,_e,null),S(_e,Re),S(Te,Ve),S(Te,Ue),O(e,We,F),O(e,Ge,F),S(Ge,Ze),S(Ze,Ke),S(Ze,Je),He(Xe,Je,null),S(Ge,Ye),S(Ge,et),S(Ge,tt),S(Ge,nt),S(nt,ot),S(nt,st),He(rt,st,null),S(nt,lt),S(Ge,at),S(Ge,it),S(it,ct),S(it,ut),He(dt,ut,null),S(it,pt),S(it,mt),He(ft,mt,null),S(it,ht),S(Ge,gt),S(Ge,vt),S(Ge,yt),S(Ge,$t),S(Ge,xt),S(Ge,bt),O(e,At,F),O(e,wt,F),O(e,Tt,F),O(e,Pt,F),S(Pt,kt),S(Pt,Ct),S(Pt,Lt),S(Lt,St),He(Mt,Lt,null),S(Lt,Et),S(Pt,Ot),S(Pt,Ft),S(Pt,qt),S(Pt,It),S(It,Dt),He(Nt,It,null),S(It,_t),S(Pt,zt),S(Pt,jt),O(e,Rt,F),O(e,Vt,F),O(e,Ut,F),O(e,Bt,F),O(e,Ht,F),O(e,Qt,F),O(e,Wt,F),O(e,Gt,F),O(e,Zt,F),O(e,Kt,F),O(e,Jt,F),O(e,Xt,F),S(Xt,Yt),S(Xt,en),S(Xt,tn),S(Xt,nn),S(Xt,on),S(Xt,sn),S(Xt,rn),S(rn,ln),S(rn,an),S(rn,cn),S(cn,un),S(un,dn),He(pn,un,null),S(un,mn),S(cn,fn),He(hn,cn,null),S(cn,gn),S(cn,vn),S(cn,yn),S(cn,$n);for(let e=0;e<Ro.length;e+=1)Ro[e].m($n,null);S(cn,xn),S(cn,bn),S(cn,An),S(cn,wn),S(cn,Tn),He(Pn,cn,null),O(e,kn,F),O(e,Cn,F),S(Cn,Ln),S(Cn,Sn),S(Cn,Mn),S(Cn,En),S(Cn,On),S(On,Fn),He(qn,On,null),S(On,In),O(e,Dn,F),O(e,Nn,F),S(Nn,_n),S(Nn,zn),S(Nn,jn),S(jn,Rn),S(jn,Vn),S(jn,Un),He(Bn,Un,null),S(Un,Hn),He(Qn,Un,null),S(Un,Wn),He(Gn,Un,null),S(Un,Zn),S(jn,Kn),S(jn,Jn),S(Jn,Xn),He(Yn,Jn,null),S(jn,eo),S(jn,to),S(to,no),S(to,oo),S(to,so),He(ro,to,null),S(jn,lo),S(jn,ao),S(jn,io),S(jn,co),S(jn,uo),S(jn,po),S(jn,mo),S(jn,fo),S(jn,ho),S(jn,go),S(go,vo),He(yo,go,null),S(go,$o),He(xo,go,null),S(Nn,bo),S(Nn,Ao),S(Nn,wo),S(Nn,To),S(Nn,Po),S(Nn,ko),S(Nn,Co),S(Nn,Lo),S(Lo,So),He(Mo,So,null),S(So,Eo),S(Lo,Oo),S(Lo,Fo),He(qo,Fo,null),S(Fo,Io),Do=!0},p(e,[t]){const n={};1024&t&&(n.$$scope={dirty:t,ctx:e}),l.$set(n),e[1]?_o?2&t&&qe(_o,1):(_o=Ep(e),_o.c(),qe(_o,1),_o.m(A,null)):_o&&(Oe(),Ie(_o,1,1,(()=>{_o=null})),Fe());const o={};1024&t&&(o.$$scope={dirty:t,ctx:e}),he.$set(o);const s={};1024&t&&(s.$$scope={dirty:t,ctx:e}),je.$set(s);const r={};1&t&&(r.href=e[0]),1024&t&&(r.$$scope={dirty:t,ctx:e}),Mt.$set(r);const a={};1024&t&&(a.$$scope={dirty:t,ctx:e}),Nt.$set(a);const i={};if(1024&t&&(i.$$scope={dirty:t,ctx:e}),pn.$set(i),0&t){let n;for(jo=Object.entries(Dc),n=0;n<jo.length;n+=1){const o=Sp(e,jo,n);Ro[n]?(Ro[n].p(o,t),qe(Ro[n],1)):(Ro[n]=jp(o),Ro[n].c(),qe(Ro[n],1),Ro[n].m($n,null))}for(Oe(),n=jo.length;n<Ro.length;n+=1)Vo(n);Fe()}const c={};1024&t&&(c.$$scope={dirty:t,ctx:e}),qn.$set(c);const u={};1024&t&&(u.$$scope={dirty:t,ctx:e}),Bn.$set(u);const d={};1024&t&&(d.$$scope={dirty:t,ctx:e}),Qn.$set(d);const p={};1024&t&&(p.$$scope={dirty:t,ctx:e}),Gn.$set(p);const m={};1024&t&&(m.$$scope={dirty:t,ctx:e}),Yn.$set(m);const f={};1024&t&&(f.$$scope={dirty:t,ctx:e}),ro.$set(f);const h={};1024&t&&(h.$$scope={dirty:t,ctx:e}),yo.$set(h);const g={};1024&t&&(g.$$scope={dirty:t,ctx:e}),xo.$set(g);const v={};1024&t&&(v.$$scope={dirty:t,ctx:e}),Mo.$set(v);const y={};1024&t&&(y.$$scope={dirty:t,ctx:e}),qo.$set(y)},i(e){if(!Do){qe(l.$$.fragment,e),qe(_o),qe(he.$$.fragment,e),qe(zo),qe(je.$$.fragment,e),qe(Xe.$$.fragment,e),qe(rt.$$.fragment,e),qe(dt.$$.fragment,e),qe(ft.$$.fragment,e),qe(Mt.$$.fragment,e),qe(Nt.$$.fragment,e),qe(pn.$$.fragment,e),qe(hn.$$.fragment,e);for(let e=0;e<jo.length;e+=1)qe(Ro[e]);qe(Pn.$$.fragment,e),qe(qn.$$.fragment,e),qe(Bn.$$.fragment,e),qe(Qn.$$.fragment,e),qe(Gn.$$.fragment,e),qe(Yn.$$.fragment,e),qe(ro.$$.fragment,e),qe(yo.$$.fragment,e),qe(xo.$$.fragment,e),qe(Mo.$$.fragment,e),qe(qo.$$.fragment,e),Do=!0}},o(e){Ie(l.$$.fragment,e),Ie(_o),Ie(he.$$.fragment,e),Ie(zo),Ie(je.$$.fragment,e),Ie(Xe.$$.fragment,e),Ie(rt.$$.fragment,e),Ie(dt.$$.fragment,e),Ie(ft.$$.fragment,e),Ie(Mt.$$.fragment,e),Ie(Nt.$$.fragment,e),Ie(pn.$$.fragment,e),Ie(hn.$$.fragment,e),Ro=Ro.filter(Boolean);for(let e=0;e<Ro.length;e+=1)Ie(Ro[e]);Ie(Pn.$$.fragment,e),Ie(qn.$$.fragment,e),Ie(Bn.$$.fragment,e),Ie(Qn.$$.fragment,e),Ie(Gn.$$.fragment,e),Ie(Yn.$$.fragment,e),Ie(ro.$$.fragment,e),Ie(yo.$$.fragment,e),Ie(xo.$$.fragment,e),Ie(Mo.$$.fragment,e),Ie(qo.$$.fragment,e),Do=!1},d(e){e&&F(t),Qe(l),e&&F(p),e&&F(m),e&&F(f),e&&F(h),e&&F(g),e&&F(v),_o&&_o.d(),Qe(he),e&&F(we),e&&F(Te),zo&&zo.d(),Qe(je),e&&F(We),e&&F(Ge),Qe(Xe),Qe(rt),Qe(dt),Qe(ft),e&&F(At),e&&F(wt),e&&F(Tt),e&&F(Pt),Qe(Mt),Qe(Nt),e&&F(Rt),e&&F(Vt),e&&F(Ut),e&&F(Bt),e&&F(Ht),e&&F(Qt),e&&F(Wt),e&&F(Gt),e&&F(Zt),e&&F(Kt),e&&F(Jt),e&&F(Xt),Qe(pn),Qe(hn),q(Ro,e),Qe(Pn),e&&F(kn),e&&F(Cn),Qe(qn),e&&F(Dn),e&&F(Nn),Qe(Bn),Qe(Qn),Qe(Gn),Qe(Yn),Qe(ro),Qe(yo),Qe(xo),Qe(Mo),Qe(qo)}}}function Xp(e,t,n){let o,s,r;p(e,Ln,(e=>n(3,s=e))),p(e,zn,(e=>n(1,r=e)));const l=window.atob("Q2FydGFCb3NzeQ==");return e.$$.update=()=>{8&e.$$.dirty&&n(0,o=s?s.ogimetData.url:"http://www.ogimet.com")},[o,r,l,s]}class Yp extends Ge{constructor(e){super(),We(this,e,Xp,Jp,a,{})}}function em(e,t,n){const o=e.slice();return o[6]=t[n][0],o[7]=t[n][1],o}function tm(e,t,n){const o=e.slice();return o[10]=t[n][0],o[11]=t[n][1],o}function nm(e,t,n){const o=e.slice();return o[14]=t[n],o}function om(e){let t,n,o,s;function r(e,t){return 7&t&&(n=null),null==n&&(n=!!e[6].match(gm)),n?rm:sm}let l=r(e,-1),a=l(e),i=Object.entries(e[7]),c=[];for(let t=0;t<i.length;t+=1)c[t]=cm(tm(e,i,t));return{c(){t=I("li"),a.c(),o=z();for(let e=0;e<c.length;e+=1)c[e].c();s=z(),U(t,"class","svelte-1komgcv")},m(e,n){O(e,t,n),a.m(t,null),S(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null);S(t,s)},p(e,n){if(l===(l=r(e,n))&&a?a.p(e,n):(a.d(1),a=l(e),a&&(a.c(),a.m(t,o))),7&n){let o;for(i=Object.entries(e[7]),o=0;o<i.length;o+=1){const r=tm(e,i,o);c[o]?c[o].p(r,n):(c[o]=cm(r),c[o].c(),c[o].m(t,s))}for(;o<c.length;o+=1)c[o].d(1);c.length=i.length}},d(e){e&&F(t),a.d(),q(c,e)}}}function sm(e){let t,n,o=e[6]+"";return{c(){t=I("h2"),n=N(o),U(t,"class","svelte-1komgcv")},m(e,o){O(e,t,o),S(t,n)},p(e,t){7&t&&o!==(o=e[6]+"")&&W(n,o)},d(e){e&&F(t)}}}function rm(e){let t,n=vm(e[6])+"";return{c(){t=I("h2"),U(t,"class","svelte-1komgcv")},m(e,o){O(e,t,o),t.innerHTML=n},p(e,o){7&o&&n!==(n=vm(e[6])+"")&&(t.innerHTML=n)},d(e){e&&F(t)}}}function lm(e){let t,n=mm(e[11])+"";return{c(){t=I("div"),U(t,"class","item svelte-1komgcv")},m(e,o){O(e,t,o),t.innerHTML=n},p(e,o){7&o&&n!==(n=mm(e[11])+"")&&(t.innerHTML=n)},d(e){e&&F(t)}}}function am(e){let t,n=e[11].raw.replace(/^\n\n|\n\n$/,"").split("\n"),o=[];for(let t=0;t<n.length;t+=1)o[t]=im(nm(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=j()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);O(e,t,n)},p(e,s){if(7&s){let r;for(n=e[11].raw.replace(/^\n\n|\n\n$/,"").split("\n"),r=0;r<n.length;r+=1){const l=nm(e,n,r);o[r]?o[r].p(l,s):(o[r]=im(l),o[r].c(),o[r].m(t.parentNode,t))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){q(o,e),e&&F(t)}}}function im(e){let t,n=mm(e[14]).replace("- ",`- <span class="badge bg-${xm(e[10])} ${bm(e[10])}">${hm(e[10])}</span>`)+"";return{c(){t=I("div"),U(t,"class","item svelte-1komgcv")},m(e,o){O(e,t,o),t.innerHTML=n},p(e,o){7&o&&n!==(n=mm(e[14]).replace("- ",`- <span class="badge bg-${xm(e[10])} ${bm(e[10])}">${hm(e[10])}</span>`)+"")&&(t.innerHTML=n)},d(e){e&&F(t)}}}function cm(e){let t;function n(e,t){return"raw"!==e[10]?am:lm}let o=n(e),s=o(e);return{c(){s.c(),t=j()},m(e,n){s.m(e,n),O(e,t,n)},p(e,r){o===(o=n(e))&&s?s.p(e,r):(s.d(1),s=o(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&F(t)}}}function um(e){let t,n="raw"!==e[6]&&om(e);return{c(){n&&n.c(),t=j()},m(e,o){n&&n.m(e,o),O(e,t,o)},p(e,o){"raw"!==e[6]?n?n.p(e,o):(n=om(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&F(t)}}}function dm(t){let n,o=pm(t[0],{version:t[2],limit:t[1]}),s=[];for(let e=0;e<o.length;e+=1)s[e]=um(em(t,o,e));return{c(){n=I("ul");for(let e=0;e<s.length;e+=1)s[e].c();U(n,"class","markdown svelte-1komgcv")},m(e,o){O(e,n,o);for(let e=0;e<s.length;e+=1)s[e].m(n,null);t[5](n)},p(e,[t]){if(7&t){let r;for(o=pm(e[0],{version:e[2],limit:e[1]}),r=0;r<o.length;r+=1){const l=em(e,o,r);s[r]?s[r].p(l,t):(s[r]=um(l),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},i:e,o:e,d(e){e&&F(n),q(s,e),t[5](null)}}}const pm=(e,{version:t,limit:n}={})=>{if(!e)return[];let o=Object.entries(e.CHANGELOG);return t&&(o=o.filter((([e])=>{const n=e.match(/\[([^\]]+)\]/);return!!n&&mt(n[1],t)>0}))),n?o.slice(0,n+1):o};function mm(e){return e.replace(/\*\*(.+?)\*\*/gim,"<b>$1</b>").replace(/\*(.+?)\*/gim,"<i>$1</i>").replace(/_(.+?)_/gim,"<i>$1</i>").replace(/~~(.+?)~~/gim,"<s>$1</s>").replace(/\[(.+?)\]\((#.*?)\)/gim,"<a href='$2'>$1</a>").replace(/\[(.+?)\]\((.*?)\)/gim,"<a href='$2' rel='noreferrer' target='_blank'>$1</a>").replace(/^$/g,"<br />").replace(/\{CBNAME\}/g,window.atob("Q2FydGFCb3NzeQ==")).trim()}const fm={ADDED:"Ajouté",FIXED:"Corrigé",DEPRECATED:"Obsolète",CHANGED:"Modifié",REMOVED:"Supprimé",SECURITY:"Sécurité"},hm=e=>fm[e.toUpperCase()]||e,gm=/\[([^\]]+)\].+(\d{4})-(\d{2})-(\d{2})/,vm=e=>e.replace(/\[([^\]]+)\].+(\d{4})-(\d{2})-(\d{2})/,"<span class='version'>$1</span> <span class='date'>$4/$3/$2</span>"),ym={ADDED:"primary",FIXED:"success",DEPRECATED:"warning",CHANGED:"info",REMOVED:"danger",SECURITY:"secondary"},$m={ADDED:"text-white",FIXED:"text-white",DEPRECATED:"text-dark",CHANGED:"text-dark",REMOVED:"text-white",SECURITY:"text-white"},xm=e=>ym[e.toUpperCase()]||"dark",bm=e=>$m[e.toUpperCase()]||"text-light";function Am(e,t,n){let o,{data:s}=t,{setHelpLinks:r=null}=t,{limit:l}=t,{version:a}=t;return ce((()=>{let e;return r&&(e=r(o)),()=>{r&&e()}})),e.$$set=e=>{"data"in e&&n(0,s=e.data),"setHelpLinks"in e&&n(4,r=e.setHelpLinks),"limit"in e&&n(1,l=e.limit),"version"in e&&n(2,a=e.version)},[s,l,a,o,r,function(e){fe[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class wm extends Ge{constructor(e){super(),We(this,e,Am,dm,a,{data:0,setHelpLinks:4,limit:1,version:2})}}function Tm(e){let t,n,o,s,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,w,T,P,k,C,L={ctx:e,current:null,token:null,hasCatch:!1,pending:Cm,then:km,catch:Pm,value:10,blocks:[,,,]};return ze(y=e[6],L),{c(){t=I("div"),n=I("div"),o=I("div"),s=I("div"),a=I("h5"),i=N(e[0]),c=z(),u=I("small"),d=I("input"),p=z(),m=I("label"),m.textContent="Afficher lors des mises à jour",f=z(),h=I("button"),g=z(),v=I("div"),L.block.c(),b=z(),w=I("div"),U(d,"id","display-on-update"),U(d,"class","form-check-input"),U(d,"type","checkbox"),U(m,"for","display-on-update"),U(m,"class","form-check-label"),U(u,"class","d-inline-block ms-4 form-check form-switch"),U(a,"class","modal-title"),U(h,"type","button"),U(h,"class","btn-close"),U(h,"data-dismiss","modal"),U(h,"aria-label","Close"),U(s,"class","modal-header"),U(v,"class","modal-body svelte-40kcd8"),ee(v,"expanded",!e[1]),U(o,"class","modal-content"),U(n,"class","modal-dialog modal-xl modal-dialog-centered"),U(n,"role","document"),U(t,"class","modal svelte-40kcd8"),U(t,"tabindex","-1"),U(t,"role","dialog"),U(w,"class","modal-backdrop show")},m(r,y){O(r,t,y),S(t,n),S(n,o),S(o,s),S(s,a),S(a,i),S(a,c),S(a,u),S(u,d),d.checked=e[7],S(u,p),S(u,m),S(s,f),S(s,h),S(o,g),S(o,v),L.block.m(v,L.anchor=null),L.mount=()=>v,L.anchor=null,O(r,b,y),O(r,w,y),P=!0,k||(C=[R(d,"change",e[9]),R(d,"change",e[4]),R(h,"click",e[3]),A($=Wo.call(null,n)),R(n,"click_outside",(function(){l(e[1]?Xe:e[3])&&(e[1]?Xe:e[3]).apply(this,arguments)}))],k=!0)},p(t,n){e=t,(!P||1&n)&&W(i,e[0]),128&n&&(d.checked=e[7]),L.ctx=e,64&n&&y!==(y=e[6])&&ze(y,L)||function(e,t,n){const o=t.slice(),{resolved:s}=e;e.current===e.then&&(o[e.value]=s),e.current===e.catch&&(o[e.error]=s),e.block.p(o,n)}(L,e,n),(!P||2&n)&&ee(v,"expanded",!e[1])},i(e){P||(qe(L.block),x||be((()=>{x=Ne(t,wt,{}),x.start()})),T||be((()=>{T=Ne(w,wt,{}),T.start()})),P=!0)},o(e){for(let e=0;e<3;e+=1){Ie(L.blocks[e])}P=!1},d(e){e&&F(t),L.block.d(),L.token=null,L=null,e&&F(b),e&&F(w),k=!1,r(C)}}}function Pm(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function km(e){let t,n;return t=new wm({props:{data:e[10],version:e[1],setHelpLinks:e[2]}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};64&n&&(o.data=e[10]),2&n&&(o.version=e[1]),4&n&&(o.setHelpLinks=e[2]),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Cm(t){let n;return{c(){n=I("p"),n.textContent="chargement..."},m(e,t){O(e,n,t)},p:e,i:e,o:e,d(e){e&&F(n)}}}function Lm(e){let t,n,o=e[5]&&Tm(e);return{c(){o&&o.c(),t=j()},m(e,s){o&&o.m(e,s),O(e,t,s),n=!0},p(e,[n]){e[5]?o?(o.p(e,n),32&n&&qe(o,1)):(o=Tm(e),o.c(),qe(o,1),o.m(t.parentNode,t)):o&&(Oe(),Ie(o,1,1,(()=>{o=null})),Fe())},i(e){n||(qe(o),n=!0)},o(e){Ie(o),n=!1},d(e){o&&o.d(e),e&&F(t)}}}const Sm=ho.changelogOnUpdate,Mm=()=>null===go.getItem(Sm)||!!go.getItem(Sm),Em=()=>{if(localStorage)return localStorage.setItem(vn,"1.20.3"),"1.20.3"},Om=()=>{if(localStorage)return localStorage.getItem(vn)};function Fm(e,t,n){let o,s,{title:r="CHANGELOG"}=t,{version:l}=t,{setHelpLinks:a=null}=t,i=!!l;const c=()=>{n(7,s=Mm()),n(5,i=!0),n(6,o=fetch("./CHANGELOG.json").then((e=>{if(e.ok)return e.json();throw new Error("CHANGELOG.json not available")})))};return i&&c(),e.$$set=e=>{"title"in e&&n(0,r=e.title),"version"in e&&n(1,l=e.version),"setHelpLinks"in e&&n(2,a=e.setHelpLinks)},[r,l,a,()=>{n(5,i=!1),Em()},()=>{go.setItem(Sm,s)},i,o,s,c,function(){s=this.checked,n(7,s)}]}class qm extends Ge{constructor(e){super(),We(this,e,Fm,Lm,a,{title:0,version:1,setHelpLinks:2,show:8,close:3,save:4})}get show(){return this.$$.ctx[8]}get close(){return this.$$.ctx[3]}get save(){return this.$$.ctx[4]}}const{Map:Im,window:Dm}=je;function Nm(e,t,n){const o=e.slice();return o[22]=t[n].id,o[23]=t[n].html,o}function _m(e,t,n){const o=e.slice();return o[22]=t[n].id,o[26]=t[n].label,o}function zm(e,t){let n,o,s,r,l=t[26]+"";return{key:e,first:null,c(){n=I("option"),o=N(l),n.__value=s=t[22],n.value=n.__value,n.selected=r=t[22]===t[3],this.first=n},m(e,t){O(e,n,t),S(n,o)},p(e,o){t=e,40&o&&r!==(r=t[22]===t[3])&&(n.selected=r)},d(e){e&&F(n)}}}function jm(e,t){let n,o,s,l,a=t[23]+"";return{key:e,first:null,c(){n=I("h2"),U(n,"tabindex","0"),U(n,"data-id",o=t[22]),U(n,"class","svelte-5gz30p"),ee(n,"selected",t[3]===t[22]),this.first=n},m(e,o){O(e,n,o),n.innerHTML=a,s||(l=[R(n,"keydown",t[13]),R(n,"click",t[8])],s=!0)},p(e,o){t=e,40&o&&ee(n,"selected",t[3]===t[22])},d(e){e&&F(n),s=!1,r(l)}}}function Rm(e){let t,n,o,s,a,i,c,u,d,p,m,f,h,g,v,y,$,x,b,w,T,P,k,C,L,M,E,q,D,_,j,V=[],B=new Im,H=[],Q=new Im,G={setHelpLinks:e[6]};t=new qm({props:G}),e[10](t);let Z=!(!0!==navigator.standalone||!navigator.share)&&function(e){let t,n;return t=new au({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}(),J=!0===navigator.standalone&&function(e){let t,n;return t=new ru({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}(),X=e[5];const Y=e=>e[22];for(let t=0;t<X.length;t+=1){let n=_m(e,X,t),o=Y(n);B.set(o,V[t]=zm(o,n))}let ee=e[5];const te=e=>e[22];for(let t=0;t<ee.length;t+=1){let n=Nm(e,ee,t),o=te(n);Q.set(o,H[t]=jm(o,n))}return q=new Yp({}),{c(){Be(t.$$.fragment),n=z(),o=I("div"),s=I("aside"),a=I("h1"),i=I("div"),c=I("div"),c.innerHTML='<img src="images/ofp2map-icons/icon-128x128.png" alt="logo" class="svelte-5gz30p"/>',u=z(),d=I("div"),p=I("div"),p.textContent=`OFP2MAP v${Vm}`,m=I("small"),f=N("ServiceWorker : "),h=N(e[1]),g=z(),v=I("div"),Z&&Z.c(),y=z(),J&&J.c(),$=z(),x=I("button"),b=z(),w=I("select");for(let e=0;e<V.length;e+=1)V[e].c();T=z(),P=I("div");for(let e=0;e<H.length;e+=1)H[e].c();k=z(),C=I("div"),L=I("div"),M=I("button"),E=z(),Be(q.$$.fragment),U(c,"class","app svelte-5gz30p"),U(m,"class","svelte-5gz30p"),U(d,"class","infos svelte-5gz30p"),U(i,"class","appInfos svelte-5gz30p"),U(x,"tabindex","0"),U(x,"class","changelog btn btn-outline-secondary btn-sm svelte-5gz30p"),U(v,"class","actions svelte-5gz30p"),U(w,"class","toc form-select form-select-sm svelte-5gz30p"),void 0===e[3]&&be((()=>e[12].call(w))),U(a,"class","svelte-5gz30p"),U(P,"class","toc svelte-5gz30p"),U(s,"class","svelte-5gz30p"),U(M,"tabindex","0"),U(M,"class","changelog btn btn-outline-secondary btn-sm svelte-5gz30p"),U(L,"class","markdown svelte-5gz30p"),U(C,"class","scrollContainer svelte-5gz30p"),U(o,"class","help svelte-5gz30p")},m(r,F){He(t,r,F),O(r,n,F),O(r,o,F),S(o,s),S(s,a),S(a,i),S(i,c),S(i,u),S(i,d),S(d,p),S(d,m),S(m,f),S(m,h),S(a,g),S(a,v),Z&&Z.m(v,null),S(v,y),J&&J.m(v,null),S(v,$),S(v,x),S(a,b),S(a,w);for(let e=0;e<V.length;e+=1)V[e].m(w,null);K(w,e[3]),S(s,T),S(s,P);for(let e=0;e<H.length;e+=1)H[e].m(P,null);S(o,k),S(o,C),S(C,L),S(L,M),S(L,E),He(q,L,null),e[14](C),D=!0,_||(j=[R(Dm,"popstate",e[9]),R(m,"click",e[11],{once:!0}),R(x,"click",(function(){l(e[4].show)&&e[4].show.apply(this,arguments)})),R(w,"change",e[12]),R(w,"change",e[7]),A(wo.call(null,w)),R(M,"click",(function(){l(e[4].show)&&e[4].show.apply(this,arguments)}))],_=!0)},p(n,[o]){e=n;t.$set({}),(!D||2&o)&&W(h,e[1]),40&o&&(X=e[5],V=Ve(V,o,Y,1,e,X,B,w,Re,zm,null,_m)),40&o&&K(w,e[3]),296&o&&(ee=e[5],H=Ve(H,o,te,1,e,ee,Q,P,Re,jm,null,Nm))},i(e){D||(qe(t.$$.fragment,e),qe(Z),qe(J),qe(q.$$.fragment,e),D=!0)},o(e){Ie(t.$$.fragment,e),Ie(Z),Ie(J),Ie(q.$$.fragment,e),D=!1},d(s){e[10](null),Qe(t,s),s&&F(n),s&&F(o),Z&&Z.d(),J&&J.d();for(let e=0;e<V.length;e+=1)V[e].d();for(let e=0;e<H.length;e+=1)H[e].d();Qe(q),e[14](null),_=!1,r(j)}}}const Vm="1.20.3";function Um(e,t,n){let o;p(e,yn,(e=>n(0,o=e)));let s="";let r,l;const a=[];let i,c,u,d,m;const f=(e,t='a[href^="#/help"], area[href^="#/help"]')=>{const n=e=>{let t=e.target.hash;if(!t){const n=e.target.closest("a");n&&(t=n.hash)}t&&(e.preventDefault(),v(t.slice(1)))},o=e||document;return o.querySelectorAll(t).forEach((e=>e.addEventListener("click",n))),()=>{o.querySelectorAll(t).forEach((e=>e.removeEventListener("click",n)))}},h=e=>{const t=e.offsetTop-r.offsetTop,n=Math.floor(r.scrollHeight-r.clientHeight);return r.scrollTop.toFixed()===t.toFixed()||r.scrollTop>=n&&t>=n};const g=e=>{if(!c||!i)return;e&&e.target.blur(),u=c;const t=document.getElementById(c);t&&window.location.hash==="#"+c?h(t)?(u=void 0,l&&l.reset()):(d.disconnect(),l=function(e,t){const n=function(){h(e)&&t()};if(!h(e))return l&&l.reset(),r.addEventListener("scroll",n),r.scrollTo({top:e.offsetTop-r.offsetTop,behavior:"smooth"}),{reset:()=>{r.removeEventListener("scroll",n),l=void 0}}}(t,(()=>{i&&i.forEach((e=>{d.observe(e)})),l.reset(),u=void 0}))):window.location.hash="#"+c},v=e=>{if(e)if(e.target)e instanceof MouseEvent&&e.target.blur(),n(3,c=e.target.dataset.id);else{const t=decodeURI(e);if(t.startsWith("#")&&(t=t.slice(1)),t.startsWith("/help")){const e=t;a&&a.map((e=>e.id)).includes(e)&&(n(3,c=e),m.close())}}!c&&a&&a.length>0&&n(3,c=a[0].id),c&&g()};ce((()=>{i=r.querySelectorAll(".markdown section[id]");const e=new Map;d=new IntersectionObserver((t=>{let o;t.forEach((t=>e.set(t.target.id,t.isIntersecting)));for(const[t,n]of e.entries())if(n){o=t;break}o&&(n(3,c=o),u||window.history.replaceState(void 0,void 0,"#"+c),u===c&&(window.location.hash="#"+c,u=void 0))}),{root:r,rootMargin:"0px",threshold:0});const t=f(r),o=f(document.querySelector("nav.navbar"));return i.forEach((e=>{const t=e.querySelector("h2:first-of-type");a.push({id:e.id,label:t.innerText,html:t.innerHTML}),d.observe(e)})),v(window.location.hash.slice(1)),()=>{d.disconnect(),t(),o(),l&&l.reset(),i=void 0,d=void 0}}));return e.$$.update=()=>{var t;1&e.$$.dirty&&(t=o)&&t.messageSW({type:"GET_VERSION"}).then((e=>n(1,s=e)))},[o,s,r,c,m,a,f,g,v,()=>{const e=document.location.hash.slice(1);c!==e&&e.startsWith("/help")&&v(e)},function(e){fe[e?"unshift":"push"]((()=>{m=e,n(4,m)}))},()=>o&&o.update()&&void 0,function(){c=J(this),n(3,c),n(5,a)},e=>"Enter"===e.key&&v(e),function(e){fe[e?"unshift":"push"]((()=>{r=e,n(2,r)}))}]}class Bm extends Ge{constructor(e){super(),We(this,e,Um,Rm,a,{})}}function Hm(e){let t,n,o,s;t=new Xc({});let r="/map"===e[0]&&Qm(e);return{c(){Be(t.$$.fragment),n=z(),r&&r.c(),o=j()},m(e,l){He(t,e,l),O(e,n,l),r&&r.m(e,l),O(e,o,l),s=!0},p(e,t){"/map"===e[0]?r?(r.p(e,t),1&t&&qe(r,1)):(r=Qm(e),r.c(),qe(r,1),r.m(o.parentNode,o)):r&&(Oe(),Ie(r,1,1,(()=>{r=null})),Fe())},i(e){s||(qe(t.$$.fragment,e),qe(r),s=!0)},o(e){Ie(t.$$.fragment,e),Ie(r),s=!1},d(e){Qe(t,e),e&&F(n),r&&r.d(e),e&&F(o)}}}function Qm(e){let t,n,o,s;t=new nu({});let r="reload"!=e[4]&&Wm();return o=new $p({}),{c(){Be(t.$$.fragment),r&&r.c(),n=j(),Be(o.$$.fragment)},m(e,l){He(t,e,l),r&&r.m(e,l),O(e,n,l),He(o,e,l),s=!0},p(e,t){"reload"!=e[4]?r?16&t&&qe(r,1):(r=Wm(),r.c(),qe(r,1),r.m(n.parentNode,n)):r&&(Oe(),Ie(r,1,1,(()=>{r=null})),Fe())},i(e){s||(qe(t.$$.fragment,e),qe(r),qe(o.$$.fragment,e),s=!0)},o(e){Ie(t.$$.fragment,e),Ie(r),Ie(o.$$.fragment,e),s=!1},d(e){Qe(t,e),r&&r.d(e),e&&F(n),Qe(o,e)}}}function Wm(e){let t,n;return t=new Ic({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Gm(e){let t,n,o,s;return{c(){t=I("li"),n=I("a"),n.innerHTML='<span class="svelte-hqxpy8">CARTE</span>',U(n,"class","nav-link svelte-hqxpy8"),U(n,"href","#/map"),U(t,"class","nav-item svelte-hqxpy8"),ee(t,"active","/map"===e[0])},m(r,l){O(r,t,l),S(t,n),o||(s=R(n,"click",e[6]),o=!0)},p(e,n){1&n&&ee(t,"active","/map"===e[0])},d(e){e&&F(t),o=!1,s()}}}function Zm(e){let t,n,o,s;return{c(){t=I("li"),n=I("a"),n.innerHTML='<span class="svelte-hqxpy8">EXPORT</span>',U(n,"class","nav-link svelte-hqxpy8"),U(n,"href","#/export"),U(t,"class","nav-item svelte-hqxpy8"),ee(t,"active","/export"===e[0])},m(r,l){O(r,t,l),S(t,n),o||(s=R(n,"click",e[6]),o=!0)},p(e,n){1&n&&ee(t,"active","/export"===e[0])},d(e){e&&F(t),o=!1,s()}}}function Km(e){let t,n,o,s;return{c(){t=I("li"),n=I("a"),n.innerHTML='<span class="svelte-hqxpy8">FTL</span>',U(n,"class","nav-link svelte-hqxpy8"),U(n,"href","#/ftl"),U(t,"class","nav-item svelte-hqxpy8"),ee(t,"active","/ftl"===e[0])},m(r,l){O(r,t,l),S(t,n),o||(s=R(n,"click",e[6]),o=!0)},p(e,n){1&n&&ee(t,"active","/ftl"===e[0])},d(e){e&&F(t),o=!1,s()}}}function Jm(e){let t,n,o,s=e[2].name+"";return{c(){t=I("small"),n=N("/"),o=N(s),U(t,"class","d-none d-lg-inline-block text-small-caps svelte-hqxpy8")},m(e,s){O(e,t,s),S(t,n),S(t,o)},p(e,t){4&t&&s!==(s=e[2].name+"")&&W(o,s)},d(e){e&&F(t)}}}function Xm(t){let n,o,s,r,l=navigator.share&&function(e){let t,n;return t=new au({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}();return s=new ru({}),{c(){n=I("li"),l&&l.c(),o=z(),Be(s.$$.fragment),U(n,"class","nav-item reload svelte-hqxpy8")},m(e,t){O(e,n,t),l&&l.m(n,null),S(n,o),He(s,n,null),r=!0},p:e,i(e){r||(qe(l),qe(s.$$.fragment,e),r=!0)},o(e){Ie(l),Ie(s.$$.fragment,e),r=!1},d(e){e&&F(n),l&&l.d(),Qe(s)}}}function Ym(e){let t,n,o,s,l,a,i,c,u,d,p,f,y,$,x,b,A,w,T,P,k,C,L,M,E,q,_,j,V;const B=e[8].default,Q=m(B,e,e[7],null);let W=e[3]&&Hm(e),G=(e[3]||e[5]||"/map"===e[0])&&Gm(e),K=(e[3]||"/export"===e[0])&&Zm(e),J=(e[3]||"/ftl"===e[0])&&Km(e),X=e[2].name&&Jm(e),Y=!0===navigator.standalone&&Xm();return{c(){t=I("nav"),n=I("div"),o=I("input"),s=z(),Q&&Q.c(),l=z(),W&&W.c(),a=z(),i=I("label"),i.innerHTML='<span class="navbar-toggler-icon"></span>',c=z(),u=I("ul"),d=I("li"),p=I("a"),f=I("strong"),f.textContent="OFP2MAP",y=z(),$=D("svg"),x=D("use"),b=z(),A=z(),G&&G.c(),w=z(),K&&K.c(),T=z(),J&&J.c(),P=z(),k=I("li"),C=I("a"),L=I("span"),M=N("AIDE"),X&&X.c(),q=z(),Y&&Y.c(),U(o,"type","checkbox"),U(o,"id","menu"),U(o,"class","svelte-hqxpy8"),U(i,"class","navbar-toggler"),U(i,"for","menu"),U(f,"class","d-none d-lg-inline ofp2map svelte-hqxpy8"),H(x,"xlink:href","#home-symbol"),U($,"class","d-xxl-none d-xl-none d-lg-none svelte-hqxpy8"),U(p,"class","nav-link svelte-hqxpy8"),U(p,"href","#/"),Z(p,"text-decoration","none"),Z(p,"position","relative"),U(d,"class","nav-item svelte-hqxpy8"),ee(d,"active","/"===e[0]),U(L,"class","svelte-hqxpy8"),U(C,"class","nav-link svelte-hqxpy8"),U(C,"href",E=e[2].href),U(k,"class","nav-item svelte-hqxpy8"),ee(k,"active","/help"===e[0]),U(u,"class","navbar-nav collapse navbar-collapse svelte-hqxpy8"),U(u,"id","navbarToggler"),U(n,"class","container-fluid svelte-hqxpy8"),U(t,"class","navbar navbar-expand-md navbar-light svelte-hqxpy8")},m(r,m){O(r,t,m),S(t,n),S(n,o),e[9](o),S(n,s),Q&&Q.m(n,null),S(n,l),W&&W.m(n,null),S(n,a),S(n,i),S(n,c),S(n,u),S(u,d),S(d,p),S(p,f),S(p,y),S(p,$),S($,x),S(p,b),S(u,A),G&&G.m(u,null),S(u,w),K&&K.m(u,null),S(u,T),J&&J.m(u,null),S(u,P),S(u,k),S(k,C),S(C,L),S(L,M),X&&X.m(L,null),S(u,q),Y&&Y.m(u,null),_=!0,j||(V=[R(p,"click",e[6]),R(C,"click",e[6])],j=!0)},p(e,[t]){Q&&Q.p&&(!_||128&t)&&g(Q,B,e,e[7],_?h(B,e[7],t,null):v(e[7]),null),e[3]?W?(W.p(e,t),8&t&&qe(W,1)):(W=Hm(e),W.c(),qe(W,1),W.m(n,a)):W&&(Oe(),Ie(W,1,1,(()=>{W=null})),Fe()),(!_||1&t)&&ee(d,"active","/"===e[0]),e[3]||e[5]||"/map"===e[0]?G?G.p(e,t):(G=Gm(e),G.c(),G.m(u,w)):G&&(G.d(1),G=null),e[3]||"/export"===e[0]?K?K.p(e,t):(K=Zm(e),K.c(),K.m(u,T)):K&&(K.d(1),K=null),e[3]||"/ftl"===e[0]?J?J.p(e,t):(J=Km(e),J.c(),J.m(u,P)):J&&(J.d(1),J=null),e[2].name?X?X.p(e,t):(X=Jm(e),X.c(),X.m(L,null)):X&&(X.d(1),X=null),(!_||4&t&&E!==(E=e[2].href))&&U(C,"href",E),(!_||1&t)&&ee(k,"active","/help"===e[0]),!0===navigator.standalone&&Y.p(e,t)},i(e){_||(qe(Q,e),qe(W),qe(Y),_=!0)},o(e){Ie(Q,e),Ie(W),Ie(Y),_=!1},d(n){n&&F(t),e[9](null),Q&&Q.d(n),W&&W.d(),G&&G.d(),K&&K.d(),J&&J.d(),X&&X.d(),Y&&Y.d(),j=!1,r(V)}}}function ef(e,t,n){let o,s,r,l,a;p(e,jn,(e=>n(0,s=e))),p(e,Ln,(e=>n(3,r=e))),p(e,Ii,(e=>n(4,l=e))),p(e,Fn,(e=>n(5,a=e)));let i,{$$slots:c={},$$scope:u}=t;return e.$$set=e=>{"$$scope"in e&&n(7,u=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&n(2,o=(e=>{let t;t="/map"===e?"#/help_memovisuel":"#/help";return{name:"",href:encodeURI(t)}})(s))},[s,i,o,r,l,a,e=>{n(1,i.checked=!1,i),"#/map"===e.target.href&&(window.location.hash="/map",e.preventDefault(),e.stopPropagation(),gt())},u,c,function(e){fe[e?"unshift":"push"]((()=>{i=e,n(1,i)}))}]}class tf extends Ge{constructor(e){super(),We(this,e,ef,Ym,a,{})}}function nf(e){let t,n,o,s;const r=e[6].default,l=m(r,e,e[5],null);return{c(){t=I("page"),l&&l.c(),U(t,"style",n="overflow-y: "+e[3]+";"+(e[1]?`max-width: ${e[1]}; align-self: center;`:"")+(e[2]?`width: ${e[2]}; align-self: center;`:"")),U(t,"class","svelte-atsmeu"),ee(t,"fadein",!1===e[0]),ee(t,"d-none",!0===e[0])},m(e,n){O(e,t,n),l&&l.m(t,null),s=!0},p(e,[o]){l&&l.p&&(!s||32&o)&&g(l,r,e,e[5],s?h(r,e[5],o,null):v(e[5]),null),(!s||14&o&&n!==(n="overflow-y: "+e[3]+";"+(e[1]?`max-width: ${e[1]}; align-self: center;`:"")+(e[2]?`width: ${e[2]}; align-self: center;`:"")))&&U(t,"style",n),(!s||1&o)&&ee(t,"fadein",!1===e[0]),(!s||1&o)&&ee(t,"d-none",!0===e[0])},i(n){s||(qe(l,n),o||be((()=>{o=Ne(t,e[4],{}),o.start()})),s=!0)},o(e){Ie(l,e),s=!1},d(e){e&&F(t),l&&l.d(e)}}}function of(e,t,n){let{$$slots:o={},$$scope:s}=t,{hidden:r}=t,{maxWidth:l}=t,{width:a}=t,{overflowY:i="auto"}=t;return e.$$set=e=>{"hidden"in e&&n(0,r=e.hidden),"maxWidth"in e&&n(1,l=e.maxWidth),"width"in e&&n(2,a=e.width),"overflowY"in e&&n(3,i=e.overflowY),"$$scope"in e&&n(5,s=e.$$scope)},[r,l,a,i,(e,t,n)=>{if(void 0===r)return wt(e,t)},s,o]}class sf extends Ge{constructor(e){super(),We(this,e,of,nf,a,{hidden:0,maxWidth:1,width:2,overflowY:3})}}function rf(e,t,n){const o=e.slice();return o[3]=t[n],o}function lf(e){let t,n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v,y,$,b,A,w,T,P,k,C,L,M,E,D,_,j,R,V,B,H,Q,G,K,J,X,Y,ee,te,ne,oe,se,re,le,ae,ie,ce,ue,de,pe,me,fe,he,ge,ve,ye,$e,xe,be,Ae,we,Te,Pe,ke,Ce,Le,Se,Me,Ee,Oe,Fe,qe,Ie,De,Ne,_e,ze,je,Re,Ve,Ue,Be,He,Qe,We,Ge,Ze,Ke,Je,Xe,Ye,et,tt,nt,ot,st,rt,lt,at,it,ct,ut,dt,pt,mt,ft,ht,gt,vt,yt,$t,xt,bt,At,wt,Tt,Pt,kt,Ct,Lt,St,Mt,Et,Ot,Ft,qt,It,Dt,Nt,_t,zt,jt,Rt,Vt,Ut,Bt,Ht,Qt,Wt,Gt,Zt,Kt,Jt,Xt,Yt,en,tn,nn,on,sn,rn,ln,an,cn,un,dn,pn,mn,fn,hn,gn,vn,yn,$n,xn,bn,An,wn,Tn,Pn,kn,Cn,Ln,Sn,Mn,En,On,Fn,qn,In,Dn,Nn,_n,zn,jn,Rn,Vn,Un,Bn,Hn,Qn,Wn,Gn,Zn,Kn,Jn,Xn,Yn,eo,to,no,oo,so,ro,lo,ao,io,co,uo,po,mo,fo,ho,go,vo,yo,$o,xo,bo,Ao,wo,To,Po,ko,Co,Lo,So,Mo,Eo,Oo,Fo,qo,Io,Do,No,_o,zo,jo,Ro,Vo,Uo,Bo,Ho,Qo,Wo,Go=e[1].infos.depIATA+"",Zo=e[1].infos.destIATA+"",Ko=e[0].duty.isCargo?"CARGO":"PAX",Jo=e[0].textOfpOut+"",Xo=e[0].textOfpOut+"",Yo=e[0].textOfpOff+"",es=e[0].textScheduledIn+"",ts=e[0].textOfpIn+"",ns=e[0].textOfpOn+"",os=e[2](e[1].infos.scheduledBlockTime)+"",ss=e[2](e[1].infos.blockTime)+"",rs=e[2](e[1].infos.flightTime)+"",ls=e[0].duty.reposPNC.AF.textValue+"",as=e[0].duty.title+"",is=e[0].duty.textOUT+"",cs=e[0].duty.reportingAF.textValue+"",us=e[0].duty.reportingFTL.textValue+"",ds=e[0].duty.textIN+"",ps=e[0].duty.reportingAF.textEndValue+"",ms=e[0].duty.reportingFTL.textEndValue+"",fs=e[2](e[0].duty.scheduledBlockTime)+"",hs=e[0].duty.textTSVAF+"",gs=e[0].duty.textFDP+"",vs=e[0].duty.maxTSVAF.PEQ2.textValue+"",ys=e[0].duty.maxTSVAF.PEQ2.textValue+"",$s=e[0].duty.maxTSVAF.PEQ3.textValue+"",xs=e[0].duty.maxTSVAF.PEQ4.textValue+"",bs=e[0].duty.maxTSVFTL.PEQ2.textValue+"",As=e[0].duty.maxTSVFTL.PEQ2.textValue+"",ws=e[0].duty.maxTSVFTL.PEQ3.textValue+"",Ts=e[0].duty.maxTSVFTL.PEQ4.textValue+"",Ps=e[0].duty.reposPNC.FTL.textValue+"",ks=e[0].duty.destIATA+"",Cs=e[0].duty.textIN+"",Ls=e[0].duty.maxTSV_PEQ2.textIN+"",Ss=e[0].duty.maxTSV_PEQ2.reposPNC+"",Ms=e[0].duty.maxTSV_PEQ3.textIN+"",Es=e[0].duty.maxTSV_PEQ3.reposPNC+"",Os=e[0].duty.maxTSV_PEQ4.textIN+"",Fs=e[0].duty.maxTSV_PEQ4.reposPNC+"",qs=e[1].infos.depIATA+"",Is=e[0].textOfpOut+"",Ds=e[0].duty.maxTSV_PEQ2.textOUT+"",Ns=e[0].duty.maxTSV_PEQ3.textOUT+"",_s=e[0].duty.maxTSV_PEQ4.textOUT+"",zs=e[0].duty.retardPNC&&cf(e),js=e[0].duty.steps,Rs=[];for(let t=0;t<js.length;t+=1)Rs[t]=uf(rf(e,js,t));return{c(){t=I("div"),n=I("div"),o=I("h2"),s=N("( "),r=N(Go),l=N(" > "),a=N(Zo),i=N(" vol "),c=N(Ko),u=N(" )"),d=z(),p=I("table"),m=I("tr"),m.innerHTML='<th colspan="2" class="svelte-1lhqq06">Programmé</th> \n    <th colspan="2" class="svelte-1lhqq06">OFP bloc</th> \n    <th colspan="2" class="svelte-1lhqq06">OFP vol</th>',f=z(),h=I("tr"),g=I("td"),g.textContent="STD",v=I("td"),y=N(Jo),$=N("z"),b=z(),A=I("td"),A.textContent="OUT",w=I("td"),T=N(Xo),P=N("z"),k=z(),C=I("td"),C.textContent="OFF",L=I("td"),M=N(Yo),E=N("z"),D=z(),_=I("tr"),j=I("td"),j.textContent="STA",R=I("td"),V=N(es),B=N("z"),H=z(),Q=I("td"),Q.textContent="IN",G=I("td"),K=N(ts),J=N("z"),X=z(),Y=I("td"),Y.textContent="ON",ee=I("td"),te=N(ns),ne=N("z"),oe=z(),se=I("tr"),re=I("td"),re.textContent="Bloc",le=I("td"),ae=N(os),ie=z(),ce=I("td"),ce.textContent="Bloc",ue=I("td"),de=N(ss),pe=z(),me=I("td"),me.textContent="Flight",fe=I("td"),he=N(rs),ge=z(),ve=I("p"),ye=N("Repos mini PNC en vol ("),$e=I("span"),$e.textContent="AF",xe=N(") : "),be=I("span"),Ae=N(ls),we=z(),Te=I("cite"),Te.textContent="MANEX 07.09.05.F",Pe=z(),ke=I("h2"),Ce=N("( Service de vol "),Le=N(as),Se=N(" )"),Me=z(),Ee=I("table"),Oe=I("tr"),Oe.innerHTML='<th colspan="2" class="svelte-1lhqq06"></th> \n    <th colspan="2" class="af svelte-1lhqq06">TSV AF</th> \n    <th colspan="2" class="ftl svelte-1lhqq06">TSV FTL</th>',Fe=z(),qe=I("tr"),Ie=I("td"),Ie.textContent="STD",De=I("td"),Ne=N(is),_e=N("z"),ze=z(),je=I("td"),je.textContent="Début",Re=I("td"),Ve=N(cs),Ue=N("z"),Be=z(),He=I("td"),He.textContent="Début",Qe=I("td"),We=N(us),Ge=N("z"),Ze=z(),Ke=I("tr"),Je=I("td"),Je.textContent="STA",Xe=I("td"),Ye=N(ds),et=N("z"),tt=z(),nt=I("td"),nt.textContent="Fin",ot=I("td"),st=N(ps),rt=N("z"),lt=z(),at=I("td"),at.textContent="Fin",it=I("td"),ct=N(ms),ut=N("z"),dt=z(),pt=I("tr"),mt=I("td"),mt.textContent="Bloc",ft=I("td"),ht=N(fs),gt=z(),vt=I("td"),vt.textContent="TSV",yt=z(),$t=I("td"),xt=N(hs),bt=z(),At=I("td"),At.textContent="TSV",wt=z(),Tt=I("td"),Pt=N(gs),kt=z(),Ct=I("tr"),Lt=I("td"),Lt.textContent="MAX",St=I("td"),Mt=I("span"),Et=N(vs),Ot=I("table"),Ft=I("tr"),qt=I("td"),qt.textContent="PEQ2",It=z(),Dt=I("td"),Nt=N(ys),_t=z(),zt=I("tr"),jt=I("td"),jt.textContent="PEQ3",Rt=z(),Vt=I("td"),Ut=N($s),Bt=z(),Ht=I("tr"),Qt=I("td"),Qt.textContent="PEQ4",Wt=z(),Gt=I("td"),Zt=N(xs),Kt=z(),Jt=I("td"),Jt.textContent="MAX",Xt=I("td"),Yt=I("span"),en=N(bs),tn=I("table"),nn=I("tr"),on=I("td"),on.textContent="PEQ2",sn=z(),rn=I("td"),ln=N(As),an=z(),cn=I("tr"),un=I("td"),un.textContent="PEQ3",dn=z(),pn=I("td"),mn=N(ws),fn=z(),hn=I("tr"),gn=I("td"),gn.textContent="PEQ4",vn=z(),yn=I("td"),$n=N(Ts),xn=z(),bn=I("tr"),bn.innerHTML='<td colspan="6" style="border: none" class="svelte-1lhqq06"><small style="padding: 0 3px; margin-top: -2px">OFP2MAP ne connaît pas la compo PEQ, <span class="highlight svelte-1lhqq06">c&#39;est le nombre de 👨‍✈️qui est surligné</span></small></td>',An=z(),wn=I("p"),Tn=N("Repos mini PNC en vol ("),Pn=I("span"),Pn.textContent="FTL",kn=N("):\n    "),Cn=I("span"),Ln=N(Ps),Sn=z(),Mn=I("cite"),Mn.textContent="MANEX 07.05.04.C",En=z(),On=I("h2"),On.textContent="( En cas de retard )",Fn=z(),qn=I("p"),qn.innerHTML='<small><span class="af">une limitation AF est de couleur bleue</span>; en cas de couleur <span class="warning">orange</span>, consultez les détails.</small>',In=z(),Dn=I("table"),Nn=I("tr"),_n=I("th"),zn=I("th"),jn=N("Butée TSV bloc arrivée  "),Rn=N(ks),Vn=N(" (STA "),Un=N(Cs),Bn=N("z)"),Hn=I("th"),Hn.innerHTML='Repos PNC en vol (<span class="ftl">FTL</span>)',Qn=z(),Wn=I("tr"),Gn=I("td"),Gn.textContent="PEQ2",Zn=I("td"),Jn=I("td"),Xn=N(Ss),Yn=z(),eo=I("tr"),to=I("td"),to.textContent="PEQ3",no=I("td"),so=I("td"),ro=N(Es),lo=z(),ao=I("tr"),io=I("td"),io.textContent="PEQ4",co=I("td"),po=I("td"),mo=N(Fs),fo=z(),ho=I("tr"),ho.innerHTML='<td class="svelte-1lhqq06">PNC</td><td class="svelte-1lhqq06">non calculée (<span class="af">RADD</span>)<a style="margin-left: 1em" href="#/help_ftl"><svg style="stroke: #0d6efd; height: 20px; width: 20px; margin-right: 0.25em;"><use xlink:href="#info-symbol"></use></svg>plus d&#39;infos</a></td><td class="svelte-1lhqq06"></td>',go=z(),vo=I("tr"),yo=I("th"),$o=I("th"),xo=N("Bloc départ limite à "),bo=N(qs),Ao=N(" (STD "),wo=N(Is),To=N("z)"),Po=z(),ko=I("tr"),Co=I("td"),Co.textContent="PEQ2",Lo=I("td"),Mo=z(),Eo=I("tr"),Oo=I("td"),Oo.textContent="PEQ3",Fo=I("td"),Io=z(),Do=I("tr"),No=I("td"),No.textContent="PEQ4",_o=I("td"),jo=z(),zs&&zs.c(),Ro=z(),Vo=I("h2"),Vo.textContent="( Détail des calculs  )",Uo=z(),Bo=I("ol"),Ho=I("p"),Ho.textContent="Les éléments en gras doivent être vérifiés pour valider le calcul",Qo=z();for(let e=0;e<Rs.length;e+=1)Rs[e].c();U(o,"class","svelte-1lhqq06"),U(m,"class","svelte-1lhqq06"),U(g,"class","svelte-1lhqq06"),U(v,"class","svelte-1lhqq06"),U(A,"class","svelte-1lhqq06"),U(w,"class","svelte-1lhqq06"),U(C,"class","svelte-1lhqq06"),U(L,"class","svelte-1lhqq06"),U(j,"class","svelte-1lhqq06"),U(R,"class","svelte-1lhqq06"),U(Q,"class","svelte-1lhqq06"),U(G,"class","svelte-1lhqq06"),U(Y,"class","svelte-1lhqq06"),U(ee,"class","svelte-1lhqq06"),U(re,"class","svelte-1lhqq06"),U(le,"class","svelte-1lhqq06"),U(ce,"class","svelte-1lhqq06"),U(ue,"class","svelte-1lhqq06"),U(me,"class","svelte-1lhqq06"),U(fe,"class","svelte-1lhqq06"),U(p,"class","svelte-1lhqq06"),U($e,"class","af"),U(be,"class","af"),U(ve,"class","center only_lc svelte-1lhqq06"),U(ke,"class","svelte-1lhqq06"),U(Oe,"class","svelte-1lhqq06"),U(Ie,"class","svelte-1lhqq06"),U(De,"class","svelte-1lhqq06"),U(je,"class","af svelte-1lhqq06"),U(Re,"class","af svelte-1lhqq06"),U(He,"class","ftl svelte-1lhqq06"),U(Qe,"class","ftl svelte-1lhqq06"),U(Je,"class","svelte-1lhqq06"),U(Xe,"class","svelte-1lhqq06"),U(nt,"class","af svelte-1lhqq06"),U(ot,"class","af svelte-1lhqq06"),U(at,"class","ftl svelte-1lhqq06"),U(it,"class","ftl svelte-1lhqq06"),U(mt,"rowspan","2"),U(mt,"class","svelte-1lhqq06"),U(ft,"rowspan","2"),U(ft,"class","svelte-1lhqq06"),U(vt,"class","af svelte-1lhqq06"),U($t,"class","af svelte-1lhqq06"),U(At,"class","ftl svelte-1lhqq06"),U(Tt,"class","ftl svelte-1lhqq06"),U(Lt,"class","af svelte-1lhqq06"),U(Mt,"class","only_mc"),U(qt,"class","svelte-1lhqq06"),U(Dt,"class","svelte-1lhqq06"),U(Ft,"class","peq2"),U(jt,"class","svelte-1lhqq06"),U(Vt,"class","svelte-1lhqq06"),U(zt,"class","peq3"),U(Qt,"class","svelte-1lhqq06"),U(Gt,"class","svelte-1lhqq06"),U(Ht,"class","peq4"),U(Ot,"class","only_lc af svelte-1lhqq06"),U(St,"class","af svelte-1lhqq06"),U(Jt,"class","ftl svelte-1lhqq06"),U(Yt,"class","only_mc"),U(on,"class","svelte-1lhqq06"),U(rn,"class","svelte-1lhqq06"),U(nn,"class","peq2"),U(un,"class","svelte-1lhqq06"),U(pn,"class","svelte-1lhqq06"),U(cn,"class","peq3"),U(gn,"class","svelte-1lhqq06"),U(yn,"class","svelte-1lhqq06"),U(hn,"class","peq4"),U(tn,"class","only_lc ftl svelte-1lhqq06"),U(Xt,"class","svelte-1lhqq06"),Z(bn,"border","none"),U(bn,"class","only_lc"),U(Ee,"class","svelte-1lhqq06"),U(Pn,"class","ftl"),U(Cn,"class","ftl"),U(wn,"class","center only_lc svelte-1lhqq06"),Z(wn,"margin-top","-1px"),U(On,"class","svelte-1lhqq06"),U(qn,"class","center svelte-1lhqq06"),U(_n,"class","svelte-1lhqq06"),U(zn,"class","svelte-1lhqq06"),U(Hn,"class","svelte-1lhqq06"),U(Nn,"class","svelte-1lhqq06"),U(Gn,"class","svelte-1lhqq06"),U(Zn,"class",Kn=x(e[0].duty.maxTSV_PEQ2.rule)+" svelte-1lhqq06"),U(Jn,"class","svelte-1lhqq06"),U(Wn,"class","peq2"),U(to,"class","svelte-1lhqq06"),U(no,"class",oo=x(e[0].duty.maxTSV_PEQ3.rule)+" svelte-1lhqq06"),U(so,"class","ftl svelte-1lhqq06"),U(eo,"class","only_lc peq3"),U(io,"class","svelte-1lhqq06"),U(co,"class",uo=x(e[0].duty.maxTSV_PEQ4.rule)+" svelte-1lhqq06"),U(po,"class","ftl svelte-1lhqq06"),U(ao,"class","only_lc peq4"),U(yo,"class","svelte-1lhqq06"),U($o,"class","svelte-1lhqq06"),U(vo,"class","svelte-1lhqq06"),U(Co,"class","svelte-1lhqq06"),U(Lo,"class",So=x(e[0].duty.maxTSV_PEQ2.rule)+" svelte-1lhqq06"),U(ko,"class","peq2"),U(Oo,"class","svelte-1lhqq06"),U(Fo,"class",qo=x(e[0].duty.maxTSV_PEQ3.rule)+" svelte-1lhqq06"),U(Eo,"class","only_lc peq3"),U(No,"class","svelte-1lhqq06"),U(_o,"class",zo=x(e[0].duty.maxTSV_PEQ4.rule)+" svelte-1lhqq06"),U(Do,"class","only_lc peq4"),U(Dn,"class","svelte-1lhqq06"),Z(Vo,"page-break-before","always"),Z(Vo,"padding-top","1.5rem"),U(Vo,"class","svelte-1lhqq06"),U(Bo,"class","svelte-1lhqq06"),U(n,"class",Wo="duty "+e[0].duty.rules+" PEQ"+e[0].pilotCount+" "+(e[0].duty.steps.some(pf)?"invalid":"")+" svelte-1lhqq06"),U(t,"class","scrollContainer svelte-1lhqq06")},m(e,x){O(e,t,x),S(t,n),S(n,o),S(o,s),S(o,r),S(o,l),S(o,a),S(o,i),S(o,c),S(o,u),S(n,d),S(n,p),S(p,m),S(p,f),S(p,h),S(h,g),S(h,v),S(v,y),S(v,$),S(h,b),S(h,A),S(h,w),S(w,T),S(w,P),S(h,k),S(h,C),S(h,L),S(L,M),S(L,E),S(p,D),S(p,_),S(_,j),S(_,R),S(R,V),S(R,B),S(_,H),S(_,Q),S(_,G),S(G,K),S(G,J),S(_,X),S(_,Y),S(_,ee),S(ee,te),S(ee,ne),S(p,oe),S(p,se),S(se,re),S(se,le),S(le,ae),S(se,ie),S(se,ce),S(se,ue),S(ue,de),S(se,pe),S(se,me),S(se,fe),S(fe,he),S(n,ge),S(n,ve),S(ve,ye),S(ve,$e),S(ve,xe),S(ve,be),S(be,Ae),S(ve,we),S(ve,Te),S(n,Pe),S(n,ke),S(ke,Ce),S(ke,Le),S(ke,Se),S(n,Me),S(n,Ee),S(Ee,Oe),S(Ee,Fe),S(Ee,qe),S(qe,Ie),S(qe,De),S(De,Ne),S(De,_e),S(qe,ze),S(qe,je),S(qe,Re),S(Re,Ve),S(Re,Ue),S(qe,Be),S(qe,He),S(qe,Qe),S(Qe,We),S(Qe,Ge),S(Ee,Ze),S(Ee,Ke),S(Ke,Je),S(Ke,Xe),S(Xe,Ye),S(Xe,et),S(Ke,tt),S(Ke,nt),S(Ke,ot),S(ot,st),S(ot,rt),S(Ke,lt),S(Ke,at),S(Ke,it),S(it,ct),S(it,ut),S(Ee,dt),S(Ee,pt),S(pt,mt),S(pt,ft),S(ft,ht),S(pt,gt),S(pt,vt),S(pt,yt),S(pt,$t),S($t,xt),S(pt,bt),S(pt,At),S(pt,wt),S(pt,Tt),S(Tt,Pt),S(Ee,kt),S(Ee,Ct),S(Ct,Lt),S(Ct,St),S(St,Mt),S(Mt,Et),S(St,Ot),S(Ot,Ft),S(Ft,qt),S(Ft,It),S(Ft,Dt),S(Dt,Nt),S(Ot,_t),S(Ot,zt),S(zt,jt),S(zt,Rt),S(zt,Vt),S(Vt,Ut),S(Ot,Bt),S(Ot,Ht),S(Ht,Qt),S(Ht,Wt),S(Ht,Gt),S(Gt,Zt),S(Ct,Kt),S(Ct,Jt),S(Ct,Xt),S(Xt,Yt),S(Yt,en),S(Xt,tn),S(tn,nn),S(nn,on),S(nn,sn),S(nn,rn),S(rn,ln),S(tn,an),S(tn,cn),S(cn,un),S(cn,dn),S(cn,pn),S(pn,mn),S(tn,fn),S(tn,hn),S(hn,gn),S(hn,vn),S(hn,yn),S(yn,$n),S(Ee,xn),S(Ee,bn),S(n,An),S(n,wn),S(wn,Tn),S(wn,Pn),S(wn,kn),S(wn,Cn),S(Cn,Ln),S(wn,Sn),S(wn,Mn),S(n,En),S(n,On),S(n,Fn),S(n,qn),S(n,In),S(n,Dn),S(Dn,Nn),S(Nn,_n),S(Nn,zn),S(zn,jn),S(zn,Rn),S(zn,Vn),S(zn,Un),S(zn,Bn),S(Nn,Hn),S(Dn,Qn),S(Dn,Wn),S(Wn,Gn),S(Wn,Zn),Zn.innerHTML=Ls,S(Wn,Jn),S(Jn,Xn),S(Dn,Yn),S(Dn,eo),S(eo,to),S(eo,no),no.innerHTML=Ms,S(eo,so),S(so,ro),S(Dn,lo),S(Dn,ao),S(ao,io),S(ao,co),co.innerHTML=Os,S(ao,po),S(po,mo),S(Dn,fo),S(Dn,ho),S(Dn,go),S(Dn,vo),S(vo,yo),S(vo,$o),S($o,xo),S($o,bo),S($o,Ao),S($o,wo),S($o,To),S(Dn,Po),S(Dn,ko),S(ko,Co),S(ko,Lo),Lo.innerHTML=Ds,S(Dn,Mo),S(Dn,Eo),S(Eo,Oo),S(Eo,Fo),Fo.innerHTML=Ns,S(Dn,Io),S(Dn,Do),S(Do,No),S(Do,_o),_o.innerHTML=_s,S(Dn,jo),zs&&zs.m(Dn,null),S(n,Ro),S(n,Vo),S(n,Uo),S(n,Bo),S(Bo,Ho),S(Bo,Qo);for(let e=0;e<Rs.length;e+=1)Rs[e].m(Bo,null)},p(e,t){if(2&t&&Go!==(Go=e[1].infos.depIATA+"")&&W(r,Go),2&t&&Zo!==(Zo=e[1].infos.destIATA+"")&&W(a,Zo),1&t&&Ko!==(Ko=e[0].duty.isCargo?"CARGO":"PAX")&&W(c,Ko),1&t&&Jo!==(Jo=e[0].textOfpOut+"")&&W(y,Jo),1&t&&Xo!==(Xo=e[0].textOfpOut+"")&&W(T,Xo),1&t&&Yo!==(Yo=e[0].textOfpOff+"")&&W(M,Yo),1&t&&es!==(es=e[0].textScheduledIn+"")&&W(V,es),1&t&&ts!==(ts=e[0].textOfpIn+"")&&W(K,ts),1&t&&ns!==(ns=e[0].textOfpOn+"")&&W(te,ns),2&t&&os!==(os=e[2](e[1].infos.scheduledBlockTime)+"")&&W(ae,os),2&t&&ss!==(ss=e[2](e[1].infos.blockTime)+"")&&W(de,ss),2&t&&rs!==(rs=e[2](e[1].infos.flightTime)+"")&&W(he,rs),1&t&&ls!==(ls=e[0].duty.reposPNC.AF.textValue+"")&&W(Ae,ls),1&t&&as!==(as=e[0].duty.title+"")&&W(Le,as),1&t&&is!==(is=e[0].duty.textOUT+"")&&W(Ne,is),1&t&&cs!==(cs=e[0].duty.reportingAF.textValue+"")&&W(Ve,cs),1&t&&us!==(us=e[0].duty.reportingFTL.textValue+"")&&W(We,us),1&t&&ds!==(ds=e[0].duty.textIN+"")&&W(Ye,ds),1&t&&ps!==(ps=e[0].duty.reportingAF.textEndValue+"")&&W(st,ps),1&t&&ms!==(ms=e[0].duty.reportingFTL.textEndValue+"")&&W(ct,ms),1&t&&fs!==(fs=e[2](e[0].duty.scheduledBlockTime)+"")&&W(ht,fs),1&t&&hs!==(hs=e[0].duty.textTSVAF+"")&&W(xt,hs),1&t&&gs!==(gs=e[0].duty.textFDP+"")&&W(Pt,gs),1&t&&vs!==(vs=e[0].duty.maxTSVAF.PEQ2.textValue+"")&&W(Et,vs),1&t&&ys!==(ys=e[0].duty.maxTSVAF.PEQ2.textValue+"")&&W(Nt,ys),1&t&&$s!==($s=e[0].duty.maxTSVAF.PEQ3.textValue+"")&&W(Ut,$s),1&t&&xs!==(xs=e[0].duty.maxTSVAF.PEQ4.textValue+"")&&W(Zt,xs),1&t&&bs!==(bs=e[0].duty.maxTSVFTL.PEQ2.textValue+"")&&W(en,bs),1&t&&As!==(As=e[0].duty.maxTSVFTL.PEQ2.textValue+"")&&W(ln,As),1&t&&ws!==(ws=e[0].duty.maxTSVFTL.PEQ3.textValue+"")&&W(mn,ws),1&t&&Ts!==(Ts=e[0].duty.maxTSVFTL.PEQ4.textValue+"")&&W($n,Ts),1&t&&Ps!==(Ps=e[0].duty.reposPNC.FTL.textValue+"")&&W(Ln,Ps),1&t&&ks!==(ks=e[0].duty.destIATA+"")&&W(Rn,ks),1&t&&Cs!==(Cs=e[0].duty.textIN+"")&&W(Un,Cs),1&t&&Ls!==(Ls=e[0].duty.maxTSV_PEQ2.textIN+"")&&(Zn.innerHTML=Ls),1&t&&Kn!==(Kn=x(e[0].duty.maxTSV_PEQ2.rule)+" svelte-1lhqq06")&&U(Zn,"class",Kn),1&t&&Ss!==(Ss=e[0].duty.maxTSV_PEQ2.reposPNC+"")&&W(Xn,Ss),1&t&&Ms!==(Ms=e[0].duty.maxTSV_PEQ3.textIN+"")&&(no.innerHTML=Ms),1&t&&oo!==(oo=x(e[0].duty.maxTSV_PEQ3.rule)+" svelte-1lhqq06")&&U(no,"class",oo),1&t&&Es!==(Es=e[0].duty.maxTSV_PEQ3.reposPNC+"")&&W(ro,Es),1&t&&Os!==(Os=e[0].duty.maxTSV_PEQ4.textIN+"")&&(co.innerHTML=Os),1&t&&uo!==(uo=x(e[0].duty.maxTSV_PEQ4.rule)+" svelte-1lhqq06")&&U(co,"class",uo),1&t&&Fs!==(Fs=e[0].duty.maxTSV_PEQ4.reposPNC+"")&&W(mo,Fs),2&t&&qs!==(qs=e[1].infos.depIATA+"")&&W(bo,qs),1&t&&Is!==(Is=e[0].textOfpOut+"")&&W(wo,Is),1&t&&Ds!==(Ds=e[0].duty.maxTSV_PEQ2.textOUT+"")&&(Lo.innerHTML=Ds),1&t&&So!==(So=x(e[0].duty.maxTSV_PEQ2.rule)+" svelte-1lhqq06")&&U(Lo,"class",So),1&t&&Ns!==(Ns=e[0].duty.maxTSV_PEQ3.textOUT+"")&&(Fo.innerHTML=Ns),1&t&&qo!==(qo=x(e[0].duty.maxTSV_PEQ3.rule)+" svelte-1lhqq06")&&U(Fo,"class",qo),1&t&&_s!==(_s=e[0].duty.maxTSV_PEQ4.textOUT+"")&&(_o.innerHTML=_s),1&t&&zo!==(zo=x(e[0].duty.maxTSV_PEQ4.rule)+" svelte-1lhqq06")&&U(_o,"class",zo),e[0].duty.retardPNC?zs?zs.p(e,t):(zs=cf(e),zs.c(),zs.m(Dn,null)):zs&&(zs.d(1),zs=null),1&t){let n;for(js=e[0].duty.steps,n=0;n<js.length;n+=1){const o=rf(e,js,n);Rs[n]?Rs[n].p(o,t):(Rs[n]=uf(o),Rs[n].c(),Rs[n].m(Bo,null))}for(;n<Rs.length;n+=1)Rs[n].d(1);Rs.length=js.length}1&t&&Wo!==(Wo="duty "+e[0].duty.rules+" PEQ"+e[0].pilotCount+" "+(e[0].duty.steps.some(pf)?"invalid":"")+" svelte-1lhqq06")&&U(n,"class",Wo)},d(e){e&&F(t),zs&&zs.d(),q(Rs,e)}}}function af(t){let n;return{c(){n=I("div"),n.innerHTML="<p>Rotation CDB absente de l&#39;OFP ou erreur de traitement</p>",U(n,"class","fatal-error svelte-1lhqq06")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function cf(e){let t,n,o,s,r,l=e[0].duty.retardPNC.textOUT+"";return{c(){t=I("tr"),t.innerHTML='<th class="svelte-1lhqq06"></th><th class="svelte-1lhqq06">Butée départ PNC à la base <cite>MANEX 07.09.06.B.b</cite></th>',n=z(),o=I("tr"),s=I("td"),s.textContent="PNC",r=I("td"),U(t,"class","only_lc svelte-1lhqq06"),U(s,"class","svelte-1lhqq06"),U(r,"class","af svelte-1lhqq06"),U(o,"class","only_lc")},m(e,a){O(e,t,a),O(e,n,a),O(e,o,a),S(o,s),S(o,r),r.innerHTML=l},p(e,t){1&t&&l!==(l=e[0].duty.retardPNC.textOUT+"")&&(r.innerHTML=l)},d(e){e&&F(t),e&&F(n),e&&F(o)}}}function uf(e){let t,n=e[3]+"";return{c(){t=I("li")},m(e,o){O(e,t,o),t.innerHTML=n},p(e,o){1&o&&n!==(n=e[3]+"")&&(t.innerHTML=n)},d(e){e&&F(t)}}}function df(t){let n;function o(e,t){return e[0]?lf:af}let s=o(t),r=s(t);return{c(){r.c(),n=j()},m(e,t){r.m(e,t),O(e,n,t)},p(e,[t]){s===(s=o(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n)))},i:e,o:e,d(e){r.d(e),e&&F(n)}}}const pf=e=>e.includes('class="error"');function mf(e,t,n){let o,s;p(e,qn,(e=>n(0,o=e))),p(e,Ln,(e=>n(1,s=e)));return[o,s,e=>{const t=new Date(Date.UTC(2019,0,1));return t.setUTCMinutes(e),`${t.getUTCHours().toString().padStart(2,"0")}:${t.getUTCMinutes().toString().padStart(2,"0")}`}]}class ff extends Ge{constructor(e){super(),We(this,e,mf,df,a,{})}}function hf(t){let n,o;return n=new qm({props:{version:Om(),title:"NOUVEAUTÉS"}}),{c(){Be(n.$$.fragment)},m(e,t){He(n,e,t),o=!0},p:e,i(e){o||(qe(n.$$.fragment,e),o=!0)},o(e){Ie(n.$$.fragment,e),o=!1},d(e){Qe(n,e)}}}function gf(e){let t,n,o,s,l,a,i,c,u,d,p,m,f,h,g,v,y,$,x;return{c(){t=I("div"),n=I("div"),o=I("div"),s=I("h6"),l=I("span"),l.innerHTML="<span>👨🏻‍✈️</span> Mise à jour disponible",a=z(),i=I("button"),c=z(),u=I("div"),d=I("p"),d.textContent="Il faudra recharger l'OFP",p=z(),m=I("button"),f=I("span"),h=N(e[2]),U(l,"class","modal-title text-center"),U(i,"type","button"),U(i,"class","btn-close"),U(i,"data-bs-dismiss","modal"),U(i,"aria-label","Close"),U(s,"class","modal-header pt-2 pb-2 svelte-8a5ine"),U(f,"class","svelte-8a5ine"),ee(f,"blinking",e[2].endsWith("...")),U(m,"class","btn btn-primary"),U(m,"type","button"),U(u,"class","modal-body text-center"),U(o,"class","modal-content"),U(n,"class","modal-dialog"),Z(n,"position","absolute"),Z(n,"top","0"),Z(n,"right","1rem"),Z(n,"max-width","350px"),U(t,"class","modal svelte-8a5ine"),U(t,"tabindex","-1")},m(r,g){O(r,t,g),S(t,n),S(n,o),S(o,s),S(s,l),S(s,a),S(s,i),S(o,c),S(o,u),S(u,d),S(u,p),S(u,m),S(m,f),S(f,h),y=!0,$||(x=[R(i,"click",e[9]),R(m,"click",e[10],{once:!0})],$=!0)},p(e,t){(!y||4&t)&&W(h,e[2]),(!y||4&t)&&ee(f,"blinking",e[2].endsWith("..."))},i(e){y||(be((()=>{g||(g=_e(n,wt,{},!0)),g.run(1)})),be((()=>{v||(v=_e(t,wt,{},!0)),v.run(1)})),y=!0)},o(e){g||(g=_e(n,wt,{},!1)),g.run(0),v||(v=_e(t,wt,{},!1)),v.run(0),y=!1},d(e){e&&F(t),e&&g&&g.end(),e&&v&&v.end(),$=!1,r(x)}}}function vf(t){let n,o,s,l,a,i,c,u,d,p,m,f,h,g,v=(t[6](700)||"")+"";return{c(){n=I("div"),o=I("div"),s=I("div"),l=I("h6"),a=I("span"),a.innerHTML="<span>👨🏻‍✈️</span> Mise à jour détectée",i=z(),c=I("button"),u=z(),d=I("div"),p=I("button"),p.innerHTML="<span>Mise à jour...</span>",m=z(),f=N(v),U(a,"class","modal-title"),U(c,"type","button"),U(c,"class","btn-close"),U(c,"data-bs-dismiss","modal"),U(c,"aria-label","Close"),U(l,"class","modal-header text-center svelte-8a5ine"),U(p,"class","btn"),U(p,"type","button"),U(d,"class","modal-body text-center"),U(s,"class","modal-content"),U(o,"class","modal-dialog"),Z(o,"margin-top","15%"),Z(o,"max-width","270px"),U(n,"class","modal svelte-8a5ine"),U(n,"tabindex","-1")},m(e,r){O(e,n,r),S(n,o),S(o,s),S(s,l),S(l,a),S(l,i),S(l,c),S(s,u),S(s,d),S(d,p),S(n,m),O(e,f,r),h||(g=[R(c,"click",t[8]),R(p,"click",V(t[7]))],h=!0)},p:e,i:e,o:e,d(e){e&&F(n),e&&F(f),h=!1,r(g)}}}function yf(e){let t,n,o,s;const r=[vf,gf,hf],l=[];function a(e,t){return!e[1]||e[4]||e[0]?e[1]&&!e[4]?1:e[3]&&!e[1]&&"/install"!==e[5]?2:-1:0}return~(t=a(e))&&(n=l[t]=r[t](e)),{c(){n&&n.c(),o=j()},m(e,n){~t&&l[t].m(e,n),O(e,o,n),s=!0},p(e,[s]){let i=t;t=a(e),t===i?~t&&l[t].p(e,s):(n&&(Oe(),Ie(l[i],1,1,(()=>{l[i]=null})),Fe()),~t?(n=l[t],n?n.p(e,s):(n=l[t]=r[t](e),n.c()),qe(n,1),n.m(o.parentNode,o)):n=null)},i(e){s||(qe(n),s=!0)},o(e){Ie(n),s=!1},d(e){~t&&l[t].d(e),e&&F(o)}}}const $f=Lt(),xf=e=>{xn.set(!0),$n.set(!1),e?bn.set(!((e,t)=>{const n=e.split("."),o=t.split(".");return n.slice(0,-1).join(".")===o.slice(0,-1).join(".")})("1.20.3",e)):bn.set(!0)};function bf(t,n,o){let s,r,l,a,i,c,u=e;p(t,$f,(e=>o(11,r=e))),p(t,yn,(e=>o(12,l=e))),p(t,xn,(e=>o(1,a=e))),p(t,$n,(e=>o(4,i=e))),p(t,jn,(e=>o(5,c=e))),t.$$.on_destroy.push((()=>u()));let d="Installer";b($n,i=!1,i);let{prompt:m=!1}=n;const f=(e=0)=>{let t;l&&r&&r.waiting?(navigator.serviceWorker.addEventListener("controllerchange",(()=>{t||(t=!0,e?setTimeout((()=>window.location.reload()),e):window.location.reload())})),o(2,d="En cours..."),Om()||Em(),r.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout((()=>{window.location.reload()}),5e3)):window.location.reload()};return t.$$set=e=>{"prompt"in e&&o(0,m=e.prompt)},t.$$.update=()=>{2&t.$$.dirty&&o(3,s=(()=>{const e=Om();return!!e&&mt("1.20.3",e)>0})()&&Mm())},[m,a,d,s,i,c,f,function(e){pe.call(this,t,e)},()=>b($n,i=!0,i),()=>b($n,i=!0,i),()=>f()]}class Af extends Ge{constructor(e){super(),We(this,e,bf,yf,a,{prompt:0})}}function wf(e){let t,n,o,s;return o=new Pp({props:{tabindex:"-1",src:"https://p169.p3.n0.cdn.getcloudapp.com/items/kpu8dmyD/79d52aaf-7dac-4799-b835-d1028a060eca.mp4?source=client",title:"Installation\\nOFP2MAP",forcePreview:!1,topcaption:"Tuto vidéo ⇩"}}),{c(){t=I("ol"),t.innerHTML='<li class="svelte-1giyy61">Dans la barre de menu, cliquez sur <svg class="svelte-1giyy61"><use xlink:href="#share-symbol"></use></svg></li> \n                    <li class="svelte-1giyy61">Faites défiler, choisir : <em>Sur l&#39;écran d&#39;accueil</em>  <svg style="width:22px;height:22px;" class="svelte-1giyy61"><use xlink:href="#add2home-symbol"></use></svg></li> \n                    <li class="svelte-1giyy61">Lancez l&#39;application depuis l&#39;écran d&#39;accueil</li>',n=z(),Be(o.$$.fragment),U(t,"class","guide svelte-1giyy61")},m(e,r){O(e,t,r),O(e,n,r),He(o,e,r),s=!0},i(e){s||(qe(o.$$.fragment,e),s=!0)},o(e){Ie(o.$$.fragment,e),s=!1},d(e){e&&F(t),e&&F(n),Qe(o,e)}}}function Tf(t){let n;return{c(){n=I("p"),n.textContent="Merci d'ouvrir cette page dans Safari",U(n,"class","guide error svelte-1giyy61")},m(e,t){O(e,n,t)},i:e,o:e,d(e){e&&F(n)}}}function Pf(t){let n,o,s,r,l,a,i,c,u,d,p,m,f,h,g,v;n=new Lr({});const y=[Tf,wf],$=[];return m=function(e,t){return e[0]?1:0}(t),f=$[m]=y[m](t),g=new Af({}),{c(){Be(n.$$.fragment),o=z(),s=I("div"),r=I("div"),l=I("div"),l.innerHTML='<img src="./images/ofp2map-icons/icon-128x128.png" alt="OFP2MAP" class="svelte-1giyy61"/>',a=z(),i=I("div"),c=I("h3"),c.textContent="Installez OFP2MAP",u=z(),d=I("p"),d.innerHTML='Si OFP2MAP est déjà sur l&#39;écran d&#39;accueil, ne l&#39;installez pas une deuxième fois. <b>Attention:</b> l&#39;installation ne peut se faire que depuis\n                le navigateur Safari, <b>si présent, cliquez sur <svg class="safari svelte-1giyy61"><use xlink:href="#safari-symbol"></use></svg> en haut à droite</b>.',p=z(),f.c(),h=z(),Be(g.$$.fragment),U(l,"class","icon-container svelte-1giyy61"),U(c,"class","title svelte-1giyy61"),U(d,"class","text svelte-1giyy61"),U(i,"class","prompt-content svelte-1giyy61"),U(r,"class","prompt svelte-1giyy61"),U(s,"class","prompt-container svelte-1giyy61"),U(s,"id","install-prompt-container")},m(e,t){He(n,e,t),O(e,o,t),O(e,s,t),S(s,r),S(r,l),S(r,a),S(r,i),S(i,c),S(i,u),S(i,d),S(i,p),$[m].m(i,null),O(e,h,t),He(g,e,t),v=!0},p:e,i(e){v||(qe(n.$$.fragment,e),qe(f),qe(g.$$.fragment,e),v=!0)},o(e){Ie(n.$$.fragment,e),Ie(f),Ie(g.$$.fragment,e),v=!1},d(e){Qe(n,e),e&&F(o),e&&F(s),$[m].d(),e&&F(h),Qe(g,e)}}}function kf(e){return[Je&&!Ke]}class Cf extends Ge{constructor(e){super(),We(this,e,kf,Pf,a,{})}}function Lf(e){let t,n,o,s,r,l,a,i,c;t=new tf({props:{$$slots:{default:[Mf]},$$scope:{ctx:e}}}),o=new Af({props:{prompt:!!e[2]}});let u=(e[2]||e[4])&&"success"===e[1]&&Ef(e);const d=[zf,_f,Nf,Df,If,qf,Ff],p=[];function m(e,t){return"loading"===e[1]?0:e[1]&&"success"!==e[1]&&"/map"===e[3]?1:"/export"===e[3]&&"success"===e[1]?2:"/ftl"===e[3]&&"success"===e[1]?3:"/"===e[3]?4:"/help"===e[3]?5:!e[2]&&!e[4]||"/map"!==e[3]?6:-1}return~(l=m(e))&&(a=p[l]=d[l](e)),{c(){Be(t.$$.fragment),n=z(),Be(o.$$.fragment),s=z(),u&&u.c(),r=z(),a&&a.c(),i=j()},m(e,a){He(t,e,a),O(e,n,a),He(o,e,a),O(e,s,a),u&&u.m(e,a),O(e,r,a),~l&&p[l].m(e,a),O(e,i,a),c=!0},p(e,n){const s={};4097&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const c={};4&n&&(c.prompt=!!e[2]),o.$set(c),(e[2]||e[4])&&"success"===e[1]?u?(u.p(e,n),22&n&&qe(u,1)):(u=Ef(e),u.c(),qe(u,1),u.m(r.parentNode,r)):u&&(Oe(),Ie(u,1,1,(()=>{u=null})),Fe());let f=l;l=m(e),l===f?~l&&p[l].p(e,n):(a&&(Oe(),Ie(p[f],1,1,(()=>{p[f]=null})),Fe()),~l?(a=p[l],a?a.p(e,n):(a=p[l]=d[l](e),a.c()),qe(a,1),a.m(i.parentNode,i)):a=null)},i(e){c||(qe(t.$$.fragment,e),qe(o.$$.fragment,e),qe(u),qe(a),c=!0)},o(e){Ie(t.$$.fragment,e),Ie(o.$$.fragment,e),Ie(u),Ie(a),c=!1},d(e){Qe(t,e),e&&F(n),Qe(o,e),e&&F(s),u&&u.d(e),e&&F(r),~l&&p[l].d(e),e&&F(i)}}}function Sf(t){let n,o;return n=new Cf({}),{c(){Be(n.$$.fragment)},m(e,t){He(n,e,t),o=!0},p:e,i(e){o||(qe(n.$$.fragment,e),o=!0)},o(e){Ie(n.$$.fragment,e),o=!1},d(e){Qe(n,e)}}}function Mf(e){let t,n;return t=new jr({props:{kmlOptions:e[0]}}),t.$on("change",e[6]),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Ef(e){let t,n;return t=new sf({props:{hidden:"/map"!==e[3],overflowY:"hidden",$$slots:{default:[Of]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.hidden="/map"!==e[3]),4101&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Of(e){let t,n,o;function s(t){e[7](t)}let r={id:"map",ofp:e[2]};return void 0!==e[0]&&(r.kmlOptions=e[0]),t=new oc({props:r}),fe.push((()=>Ue(t,"kmlOptions",s))),t.$on("save",e[8]),{c(){Be(t.$$.fragment)},m(e,n){He(t,e,n),o=!0},p(e,o){const s={};4&o&&(s.ofp=e[2]),!n&&1&o&&(n=!0,s.kmlOptions=e[0],Ae((()=>n=!1))),t.$set(s)},i(e){o||(qe(t.$$.fragment,e),o=!0)},o(e){Ie(t.$$.fragment,e),o=!1},d(e){Qe(t,e)}}}function Ff(t){let n,o=(t[5](t[3])||"")+"";return{c(){n=N(o)},m(e,t){O(e,n,t)},p(e,t){8&t&&o!==(o=(e[5](e[3])||"")+"")&&W(n,o)},i:e,o:e,d(e){e&&F(n)}}}function qf(e){let t,n;return t=new sf({props:{maxWidth:"1400px",overflowY:"hidden",$$slots:{default:[jf]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function If(e){let t,n;return t=new sf({props:{maxWidth:"1400px",$$slots:{default:[Rf]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Df(e){let t,n;return t=new sf({props:{maxWidth:"1400px",overflowY:"hidden",width:"100%",$$slots:{default:[Vf]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Nf(e){let t,n;return t=new sf({props:{maxWidth:"1400px",$$slots:{default:[Uf]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};4097&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function _f(e){let t,n;return t=new sf({props:{$$slots:{default:[Bf]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};4098&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function zf(e){let t,n;return t=new sf({props:{$$slots:{default:[Hf]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function jf(e){let t,n;return t=new Bm({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Rf(e){let t,n;return t=new Jr({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Vf(e){let t,n;return t=new ff({}),{c(){Be(t.$$.fragment)},m(e,o){He(t,e,o),n=!0},i(e){n||(qe(t.$$.fragment,e),n=!0)},o(e){Ie(t.$$.fragment,e),n=!1},d(e){Qe(t,e)}}}function Uf(e){let t,n,o,s;return t=new Tr({props:{kmlOptions:e[0]}}),t.$on("save",e[9]),o=new Kn({}),{c(){Be(t.$$.fragment),n=z(),Be(o.$$.fragment)},m(e,r){He(t,e,r),O(e,n,r),He(o,e,r),s=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){s||(qe(t.$$.fragment,e),qe(o.$$.fragment,e),s=!0)},o(e){Ie(t.$$.fragment,e),Ie(o.$$.fragment,e),s=!1},d(e){Qe(t,e),e&&F(n),Qe(o,e)}}}function Bf(e){let t,n,o;return{c(){t=I("p"),n=N("😱: "),o=N(e[1]),U(t,"class","ofpError svelte-sbh19l")},m(e,s){O(e,t,s),S(t,n),S(t,o)},p(e,t){2&t&&W(o,e[1])},d(e){e&&F(t)}}}function Hf(t){let n;return{c(){n=I("div"),n.textContent="traitement en cours...",Z(n,"margin","auto")},m(e,t){O(e,n,t)},p:e,d(e){e&&F(n)}}}function Qf(e){let t,n,o,s,r,l;const a=[Sf,Lf],i=[];function c(e,t){return"/install"===e[3]?0:1}return o=c(e),s=i[o]=a[o](e),{c(){t=I("main"),n=I("div"),s.c(),U(n,"class","content svelte-sbh19l"),U(t,"class",r="container "+(e[3].substr(1)||"home")+" svelte-sbh19l")},m(e,s){O(e,t,s),S(t,n),i[o].m(n,null),l=!0},p(e,[u]){let d=o;o=c(e),o===d?i[o].p(e,u):(Oe(),Ie(i[d],1,1,(()=>{i[d]=null})),Fe(),s=i[o],s?s.p(e,u):(s=i[o]=a[o](e),s.c()),qe(s,1),s.m(n,null)),(!l||8&u&&r!==(r="container "+(e[3].substr(1)||"home")+" svelte-sbh19l"))&&U(t,"class",r)},i(e){l||(qe(s),l=!0)},o(e){Ie(s),l=!1},d(e){e&&F(t),i[o].d()}}}function Wf(e,t,n){let o,s,r,l,a,i;p(e,$n,(e=>n(10,o=e))),p(e,An,(e=>n(11,s=e))),p(e,Sn,(e=>n(1,r=e))),p(e,Ln,(e=>n(2,l=e))),p(e,jn,(e=>n(3,a=e))),p(e,Fn,(e=>n(4,i=e)));null===go.getItem(ho.optionsKML)&&(e=>{const t={},n={};e.length>1&&(e.substr(1)||"").split("&").forEach((function(e){const n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}));for(let[e,o]of Object.entries(t))if(e in fo){let t;e.endsWith("Pin")?(o*=1,isNaN(o)||(t=o)):e.endsWith("Color")&&o.match(so)?t=o.toUpperCase():e.endsWith("Display")?t=!!o:e.endsWith("Change")&&(o*=1,isNaN(o)||(t=o.toFixed(1))),void 0!==t&&(n[e]=t)}else"downloadType"===e?(o*=1,isNaN(o)||go.setItem(ho.downloadType,o)):"shortcut"===e&&(o=o.trim(),o&&go.setItem(ho.shortcut,o));go.setItem(ho.optionsKML,n)})(window.location.search);let c=vo(go.getItem(ho.optionsKML)||{});yo(c);ce((()=>(document.addEventListener("visibilitychange",Nn,!1),()=>document.removeEventListener("visibilitychange",Nn))));return[c,r,l,a,i,e=>{window.location.hash="#/"},()=>{b(An,s=!1,s),b($n,o=!1,o)},function(e){c=e,n(0,c)},()=>yo(c),()=>yo(c)]}class Gf extends Ge{constructor(e){super(),We(this,e,Wf,Qf,a,{})}}try{self["workbox:window:6.4.1"]&&_()}catch(Zf){}function Zf(e,t){return new Promise((function(n){var o=new MessageChannel;o.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[o.port2])}))}function Kf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Jf(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Kf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kf(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.4.1"]&&_()}catch(Zf){}var Xf=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Yf(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var eh=function(e,t){this.type=e,Object.assign(this,t)};function th(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function nh(){}var oh={type:"SKIP_WAITING"};function sh(e,t){if(!t)return e&&e.then?e.then(nh):Promise.resolve()}var rh=function(e){var t,n;function o(t,n){var o,s;return void 0===n&&(n={}),(o=e.call(this)||this).nn={},o.tn=0,o.rn=new Xf,o.en=new Xf,o.on=new Xf,o.un=0,o.an=new Set,o.cn=function(){var e=o.fn,t=e.installing;o.tn>0||!Yf(t.scriptURL,o.sn.toString())||performance.now()>o.un+6e4?(o.vn=t,e.removeEventListener("updatefound",o.cn)):(o.hn=t,o.an.add(t),o.rn.resolve(t)),++o.tn,t.addEventListener("statechange",o.ln)},o.ln=function(e){var t=o.fn,n=e.target,s=n.state,r=n===o.vn,l={sw:n,isExternal:r,originalEvent:e};!r&&o.mn&&(l.isUpdate=!0),o.dispatchEvent(new eh(s,l)),"installed"===s?o.wn=self.setTimeout((function(){"installed"===s&&t.waiting===n&&o.dispatchEvent(new eh("waiting",l))}),200):"activating"===s&&(clearTimeout(o.wn),r||o.en.resolve(n))},o.dn=function(e){var t=o.hn,n=t!==navigator.serviceWorker.controller;o.dispatchEvent(new eh("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:o.mn})),n||o.on.resolve(t)},o.gn=(s=function(e){var t=e.data,n=e.ports,s=e.source;return th(o.getSW(),(function(){o.an.has(s)&&o.dispatchEvent(new eh("message",{data:t,originalEvent:e,ports:n,sw:s}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(s.apply(this,e))}catch(e){return Promise.reject(e)}}),o.sn=t,o.nn=n,navigator.serviceWorker.addEventListener("message",o.gn),o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s,r=o.prototype;return r.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var o=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return sh(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return o.mn=Boolean(navigator.serviceWorker.controller),o.yn=o.pn(),th(o.bn(),(function(e){o.fn=e,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&Yf(t.scriptURL,o.sn.toString())&&(o.hn=t,Promise.resolve().then((function(){o.dispatchEvent(new eh("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn),o.fn}))}))}catch(e){return Promise.reject(e)}},r.update=function(){try{return this.fn?sh(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},r.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},r.messageSW=function(e){try{return th(this.getSW(),(function(t){return Zf(t,e)}))}catch(e){return Promise.reject(e)}},r.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Zf(this.fn.waiting,oh)},r.pn=function(){var e=navigator.serviceWorker.controller;return e&&Yf(e.scriptURL,this.sn.toString())?e:void 0},r.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return th(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(s=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(o.prototype,s),o}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Jf(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());let lh,ah=!1;try{lh=new Gf({target:document.body})}catch(e){ah=!0;try{var ih=document.createElement("p");ih.innerHTML="Erreur: "+e.message+"<br/><br/>OFP2MAP a besoin de navigateurs récents: Safari 14 iOS/Mac, Firefox 86, Chrome 87 et Microsoft Edge 87 sont compatibles. <br /><br />Contactez moi sur l'email AF (erdelord@...) en me donnant le message d'erreur.",document.body.appendChild(ih)}catch(Jf){}}finally{if("serviceWorker"in navigator){const e=new rh("./sw.js");yn.set(e),e.addEventListener("installed",(e=>{e.isUpdate})),e.addEventListener("activated",(t=>{t.isUpdate||e.messageSW({type:"CLIENTS_CLAIM"}),t.isExternal})),e.addEventListener("waiting",(t=>{ah?(e.addEventListener("controlling",(()=>{window.location.reload()})),e.messageSkipWaiting()):(t.isExternal,pt(400,Zf(t.sw,{type:"GET_VERSION"})).then((e=>xf(e))).catch((e=>{xf()})))})),e.register().then((e=>{ah&&e&&e.unregister(),$f.set(e)}),console.error)}}return lh}();
//# sourceMappingURL=bundle.js.map
