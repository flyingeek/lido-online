var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function r(){return Object.create(null)}function i(e){e.forEach(o)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(e,t,n,o){if(e){const r=u(e,t,n,o);return e[0](r)}}function u(e,t,o,r){return e[1]&&r?n(o.ctx.slice(),e[1](r(t))):o.ctx}function p(e,t,n,o,r,i,a){const s=function(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}(t,o,r,i);if(s){const r=u(t,n,o,a);e.p(r,s)}}function d(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function m(e,t,n=t){return e.set(n),t}function f(t){return t&&a(t.destroy)?t.destroy:e}const g="undefined"!=typeof window;let h=g?()=>window.performance.now():()=>Date.now(),v=g?e=>requestAnimationFrame(e):e;const y=new Set;function $(e){y.forEach((t=>{t.c(e)||(y.delete(t),t.f())})),0!==y.size&&v($)}function b(e){let t;return 0===y.size&&v($),{promise:new Promise((n=>{y.add(t={c:e,f:n})})),abort(){y.delete(t)}}}function x(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function P(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function L(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function j(e){return document.createTextNode(e)}function M(){return j(" ")}function F(){return j("")}function O(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function E(e){return function(t){return t.preventDefault(),e.call(this,t)}}function A(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function S(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:A(e,o,t[o])}function T(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function I(e){return""===e?null:+e}function D(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function R(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function W(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function N(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function q(e,t,n){e.classList[n?"add":"remove"](t)}function G(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const U=new Set;let H,B=0;function Z(e,t,n,o,r,i,a,s=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*i(e);c+=100*e+`%{${a(o,1-o)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,p=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,d=e.ownerDocument;U.add(d);const m=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(C("style")).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[p]||(f[p]=!0,m.insertRule(`@keyframes ${p} ${u}`,m.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${p} ${o}ms linear ${r}ms 1 both`,B+=1,p}function K(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),B-=r,B||v((()=>{B||(U.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),U.clear())})))}function X(e){H=e}function J(){if(!H)throw new Error("Function called outside component initialization");return H}function V(e){J().$$.on_mount.push(e)}function Y(){const e=J();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=G(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}function Q(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const ee=[],te=[],ne=[],oe=[],re=Promise.resolve();let ie=!1;function ae(){ie||(ie=!0,re.then(pe))}function se(e){ne.push(e)}function le(e){oe.push(e)}let ce=!1;const ue=new Set;function pe(){if(!ce){ce=!0;do{for(let e=0;e<ee.length;e+=1){const t=ee[e];X(t),de(t.$$)}for(X(null),ee.length=0;te.length;)te.pop()();for(let e=0;e<ne.length;e+=1){const t=ne[e];ue.has(t)||(ue.add(t),t())}ne.length=0}while(ee.length);for(;oe.length;)oe.pop()();ie=!1,ce=!1,ue.clear()}}function de(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(se)}}let me;function fe(){return me||(me=Promise.resolve(),me.then((()=>{me=null}))),me}function ge(e,t,n){e.dispatchEvent(G(`${t?"intro":"outro"}${n}`))}const he=new Set;let ve;function ye(){ve={r:0,c:[],p:ve}}function $e(){ve.r||i(ve.c),ve=ve.p}function be(e,t){e&&e.i&&(he.delete(e),e.i(t))}function xe(e,t,n,o){if(e&&e.o){if(he.has(e))return;he.add(e),ve.c.push((()=>{he.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const we={duration:0};function ke(n,o,r,s){let l=o(n,r),c=s?0:1,u=null,p=null,d=null;function m(){d&&K(n,d)}function f(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(o){const{delay:r=0,duration:a=300,easing:s=t,tick:g=e,css:v}=l||we,y={start:h()+r,b:o};o||(y.group=ve,ve.r+=1),u||p?p=y:(v&&(m(),d=Z(n,c,o,a,r,s,v)),o&&g(0,1),u=f(y,a),se((()=>ge(n,o,"start"))),b((e=>{if(p&&e>p.start&&(u=f(p,a),p=null,ge(n,u.b,"start"),v&&(m(),d=Z(n,c,u.b,u.duration,0,s,l.css))),u)if(e>=u.end)g(c=u.b,1-c),ge(n,u.b,"end"),p||(u.b?m():--u.group.r||i(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*s(t/u.duration),g(c,1-c)}return!(!u&&!p)})))}return{run(e){a(l)?fe().then((()=>{l=l(),g(e)})):g(e)},end(){m(),u=p=null}}}function Pe(e,t){const n=t.token={};function o(e,o,r,i){if(t.token!==n)return;t.resolved=i;let a=t.ctx;void 0!==r&&(a=a.slice(),a[r]=i);const s=e&&(t.current=e)(a);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(ye(),xe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),$e())})):t.block.d(1),s.c(),be(s,1),s.m(t.mount(),t.anchor),l=!0),t.block=s,t.blocks&&(t.blocks[o]=s),l&&pe()}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){const n=J();if(e.then((e=>{X(n),o(t.then,1,t.value,e),X(null)}),(e=>{if(X(n),o(t.catch,2,t.error,e),X(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var r}function Ce(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Le(e){e&&e.c()}function je(e,t,n){const{fragment:r,on_mount:s,on_destroy:l,after_update:c}=e.$$;r&&r.m(t,n),se((()=>{const t=s.map(o).filter(a);l?l.push(...t):i(t),e.$$.on_mount=[]})),c.forEach(se)}function _e(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Me(t,n,o,a,s,l,c=[-1]){const u=H;X(t);const p=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let d=!1;if(p.ctx=o?o(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&s(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),d&&function(e,t){-1===e.$$.dirty[0]&&(ee.push(e),ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),d=!0,i(p.before_update),p.fragment=!!a&&a(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(k)}else p.fragment&&p.fragment.c();n.intro&&be(t.$$.fragment),je(t,n.target,n.anchor),pe()}X(u)}class Fe{$destroy(){_e(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Oe{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}const Ee="iPad"===navigator.platform||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Ae=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),Se=/Safari\//i.test(navigator.userAgent)&&!/(Chrome\/|Chromium\/)/i.test(navigator.userAgent),Te=matchMedia("(hover: hover)").matches;function Ie(e,t,n){let o;return function(){const r=this,i=arguments,a=function(){o=null,n||e.apply(r,i)},s=n&&!o;clearTimeout(o),o=setTimeout(a,t),s&&e.apply(r,i)}}function De(e){const t=e.split("-").slice(0,-1).join("");switch(t){case"route":return"rmain";case"alternate":return"ralt";case"nat":return"rnat";default:return t}}function ze(e,t,n){return e<=t?t:e>=n?n:e}function Re(e,t,n){return!(e<t)&&!(e>n)}function We(e,t,n,o){return 8&n?[e[0]+(t[0]-e[0])*(o[3]-e[1])/(t[1]-e[1]),o[3]]:4&n?[e[0]+(t[0]-e[0])*(o[1]-e[1])/(t[1]-e[1]),o[1]]:2&n?[o[2],e[1]+(t[1]-e[1])*(o[2]-e[0])/(t[0]-e[0])]:1&n?[o[0],e[1]+(t[1]-e[1])*(o[0]-e[0])/(t[0]-e[0])]:null}function Ne(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function qe(e,t){let n=new Promise(((t,n)=>{let o=setTimeout((()=>{clearTimeout(o),n("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,n])}function Ge(e){const t=e-1;return t*t*t+1}function Ue(e,{delay:n=0,duration:o=400,easing:r=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:r,css:e=>"opacity: "+e*i}}function He(e,{delay:t=0,duration:n=400,easing:o=Ge,x:r=0,y:i=0,opacity:a=0}={}){const s=getComputedStyle(e),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-a);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*r}px, ${(1-e)*i}px);\n\t\t\topacity: ${l-u*t}`}}function Be(e){let t;return{c(){t=C("textarea"),t.value=e[0],A(t,"class","svelte-12a0ij3")},m(n,o){w(n,t,o),e[6](t)},p(e,n){1&n&&(t.value=e[0])},d(n){n&&k(t),e[6](null)}}}function Ze(t){let n,o,r;return{c(){n=C("a"),n.textContent="copier la route",A(n,"role","button"),A(n,"class","btn btn-primary svelte-12a0ij3"),A(n,"href","lhs-mpilot://")},m(e,i){w(e,n,i),o||(r=O(n,"click",t[4]),o=!0)},p:e,d(e){e&&k(n),o=!1,r()}}}function Ke(t){let n,o,r,i,a;return{c(){n=C("a"),n.innerHTML="ouvrir mPilot <sup>*</sup>",o=M(),r=C("p"),r.innerHTML='<small class="text-muted"><sup>*</sup> Une fois dans l&#39;application mPilot,\n             il vous suffira de faire un coller (la route aura √©t√© copi√©e automatiquement).</small>',A(n,"role","button"),A(n,"class","btn btn-primary svelte-12a0ij3"),A(n,"href","lhs-mpilot://"),A(r,"class","card-text")},m(e,s){w(e,n,s),w(e,o,s),w(e,r,s),i||(a=O(n,"click",t[4]),i=!0)},p:e,d(e){e&&k(n),e&&k(o),e&&k(r),i=!1,a()}}}function Xe(n){let o,r,s;return{c(){o=C("span"),o.textContent="copi√©!",A(o,"class","svelte-12a0ij3")},m(e,t){w(e,o,t),s=!0},i(e){s||(r&&r.end(1),s=!0)},o(n){r=function(n,o,r){let s,l=o(n,r),c=!0;const u=ve;function p(){const{delay:o=0,duration:r=300,easing:a=t,tick:p=e,css:d}=l||we;d&&(s=Z(n,1,0,r,o,a,d));const m=h()+o,f=m+r;se((()=>ge(n,!1,"start"))),b((e=>{if(c){if(e>=f)return p(0,1),ge(n,!1,"end"),--u.r||i(u.c),!1;if(e>=m){const t=a((e-m)/r);p(1-t,t)}}return c}))}return u.r+=1,a(l)?fe().then((()=>{l=l(),p()})):p(),{end(e){e&&l.tick&&l.tick(1,0),c&&(s&&K(n,s),c=!1)}}}(o,Ue,{}),s=!1},d(e){e&&k(o),e&&r&&r.end()}}}function Je(e){let t,n,o,r,i,a,s,l,c,u,p,d,m=null!=e[0]&&Be(e);let f=(Ee?Ke:Ze)(e),g=e[2]&&Xe();return{c(){m&&m.c(),t=M(),n=C("div"),o=C("div"),r=C("h5"),r.textContent="Route Lido",i=M(),a=C("p"),a.textContent="Cette route est optimis√©e par rapport √† celle de PilotMission car elle utilise les airways. Utiliser cette route permet\nd'avoir une application Lido plus r√©active.",s=M(),f.c(),l=M(),c=C("div"),u=j(e[3]),p=M(),g&&g.c(),A(r,"class","card-title"),A(a,"class","card-text"),A(c,"class","text-monospace svelte-12a0ij3"),A(o,"class","card-body"),A(n,"class","card mb-3 svelte-12a0ij3")},m(e,h){m&&m.m(e,h),w(e,t,h),w(e,n,h),x(n,o),x(o,r),x(o,i),x(o,a),x(o,s),f.m(o,null),x(o,l),x(o,c),x(c,u),x(c,p),g&&g.m(c,null),d=!0},p(e,[n]){null!=e[0]?m?m.p(e,n):(m=Be(e),m.c(),m.m(t.parentNode,t)):m&&(m.d(1),m=null),f.p(e,n),e[2]?g?4&n&&be(g,1):(g=Xe(),g.c(),be(g,1),g.m(c,null)):g&&(ye(),xe(g,1,1,(()=>{g=null})),$e())},i(e){d||(be(g),d=!0)},o(e){xe(g),d=!1},d(e){m&&m.d(e),e&&k(t),e&&k(n),f.d(),g&&g.d()}}}let Ve=!1;if(navigator.permissions)try{navigator.permissions.query({name:"clipboard-write"}).then((e=>{"granted"!=e.state&&"prompt"!=e.state||(Ve=!0)}))}catch(e){}function Ye(e,t,n){let o,{ofp:r}=t,i=null;const a=r?r.lidoRoute().join(" "):"";let s=!1;return e.$$set=e=>{"ofp"in e&&n(5,r=e.ofp)},[i,o,s,a,e=>{e.target.classList.remove("hasactive");const t=async function(e){let t=!0;if(Ve)navigator.clipboard.writeText(e).then((()=>t=!0),(()=>t=!1));else{n(0,i=e),await(ae(),re),o.focus(),o.select();try{t=document.execCommand("copy")}catch(e){t=!1}n(0,i=null)}return t}(a);Ee||(n(2,s=t),setTimeout((function(){n(2,s=!1)}),3e3),e.preventDefault())},r,function(e){te[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class Qe extends Fe{constructor(e){super(),Me(this,e,Ye,Je,s,{ofp:5})}}const et={routePin:0,routeColor:"FFDA25A8",alternateDisplay:!0,alternatePin:0,alternateColor:"FFFF00FF",natDisplay:!0,natPin:8,natPinPosition:0,natColor:"80DA25A8",natIncompleteColor:"FF0000FF",greatCircleDisplay:!0,greatCircleColor:"5F1478FF",ogimetDisplay:!0,ogimetColor:"40FF0000",airportDisplay:!0,airportPin:0,firDisplay:!0,etopsDisplay:!0,etopsColor:"FF0324FC"};function tt(e,t){e.addFolders({name:"greatcircle",enabled:t.greatCircleDisplay,color:t.greatCircleColor},{name:"ogimet",enabled:t.ogimetDisplay,color:t.ogimetColor},{name:"ralt",enabled:t.alternateDisplay,color:t.alternateColor,pinId:t.alternatePin},{name:"rmain",color:t.routeColor,pinId:t.routePin},{name:"rnat",enabled:t.natDisplay,color:t.natColor,pinId:t.natPin},{name:"rnat_incomplete",enabled:t.natDisplay,color:t.natIncompleteColor,pinId:t.natPin})}const nt=()=>(window.kmlGen||(window.kmlGen=new editolido.KMLGenerator,tt(window.kmlGen,et)),window.kmlGen);function ot(e,t){let n={...et,...t};const o=nt();tt(o,n);const r=e.description;if(o.setName(r),e.isFake)return;const i=`${e.infos.departure}-${e.infos.destination}`,a=new editolido.Route(e.wptCoordinates(),{name:i,description:r}),s=new editolido.Route(e.wptCoordinatesAlternate(),{name:"Route D√©gagement"}),l=new editolido.Route([a.points[0],a.points[a.points.length-1]]).split(300,{name:`Ortho ${i}`});let c=[];for(let t of e.tracks){let e=t.isComplete?"rnat":"rnat_incomplete";o.addLine(e,t);let n=new editolido.GeoPoint(t.points[0],{name:t.name,description:t.description});o.addPoint(e,n),t.isMine&&(c.push(n),n=new editolido.GeoPoint(t.points[t.points.length-1],{name:t.name,description:t.description}),c.push(n),o.addPoint(e,n))}o.addLine("greatcircle",l),o.addLine("rmain",a),o.addPoints("rmain",a,{excluded:c}),o.addLine("ralt",s),o.addLine("ogimet",e.ogimetData.route),o.addPoints("ralt",s)}function rt(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function it(e){let t,n,o,r=e[14].label+"";return{c(){t=C("option"),n=j(r),t.__value=e[16],t.value=t.__value,t.selected=o=e[16]===e[1]},m(e,o){w(e,t,o),x(t,n)},p(e,n){2&n&&o!==(o=e[16]===e[1])&&(t.selected=o)},d(e){e&&k(t)}}}function at(t){let n,o,r,s,l,c,u,p,d,m,g,h,v,y,$,b,j,_,F=mt,E=[];for(let e=0;e<F.length;e+=1)E[e]=it(rt(t,F,e));return{c(){n=C("kmlcolor"),o=C("pin"),r=L("svg"),s=L("use"),l=M(),c=C("select");for(let e=0;e<E.length;e+=1)E[e].c();u=M(),p=C("picker"),d=C("label"),m=C("input"),v=M(),y=C("input"),T(s,"xlink:href","#marker"),R(s,"stroke",0===t[1]?"#fff":"#000"),R(s,"fill",mt[t[1]].color),A(o,"class","form-control svelte-15ps55h"),A(c,"name",t[4]),A(c,"class","custom-select"),void 0===t[1]&&se((()=>t[8].call(c))),A(m,"type","color"),A(d,"style",g=dt(t[2])),A(y,"type","range"),A(y,"min","30"),A(y,"max","255"),A(p,"class","form-control"),A(p,"style",$=pt(t[2][0])),A(n,"class","input-group")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,s),x(n,l),x(n,c);for(let e=0;e<E.length;e+=1)E[e].m(c,null);W(c,t[1]),x(n,u),x(n,p),x(p,d),x(d,m),z(m,t[2][0]),x(p,v),x(p,y),z(y,t[2][1]),j||(_=[O(c,"change",t[8]),O(c,"change",t[9]),O(m,"input",t[10]),f(h=t[5].call(null,d,t[2])),O(y,"change",t[11]),O(y,"input",t[11]),f(b=t[6].call(null,n,t[0]))],j=!0)},p(e,[t]){if(2&t&&R(s,"stroke",0===e[1]?"#fff":"#000"),2&t&&R(s,"fill",mt[e[1]].color),2&t){let n;for(F=mt,n=0;n<F.length;n+=1){const o=rt(e,F,n);E[n]?E[n].p(o,t):(E[n]=it(o),E[n].c(),E[n].m(c,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=F.length}2&t&&W(c,e[1]),4&t&&z(m,e[2][0]),4&t&&g!==(g=dt(e[2]))&&A(d,"style",g),h&&a(h.update)&&4&t&&h.update.call(null,e[2]),4&t&&z(y,e[2][1]),4&t&&$!==($=pt(e[2][0]))&&A(p,"style",$),b&&a(b.update)&&1&t&&b.update.call(null,e[0])},i:e,o:e,d(e){e&&k(n),P(E,e),j=!1,i(_)}}}const st=/^[A-F0-9]{8}$/i,lt=e=>{let[t,n]=ut(e);return[t,n/255]},ct=["#FF0000",255],ut=e=>{try{const t=parseInt(e.slice(0,2),16);return["#"+e.slice(6,8)+e.slice(4,6)+e.slice(2,4),t]}catch(e){swatch=ct}},pt=e=>{const[t,n,o]=[e.slice(1,3),e.slice(3,5),e.slice(5,7)].map((e=>parseInt(e,16)));return`--range-red: ${t}; --range-green: ${n}; --range-blue: ${o};`},dt=e=>`background-color: ${e[0]}; opacity: ${e[1]/255}`,mt=[{label:"Aucun rep√®re",color:"#FFFFFF"},{label:"Bleu",color:"#6699FF"},{label:"Jaune",color:"#FFFF00"},{label:"Marron* (Rouge pour Avenza)",color:"#CC9966"},{label:"Orange",color:"#FF9922"},{label:"Rose* (Rouge pour Avenza)",color:"#DD5599"},{label:"Rouge",color:"#FF0000"},{label:"Vert",color:"#22DD44"},{label:"Violet",color:"#BB11EE"}];function ft(e,t,n){const o=Y();let{kmlColor:r="FF0000FF"}=t,{selected:i=0}=t,{name:a}=t;const s=a+"-color",l=a+"-pin";let c=ct;const u=Ie(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"selected"in e&&n(1,i=e.selected),"name"in e&&n(7,a=e.name)},[r,i,c,o,l,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),u("change",{name:s,value:r})}}},function(e){return n(2,c=ut(r)),{update(e){n(2,c=ut(e)),u("change",{name:s,value:e.toUpperCase()})}}},a,function(){i=N(this),n(1,i)},e=>{e.target.blur(),o("change",{name:l,value:i})},function(){c[0]=this.value,n(2,c)},function(){c[1]=I(this.value),n(2,c)}]}class gt extends Fe{constructor(e){super(),Me(this,e,ft,at,s,{kmlColor:0,selected:1,name:7})}}const ht=Object.freeze({optionsKML:"optionsKML",shortcut:"shortcut",downloadType:"downloadType"}),vt=new class{constructor(){}getItem(e){const t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(t){this.removeItem(e)}return null}setItem(e,t){"{}"!==(t=JSON.stringify(t))&&localStorage.setItem(e,t)}removeItem(e){localStorage.removeItem(e)}},yt=(e,t,n="Mon OFP2MAP")=>{const o={};for(const[t,n]of Object.entries(ht)){let r=vt.getItem(n);if(t===ht.optionsKML&&e){const t={};for(const n of Object.keys(e).filter((t=>e[t]!==et[t])))t[n]=e[n];r=t}if(null!==r)if(t===ht.optionsKML)for(const[e,t]of Object.entries(r))o[e]=t;else o[t]=r}const r=Object.entries(o).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),i=window.location.origin+window.location.pathname+(r?"?"+r:"")+"#"+t;window.history.replaceState(o,n,i)};function $t(t){let n,o,r,a,s,l,c,u,p,d;return{c(){n=C("div"),o=C("div"),o.innerHTML='<span class="input-group-text svelte-1ecyaux"></span>',r=M(),a=C("input"),s=M(),l=C("div"),c=C("a"),u=j("Lancer"),A(o,"class","input-group-prepend"),A(a,"class","form-control svelte-1ecyaux"),A(a,"placeholder","Nom du raccourci"),A(a,"type","text"),A(c,"class","btn btn-outline-secondary svelte-1ecyaux"),A(c,"href",t[1]),q(c,"disabled",!(t[0].trim()&&Ee)),A(l,"class","input-group-append"),A(n,"class","input-group")},m(e,i){w(e,n,i),x(n,o),x(n,r),x(n,a),z(a,t[0]),x(n,s),x(n,l),x(l,c),x(c,u),p||(d=[O(a,"input",t[5]),O(a,"change",t[3]),O(c,"click",t[2])],p=!0)},p(e,[t]){1&t&&a.value!==e[0]&&z(a,e[0]),2&t&&A(c,"href",e[1]),1&t&&q(c,"disabled",!(e[0].trim()&&Ee))},i:e,o:e,d(e){e&&k(n),p=!1,i(d)}}}const bt="OFP2MAP";function xt(e,t,n){const o=Y(),r=ht.shortcut;let i,a=vt.getItem(r)||bt,{ofp:s}=t;const l=s?s.lidoRoute().join(" "):"";return e.$$set=e=>{"ofp"in e&&n(4,s=e.ofp)},[a,i,function(e){const t=a.trim();if(t&&Ee){const e=nt(),o={lidoRoute:l,kml:e.render(),kmlAvenza:e.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS}),grametProxyURL:s.ogimetData.proxyImg};n(1,i="shortcuts://run-shortcut?name="+encodeURIComponent(t)+"&input=text&text="+encodeURIComponent(JSON.stringify(o)))}else e.preventDefault()},function(){const e=a.trim();e===bt?vt.removeItem(r):vt.setItem(r,e),o("save",[r,e])},s,function(){a=this.value,n(0,a)}]}class wt extends Fe{constructor(e){super(),Me(this,e,xt,$t,s,{ofp:4})}}function kt(t){let n,o,r,a,s,l,c,u,p,d,m,f,g,h,v,y=Lt[0]+"",$=Lt[1]+"";return{c(){n=C("div"),o=C("select"),r=C("option"),a=j(y),l=C("option"),c=j($),p=M(),d=C("div"),m=C("a"),f=j(t[0]),r.selected=s=0===t[1],r.__value=0,r.value=r.__value,l.selected=u=1===t[1],l.__value=1,l.value=l.__value,A(o,"class","custom-select svelte-19hokx5"),A(o,"aria-label","Example select with button addon"),void 0===t[1]&&se((()=>t[6].call(o))),A(m,"class","btn btn-success"),A(m,"download",g=navigator.standalone?null:t[3]),A(m,"href",t[2]),A(m,"target",Pt),A(d,"class","input-group-append"),A(n,"class","input-group")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,a),x(o,l),x(l,c),W(o,t[1]),x(n,p),x(n,d),x(d,m),x(m,f),h||(v=[O(o,"change",t[6]),O(o,"change",t[5]),O(m,"click",t[4])],h=!0)},p(e,[t]){2&t&&s!==(s=0===e[1])&&(r.selected=s),2&t&&u!==(u=1===e[1])&&(l.selected=u),2&t&&W(o,e[1]),1&t&&D(f,e[0]),8&t&&g!==(g=navigator.standalone?null:e[3])&&A(m,"download",g),4&t&&A(m,"href",e[2])},i:e,o:e,d(e){e&&k(n),h=!1,i(v)}}}const Pt=navigator.standalone||navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)?"_blank":null,Ct=function(e,t="application/vnd.google-earth.kml+xml"){return"data:"+t+";base64,"+btoa(unescape(encodeURIComponent(e)))},Lt=["KML Mapsme","KML Avenza"];function jt(e,t,n){const o=Y();let{label:r}=t;const i=ht.downloadType;let a=vt.getItem(i)||1;"string"==typeof a&&(a=parseInt(a,10)),(a<0||a>=Lt.length)&&(a=0);let s="",l="";return e.$$set=e=>{"label"in e&&n(0,r=e.label)},[r,a,s,l,function(e){const t=nt(),o=["_mapsme.kml","_avenza.kml",".geojson"][a];let r=t.name;if(r?(r=r.trim(),n(3,l=r.replace(/[ \/]/g,"_").replace(/:/g,"")+o)):n(3,l="editolido"+o),0===a)n(2,s=Ct(t.render()));else{if(1!==a)return e.preventDefault(),!1;n(2,s=Ct(t.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS})))}},function(){1===a?vt.removeItem(i):vt.setItem(i,a),o("save",[i,a])},function(){a=N(this),n(1,a)}]}class _t extends Fe{constructor(e){super(),Me(this,e,jt,kt,s,{label:0})}}function Mt(e){let t,n,o,r,i,a,s,l,c,u,p,d,m,f,g;return s=new _t({props:{label:"T√©l√©charger"}}),s.$on("save",e[1]),d=new wt({props:{ofp:e[0]}}),d.$on("save",e[2]),{c(){t=C("div"),n=C("div"),o=C("h5"),o.textContent="Export",r=M(),i=C("div"),a=C("div"),Le(s.$$.fragment),l=M(),c=C("small"),c.textContent="Le fichier est g√©n√©r√© en fonction des options choisies sur la carte.",u=M(),p=C("div"),Le(d.$$.fragment),m=M(),f=C("small"),f.innerHTML='Sur iOS on peut lancer un raccourci.\n                <a href="https://www.icloud.com/shortcuts/2585d34bc76941febff60b8d064517ee" target="_blank">Exemple de raccourci √† installer</a>',A(o,"class","card-title"),A(c,"class","text-muted"),A(a,"class","col-12 col-sm-6 col-md-6"),A(f,"class","text-muted"),A(p,"class","col-12 col-sm-6 col-md-6"),A(i,"class","row"),A(n,"class","card-body"),A(t,"class","card mb-3 svelte-17snbjk")},m(e,h){w(e,t,h),x(t,n),x(n,o),x(n,r),x(n,i),x(i,a),je(s,a,null),x(a,l),x(a,c),x(i,u),x(i,p),je(d,p,null),x(p,m),x(p,f),g=!0},p(e,[t]){const n={};1&t&&(n.ofp=e[0]),d.$set(n)},i(e){g||(be(s.$$.fragment,e),be(d.$$.fragment,e),g=!0)},o(e){xe(s.$$.fragment,e),xe(d.$$.fragment,e),g=!1},d(e){e&&k(t),_e(s),_e(d)}}}function Ft(e,t,n){let{ofp:o}=t;return e.$$set=e=>{"ofp"in e&&n(0,o=e.ofp)},[o,function(t){Q(e,t)},function(t){Q(e,t)}]}class Ot extends Fe{constructor(e){super(),Me(this,e,Ft,Mt,s,{ofp:0})}}function Et(e){let t;return{c(){t=C("div"),t.innerHTML='<span class="sr-only">Loading...</span>',A(t,"class","spinner-border text-warning"),A(t,"role","status")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function At(e){let t,n,o,r,i,a,s,l,c,u,p;return{c(){t=C("div"),n=C("p"),o=j("üò±: Erreur de r√©cup√©ration du Gramet, "),r=C("a"),r.textContent="essayez √† nouveau",i=j(" ou allez sur "),a=C("a"),s=j("ogimet"),c=j("."),A(r,"href","."),A(a,"href",l=e[0].ogimetData.url),A(a,"target","_blank"),A(n,"class","svelte-i1m2fr"),A(t,"class","error svelte-i1m2fr")},m(l,d){w(l,t,d),x(t,n),x(n,o),x(n,r),x(n,i),x(n,a),x(a,s),x(n,c),u||(p=O(r,"click",E(e[4])),u=!0)},p(e,t){1&t&&l!==(l=e[0].ogimetData.url)&&A(a,"href",l)},d(e){e&&k(t),u=!1,p()}}}function St(e){let t,n,o,r;return{c(){t=C("img"),A(t,"crossorigin","anonymous"),t.src!==(n=e[0].ogimetData.proxyImg)&&A(t,"src",n),A(t,"alt","gramet demo"),A(t,"class","img-fluid svelte-i1m2fr")},m(n,i){w(n,t,i),o||(r=[O(t,"error",e[2]),O(t,"load",e[3])],o=!0)},p(e,o){1&o&&t.src!==(n=e[0].ogimetData.proxyImg)&&A(t,"src",n)},d(e){e&&k(t),o=!1,i(r)}}}function Tt(t){let n,o,r,i,a,s,l,c,u,p,d,m,f,g,h,v,y,$,b,P,L,_="loading"===t[1]&&Et();function F(e,t){return"error"!==e[1]?St:At}let O=F(t),E=O(t);return{c(){n=C("div"),o=C("h1"),o.innerHTML='Le GRAMET est un m√©t√©ogramme repr√©sentant le temps et l&#39;espace. Il indique, en tout point de la route,\n    et √† l&#39;heure de passage estim√©e, une coupe verticale de la m√©t√©o pr√©vue.\n    <a class="text-warning" href="http://www.ogimet.com/guia_gramet.phtml.en" target="_blank">Guide d&#39;interpr√©tation</a>',r=M(),i=C("div"),_&&_.c(),a=M(),E.c(),s=M(),l=C("div"),c=C("div"),u=C("div"),p=C("div"),d=C("div"),d.textContent="Route Ogimet",m=M(),f=C("div"),g=C("p"),h=j("Le GRAMET est r√©alis√© par "),v=C("a"),y=j("www.ogimet.com"),b=j(" √† partir\n    d'une route calcul√©e. Il est possible d'afficher la route sur la carte. Cel√† est\n    particuli√®rement utile lors des vols oc√©aniques car il n'y a aucune station en mer."),P=M(),L=C("div"),L.innerHTML='<div class="card ogimet2 svelte-i1m2fr"><div class="card-header svelte-i1m2fr">Algorithme de calcul</div> \n            <div class="card-body"><p class="card-text">Apr√®s avoir s√©lectionner les stations m√©t√©o proches de la route (13000 dans le monde), \n                une minimisation du &quot;cross track error&quot; est effectu√© pour r√©duire le nombre de points. 21 points est la\n                limite maximale pour Ogimet.</p></div></div>',A(o,"class","svelte-i1m2fr"),A(i,"class","text-center svelte-i1m2fr"),A(d,"class","card-header svelte-i1m2fr"),A(v,"class","text-warning"),A(v,"href",$=t[0].ogimetData.url),A(v,"target","_blank"),A(g,"class","card-text"),A(f,"class","card-body"),A(p,"class","card ogimet svelte-i1m2fr"),A(u,"class"," col-12 col-sm-6 col-md-6 col-xl-6"),A(L,"class","col-12 col-sm-6 col-md-6 col-xl-6"),A(c,"class","card-deck"),A(l,"class","row")},m(e,t){w(e,n,t),x(n,o),x(n,r),x(n,i),_&&_.m(i,null),x(i,a),E.m(i,null),x(n,s),x(n,l),x(l,c),x(c,u),x(u,p),x(p,d),x(p,m),x(p,f),x(f,g),x(g,h),x(g,v),x(v,y),x(g,b),x(c,P),x(c,L)},p(e,[t]){"loading"===e[1]?_||(_=Et(),_.c(),_.m(i,a)):_&&(_.d(1),_=null),O===(O=F(e))&&E?E.p(e,t):(E.d(1),E=O(e),E&&(E.c(),E.m(i,null))),1&t&&$!==($=e[0].ogimetData.url)&&A(v,"href",$)},i:e,o:e,d(e){e&&k(n),_&&_.d(),E.d()}}}function It(e,t,n){let o="loading",{ofp:r}=t;return e.$$set=e=>{"ofp"in e&&n(0,r=e.ofp)},[r,o,()=>n(1,o="error"),()=>n(1,o="success"),()=>n(1,o="loading")]}class Dt extends Fe{constructor(e){super(),Me(this,e,It,Tt,s,{ofp:0})}}function zt(t){let n;return{c(){n=C("h1"),n.innerHTML='Cartographie pour l&#39;OFP <img src="svg/Air_France_Logo.svg" alt="logo Air France" class="svelte-drdjg7"/>¬†',A(n,"class","svelte-drdjg7")},m(e,t){w(e,n,t)},p:e,i:e,o:e,d(e){e&&k(n)}}}class Rt extends Fe{constructor(e){super(),Me(this,e,null,zt,s,{})}}function Wt(t){let n,o,r,i;return n=new Rt({}),{c(){Le(n.$$.fragment),o=M(),r=C("div"),r.innerHTML='<div class="card-deck"><div class=" col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card avenza svelte-z58ee3"><div class="card-header svelte-z58ee3">COMPATIBLE OFFLINE</div> \n      <div class="card-body"><p class="card-text">L&#39;OFP ne quitte pas votre iPad ou votre ordinateur. Fonctionne avec les derni√®res technologies: PWA, Service Worker, fully responsive, cartes WebGL...</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card mapsme svelte-z58ee3"><div class="card-header svelte-z58ee3">Multiples Projections</div> \n      <div class="card-body"><p class="card-text">Des cartes LAMBERT conformes, un ATLAS, et une MERCATOR avec 12 niveaux de zoom. Export en format KML vers Mapsme ou Avenza</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card ogimet svelte-z58ee3"><div class="card-header svelte-z58ee3">Compatible avec Ogimet</div> \n      <div class="card-body"><p class="card-text">Calcule une route pour ogimet et affiche le GRAMET qui est un m√©t√©ogramme combinant l&#39;espace et le temps</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card shortcuts svelte-z58ee3"><div class="card-header svelte-z58ee3">Compatible Raccourcis</div> \n      <div class="card-body"><p class="card-text">Avec l&#39;app Raccourcis, automatisez en r√©cup√©rant le KML, le Gramet, ou une route Lido optimis√©e</p></div></div></div></div>',A(r,"class","row svelte-z58ee3")},m(e,t){je(n,e,t),w(e,o,t),w(e,r,t),i=!0},p:e,i(e){i||(be(n.$$.fragment,e),i=!0)},o(e){xe(n.$$.fragment,e),i=!1},d(e){_e(n,e),e&&k(o),e&&k(r)}}}class Nt extends Fe{constructor(e){super(),Me(this,e,null,Wt,s,{})}}function qt(t){let n,o,r,s,l,c,u,p,d,m,g,h,v,y,$,b,P;return{c(){n=C("kmlcolor"),o=C("div"),r=C("label"),s=C("input"),l=j(t[2]),c=M(),u=C("picker"),p=C("label"),d=C("input"),h=M(),v=C("input"),A(s,"name",t[4]),s.checked=t[1],A(s,"type","checkbox"),A(r,"for",t[4]),A(r,"class","input-group-text"),A(o,"class","input-group-prepend"),A(d,"type","color"),A(p,"style",m=dt(t[3])),A(v,"type","range"),A(v,"min","30"),A(v,"max","255"),A(u,"class","form-control"),A(u,"style",y=pt(t[3][0])),A(n,"class","input-group checkbox-combo")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,s),x(r,l),x(n,c),x(n,u),x(u,p),x(p,d),z(d,t[3][0]),x(u,h),x(u,v),z(v,t[3][1]),b||(P=[O(s,"change",t[8]),O(d,"input",t[9]),f(g=t[5].call(null,p,t[3])),O(v,"change",t[10]),O(v,"input",t[10]),f($=t[6].call(null,n,t[0]))],b=!0)},p(e,[t]){2&t&&(s.checked=e[1]),4&t&&D(l,e[2]),8&t&&z(d,e[3][0]),8&t&&m!==(m=dt(e[3]))&&A(p,"style",m),g&&a(g.update)&&8&t&&g.update.call(null,e[3]),8&t&&z(v,e[3][1]),8&t&&y!==(y=pt(e[3][0]))&&A(u,"style",y),$&&a($.update)&&1&t&&$.update.call(null,e[0])},i:e,o:e,d(e){e&&k(n),b=!1,i(P)}}}function Gt(e,t,n){const o=Y();let{kmlColor:r="FF0000FF"}=t,{checked:i}=t,{name:a}=t,{label:s="Couleur"}=t;const l=a+"-color",c=a+"-display";let u=ct;const p=Ie(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"checked"in e&&n(1,i=e.checked),"name"in e&&n(7,a=e.name),"label"in e&&n(2,s=e.label)},[r,i,s,u,c,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),p("change",{name:l,value:r})}}},function(e){return n(3,u=ut(r)),{update(e){n(3,u=ut(e)),p("change",{name:l,value:e.toUpperCase()})}}},a,function(t){Q(e,t)},function(){u[0]=this.value,n(3,u)},function(){u[1]=I(this.value),n(3,u)}]}class Ut extends Fe{constructor(e){super(),Me(this,e,Gt,qt,s,{kmlColor:0,checked:1,name:7,label:2})}}function Ht(e,t,n){const o=e.slice();return o[9]=t[n],o[11]=n,o}function Bt(e){let t,n,o,r=e[9].label+"";return{c(){t=C("option"),n=j(r),t.__value=e[11],t.value=t.__value,t.selected=o=e[11]===e[0]},m(e,o){w(e,t,o),x(t,n)},p(e,n){1&n&&o!==(o=e[11]===e[0])&&(t.selected=o)},d(e){e&&k(t)}}}function Zt(t){let n,o,r,a,s,l,c,u,p,d=Kt,m=[];for(let e=0;e<d.length;e+=1)m[e]=Bt(Ht(t,d,e));return{c(){n=C("div"),o=C("div"),r=C("label"),a=C("input"),s=j("Airports"),l=M(),c=C("select");for(let e=0;e<m.length;e+=1)m[e].c();A(a,"name",t[3]),a.checked=t[1],A(a,"type","checkbox"),A(r,"for",t[3]),A(r,"class","input-group-text"),A(o,"class","input-group-prepend"),A(c,"name",t[4]),A(c,"class","custom-select svelte-aqi3t3"),void 0===t[0]&&se((()=>t[7].call(c))),A(n,"class","input-group checkbox-combo")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,a),x(r,s),x(n,l),x(n,c);for(let e=0;e<m.length;e+=1)m[e].m(c,null);W(c,t[0]),u||(p=[O(a,"change",t[6]),O(c,"change",t[7]),O(c,"change",t[8])],u=!0)},p(e,[t]){if(2&t&&(a.checked=e[1]),1&t){let n;for(d=Kt,n=0;n<d.length;n+=1){const o=Ht(e,d,n);m[n]?m[n].p(o,t):(m[n]=Bt(o),m[n].c(),m[n].m(c,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=d.length}1&t&&W(c,e[0])},i:e,o:e,d(e){e&&k(n),P(m,e),u=!1,i(p)}}}const Kt=[{label:"statuts"},{label:"vert/rouge"}];function Xt(e,t,n){const o=Y();let{selected:r=0}=t,{name:i="airport"}=t,{checked:a}=t;const s=i+"-display",l=i+"-pin";return e.$$set=e=>{"selected"in e&&n(0,r=e.selected),"name"in e&&n(5,i=e.name),"checked"in e&&n(1,a=e.checked)},[r,a,o,s,l,i,function(t){Q(e,t)},function(){r=N(this),n(0,r)},e=>{e.target.blur(),o("change",{name:l,value:r})}]}class Jt extends Fe{constructor(e){super(),Me(this,e,Xt,Zt,s,{selected:0,name:5,checked:1})}}const Vt=[];function Yt(e,t){return{subscribe:Qt(e,t).subscribe}}function Qt(t,n=e){let o;const r=[];function i(e){if(s(t,e)&&(t=e,o)){const e=!Vt.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),Vt.push(n,t)}if(e){for(let e=0;e<Vt.length;e+=2)Vt[e][0](Vt[e+1]);Vt.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,s=e){const l=[a,s];return r.push(l),1===r.length&&(o=n(i)||e),a(t),()=>{const e=r.indexOf(l);-1!==e&&r.splice(e,1),0===r.length&&(o(),o=null)}}}}const en=Qt(),tn=Qt(!1),nn=Qt(!1),on=Qt(),rn=Qt(!1);let an=new Date;const sn=()=>{if("serviceWorker"in navigator){const e=18e5;new Date-an>e&&navigator.serviceWorker.getRegistration().then((e=>{e&&(e.waiting||e.update(),tn.set(!1),an=new Date)}),console.error)}},ln=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&sn()},cn=Yt({},(e=>{const t=()=>{e(navigator.onLine)};return"undefined"!=typeof navigator&&"onLine"in navigator?(t(),window.addEventListener("offline",t),window.addEventListener("online",t)):e(void 0),()=>{"undefined"!=typeof navigator&&"onLine"in navigator&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}})),un=Yt("/",(e=>{const t=()=>{const t=document.querySelector("meta[name=viewport]"),n=t?t.getAttribute("content"):"";let o=window.location.hash.substr(1)||"/";"/map"===o?(nn.set(!1),n&&t.setAttribute("content",n+",maximum-scale=1")):n&&t.setAttribute("content",n.replace(",maximum-scale=1","")),e(o),sn()};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}}));function pn(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function dn(e){let t,n,o,r,a,s,l,c,u,p,d,m,g,h,v,y,$,b,P,_,F,S,I,D,z,R,W,N,G,U,H,B,Z,K,X,J,V,Y,Q,ee,te,ne,oe,re,ie,ae,le,ce,ue,pe,de,me,fe,ge,he,ve,ye,$e,we,Pe,Ce,Me;return g=new gt({props:{name:"route",kmlColor:e[0].routeColor,selected:e[0].routePin}}),g.$on("change",e[5]),F=new gt({props:{name:"alternate",kmlColor:e[0].alternateColor,selected:e[0].alternatePin}}),F.$on("change",e[5]),G=new gt({props:{name:"nat",kmlColor:e[0].natColor,selected:e[0].natPin}}),G.$on("change",e[5]),K=new Ut({props:{name:"great-circle",label:"Orthodromie",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay}}),K.$on("change",e[5]),V=new Ut({props:{name:"ogimet",label:"Route GRAMET",kmlColor:e[0].ogimetColor,checked:e[0].ogimetDisplay}}),V.$on("change",e[5]),ee=new Ut({props:{name:"etops",label:"ETOPS",kmlColor:e[0].etopsColor,checked:e[0].etopsDisplay}}),ee.$on("change",e[5]),oe=new Jt({props:{name:"airport",selected:e[0].airportPin,checked:e[0].airportDisplay}}),oe.$on("change",e[5]),{c(){t=C("div"),n=C("a"),o=L("svg"),r=L("use"),a=M(),s=C("form"),l=C("div"),c=C("button"),c.textContent="Revenir aux valeurs par d√©faut",u=M(),p=C("fieldset"),d=C("legend"),d.textContent="Route",m=M(),Le(g.$$.fragment),h=M(),v=C("fieldset"),y=C("legend"),$=C("input"),P=j("D√©gagement"),_=M(),Le(F.$$.fragment),S=M(),I=C("fieldset"),D=C("legend"),z=C("input"),W=j("Tracks"),N=M(),Le(G.$$.fragment),U=M(),H=C("small"),H.textContent="Positionn√© √† l'entr√©e des tracks, un track incomplet restera rouge.",B=M(),Z=C("fieldset"),Le(K.$$.fragment),X=M(),J=C("fieldset"),Le(V.$$.fragment),Y=M(),Q=C("fieldset"),Le(ee.$$.fragment),te=M(),ne=C("fieldset"),Le(oe.$$.fragment),re=M(),ie=C("fieldset"),ae=C("legend"),le=C("input"),ue=j("FIR S√õRET√â"),pe=M(),de=C("div"),me=C("button"),fe=j("M√©moriser"),he=M(),ve=C("button"),ye=j("Restaurer"),T(r,"xlink:href","#close"),A(o,"class","svelte-1vjvinv"),q(o,"blink",e[1]),A(n,"class","closeB svelte-1vjvinv"),A(n,"role","button"),A(n,"href","."),A(c,"class","btn btn-light btn-sm svelte-1vjvinv"),A(c,"type","button"),q(c,"invisible",e[2]),A(l,"class","reset svelte-1vjvinv"),A(p,"class","form-group"),A($,"name","alternate-display"),$.checked=b=e[0].alternateDisplay,A($,"type","checkbox"),A(v,"class","form-group"),A(z,"name","nat-display"),z.checked=R=e[0].natDisplay,A(z,"type","checkbox"),A(H,"class","form-text text-muted svelte-1vjvinv"),A(I,"class","form-group"),A(Z,"class","form-group"),A(J,"class","form-group"),A(Q,"class","form-group"),A(ne,"class","form-group"),A(le,"name","fir-display"),le.checked=ce=e[0].firDisplay,A(le,"type","checkbox"),A(ie,"class","form-group"),me.disabled=ge=!e[3],A(me,"class","btn btn-primary btn-sm mb-2 svelte-1vjvinv"),A(me,"type","button"),ve.disabled=$e=!e[3],A(ve,"class","btn btn-secondary btn-sm mb-2 svelte-1vjvinv"),A(ve,"type","button"),A(de,"class","last svelte-1vjvinv"),A(s,"class","svelte-1vjvinv"),A(t,"class","settings svelte-1vjvinv"),q(t,"sidebar",e[4])},m(i,b){w(i,t,b),x(t,n),x(n,o),x(o,r),x(t,a),x(t,s),x(s,l),x(l,c),x(s,u),x(s,p),x(p,d),x(p,m),je(g,p,null),x(s,h),x(s,v),x(v,y),x(y,$),x(y,P),x(v,_),je(F,v,null),x(s,S),x(s,I),x(I,D),x(D,z),x(D,W),x(I,N),je(G,I,null),x(I,U),x(I,H),x(s,B),x(s,Z),je(K,Z,null),x(s,X),x(s,J),je(V,J,null),x(s,Y),x(s,Q),je(ee,Q,null),x(s,te),x(s,ne),je(oe,ne,null),x(s,re),x(s,ie),x(ie,ae),x(ae,le),x(ae,ue),x(s,pe),x(s,de),x(de,me),x(me,fe),x(de,he),x(de,ve),x(ve,ye),Pe=!0,Ce||(Me=[O(n,"click",E(e[12])),O(c,"click",e[6]),O($,"change",e[5]),O(z,"change",e[5]),O(le,"change",e[5]),O(me,"click",e[8]),O(ve,"click",e[7]),O(s,"submit",E(e[10])),f(pn.call(null,t)),O(t,"click_outside",e[13])],Ce=!0)},p(e,n){2&n&&q(o,"blink",e[1]),4&n&&q(c,"invisible",e[2]);const r={};1&n&&(r.kmlColor=e[0].routeColor),1&n&&(r.selected=e[0].routePin),g.$set(r),(!Pe||1&n&&b!==(b=e[0].alternateDisplay))&&($.checked=b);const i={};1&n&&(i.kmlColor=e[0].alternateColor),1&n&&(i.selected=e[0].alternatePin),F.$set(i),(!Pe||1&n&&R!==(R=e[0].natDisplay))&&(z.checked=R);const a={};1&n&&(a.kmlColor=e[0].natColor),1&n&&(a.selected=e[0].natPin),G.$set(a);const s={};1&n&&(s.kmlColor=e[0].greatCircleColor),1&n&&(s.checked=e[0].greatCircleDisplay),K.$set(s);const l={};1&n&&(l.kmlColor=e[0].ogimetColor),1&n&&(l.checked=e[0].ogimetDisplay),V.$set(l);const u={};1&n&&(u.kmlColor=e[0].etopsColor),1&n&&(u.checked=e[0].etopsDisplay),ee.$set(u);const p={};1&n&&(p.selected=e[0].airportPin),1&n&&(p.checked=e[0].airportDisplay),oe.$set(p),(!Pe||1&n&&ce!==(ce=e[0].firDisplay))&&(le.checked=ce),(!Pe||8&n&&ge!==(ge=!e[3]))&&(me.disabled=ge),(!Pe||8&n&&$e!==($e=!e[3]))&&(ve.disabled=$e),16&n&&q(t,"sidebar",e[4])},i(e){Pe||(be(g.$$.fragment,e),be(F.$$.fragment,e),be(G.$$.fragment,e),be(K.$$.fragment,e),be(V.$$.fragment,e),be(ee.$$.fragment,e),be(oe.$$.fragment,e),se((()=>{we||(we=ke(t,He,{duration:300,x:200,y:0},!0)),we.run(1)})),Pe=!0)},o(e){xe(g.$$.fragment,e),xe(F.$$.fragment,e),xe(G.$$.fragment,e),xe(K.$$.fragment,e),xe(V.$$.fragment,e),xe(ee.$$.fragment,e),xe(oe.$$.fragment,e),we||(we=ke(t,He,{duration:300,x:200,y:0},!1)),we.run(0),Pe=!1},d(e){e&&k(t),_e(g),_e(F),_e(G),_e(K),_e(V),_e(ee),_e(oe),e&&we&&we.end(),Ce=!1,i(Me)}}}function mn(e){let t,n,o,r,i,a,s,l,c=e[4]&&dn(e);return{c(){t=C("a"),n=L("svg"),o=L("use"),r=M(),c&&c.c(),i=F(),T(o,"xlink:href","#bars"),A(n,"class","svelte-1vjvinv"),q(n,"blink",e[2]),A(t,"class","hamburger svelte-1vjvinv"),A(t,"role","button"),A(t,"href",".")},m(u,p){w(u,t,p),x(t,n),x(n,o),w(u,r,p),c&&c.m(u,p),w(u,i,p),a=!0,s||(l=O(t,"click",E(e[11])),s=!0)},p(e,[t]){4&t&&q(n,"blink",e[2]),e[4]?c?(c.p(e,t),16&t&&be(c,1)):(c=dn(e),c.c(),be(c,1),c.m(i.parentNode,i)):c&&(ye(),xe(c,1,1,(()=>{c=null})),$e())},i(e){a||(be(c),a=!0)},o(e){xe(c),a=!1},d(e){e&&k(t),e&&k(r),c&&c.d(e),e&&k(i),s=!1,l()}}}function fn(e,t){return JSON.stringify(e)===JSON.stringify(t)}function gn(e,t,n){let o,r,i;l(e,nn,(e=>n(4,i=e)));const a=Y(),s=ht.optionsKML;let{kmlOptions:c}=t,u={...et,...vt.getItem(s)||{}},p=fn(et,c);function d(e){let t=!1;for(const[r,i]of Object.entries(e))c[r]!==i&&(n(0,c[r]=i,c),a("change",{name:(o=r,o.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()),value:i}),t=!0);var o;t&&n(0,c={...e})}return e.$$set=e=>{"kmlOptions"in e&&n(0,c=e.kmlOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(2,o=fn(et,c)),513&e.$$.dirty&&n(3,r=!fn(u,c))},[c,p,o,r,i,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=t.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}));c[r]!==o&&(n(0,c[r]=o,c),a("change",{name:t,value:o}))},function(){d(et)},function(){d(u)},function(){if(o)vt.removeItem(s);else{const e={};for(const t of Object.keys(c).filter((e=>c[e]!==et[e])))e[t]=c[t];vt.setItem(s,e)}a("save"),n(9,u={...c})},u,function(t){Q(e,t)},()=>{m(nn,i=!i,i),n(1,p=!1)},()=>{m(nn,i=!i,i),n(1,p=!1)},()=>m(nn,i=!1,i)]}class hn extends Fe{constructor(e){super(),Me(this,e,gn,mn,s,{kmlOptions:0})}}const vn="airport-layer",yn="airport-emer-layer",$n="airport-source",bn=(e,t,n,o)=>0===e?(e=>["case",["==",8,["get",`${e}`]],"#ea80d8",["==",7,["get",`${e}`]],"#ea80d8",["==",6,["get",`${e}`]],"#dddddd",["==",5,["get",`${e}`]],"#dddddd",["==",4,["get",`${e}`]],"#fbfe98",["==",3,["get",`${e}`]],"#fbfe98",["==",2,["get",`${e}`]],"#00b0f1",["==",1,["get",`${e}`]],"#00b0f1","#000"])(t):((e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#095","#C71"])(n,o),xn=(e,t=!0)=>t?["in",`${e}`,["get","type"]]:["!",["in",`${e}`,["get","type"]]],wn=(e,t)=>["case",["in",["get","name"],["literal",t]],0,["get",`${e}`]],kn=e=>0===e?3:0,Pn=(e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#000","#C60"];function Cn(e,t){const{map:n}=e;n.getLayer(vn)&&n.setLayoutProperty(vn,"visibility",t?"visible":"none"),n.getLayer(yn)&&n.setLayoutProperty(yn,"visibility",t?"visible":"none")}var Ln={show:e=>Cn(e,!0),hide:e=>Cn(e,!1),remove:()=>{},add:e=>{const{map:t,mapData:n,ofp:o,kmlOptions:r}=e,{affineOrDrop:i}=n,a=i;let s=[];o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0&&(s=[o.infos.EEP,o.infos.EXP]);const l=o.isFake?o.isFake:o.infos.aircraft,c=o.infos.raltPoints,u=r.etopsColor,p=r.airportPin,d=r.airportDisplay,[m]=lt(u),f=s.map((e=>e.name)),g=c.map((e=>e.name)),h=f.concat(g);fetch("data/airports.2102a.geojson").then((e=>e.json())).then((e=>{if(a){const t=[];for(let n of e.features)n.geometry.coordinates=a(n.geometry.coordinates),void 0!==n.geometry.coordinates&&t.push(n);e.features=t}t.addSource($n,{type:"geojson",data:e}),t.addLayer({id:yn,type:"symbol",source:$n,layout:{"icon-image":["case",["==",2,["get","level"]],"sdf-star","sdf-airport"],"icon-size":["case",["==",2,["get","level"]],.5,.4],"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:d?"visible":"none","text-field":["get","name"],"text-size":8,"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1},paint:{"icon-color":["case",["==",1,["get","level"]],"#D70","#B02"],"icon-halo-width":0,"icon-halo-color":"#000","text-color":"#000","text-opacity":.8},filter:xn(l,!1)}),t.addLayer({id:vn,type:"symbol",source:$n,layout:{"icon-image":["case",["in",["get","name"],["literal",h]],"sdf-triangle","sdf-airport"],"icon-size":["case",["in",["get","name"],["literal",h]],1,.6],"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:d?"visible":"none","text-field":["get","name"],"text-size":["case",["in",["get","name"],["literal",h]],10,8],"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1,"symbol-sort-key":wn(l,h)},paint:{"icon-halo-color":["case",["==",0,["get","level"]],"#095","#D70"],"icon-halo-width":kn(p),"icon-color":bn(p,l,g,m),"text-color":Pn(g,m),"text-halo-color":"#000","text-halo-width":["case",["==",0,["get","level"]],0,0],"text-opacity":.8},filter:xn(l)});const n=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,closeOnMove:!Te}),o=function(e){const o=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.title;for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;n.setLngLat(o).setHTML(r).addTo(t)},r=()=>t.getCanvas().style.cursor="pointer",i=()=>t.getCanvas().style.cursor="",s=function(){i(),n.remove()};Te?(t.on("mouseenter",vn,(e=>{r(),o(e)})),t.on("mouseenter",yn,(e=>{r(),o(e)})),t.on("mouseleave",vn,s),t.on("mouseleave",yn,s)):(t.on("mouseenter",vn,r),t.on("mouseenter",yn,r),t.on("click",vn,o),t.on("click",yn,o),t.on("mouseleave",vn,i),t.on("mouseleave",yn,i))}))},changeLine:()=>{},changeMarker:function(e){const{map:t,kmlOptions:n,ofp:o,aircraftType:r}=e,i=o.isFake?[]:o.infos.ralts,[a]=lt(n.etopsColor),s=n.airportPin;t.getLayer(vn)&&(t.setPaintProperty(vn,"icon-color",bn(s,r,i,a)),t.setPaintProperty(vn,"text-color",Pn(i,a)),t.setPaintProperty(vn,"icon-halo-width",kn(s)))},change:function(e){const{map:t,kmlOptions:n,aircraftType:o,ofp:r}=e,i=r.isFake?[]:r.infos.ralts,[a]=lt(n.etopsColor),s=n.airportPin;let l=[];r.infos.EEP&&r.infos.EXP&&r.infos.raltPoints.length>0&&(l=[r.infos.EEP.name,r.infos.EXP.name]);const c=l.concat(i);t.setFilter(vn,xn(o)),t.setPaintProperty(vn,"icon-color",bn(s,o,i,a)),t.setLayoutProperty(vn,"symbol-sort-key",wn(o,c)),t.setFilter(yn,xn(o,!1))}};function jn(e,t,n){const o={type:"Feature",geometry:{type:"Point",coordinates:[e[0],e[1]]},properties:{}};return t&&(o.properties.title=t),n&&(o.properties.description=n),o}function _n(e){return{type:"geojson",data:{type:"FeatureCollection",features:e}}}function Mn(e,t){const n={type:"Feature",geometry:{type:"LineString",coordinates:e},properties:{}};return t&&(n.properties.title=t),n}const Fn=["#FFFFFF","#6699FF","#FFFF00","#CC9966","#FF9922","#DD5599","#FF0000","#22DD44","#BB11EE","#F56"];function On(e,t,n,o,r,i,a){e.addSource(`${t}-marker-source`,_n(((e,t,n)=>{let o=[];const r=e.length;for(let i=0;i<r;i++){const r=t?t([e[i].longitude,e[i].latitude]):[e[i].longitude,e[i].latitude];r&&o.push(n?n(r,e[i]):r)}return o})(n,o,((e,t)=>jn(e,t.name.replace(/00\.0/g,"")))))),e.addLayer(Sn(t,r,a,i))}function En(e,t,n,o,r,i){o?e.addSource(`${t}-line-source`,_n(o(n).map((e=>Mn(e))))):e.addSource(`${t}-line-source`,{type:"geojson",data:Mn(n.map((e=>[e.longitude,e.latitude])))}),e.addLayer(Tn(t,r,i))}function An(e,t,n,o,r,i){if(o){const r=n.length,i=[];for(let e=0;e<r;e++){const t=o(n[e]),r=t.length;for(let e=0;e<r;e++)i.push(Mn(t[e]))}e.addSource(`${t}-line-source`,_n(i))}else e.addSource(`${t}-line-source`,_n(n.map((e=>Mn(e.map((e=>[e.longitude,e.latitude])))))));e.addLayer(Tn(t,r,i))}function Sn(e,t,n,o){const[r,i]=lt(n);return{id:`${e}-marker-layer`,type:"symbol",source:`${e}-marker-source`,layout:{"icon-image":0!==t?"sdf-marker-15":"sdf-triangle","icon-size":0!==t?1:.2,"icon-anchor":0!==t?"bottom":"center","icon-offset":[0,0],"icon-allow-overlap":!1,visibility:o?"visible":"none","text-field":["get","title"],"text-size":10,"text-offset":[0,.7],"text-anchor":"top"},paint:{"icon-color":0!==t?Fn[t]:r,"icon-halo-width":1,"icon-halo-color":"#000","text-color":r,"text-opacity":Math.max(i,.7)}}}function Tn(e,t,n){const[o,r]=lt(t);let i=2,a=[1];return-1!==e.indexOf("-ep-")||-1!==e.indexOf("-etops-")?(i=1,a=[10,10]):-1!==e.indexOf("rnat")&&(i=1),{id:`${e}-line-layer`,type:"line",source:`${e}-line-source`,layout:{"line-join":"round","line-cap":"round",visibility:n?"visible":"none"},paint:{"line-color":o,"line-opacity":r,"line-width":i,"line-dasharray":a}}}function In(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,i=`${e}-marker-layer`;if(n.getLayer(i)&&n.getLayer(r)){const e=o,t=Fn[e],a=n.getPaintProperty(r,"line-color");n.setPaintProperty(i,"icon-color",0!==e?t:a),n.setPaintProperty(i,"text-color",a),n.setLayoutProperty(i,"icon-size",0!==e?1:.2),n.setLayoutProperty(i,"icon-image",0!==e?"sdf-marker-15":"sdf-triangle"),n.setLayoutProperty(i,"icon-anchor",0!==e?"bottom":"center")}return!0}function Dn(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,i=`${e}-marker-layer`,[a,s]=lt(o);return n.getLayer(r)&&(n.setPaintProperty(r,"line-color",a),n.setPaintProperty(r,"line-opacity",s)),n.getLayer(i)&&n.setPaintProperty(i,"text-color",a),!0}function zn(e,t,n){const{map:o}=n,r=`${e}-line-layer`,i=`${e}-marker-layer`;return o.getLayer(r)&&o.setLayoutProperty(r,"visibility",t?"visible":"none"),o.getLayer(i)&&o.setLayoutProperty(i,"visibility",t?"visible":"none"),!0}const Rn="etops-ep-circle-line-layer",Wn="etops-etops-circle-line-layer";function Nn(e,t){const{map:n}=e;n.getLayer(Wn)&&n.setLayoutProperty(Wn,"visibility",t?"visible":"none"),n.getLayer(Rn)&&n.setLayoutProperty(Rn,"visibility",t?"visible":"none")}var qn={show:e=>Nn(e,!0),hide:e=>Nn(e,!1),remove:()=>{},add:function(e){const{map:t,mapData:n,ofp:o,kmlOptions:r}=e;if(!o.isFake&&o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0){const{affineAndClip:e}=n;o.infos.EEP,o.infos.EXP;const i=o.infos.ETOPS,a=r.etopsDisplay;An(t,"etops-ep-circle",[o.infos.EEP.circle(420,48),o.infos.EXP.circle(420,48)],e,r.routeColor,a),An(t,"etops-etops-circle",o.infos.raltPoints.map((e=>e.circle(7*i))),e,r.etopsColor,a)}},changeLine:e=>function(e){const{map:t}=e,[n,o]=lt(e.value);t.getLayer(Wn)&&(t.setPaintProperty(Wn,"line-color",n),t.setPaintProperty(Wn,"line-opacity",o))}(e),changeMarker:()=>{},change:()=>{}};const Gn="fir-reg-line-layer",Un="fir-reg-layer",Hn="fir-reg-source";function Bn(e,t){const{map:n}=e;n.getLayer(Un)&&n.setLayoutProperty(Un,"visibility",t?"visible":"none"),n.getLayer(Gn)&&n.setLayoutProperty(Gn,"visibility",t?"visible":"none")}var Zn={show:e=>Bn(e,!0),hide:e=>Bn(e,!1),remove:()=>{},add:e=>{const{map:t,mapData:n,kmlOptions:o,mapOptions:r}=e;if("jb_pacific"===r.id)return;const{affine:i}=n,a=o.firDisplay;fetch("data/fir-reg.2102a.geojson").then((e=>e.json())).then((e=>{if(i)for(let t=0;t<e.features.length;t++){const n=e.features[t].geometry.coordinates[0];e.features[t].geometry.coordinates=[n.map((e=>i(e)))]}t.addSource(Hn,{type:"geojson",data:e}),t.addLayer({id:Un,type:"fill",source:Hn,layout:{visibility:a?"visible":"none"},paint:{"fill-color":["case",["==","FIR-RED",["get","type"]],"rgba(255,0,0,0.2)","rgba(255,127,0,0.25)"]}}),t.addLayer({id:Gn,type:"line",source:Hn,layout:{visibility:a?"visible":"none"},paint:{"line-color":["case",["==","FIR-RED",["get","type"]],"rgb(255,0,0)","rgb(255,127,0)"],"line-width":1,"line-opacity":["case",["==","FIR-RED",["get","type"]],.4,.6]}})}))},changeLine:()=>{},changeMarker:()=>{},change:()=>{}};const Kn="great-circle";var Xn={show:zn.bind(null,Kn,!0),hide:zn.bind(null,Kn,!1),remove:()=>{},add:e=>{const{ofp:t,kmlOptions:n,mapData:o,map:r}=e;if(t.isFake)return;const{affineAndClip:i}=o,a=`${t.infos.departure}-${t.infos.destination}`,s=t.route,l=new editolido.Route([s.points[0],s.points[s.points.length-1]]).split(300,{name:`Ortho ${a}`});En(r,Kn,l.points,i,n.greatCircleColor,n.greatCircleDisplay)},changeLine:Dn.bind(null,Kn),changeMarker:In.bind(null,Kn)};const Jn="ogimet";var Vn={show:zn.bind(null,Jn,!0),hide:zn.bind(null,Jn,!1),remove:()=>{},add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(n.isFake)return;const{affineAndClip:i}=r;En(t,Jn,n.ogimetData.route.points,i,o.ogimetColor,o.ogimetDisplay)},changeLine:Dn.bind(null,Jn),changeMarker:In.bind(null,Jn)};const Yn="ralt";var Qn={show:zn.bind(null,Yn,!0),hide:zn.bind(null,Yn,!1),remove:()=>{},add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(n.isFake)return;const{affineAndClip:i,affineOrDrop:a}=r,s=new editolido.Route(n.wptCoordinatesAlternate(),{name:"Route D√©gagement"});En(t,Yn,s.points,i,o.alternateColor,o.alternateDisplay),On(t,Yn,s.points,a,o.alternatePin,o.alternateDisplay,o.alternateColor)},changeLine:Dn.bind(null,Yn),changeMarker:In.bind(null,Yn),change:()=>{}};const eo="rmain";var to={show:zn.bind(null,eo,!0),hide:zn.bind(null,eo,!1),remove:()=>{},add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(n.isFake)return;const{affineAndClip:i,affineOrDrop:a}=r,s=n.route;s.name=`${n.infos.departure}-${n.infos.destination}`,s.description=n.description,En(t,eo,s.points,i,o.routeColor,!0),On(t,eo,s.points,a,o.routePin,!0,o.routeColor)},changeLine:e=>Dn(eo,e)&&function(e){const{map:t,kmlOptions:n}=e,[o,r]=lt(n.routeColor);t.getLayer(Rn)&&(t.setPaintProperty(Rn,"line-color",o),t.setPaintProperty(Rn,"line-opacity",r))}(e),changeMarker:In.bind(null,eo),change:()=>{}};const no="rnat";const oo={airport:Ln,etops:qn,fir:Zn,greatcircle:Xn,ogimet:Vn,ralt:Qn,rmain:to,rnat:{show:e=>zn(no,!0,e)&&zn("rnat-incomplete",!0,e),hide:e=>zn(no,!1,e)&&zn("rnat-incomplete",!1,e),remove:()=>{},add:function(e){const{map:t,ofp:n,mapData:o,kmlOptions:r}=e;if(n.isFake)return;const{affineOrDrop:i,affineAndClip:a}=o,s=i,l=a,c=r.natColor,u=r.natPin,p=r.natDisplay,d={rnat:[],"rnat-incomplete":[]},m={rnat:[],"rnat-incomplete":[]};for(let e of n.tracks){const t=e.isComplete?"rnat":"rnat-incomplete";if(l){const n=l(e.points),o=n.length;for(let r=0;r<o;r++)d[t].push(Mn(n[r],e.name))}else d[t].push(Mn(e.points.map((e=>[e.longitude,e.latitude])),e.name));const n=e.points[0];let o=s?s([n.longitude,n.latitude]):[n.longitude,n.latitude];if(o&&m[t].push(jn(o,`${e.name}\n${n.name}`,e.description)),e.isMine){const n=e.points[e.points.length-1];o=s?s([n.longitude,n.latitude]):[n.longitude,n.latitude],o&&m[t].push(jn(o,`${e.name}\n${n.name}`,e.description))}}t.addSource("rnat-marker-source",_n(m.rnat)),t.addSource("rnat-incomplete-marker-source",_n(m["rnat-incomplete"])),t.addSource("rnat-line-source",_n(d.rnat)),t.addSource("rnat-incomplete-line-source",_n(d["rnat-incomplete"])),t.addLayer(Tn("rnat",c,p)),t.addLayer(Tn("rnat-incomplete",r.natIncompleteColor,p)),t.addLayer(Sn("rnat",u,c,p)),t.addLayer(Sn("rnat-incomplete",u,c,p));const f=e=>{for(var n=e.features[0].geometry.coordinates.slice(),o=e.features[0].properties.description;Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;(new mapboxgl.Popup).setLngLat(n).setHTML(o).addTo(t)},g=e=>{const n=e+"-marker-layer";t.on("click",n,f),t.on("mouseenter",n,(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave",n,(function(){t.getCanvas().style.cursor=""}))};g("rnat"),g("rnat-incomplete")},changeLine:Dn.bind(null,no),changeMarker:In.bind(null,no),change:()=>{}}},ro=2*Math.PI,io=Math.PI/4,ao=function(e){return Math.abs(e)<=3.14159265359?e:e-function(e){return e<0?-1:1}(e)*ro};var so={init:function(){},forward:function(e){var t=e.x,n=e.y,o=ao(t-this.long0),r=Math.tan(n/2),i=Math.sin(io*r),a=i*i,s=this.x0+this.a*o*(.74482-.34588*a),l=this.y0+1.70711*this.a*r;return e.x=s,e.y=l,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.y/1.70711/this.a,n=Math.sin(io*t),o=n*n,r=ao(this.long0+e.x/this.a/(.74482-.34588*o)),i=2*Math.atan(t);return e.x=r,e.y=i,e},names:["The Times","times"]};function lo(e,t,n,o,r){window.proj4.Proj.projections.get("times")||window.proj4.Proj.projections.add(so);let i={container:e,center:[0,49],zoom:2,attributionControl:!0,customAttribution:`Yammer/${t.id.startsWith("jb_")?"QGIS & Avenza maps":"Maps.me"} - Airports/FIR ¬© Olivier Ravet`};const a=new mapboxgl.Map({...t.mapboxOptions,...i});let s,l,c,u;a._setCacheLimits(320,32),a.loadImage("sdf/maki-marker-sdf.png",(function(e,t){e||a.addImage("sdf-marker-15",t,{pixelRatio:2,sdf:!0})})),a.loadImage("sdf/map-triangle-sdf.png",(function(e,t){e||a.addImage("sdf-triangle",t,{pixelRatio:2,sdf:!0})})),a.loadImage("sdf/map-circle-sdf.png",(function(e,t){e||a.addImage("sdf-airport",t,{pixelRatio:2,sdf:!0})})),a.loadImage("sdf/map-star-sdf.png",(function(e,t){e||a.addImage("sdf-star",t,{pixelRatio:2,sdf:!0})})),window.proj4.defs("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),window.proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");let p,d=e=>window.proj4("WGS84","EPSG:3857",e),m=e=>window.proj4("EPSG:3857","WGS84",e);if(t.extent){let e,n,o,r;if(window.proj4.defs("CUSTOM",t.proj4),t.affineTransform)[e,n,o,r]=t.affineTransform;else if(t.ratio){const i=[-20026376.39,-20048966.1,20026376.39,20048966.1],a=i[2]-i[0],s=i[3]-i[1],[l,c,u,p]=t.extent,[d,m]=t.ratio,f=a/d*m*(s/a),[g,h,v,y]=[i[0],i[3]-f,i[2],i[3]];e=(v-g)/(u-l),n=g-e*l,o=(y-h)/(p-c),r=h-o*c}else{const[i,a,s,l]=t.extent,[c,u,p,d]=[-20026376.39,-20048966.1,20026376.39,20048966.1];e=(p-c)/(s-i),n=c-e*i,o=(d-u)/(l-a),r=u-o*a}const[i,a,p,f]=t.viewport?t.viewport:t.extent,g=e=>window.proj4("WGS84","CUSTOM",e),h=t=>[e*t[0]+n,o*t[1]+r],v=e=>m(h(e));d=e=>h(g(e)),s=e=>m(d(e)),l=e=>{let[t,n]=g(e);return t=ze(t,i,p),n=ze(n,a,f),v([t,n])},c=e=>{let[t,n]=g(e);if(Re(t,i,p)&&Re(n,a,f))return v([t,n])},u=e=>{if(0===e.length)return[];return function(e,t,n){var o,r,i,a,s,l=e.length,c=Ne(e[0],t),u=[];for(n||(n=[]),o=1;o<l;o++){for(r=e[o-1],a=s=Ne(i=e[o],t);;){if(!(c|a)){u.push(r),a!==s?(u.push(i),o<l-1&&(n.push(u),u=[])):o===l-1&&u.push(i);break}if(c&a)break;c?c=Ne(r=We(r,i,c,t),t):a=Ne(i=We(r,i,a,t),t)}c=s}return u.length&&n.push(u),n}(e.map((e=>g([e.longitude,e.latitude]))),t.extent).map((e=>e.map((e=>v(e)))))}}let f=[];if(!n.isFake){for(const e of n.tracks)f=f.concat(e.points);f=f.concat(n.route.points,n.wptCoordinatesAlternate()),p=((e,t,n=[1/0,1/0,-1/0,-1/0])=>{for(const[o,r]of e.map((e=>t?t([e.longitude,e.latitude]):[e.longitude,e.latitude])))n[0]>o&&(n[0]=o),n[1]>r&&(n[1]=r),n[2]<o&&(n[2]=o),n[3]<r&&(n[3]=r);return n[0]-=1,n[1]-=1,n[2]+=1,n[3]+=1,n})(f,l),a.fitBounds(p,{padding:{top:30,bottom:80,left:30,right:30}})}const g=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!1},fitBoundsOptions:{maxZoom:3},trackUserLocation:!0});if(s){const e=g._onSuccess;g._onSuccess=function(t){const[n,o]=s([t.coords.longitude,t.coords.latitude]);return e.apply(this,[{coords:{longitude:n,latitude:o,accuracy:t.coords.accuracy}}])}}const h={map:a,affine:s,affineAndClamp:l,affineAndClip:u,affineOrDrop:c,bbox:p,mapOptions:t};return a.addControl(g),a.on("load",(function(){(e=>{const{map:t,mapOptions:n}=e;n.tiles&&(t.addSource("jb-raster",{type:"raster",tiles:n.tiles,tileSize:n.tileSize}),t.addLayer({id:"jb-layer",type:"raster",source:"jb-raster",minzoom:0,maxzoom:22,paint:{"raster-opacity":1}})),Object.values(oo).forEach((t=>t.add(e)))})({ofp:n,kmlOptions:o,mapData:h,map:a,mapOptions:t}),n.isFake||async function(e,t){if(window.caches)try{const n=await window.caches.open(t);await n.addAll(e)}catch(e){}}([n.ogimetData.proxyImg],"lido-gramet2"),r&&r(a,t)})),h}class co{constructor(e,t,n){this.dbName=e,this.dbPromise=new Promise(((o,r)=>{const i=indexedDB.open(e,t);i.onsuccess=()=>{o(i)},i.onerror=()=>{r("Error while opening DB")},i.onupgradeneeded=n?n.bind(null,i):()=>{}}))}getImageIdFromURL(e){return e.pathname.replace(/[/.]/g,"_")}async fetchImageFromDB(e,t){const n=await this.dbPromise;return new Promise(((o,r)=>{const i=n.result.transaction(t,"readonly").objectStore(t).get(e);i.onsuccess=()=>{o(i.result)},i.onerror=()=>{r("Something went wrong while fetching image from DB ")}}))}async putImageInDB(e,t,n){const o=await this.dbPromise;return new Promise(((r,i)=>{const a=o.result.transaction(t,"readwrite").objectStore(t),s=a.put(n,e);s.onsuccess=()=>{const t=a.get(e);t.onsuccess=()=>{r(t.result)}},s.onerror=()=>{i("Something went wrong while putting image in DB ")}}))}getCacheHandler(e){return this._cacheHandler.bind(this,e)}async isNotCached(e,t){const n=this.getImageIdFromURL(t),o=await this.dbPromise;return new Promise(((r,i)=>{const a=o.result.transaction(e,"readonly").objectStore(e).getKey(n);a.onsuccess=()=>{r(void 0===a.result?t:null)},a.onerror=()=>{i("Something went wrong while checking if cached from DB ")}}))}async countTiles(e){const t=await this.dbPromise;return new Promise(((n,o)=>{const r=t.result.transaction(e,"readonly").objectStore(e).count();r.onsuccess=()=>n(r.result),r.onerror=()=>o("Something went wrong while counting entries from DB")}))}async close(){(await this.dbPromise).result.close()}async _cacheHandler(e,{request:t,url:n}){const o=this.getImageIdFromURL(n);return this.fetchImageFromDB(o,e).then((n=>n?new Response(n):fetch(t).then((e=>e.clone().blob())).then((t=>t.type.startsWith("image/")||"application/x-protobuf"===t.type?this.putImageInDB(o,e,t).then((e=>new Response(e))):new Response("",{status:404,statusText:"invalid image found (sw)"})))))}}function uo(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}function po(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}const mo=async(e,t)=>{const{map:n,mapOptions:o,bbox:r}=t;if(e.isFake||void 0===n)return[];const i=new co("lido-tiles");if(o.cacheAll){const e=await i.countTiles(o.cacheName);let t;if(t=o.matrix?o.matrix.map((([e,t])=>e*t)):[...Array(o.cacheZoom+1).keys()].map((e=>Math.pow(2,e)*Math.pow(2,e))),e>=t.reduce(((e,t)=>e+t),0))return i.close(),caches[o.id]=!0,[]}const[a,s]=[[r[0],r[1]],[r[2],r[3]]],l=[];for(let e=0;e<=o.cacheZoom;e++){let t,r;const c=Math.pow(2,e);let u,p;o.cacheAll?(t={x:0,y:c-1},r={x:c-1,y:0}):(t={x:uo(a[0],e),y:po(a[1],e)},r={x:uo(s[0],e),y:po(s[1],e)}),o.matrix?[u,p]=o.matrix[e]:[u,p]=[c,c];for(let a=t.x;a<=r.x;a++)for(let s=r.y;s<=t.y;s++)if(a>=0&&s>=0&&a<u&&s<p){let t;o.tiles?(t=new URL(o.tiles[0].replace("{z}",e).replace("{x}",a).replace("{y}",s)),l.push(i.isNotCached(o.cacheName,t))):(t=new URL(`https://api.mapbox.com/v4/denizotjb.63g5ah66/${e}/${a}/${s}@2x.webp?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(i.isNotCached(o.cacheName,t)),t=new URL(`https://api.mapbox.com/v4/denizotjb.9001lcsf,denizotjb.494jxmoa,mapbox.mapbox-streets-v8,denizotjb.bifqeinj,denizotjb.cz0kdfpx,mapbox.mapbox-terrain-v2/${e}/${a}/${s}.vector.pbf?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(i.isNotCached(o.cacheName,t)))}}const c=await Promise.all(l);return i.close(),c.filter((e=>null!==e))};function fo(e){let t,n,o,r,i,a;const s=e[4].default,l=c(s,e,e[3],null);return{c(){t=L("svg"),n=L("path"),o=L("path"),i=M(),l&&l.c(),A(n,"d","M50,5A45 45 0 1 1 49.9999 5"),A(n,"class","svelte-1bp2w4i"),A(o,"d",r=e[0]()),A(o,"class","svelte-1bp2w4i"),A(t,"viewBox","0 0 100 100"),A(t,"class","svelte-1bp2w4i")},m(e,r){w(e,t,r),x(t,n),x(t,o),w(e,i,r),l&&l.m(e,r),a=!0},p(e,[t]){(!a||1&t&&r!==(r=e[0]()))&&A(o,"d",r),l&&l.p&&8&t&&p(l,s,e,e[3],t,null,null)},i(e){a||(be(l,e),a=!0)},o(e){xe(l,e),a=!1},d(e){e&&k(t),e&&k(i),l&&l.d(e)}}}function go(e,t,n){let o,{$$slots:r={},$$scope:i}=t,{value:a=0}=t,{max:s=100}=t;return e.$$set=e=>{"value"in e&&n(1,a=e.value),"max"in e&&n(2,s=e.max),"$$scope"in e&&n(3,i=e.$$scope)},e.$$.update=()=>{6&e.$$.dirty&&n(0,o=()=>{if(a<=0)return"";if(a>=s)return"M50,5A45 45 0 1 1 49.9999 5";{const e=2*Math.PI*(a/s),t=50+45*Math.cos(e-Math.PI/2),n=50+45*Math.sin(e-Math.PI/2);let o="M50,5";return e>Math.PI&&(o+="A45 45 0 0 1 50 95"),o+=`A45 45 0 0 1 ${t} ${n}`,o}})},[o,a,s,i,r]}class ho extends Fe{constructor(e){super(),Me(this,e,go,fo,s,{value:1,max:2})}}function vo(e,t,n){const o=e.slice();return o[13]=t[n],o}function yo(e){let t,n,o,r,a,s=wo,l=[];for(let t=0;t<s.length;t+=1)l[t]=$o(vo(e,s,t));return{c(){t=C("div"),n=C("select"),o=C("option"),o.textContent="pas d'ofp ?";for(let e=0;e<l.length;e+=1)l[e].c();o.__value="none",o.value=o.__value,A(n,"class","form-control-sm svelte-14yxy04"),n.disabled=e[0],A(t,"class","footer svelte-14yxy04")},m(i,s){w(i,t,s),x(t,n),x(n,o);for(let e=0;e<l.length;e+=1)l[e].m(n,null);r||(a=[O(n,"click",e[4],{once:!0}),O(n,"change",e[6])],r=!0)},p(e,t){if(0&t){let o;for(s=wo,o=0;o<s.length;o+=1){const r=vo(e,s,o);l[o]?l[o].p(r,t):(l[o]=$o(r),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=s.length}1&t&&(n.disabled=e[0])},d(e){e&&k(t),P(l,e),r=!1,i(a)}}}function $o(t){let n,o,r=t[13]+"";return{c(){n=C("option"),o=j(r),n.__value=t[13],n.value=n.__value},m(e,t){w(e,n,t),x(n,o)},p:e,d(e){e&&k(n)}}}function bo(t){let n,o,r,a,s,l,c,u,p,d=!t[3]&&yo(t);return{c(){n=C("div"),o=C("input"),r=M(),a=C("label"),s=j(t[1]),l=M(),d&&d.c(),c=F(),A(o,"id",Po),A(o,"name",Po),A(o,"type","file"),A(o,"accept","application/pdf"),o.disabled=t[0],A(o,"class","custom-file-input svelte-14yxy04"),A(a,"class","custom-file-label text-truncate svelte-14yxy04"),A(a,"for",Po),q(a,"ready",t[2]),A(n,"class","custom-file svelte-14yxy04"),q(n,"blink",!t[3])},m(e,i){w(e,n,i),x(n,o),x(n,r),x(n,a),x(a,s),w(e,l,i),d&&d.m(e,i),w(e,c,i),u||(p=[O(o,"change",t[5]),O(o,"click",t[4],{once:!0})],u=!0)},p(e,[t]){1&t&&(o.disabled=e[0]),2&t&&D(s,e[1]),4&t&&q(a,"ready",e[2]),8&t&&q(n,"blink",!e[3]),e[3]?d&&(d.d(1),d=null):d?d.p(e,t):(d=yo(e),d.c(),d.m(c.parentNode,c))},i:e,o:e,d(e){e&&k(n),e&&k(l),d&&d.d(e),e&&k(c),u=!1,i(p)}}}const xo=[{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.min.js"},{type:"script",url:"./js/lidojs.1.3.6.min.js"},{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.min.js"},{type:"script",url:"./js/wmo.1.3.6.var.js"},{type:"script",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.js"},{type:"link",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.css"}],wo=["318","319","320","321","330","340","350","380","787","772","773","77F"],ko=async(e,t)=>{const n=await e.getPage(t);return(await n.getTextContent()).items.map((e=>e.str)).join("")};let Po="file";function Co(e,t,n){let o,r;l(e,rn,(e=>n(9,o=e))),l(e,on,(e=>n(3,r=e)));let i,{kmlOptions:a}=t,s=!1,c=new Oe,u="Choisir un OFP",p=!1;const d=Y();function f(){!function(e,t,n){let o=e.length;function r(){o=--o,o<1&&n()}t()?n():e.forEach((({type:e,url:t,options:n={async:!0,defer:!0}})=>{const i="script"===e,a=document.createElement(i?"script":"link");(t.startsWith("http")||t.startsWith("//"))&&(a.crossOrigin="anonymous");let s=!0;i?(a.src=t,a.async=n.async,a.defer=n.defer):(a.href=t,"prefetch"in n?(a.rel="prefetch",o-=1,s=!1):"preload"in n?(a.rel="preload",o-=1,s=!1):(a.rel="stylesheet",o-=1,s=!1)),s&&(a.onload=r),document.body.appendChild(a)}))}(xo,(()=>!!window["pdfjs-dist/build/pdf"]),(()=>{const e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.worker.min.js",i&&!i.destroyed||(i=new e.PDFWorker),c.resolve(!0),n(2,p=!0)}))}const g=e=>{const t=new FileReader;return m(rn,o=!1,o),new Promise(((n,o)=>{t.onload=e=>{if(!i||i.destroyed){const e=window["pdfjs-dist/build/pdf"];i=new e.PDFWorker}(async e=>{const t=window["pdfjs-dist/build/pdf"],n=[];let o=0;const r=await t.getDocument(e).promise,i=r.numPages;for(let e=1;e<=i;e+=1){const t=await ko(r,e);if(t.includes("(Long copy #1)"))n.push(t),o+=1;else{if(0!==o)break;t.includes("FPL SUMMARY")&&n.push(t)}}return n.join("\n")})({data:e.target.result,verbosity:0,worker:i}).then((e=>{if(e)try{const t=new editolido.Ofp("_PDFJS_"+e),r=new editolido.GeoGridIndex;r.data=window.WMO;const i=editolido.ogimetData(t,r);i.proxyImg=`https://ofp2map-gramet.vercel.app/api/${i.proxy}__${i.route.name.replace(/[^a-z0-9\-_]/giu,"_")}.png`,i.route.description=i.wmo.join(" "),t.ogimetData=i;try{nt();ot(t,a),n(t)}catch(e){o(e)}}catch(e){o(e)}else o(Error('OFP non reconnu, il faut choisir "Dossier de vol OFP" dans Pilot Mission.'))}),(e=>o(e)))},t.onerror=e=>{o(Error("Fichier illisible !"))},t.readAsArrayBuffer(e)}))};return e.$$set=e=>{"kmlOptions"in e&&n(7,a=e.kmlOptions)},[s,u,p,r,f,async function(e){n(0,s=!0),f(),await c.promise.then((()=>{const t=e.target.files[0];t&&(n(1,u=e.target.value.split(/([\\/])/g).pop()),d("change",u),m(on,r=g(t),r),"#/gramet"!==window.location.hash&&(window.location.hash="#/map"))})),n(0,s=!1)},async function(e){n(0,s=!0),f(),await c.promise.then((()=>{m(rn,o=!0,o),m(on,r=new Promise(((t,n)=>{let o=new editolido.Ofp("_PDFJS_AF 681 KATL/LFPG 11Mar2020/2235zReleased: 11Mar/1724z3Main OFP (Long copy #1)OFP 6/0/1 ATC FLIGHT PLAN (FPL-AFR681-IS -B77W/ -KATL2235 -LFPG0724 LFPO ) FLIGHT SUMMARY 0012 TAXI IN Generated");o.isFake=e.target.value;try{nt();ot(o,a),t(o)}catch(e){n(e)}})),r),window.location.hash="#/map"})),n(0,s=!1)},a]}class Lo extends Fe{constructor(e){super(),Me(this,e,Co,bo,s,{kmlOptions:7})}}function jo(e,t,n){const o=e.slice();return o[6]=t[n],o}function _o(e){let t;return{c(){t=C("option"),t.textContent="???",t.__value="???",t.value=t.__value,t.selected=!0},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function Mo(e){let t,n,o,r=e[6]+"";return{c(){t=C("option"),n=j(r),t.__value=e[6],t.value=t.__value,t.selected=o=e[6]===e[0]},m(e,o){w(e,t,o),x(t,n)},p(e,n){1&n&&o!==(o=e[6]===e[0])&&(t.selected=o)},d(e){e&&k(t)}}}function Fo(t){let n,o,r,a,s="???"===t[0]&&_o(),l=wo,c=[];for(let e=0;e<l.length;e+=1)c[e]=Mo(jo(t,l,e));return{c(){n=C("select"),s&&s.c(),o=F();for(let e=0;e<c.length;e+=1)c[e].c();A(n,"name","aircraftType"),A(n,"class","svelte-1xpiicm"),void 0===t[0]&&se((()=>t[5].call(n)))},m(e,i){w(e,n,i),s&&s.m(n,null),x(n,o);for(let e=0;e<c.length;e+=1)c[e].m(n,null);t[4](n),W(n,t[0]),r||(a=[O(n,"change",t[5]),O(n,"change",t[3])],r=!0)},p(e,[t]){if("???"===e[0]?s||(s=_o(),s.c(),s.m(n,o)):s&&(s.d(1),s=null),1&t){let o;for(l=wo,o=0;o<l.length;o+=1){const r=jo(e,l,o);c[o]?c[o].p(r,t):(c[o]=Mo(r),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}1&t&&W(n,e[0])},i:e,o:e,d(e){e&&k(n),s&&s.d(),P(c,e),t[4](null),r=!1,i(a)}}}function Oo(e,t,n){let{selectedAircraft:o="???"}=t,{aircraftTypeSelectElement:r=null}=t,{ofp:i}=t;return V((()=>{"???"===o&&i&&n(0,o=i.isFake?i.isFake:i.infos.aircraft),-1===wo.indexOf(o)&&n(0,o="???")})),e.$$set=e=>{"selectedAircraft"in e&&n(0,o=e.selectedAircraft),"aircraftTypeSelectElement"in e&&n(1,r=e.aircraftTypeSelectElement),"ofp"in e&&n(2,i=e.ofp)},[o,r,i,function(t){Q(e,t)},function(e){te[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(){o=N(this),n(0,o)}]}class Eo extends Fe{constructor(e){super(),Me(this,e,Oo,Fo,s,{selectedAircraft:0,aircraftTypeSelectElement:1,ofp:2})}}const Ao={version:8,name:"Blank pour App",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template","mapbox:sdk-support":{js:"1.9.0",android:"8.6.0",ios:"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},center:[0,0],zoom:1.2946207284336362,bearing:0,pitch:0,sources:{},sprite:"mapbox://sprites/flyingeek/ckbhlmwdm0mn51imw8t4dddqs/ck2u8j60r58fu0sgyxrigm3cu",glyphs:"mapbox://fonts/flyingeek/{fontstack}/{range}.pbf",layers:[],created:"2020-06-16T07:22:32.952Z",id:"ckbhlmwdm0mn51imw8t4dddqs",modified:"2020-06-16T07:23:29.539Z",owner:"flyingeek",visibility:"public",draft:!1},So=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?256:512,To=[{label:"Mercator",id:"mercator",mapboxOptions:{style:"mapbox://styles/flyingeek/cklgh38ep0xsr17qsvlrhth1e",renderWorldCopies:!1,maxZoom:12},cacheName:"denizotjbv1",cacheZoom:6},{label:"Lambert North",id:"jb_north",extent:[-7441575.3298294,-5719574.1644927,7383398.17621086,9105399.34154755],proj4:"+proj=lcc +lat_1=30 +lat_2=65 +lat_0=47.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Ao,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-northv3.netlify.app/northv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"northv3",cacheAll:!0,tileSize:So},{label:"Lambert South",id:"jb_south",extent:[-12613000.20107552,-12796118.19556621,13437104.14597977,13253986.15148908],validity:[-12613903.56963206,-9420000.1608799,13437054.51836624,5862747.38325809],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Ao,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-southv3.netlify.app/southv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"southv3",cacheAll:!0,tileSize:So},{label:"Lambert Pacific",id:"jb_pacific",extent:[-8306365.14297095,-7788164.66141786,6519185.45830619,7037385.93985927],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=-140 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Ao,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-pacificv1.netlify.app/pacificv1/{z}/{x}/{y}.jpg"],cacheName:"pacificv1",cacheZoom:4,cacheAll:!0,tileSize:So},{label:"The World",id:"jb_theworld",affineTransform:[1.314746085506463,-45260.546626176685,1.315,648e4],extent:[-15201502.45260082,-8478963.56607166,15262747.04890729,10300929.57326125],proj4:"+proj=times +ellps=sphere +no_defs +wktext +lon_0=0 +x_0=0 +y_0=0",mapboxOptions:{style:Ao,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-theworldv2.netlify.app/theworldv2/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,10],[32,20]],cacheZoom:5,cacheName:"theworldv2",cacheAll:!0,tileSize:So}];function Io(e,t,n){const o=e.slice();return o[6]=t[n],o[8]=n,o}function Do(e){let t,n,o,r=(e[6].proj4&&e[2](e[6])?`${e[6].label.toUpperCase()}`:e[6].label)+"";return{c(){t=C("option"),n=j(r),t.__value=e[6],t.value=t.__value,t.selected=o=e[6].id===e[0].id},m(e,o){w(e,t,o),x(t,n)},p(e,n){1&n&&o!==(o=e[6].id===e[0].id)&&(t.selected=o)},d(e){e&&k(t)}}}function zo(t){let n,o,r,a=To,s=[];for(let e=0;e<a.length;e+=1)s[e]=Do(Io(t,a,e));return{c(){n=C("select");for(let e=0;e<s.length;e+=1)s[e].c();A(n,"name",t[1]),A(n,"class","form-control form-control-sm svelte-1uc3ace"),void 0===t[0]&&se((()=>t[5].call(n)))},m(e,i){w(e,n,i);for(let e=0;e<s.length;e+=1)s[e].m(n,null);W(n,t[0]),o||(r=[O(n,"change",t[5]),O(n,"change",t[4])],o=!0)},p(e,[t]){if(5&t){let o;for(a=To,o=0;o<a.length;o+=1){const r=Io(e,a,o);s[o]?s[o].p(r,t):(s[o]=Do(r),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=a.length}2&t&&A(n,"name",e[1]),1&t&&W(n,e[0])},i:e,o:e,d(e){e&&k(n),P(s,e),o=!1,i(r)}}}function Ro(e,t,n){let{name:o="map-style"}=t,{ofp:r}=t,{selected:i=To[0]}=t;return V((()=>{if(i.id===To[0].id&&r&&!r.isFake){const e=r.route.points[0],t=r.route.points[r.route.points.length-1];t.latitude>30&&e.latitude>30?n(0,i=To[1]):t.longitude<-80&&e.longitude<-80?n(0,i=To[3]):n(0,i=To[2])}})),e.$$set=e=>{"name"in e&&n(1,o=e.name),"ofp"in e&&n(3,r=e.ofp),"selected"in e&&n(0,i=e.selected)},[i,o,function(e){if(!e.proj4||!r||r.isFake)return!0;const t=r.route.points[0],n=r.route.points[r.route.points.length-1];if("jb_north"===e.id)return n.latitude>30&&t.latitude>30;if("jb_south"===e.id){if(n.latitude>30&&t.latitude>30)return!1}else if("jb_theworld"===e.id)return!1;const o=e.validity?e.validity:e.extent;for(let r of[t,n]){const[t,n]=window.proj4(e.proj4,[r.longitude,r.latitude]);if(t<o[0]||t>o[2]||n<o[1]||n>o[3])return!1}return!0},r,function(t){Q(e,t)},function(){i=N(this),n(0,i)}]}class Wo extends Fe{constructor(e){super(),Me(this,e,Ro,zo,s,{name:1,ofp:3,selected:0})}}function No(e,t){let n=t;const o=()=>n&&n.resize(),r=new IntersectionObserver(((e,t)=>{e.forEach((e=>{1===e.intersectionRatio&&o()}))}),{threshold:1});r.observe(e);const i=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&o()};return document.addEventListener("visibilitychange",i,!1),window.addEventListener("orientationchange",o),{update(e){n=e},destroy(){r.unobserve(e),r.disconnect(),window.removeEventListener("orientationchange",o),document.removeEventListener("visibilitychange",i),n&&n.remove()}}}function qo(e){let t,n,o,r,i;return n=new ho({props:{value:e[8],max:e[7],$$slots:{default:[Go]},$$scope:{ctx:e}}}),{c(){t=C("div"),Le(n.$$.fragment),A(t,"class","cacheButton svelte-13482y7"),q(t,"cacheError",e[9]),q(t,"cacheProgress",e[8]>0||e[7]>0)},m(s,l){w(s,t,l),je(n,t,null),o=!0,r||(i=O(t,"click",(function(){a(e[11]?Ho:e[17])&&(e[11]?Ho:e[17]).apply(this,arguments)})),r=!0)},p(o,r){e=o;const i={};256&r&&(i.value=e[8]),128&r&&(i.max=e[7]),33554432&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i),512&r&&q(t,"cacheError",e[9]),384&r&&q(t,"cacheProgress",e[8]>0||e[7]>0)},i(e){o||(be(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){e&&k(t),_e(n),r=!1,i()}}}function Go(e){let t;const n=e[19].default,o=c(n,e,e[25],null),r=o||function(e){let t;return{c(){t=C("span"),t.textContent="‚Üì",A(t,"class","svelte-13482y7")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}();return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){o&&o.p&&33554432&t&&p(o,n,e,e[25],t,null,null)},i(e){t||(be(r,e),t=!0)},o(e){xe(r,e),t=!1},d(e){r&&r.d(e)}}}function Uo(e){let t,n,o,r,i,s,l,c,u,p,d,m,g,h,v,y,$;function b(t){e[20](t)}let P={ofp:e[1]};void 0!==e[4]&&(P.selected=e[4]),i=new Wo({props:P}),te.push((()=>Ce(i,"selected",b))),i.$on("change",e[14]);let L=e[4]&&!e[1].isFake&&window.indexedDB&&e[13]&&!0!==e[10][e[4].id]&&!e[12]&&qo(e);function j(t){e[21](t)}function _(t){e[22](t)}let F={ofp:e[1]};function O(t){e[23](t)}void 0!==e[5]&&(F.selectedAircraft=e[5]),void 0!==e[6]&&(F.aircraftTypeSelectElement=e[6]),u=new Eo({props:F}),te.push((()=>Ce(u,"selectedAircraft",j))),te.push((()=>Ce(u,"aircraftTypeSelectElement",_))),u.$on("change",e[15]);let E={};return void 0!==e[0]&&(E.kmlOptions=e[0]),g=new hn({props:E}),te.push((()=>Ce(g,"kmlOptions",O))),g.$on("change",e[16]),g.$on("save",e[24]),{c(){t=C("div"),o=M(),r=C("div"),Le(i.$$.fragment),l=M(),L&&L.c(),c=M(),Le(u.$$.fragment),m=M(),Le(g.$$.fragment),A(t,"id",e[2]),A(t,"class","svelte-13482y7"),A(r,"class","mapmenu svelte-13482y7")},m(a,s){w(a,t,s),w(a,o,s),w(a,r,s),je(i,r,null),x(r,l),L&&L.m(r,null),w(a,c,s),je(u,a,s),w(a,m,s),je(g,a,s),v=!0,y||($=f(n=No.call(null,t,e[3])),y=!0)},p(e,[o]){(!v||4&o)&&A(t,"id",e[2]),n&&a(n.update)&&8&o&&n.update.call(null,e[3]);const l={};2&o&&(l.ofp=e[1]),!s&&16&o&&(s=!0,l.selected=e[4],le((()=>s=!1))),i.$set(l),e[4]&&!e[1].isFake&&window.indexedDB&&e[13]&&!0!==e[10][e[4].id]&&!e[12]?L?(L.p(e,o),13330&o&&be(L,1)):(L=qo(e),L.c(),be(L,1),L.m(r,null)):L&&(ye(),xe(L,1,1,(()=>{L=null})),$e());const c={};2&o&&(c.ofp=e[1]),!p&&32&o&&(p=!0,c.selectedAircraft=e[5],le((()=>p=!1))),!d&&64&o&&(d=!0,c.aircraftTypeSelectElement=e[6],le((()=>d=!1))),u.$set(c);const m={};!h&&1&o&&(h=!0,m.kmlOptions=e[0],le((()=>h=!1))),g.$set(m)},i(e){v||(be(i.$$.fragment,e),be(L),be(u.$$.fragment,e),be(g.$$.fragment,e),v=!0)},o(e){xe(i.$$.fragment,e),xe(L),xe(u.$$.fragment,e),xe(g.$$.fragment,e),v=!1},d(e){e&&k(t),e&&k(o),e&&k(r),_e(i),L&&L.d(),e&&k(c),_e(u,e),e&&k(m),_e(g,e),y=!1,$()}}}const Ho=()=>!1;function Bo(e,t,n){let o,r;l(e,cn,(e=>n(13,r=e)));let{$$slots:i={},$$scope:a}=t;const s=Y();let c,u,p,d,m,{kmlOptions:f}=t,{ofp:g}=t,h=0,v=0,y=!1,$=[];const b={};let{id:x="map"}=t;async function w(){n(18,$=await mo(g,u));const e=document.querySelector(`#${x} .mapboxgl-ctrl-attrib-inner`);e&&(e.appendChild(document.createTextNode(" | ")),e.appendChild(m),e.appendChild(document.createTextNode(`${"2102a".substring(0,2)}.${"2102a".substring(2,4)}`)))}const k=e=>{(e=>{const{name:t,value:n}=e,o=De(t),r=oo[o];r&&(t.endsWith("-display")?n?r.show(e):r.hide(e):t.endsWith("-pin")?r.changeMarker(e):t.endsWith("-color")?r.changeLine(e):t.endsWith("-change")&&r.change(e))})({map:c,mapData:u,name:e.detail.name,value:e.detail.value,ofp:g,kmlOptions:f,aircraftType:d}),function(e,t){if(e.startsWith("etops-")||e.startsWith("airport-")||e.startsWith("fir-"))return;const n=nt(),o=De(e);e.endsWith("-display")?n.changeFolderState(o,t):e.endsWith("-pin")?n.changeFolderPin(o,t):e.endsWith("-color")&&n.changeFolderColor(o,t.toUpperCase())}(e.detail.name,e.detail.value),s("save")};let P=!1;return V((()=>{mapboxgl.accessToken="pk.eyJ1IjoiZmx5aW5nZWVrIiwiYSI6ImNrYXpmZzhuYjBpczUycW1pZzZ1b2Z4NjAifQ.5S-VzSXpJkui8NDMlTU51Q",u=lo(x,p,g,f,w),n(3,c=u.map)})),e.$$set=e=>{"kmlOptions"in e&&n(0,f=e.kmlOptions),"ofp"in e&&n(1,g=e.ofp),"id"in e&&n(2,x=e.id),"$$scope"in e&&n(25,a=e.$$scope)},e.$$.update=()=>{262144&e.$$.dirty&&n(12,o=0===$.length)},[f,g,x,c,p,d,m,h,v,y,b,P,o,r,function(e){e.target.blur(),c&&c.remove(),n(8,v=0),n(9,y=!1),n(18,$=[]),n(7,h=0),u=lo(x,p,g,f,w),n(3,c=u.map)},function(e){e.target.blur(),k({detail:{value:d,name:"airport-change"}})},k,async e=>{if(P)return!1;n(11,P=!0);try{n(7,h=$.length),n(9,y=!1);try{await qe(4e3,fetch(`./manifest.json?dummy=${Date.now()}`,{cache:"no-store"}))}catch(e){return n(11,P=!1),n(9,y=!0),!1}n(8,v=0),await async function(e,t){const n=e;let o=0,r=0;return await new Promise((e=>{const i=setInterval((async()=>{if(0===n.filter((e=>e)).length&&(clearInterval(i),e()),o>=5||r>n.length-1)return;const a=r++,s=n[a];o++;try{await fetch(s),t&&t()}catch{}o--,delete n[a]}),100)}))}($,(()=>n(8,v++,v))),v>=h&&(n(10,b[p.id]=!0,b),n(10,b),n(18,$=[]),n(7,h=0))}finally{n(11,P=!1)}},$,i,function(e){p=e,n(4,p)},function(e){d=e,n(5,d)},function(e){m=e,n(6,m)},function(e){f=e,n(0,f)},function(t){Q(e,t)},a]}class Zo extends Fe{constructor(e){super(),Me(this,e,Bo,Uo,s,{kmlOptions:0,ofp:1,id:2})}}function Ko(e){let t,n;return{c(){t=C("li"),n=C("a"),n.innerHTML='<svg class="f svelte-z5ep4u"><use xlink:href="#marker"></use></svg> \n      <span class="svelte-z5ep4u">CARTE</span>',A(n,"class","nav-link svelte-z5ep4u"),A(n,"href","#/map"),q(n,"disabled",!e[1]),A(t,"class","nav-item svelte-z5ep4u"),q(t,"active","/map"===e[0])},m(e,o){w(e,t,o),x(t,n)},p(e,o){2&o&&q(n,"disabled",!e[1]),1&o&&q(t,"active","/map"===e[0])},d(e){e&&k(t)}}}function Xo(e){let t,n;return{c(){t=C("li"),n=C("a"),n.innerHTML='<svg class="f svelte-z5ep4u"><use xlink:href="#cloud"></use></svg> \n      <span class="svelte-z5ep4u">GRAMET</span>',A(n,"class","nav-link svelte-z5ep4u"),A(n,"href","#/gramet"),q(n,"disabled",!e[1]),A(t,"class","nav-item svelte-z5ep4u"),q(t,"active","/gramet"===e[0])},m(e,o){w(e,t,o),x(t,n)},p(e,o){2&o&&q(n,"disabled",!e[1]),1&o&&q(t,"active","/gramet"===e[0])},d(e){e&&k(t)}}}function Jo(e){let t,n;return{c(){t=C("li"),n=C("a"),n.innerHTML='<svg class="f svelte-z5ep4u"><use xlink:href="#export"></use></svg> \n      <span class="svelte-z5ep4u">EXPORT</span>',A(n,"class","nav-link svelte-z5ep4u"),A(n,"href","#/export"),q(n,"disabled",!e[1]),A(t,"class","nav-item svelte-z5ep4u"),q(t,"active","/export"===e[0])},m(e,o){w(e,t,o),x(t,n)},p(e,o){2&o&&q(n,"disabled",!e[1]),1&o&&q(t,"active","/export"===e[0])},d(e){e&&k(t)}}}function Vo(t){let n,o,r,i,a,s,l,u,d,m,f,g,h,v,y=(t[1]||"/map"===t[0])&&Ko(t),$=(t[1]&&!t[2]||"/gramet"===t[0])&&Xo(t),b=(t[1]&&!t[2]||"/export"===t[0])&&Jo(t),P=navigator.share&&function(t){let n,o,r,i;return{c(){n=C("li"),o=C("a"),o.textContent="PARTAGER",A(o,"class","nav-link"),A(o,"href","."),A(n,"class","nav-item optional svelte-z5ep4u")},m(e,a){w(e,n,a),x(n,o),r||(i=O(o,"click",E(t[3])),r=!0)},p:e,d(e){e&&k(n),r=!1,i()}}}(t);const j=t[5].default,_=c(j,t,t[4],null);return{c(){n=C("nav"),o=C("ul"),r=C("li"),i=C("a"),a=L("svg"),s=L("use"),l=M(),y&&y.c(),u=M(),$&&$.c(),d=M(),b&&b.c(),m=M(),f=C("li"),f.innerHTML='<a class="nav-link" href="#/help"><svg class="f svelte-z5ep4u"><use xlink:href="#info"></use></svg> \n      <span class="svelte-z5ep4u">AIDE</span></a>',g=M(),P&&P.c(),h=M(),_&&_.c(),T(s,"xlink:href","#home"),A(a,"class","svelte-z5ep4u"),A(i,"class","nav-link"),A(i,"href","#/"),A(r,"class","nav-item svelte-z5ep4u"),q(r,"active","/"===t[0]),A(f,"class","nav-item svelte-z5ep4u"),q(f,"active","/help"===t[0]),A(o,"class","navbar-nav mr-auto svelte-z5ep4u"),A(n,"class","navbar navbar-expand-md navbar-light bg-light svelte-z5ep4u")},m(e,t){w(e,n,t),x(n,o),x(o,r),x(r,i),x(i,a),x(a,s),x(o,l),y&&y.m(o,null),x(o,u),$&&$.m(o,null),x(o,d),b&&b.m(o,null),x(o,m),x(o,f),x(o,g),P&&P.m(o,null),x(n,h),_&&_.m(n,null),v=!0},p(e,[t]){1&t&&q(r,"active","/"===e[0]),e[1]||"/map"===e[0]?y?y.p(e,t):(y=Ko(e),y.c(),y.m(o,u)):y&&(y.d(1),y=null),e[1]&&!e[2]||"/gramet"===e[0]?$?$.p(e,t):($=Xo(e),$.c(),$.m(o,d)):$&&($.d(1),$=null),e[1]&&!e[2]||"/export"===e[0]?b?b.p(e,t):(b=Jo(e),b.c(),b.m(o,m)):b&&(b.d(1),b=null),1&t&&q(f,"active","/help"===e[0]),navigator.share&&P.p(e,t),_&&_.p&&16&t&&p(_,j,e,e[4],t,null,null)},i(e){v||(be(_,e),v=!0)},o(e){xe(_,e),v=!1},d(e){e&&k(n),y&&y.d(),$&&$.d(),b&&b.d(),P&&P.d(),_&&_.d(e)}}}function Yo(e,t,n){let o,r,i;l(e,un,(e=>n(0,o=e))),l(e,on,(e=>n(1,r=e))),l(e,rn,(e=>n(2,i=e)));let{$$slots:a={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(4,s=e.$$scope)},[o,r,i,async()=>{const e={title:"OFP2MAP",url:window.location.pathname};try{await navigator.share(e)}catch(e){}return!1},s,a]}class Qo extends Fe{constructor(e){super(),Me(this,e,Yo,Vo,s,{})}}function er(n){let o,r,i;const s=n[3].default,l=c(s,n,n[2],null);return{c(){o=C("page"),l&&l.c(),A(o,"class","svelte-7uc4nn"),q(o,"fadein",!1===n[0]),q(o,"d-none",!0===n[0])},m(e,t){w(e,o,t),l&&l.m(o,null),i=!0},p(e,[t]){l&&l.p&&4&t&&p(l,s,e,e[2],t,null,null),1&t&&q(o,"fadein",!1===e[0]),1&t&&q(o,"d-none",!0===e[0])},i(s){i||(be(l,s),r||se((()=>{r=function(n,o,r){let i,s,l=o(n,r),c=!1,u=0;function p(){i&&K(n,i)}function d(){const{delay:o=0,duration:r=300,easing:a=t,tick:d=e,css:m}=l||we;m&&(i=Z(n,0,1,r,o,a,m,u++)),d(0,1);const f=h()+o,g=f+r;s&&s.abort(),c=!0,se((()=>ge(n,!0,"start"))),s=b((e=>{if(c){if(e>=g)return d(1,0),ge(n,!0,"end"),p(),c=!1;if(e>=f){const t=a((e-f)/r);d(t,1-t)}}return c}))}let m=!1;return{start(){m||(K(n),a(l)?(l=l(),fe().then(d)):d())},invalidate(){m=!1},end(){c&&(p(),c=!1)}}}(o,n[1],{}),r.start()})),i=!0)},o(e){xe(l,e),i=!1},d(e){e&&k(o),l&&l.d(e)}}}function tr(e,t,n){let{$$slots:o={},$$scope:r}=t,{hidden:i}=t;return e.$$set=e=>{"hidden"in e&&n(0,i=e.hidden),"$$scope"in e&&n(2,r=e.$$scope)},[i,(e,t,n)=>{if(void 0===i)return Ue(e,t)},r,o]}class nr extends Fe{constructor(e){super(),Me(this,e,tr,er,s,{hidden:0})}}function or(e){let t,o;const r=e[3].default,i=c(r,e,e[2],null);let a=[{href:e[0]},e[1]],s={};for(let e=0;e<a.length;e+=1)s=n(s,a[e]);return{c(){t=C("a"),i&&i.c(),S(t,s)},m(e,n){w(e,t,n),i&&i.m(t,null),o=!0},p(e,[n]){i&&i.p&&4&n&&p(i,r,e,e[2],n,null,null),S(t,s=function(e,t){const n={},o={},r={$$scope:1};let i=e.length;for(;i--;){const a=e[i],s=t[i];if(s){for(const e in a)e in s||(o[e]=1);for(const e in s)r[e]||(n[e]=s[e],r[e]=1);e[i]=s}else for(const e in a)r[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}(a,[(!o||1&n)&&{href:e[0]},e[1]]))},i(e){o||(be(i,e),o=!0)},o(e){xe(i,e),o=!1},d(e){e&&k(t),i&&i.d(e)}}}function rr(e,t,o){const r=["href"];let i=d(t,r),{$$slots:a={},$$scope:s}=t,{href:l}=t;const c=l&&!l.startsWith("#")?Object.assign({rel:"noreferrer",target:"_blank"},i):i;return e.$$set=e=>{t=n(n({},t),function(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}(e)),o(5,i=d(t,r)),"href"in e&&o(0,l=e.href),"$$scope"in e&&o(2,s=e.$$scope)},[l,c,s,a]}class ir extends Fe{constructor(e){super(),Me(this,e,rr,or,s,{href:0})}}function ar(e){let t;return{c(){t=C("span"),t.innerHTML="Fly<span>Tax</span>",A(t,"class","flytax")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function sr(e){let t,n,o,r,i,a,s,l,c,u,p,d,m,f,g,h,v,y,$,b,P,L,_,F,O,E,S,T,I,D,z,R,W,N,q,G,U,H,B,Z,K,X,J,V,Y,Q,ee,te,ne,oe,re;return ne=new ir({props:{href:"https://flyingeek.github.io/flytax/",rel:"noopener",$$slots:{default:[ar]},$$scope:{ctx:e}}}),{c(){t=C("h2"),t.textContent="Pr√©ambule",n=M(),o=C("p"),o.textContent="OFP2MAP est une application PWA (ou Web Application), elle peut √™tre lanc√©e soit depuis un navigateur, soit depuis l'√©cran d'accueil de l'iPad. Initialement, simple convertisseur de l'OFP en KML, OFP2MAP est devenu une vraie application de cartographie.",r=M(),i=C("p"),i.textContent="OFP2MAP n√©cessite des navigateurs r√©cents pour fonctionner. Safari 14 iOS/Mac est compatible, Chrome 83 fonctionne aussi.",a=M(),s=C("p"),s.textContent="L'OFP ne transite sur aucun serveur, seule une route calcul√©e (bas√©e sur au plus 21 stations m√©t√©o) est transmise √† l'h√©bergeur du proxy (voir plus bas) puis √† Ogimet.com pour r√©cup√©rer le Gramet. L'app ne collecte aucune donn√©es.",l=M(),c=C("h2"),c.textContent="Utilisation",u=M(),p=C("ol"),p.innerHTML='<li><p>Dans Pilot Mission, onglet ¬´Dossier de vol¬ª, affichez le PDF nomm√© &quot;Dossier de vol OFP&quot;. Sur la gauche, cliquez sur le carr√© avec une fl√®che vers le haut. Choisissez ¬´Enregistrer dans Fichiers¬ª. Dans l&#39;app, c&#39;est cet OFP qu&#39;il faut ensuite s√©lectionner.</p></li> \n<li><p>Lorsque l&#39;on visualise la carte, le menu de personnalisation s&#39;affiche en cliquant sur <svg style="vertical-align: bottom;"><use xlink:href="#bars"></use></svg> en haut √† droite. Le type avion pour l&#39;ad√©quation des terrains est d√©tect√© dans l&#39;OFP. Pour vous entrainer, je vous recommande de modifier la couleur des terrains en vert/rouge et de sauvegarder votre choix.</p></li> \n<li><p>Pour Exporter vers une app, direction le menu EXPORT, vous pouvez exporter une route pour mPilot, t√©l√©charger le KML (routes et tracks uniquement), ou envoyer vers l&#39;app <strong>Raccourcis</strong> d&#39;Apple.</p></li> \n<li><p>La carte par d√©faut est une LAMBERT, il est possible sur la carte, en haut √† gauche, de basculer sur d&#39;autres projections.</p> \n<ul><li>LAMBERT NORTH (parall√®les s√©cants N30 et N65) est recommand√©e au-dessus du N40</li> \n<li>LAMBERT SOUTH &amp; PACIFIC (parall√®les s√©cants N30 et S15 ) sont recommand√©es sous N30</li> \n<li>THE WORLD permet de disposer d&#39;un Atlas off-line, c&#39;est une projection Times</li> \n<li>MERCATOR est une Web Mercator avec un th√®me est inspir√© des cartes VFR. Il y a 12 niveaux de zoom, dont 6 disponibles off-line</li></ul></li>',d=M(),m=C("ol"),m.innerHTML="<li>Navigation dans la carte: on peut avec un doigt d√©placer la carte, zoomer ou orienter la carte avec deux doigts. Il est aussi possible de modifier l&#39;angle de vue en balayant de haut en bas avec deux doigts.</li>",f=M(),g=C("h2"),g.textContent="Particularit√©s de l'iPad",h=M(),v=C("p"),v.textContent="OFP2MAP ne peut √™tre lanc√© que depuis l'√©cran d'accueil, l'application se lance en plein √©cran. On ne peut pas recharger la page comme dans un navigateur‚ÄØ: il faudra pour cela aller dans le menu d'aide (cet √©cran) ou un bouton sp√©cifique sera affich√© en haut.",y=M(),$=C("p"),$.textContent="Pour partager le lien vers OFP2MAP, utilisez le menu PARTAGER puis utilisez AirDrop.",b=M(),P=C("p"),P.innerHTML='L&#39;export des fichiers KML affiche une page nomm√©e &quot;data:&quot;, utilisez le bouton <svg style="vertical-align: bottom;"><use xlink:href="#share"></use></svg> pour choisir l&#39;app qui recevra le fichier. Cliquez en haut √† gauche sur OK pour revenir √† OFP2MAP. En raison d&#39;un bug d&#39;iOS, il est impossible de nommer le fichier pour le moment.',L=M(),_=C("p"),_.textContent="√Ä noter que parfois, des bugs d'affichage peuvent appara√Ætre‚ÄØ:  lorsque l'on retourne sur l'app, l'app est zoom√©e, il faut alors juste d√©zoomer en utilisant un pinch de deux doigts sur la barre de menu. Il est aussi possible de tuer l'app,  m√™me en mode d√©connect√©, pour la relancer.",F=M(),O=C("h2"),O.textContent="Mode off-line",E=M(),S=C("p"),S.textContent="Une fois un premier OFP charg√©, il est possible m√™me en mode d√©connect√© de charger un autre OFP pour l'exporter. Le cache de l'App vous permettra de naviguer sur les cartes d√©j√† visualis√©es. Pour mettre en cache les cartes, il suffit de les consulter.",T=M(),I=C("p"),I.textContent="Il existe aussi un bouton de mise en cache‚ÄØ: le pictogramme ‚Üì situ√© √† droite du s√©lecteur de carte. Sur les cartes LAMBERT ou THE WORLD, il mettra en cache la totalit√© de la carte. Sur la MERCATOR, seule la partie de carte incluant la route sera mise en cache.",D=M(),z=C("p"),z.textContent="Les premi√®res mises en cache peuvent prendre du temps‚ÄØ: sur la Mercator, un vol LC peut n√©cessiter le t√©l√©chargement de 40Mo de donn√©es. Les caches des autres projections utilisent‚ÄØ: 7Mo pour la NORTH, 4Mo pour la PACIFIC, 7Mo pour la SOUTH et 32Mo pour THE WORLD.",R=M(),W=C("h2"),W.textContent="Mise √† jour",N=M(),q=C("p"),q.textContent="L'app d√©tecte les mises √† jour automatiquement, normalement vous n'avez rien √† faire. Eventuellement un prompt peut\napparaitre vous demandant d'autoriser cette mise √† jour. La version AIRAC et le type avion d√©tect√© dans l'OFP sont affich√©s en bas √† droite de la carte dans le champ d'attribution.",G=M(),U=C("h2"),U.textContent="Cr√©dits",H=M(),B=C("ul"),B.innerHTML='<li>Les donn√©es terrains/FIR sont fournies par Olivier Ravet forum Yammer/Mapsme</li> \n<li>Les cartes (autres que Mapbox streets) sont de Jean-Baptiste Denizot forum Yammer/QGIS &amp; Avenza Maps</li> \n<li>Le GRAMET provient du site ogimet.com</li> \n<li>Le site est d√©velopp√© en javascript √† l&#39;aide du framework SVELTE</li> \n<li>La partie serveur (un proxy pour pouvoir r√©cup√©rer l&#39;image du GRAMET) est en python.</li> \n<li>Eric Delord CDB 777 est l&#39;auteur. Le code source est disponible sur GitHub pour <a href="https://github.com/flyingeek/lido-online">l&#39;app</a> et <a href="https://github.com/flyingeek/ofp2map-gramet">le proxy</a></li>',Z=M(),K=C("h2"),K.textContent="H√©bergement",X=M(),J=C("p"),J.textContent="L'h√©bergement des images est normalement fourni par alwaysdata.com (pack gratuit) mais en raison d'un blacklistage sur le r√©seau internet d'AF, les fonds de cartes sont √† pr√©sent h√©berg√©s sur netlify. Le proxy gramet est lui dor√©navant h√©berg√© sur vercel.",V=M(),Y=C("h2"),Y.textContent="Liens",Q=M(),ee=C("ul"),te=C("li"),Le(ne.$$.fragment),oe=j(" une aide aux calculs des frais professionnels (m√™me auteur)."),A(m,"start","5")},m(e,k){w(e,t,k),w(e,n,k),w(e,o,k),w(e,r,k),w(e,i,k),w(e,a,k),w(e,s,k),w(e,l,k),w(e,c,k),w(e,u,k),w(e,p,k),w(e,d,k),w(e,m,k),w(e,f,k),w(e,g,k),w(e,h,k),w(e,v,k),w(e,y,k),w(e,$,k),w(e,b,k),w(e,P,k),w(e,L,k),w(e,_,k),w(e,F,k),w(e,O,k),w(e,E,k),w(e,S,k),w(e,T,k),w(e,I,k),w(e,D,k),w(e,z,k),w(e,R,k),w(e,W,k),w(e,N,k),w(e,q,k),w(e,G,k),w(e,U,k),w(e,H,k),w(e,B,k),w(e,Z,k),w(e,K,k),w(e,X,k),w(e,J,k),w(e,V,k),w(e,Y,k),w(e,Q,k),w(e,ee,k),x(ee,te),je(ne,te,null),x(te,oe),re=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),ne.$set(n)},i(e){re||(be(ne.$$.fragment,e),re=!0)},o(e){xe(ne.$$.fragment,e),re=!1},d(e){e&&k(t),e&&k(n),e&&k(o),e&&k(r),e&&k(i),e&&k(a),e&&k(s),e&&k(l),e&&k(c),e&&k(u),e&&k(p),e&&k(d),e&&k(m),e&&k(f),e&&k(g),e&&k(h),e&&k(v),e&&k(y),e&&k($),e&&k(b),e&&k(P),e&&k(L),e&&k(_),e&&k(F),e&&k(O),e&&k(E),e&&k(S),e&&k(T),e&&k(I),e&&k(D),e&&k(z),e&&k(R),e&&k(W),e&&k(N),e&&k(q),e&&k(G),e&&k(U),e&&k(H),e&&k(B),e&&k(Z),e&&k(K),e&&k(X),e&&k(J),e&&k(V),e&&k(Y),e&&k(Q),e&&k(ee),_e(ne)}}}class lr extends Fe{constructor(e){super(),Me(this,e,null,sr,s,{})}}function cr(t){let n,o,r,i,a,s,l,c,u,p,d,m,f,g,h,v,y=!0===navigator.standalone&&function(t){let n,o,r;return{c(){n=C("button"),n.textContent="Recharger l'App",A(n,"class","btn btn-primary btn-sm svelte-vgy6ih")},m(e,i){w(e,n,i),o||(r=O(n,"click",t[2]),o=!0)},p:e,d(e){e&&k(n),o=!1,r()}}}(t);return f=new lr({}),{c(){n=C("div"),o=C("h1"),r=C("img"),a=j(" OFP2MAP v"),s=j(ur),l=M(),c=C("small"),u=j("/ ServiceWorker‚ÄØ: "),p=j(t[1]),d=M(),y&&y.c(),m=M(),Le(f.$$.fragment),r.src!==(i="images/ofp2map-icons/icon-128x128.png")&&A(r,"src","images/ofp2map-icons/icon-128x128.png"),A(r,"alt","logo"),A(r,"class","svelte-vgy6ih"),A(c,"class","svelte-vgy6ih"),A(o,"class","svelte-vgy6ih"),A(n,"class","markdown svelte-vgy6ih")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(o,a),x(o,s),x(o,l),x(o,c),x(c,u),x(c,p),x(o,d),y&&y.m(o,null),x(n,m),je(f,n,null),g=!0,h||(v=O(c,"click",t[3],{once:!0}),h=!0)},p(e,[t]){(!g||2&t)&&D(p,e[1]),!0===navigator.standalone&&y.p(e,t)},i(e){g||(be(f.$$.fragment,e),g=!0)},o(e){xe(f.$$.fragment,e),g=!1},d(e){e&&k(n),y&&y.d(),_e(f),h=!1,v()}}}const ur="1.4.1";function pr(e,t,n){let o;l(e,en,(e=>n(0,o=e)));let r="";return e.$$.update=()=>{var t;1&e.$$.dirty&&(t=o)&&t.messageSW({type:"GET_VERSION"}).then((e=>n(1,r=e)))},[o,r,()=>{window.location.hash="#/",window.location.reload()},()=>o&&o.update()&&void 0]}class dr extends Fe{constructor(e){super(),Me(this,e,pr,cr,s,{})}}function mr(e){let t,n,o,r,a,s,l,c,u,p,d,m,f,g,h,v;return{c(){t=C("div"),n=C("div"),o=C("strong"),o.innerHTML='<span class="svelte-395rpc">üë®üèª‚Äç‚úàÔ∏è</span>Mise √† jour disponible',r=M(),a=C("button"),a.innerHTML='<span aria-hidden="true">√ó</span>',s=M(),l=C("div"),c=C("p"),c.textContent="Il faudra recharger l'OFP",u=M(),p=C("button"),d=C("span"),m=j(e[1]),A(o,"class","svelte-395rpc"),A(a,"type","button"),A(a,"class","close svelte-395rpc"),A(a,"aria-label","Close"),A(n,"class","toast-header svelte-395rpc"),A(d,"class","svelte-395rpc"),q(d,"blinking",e[1].endsWith("...")),A(p,"class","btn btn-primary"),A(p,"type","button"),A(l,"class","toast-body text-center"),A(t,"class","toast svelte-395rpc"),R(t,"position","fixed"),R(t,"top","0"),R(t,"right","0")},m(i,f){w(i,t,f),x(t,n),x(n,o),x(n,r),x(n,a),x(t,s),x(t,l),x(l,c),x(l,u),x(l,p),x(p,d),x(d,m),g=!0,h||(v=[O(a,"click",e[6]),O(p,"click",e[7],{once:!0})],h=!0)},p(e,t){(!g||2&t)&&D(m,e[1]),2&t&&q(d,"blinking",e[1].endsWith("..."))},i(e){g||(se((()=>{f||(f=ke(t,Ue,{},!0)),f.run(1)})),g=!0)},o(e){f||(f=ke(t,Ue,{},!1)),f.run(0),g=!1},d(e){e&&k(t),e&&f&&f.end(),h=!1,i(v)}}}function fr(t){let n,o,r,i,a,s,l,c,u,p,d=(t[4](700)||"")+"";return{c(){n=C("div"),o=C("div"),r=C("div"),r.innerHTML='<strong class="svelte-395rpc"><span class="svelte-395rpc">üë®üèª‚Äç‚úàÔ∏è</span>Mise √† jour d√©tect√©e</strong>',i=M(),a=C("div"),s=C("button"),s.innerHTML="<span>Mise √† jour...</span>",l=M(),c=j(d),A(r,"class","toast-header svelte-395rpc"),A(s,"class","btn"),A(s,"type","button"),A(a,"class","toast-body text-center"),A(o,"class","toast svelte-395rpc"),A(n,"class","modal svelte-395rpc")},m(e,d){w(e,n,d),x(n,o),x(o,r),x(o,i),x(o,a),x(a,s),x(n,l),w(e,c,d),u||(p=O(s,"click",E(t[5])),u=!0)},p:e,i:e,o:e,d(e){e&&k(n),e&&k(c),u=!1,p()}}}function gr(e){let t,n,o,r;const i=[fr,mr],a=[];function s(e,t){return!e[3]||e[2]||e[0]?e[3]&&!e[2]?1:-1:0}return~(t=s(e))&&(n=a[t]=i[t](e)),{c(){n&&n.c(),o=F()},m(e,n){~t&&a[t].m(e,n),w(e,o,n),r=!0},p(e,[r]){let l=t;t=s(e),t===l?~t&&a[t].p(e,r):(n&&(ye(),xe(a[l],1,1,(()=>{a[l]=null})),$e()),~t?(n=a[t],n?n.p(e,r):(n=a[t]=i[t](e),n.c()),be(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(be(n),r=!0)},o(e){xe(n),r=!1},d(e){~t&&a[t].d(e),e&&k(o)}}}const hr=Qt(!1),vr=Qt(),yr=Qt(!1),$r=e=>{hr.set(!0),tn.set(!1),e?yr.set(!((e,t)=>{const n=e.split("."),o=t.split(".");return n.slice(0,-1).join(".")===o.slice(0,-1).join(".")})("1.4.1",e)):yr.set(!0)};function br(t,n,o){let r,i,a,s,c=e,u=e;l(t,tn,(e=>o(2,r=e))),l(t,en,(e=>o(8,i=e))),l(t,vr,(e=>o(9,a=e))),l(t,hr,(e=>o(3,s=e))),t.$$.on_destroy.push((()=>c())),t.$$.on_destroy.push((()=>u()));let p="Installer";m(tn,r=!1,r);let{prompt:d=!1}=n;const f=(e=0)=>{let t;i&&a&&a.waiting?(navigator.serviceWorker.addEventListener("controllerchange",(()=>{t||(t=!0,e?setTimeout((()=>window.location.reload()),e):window.location.reload())})),o(1,p="En cours..."),a.waiting.postMessage({type:"SKIP_WAITING"})):window.location.reload()};return t.$$set=e=>{"prompt"in e&&o(0,d=e.prompt)},[d,p,r,s,f,function(e){Q(t,e)},()=>m(tn,r=!0,r),()=>f()]}class xr extends Fe{constructor(e){super(),Me(this,e,br,gr,s,{prompt:0})}}function wr(e){let t;return{c(){t=C("ol"),t.innerHTML='<li class="svelte-aqbc18">Dans la barre de menu, cliquez sur <svg class="svelte-aqbc18"><use xlink:href="#share"></use></svg></li> \n                    <li class="svelte-aqbc18">Faites d√©filer, choisir‚ÄØ: <em>Sur l&#39;√©cran d&#39;accueil</em> \n                        <svg viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="svelte-aqbc18"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg></li> \n                    <li class="svelte-aqbc18">Lancez l&#39;application depuis l&#39;√©cran d&#39;accueil</li>',A(t,"class","guide svelte-aqbc18")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function kr(e){let t;return{c(){t=C("p"),t.textContent="Merci d'ouvrir cette page dans Safari",A(t,"class","guide error svelte-aqbc18")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function Pr(t){let n,o,r,i,a,s,l,c,u,p,d,m,f,g;n=new Rt({});let h=function(e,t){return e[0]?wr:kr}(t)(t);return f=new xr({}),{c(){Le(n.$$.fragment),o=M(),r=C("div"),i=C("div"),a=C("div"),a.innerHTML='<img src="./images/ofp2map-icons/icon-128x128.png" alt="OFP2MAP" class="svelte-aqbc18"/>',s=M(),l=C("div"),c=C("h3"),c.textContent="Installez OFP2MAP",u=M(),p=C("p"),p.textContent="Si OFP2MAP est d√©j√† sur l'√©cran d'accueil, ne l'installez pas une deuxi√®me fois. Attention: l'installation ne peut se faire que depuis\n                le navigateur Safari, ce n'est pas possible depuis une WebView (√† l'int√©rieur d'une app).",d=M(),h.c(),m=M(),Le(f.$$.fragment),A(a,"class","icon-container svelte-aqbc18"),A(c,"class","title svelte-aqbc18"),A(p,"class","text svelte-aqbc18"),A(l,"class","prompt-content svelte-aqbc18"),A(i,"class","prompt svelte-aqbc18"),A(r,"class","prompt-container svelte-aqbc18")},m(e,t){je(n,e,t),w(e,o,t),w(e,r,t),x(r,i),x(i,a),x(i,s),x(i,l),x(l,c),x(l,u),x(l,p),x(l,d),h.m(l,null),w(e,m,t),je(f,e,t),g=!0},p:e,i(e){g||(be(n.$$.fragment,e),be(f.$$.fragment,e),g=!0)},o(e){xe(n.$$.fragment,e),xe(f.$$.fragment,e),g=!1},d(e){_e(n,e),e&&k(o),e&&k(r),h.d(),e&&k(m),_e(f,e)}}}function Cr(e){return[Se&&!Ae]}class Lr extends Fe{constructor(e){super(),Me(this,e,Cr,Pr,s,{})}}function jr(e){let t,n,o,r,i,a,s,l,c;t=new Qo({props:{$$slots:{default:[Mr]},$$scope:{ctx:e}}}),o=new xr({props:{prompt:!!e[1]}});let u=e[1]&&Fr(e);const p=[Rr,zr,Dr,Ir],d=[];function m(e,t){return!e[1]||"/gramet"!==e[2]&&"/export"!==e[2]?"/"===e[2]?1:"/help"===e[2]?2:e[1]?-1:3:0}return~(a=m(e))&&(s=d[a]=p[a](e)),{c(){Le(t.$$.fragment),n=M(),Le(o.$$.fragment),r=M(),u&&u.c(),i=M(),s&&s.c(),l=F()},m(e,s){je(t,e,s),w(e,n,s),je(o,e,s),w(e,r,s),u&&u.m(e,s),w(e,i,s),~a&&d[a].m(e,s),w(e,l,s),c=!0},p(e,n){const r={};8221&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const c={};2&n&&(c.prompt=!!e[1]),o.$set(c),e[1]?u?(u.p(e,n),2&n&&be(u,1)):(u=Fr(e),u.c(),be(u,1),u.m(i.parentNode,i)):u&&(ye(),xe(u,1,1,(()=>{u=null})),$e());let f=a;a=m(e),a===f?~a&&d[a].p(e,n):(s&&(ye(),xe(d[f],1,1,(()=>{d[f]=null})),$e()),~a?(s=d[a],s?s.p(e,n):(s=d[a]=p[a](e),s.c()),be(s,1),s.m(l.parentNode,l)):s=null)},i(e){c||(be(t.$$.fragment,e),be(o.$$.fragment,e),be(u),be(s),c=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),xe(u),xe(s),c=!1},d(e){_e(t,e),e&&k(n),_e(o,e),e&&k(r),u&&u.d(e),e&&k(i),~a&&d[a].d(e),e&&k(l)}}}function _r(t){let n,o;return n=new Lr({}),{c(){Le(n.$$.fragment)},m(e,t){je(n,e,t),o=!0},p:e,i(e){o||(be(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){_e(n,e)}}}function Mr(e){let t,n,o,r,i;return n=new Lo({props:{kmlOptions:e[0]}}),n.$on("change",e[7]),{c(){t=C("form"),Le(n.$$.fragment),A(t,"class","form-inline svelte-1jwztj3"),q(t,"invisible","/help"===e[2])},m(a,s){w(a,t,s),je(n,t,null),o=!0,r||(i=O(t,"submit",E(e[6])),r=!0)},p(e,o){const r={};1&o&&(r.kmlOptions=e[0]),n.$set(r),4&o&&q(t,"invisible","/help"===e[2])},i(e){o||(be(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){e&&k(t),_e(n),r=!1,i()}}}function Fr(e){let t,n,o,r={ctx:e,current:null,token:null,hasCatch:!0,pending:Sr,then:Er,catch:Or,value:11,error:12,blocks:[,,,]};return Pe(n=e[1],r),{c(){t=F(),r.block.c()},m(e,n){w(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t,o=!0},p(t,o){if(e=t,r.ctx=e,2&o&&n!==(n=e[1])&&Pe(n,r));else{const t=e.slice();t[11]=t[12]=r.resolved,r.block.p(t,o)}},i(e){o||(be(r.block),o=!0)},o(e){for(let e=0;e<3;e+=1){xe(r.blocks[e])}o=!1},d(e){e&&k(t),r.block.d(e),r.token=null,r=null}}}function Or(t){let n,o,r,i=t[12].message+"";return{c(){n=C("p"),o=j("üò±: "),r=j(i),q(n,"d-none","/map"!==t[2])},m(e,t){w(e,n,t),x(n,o),x(n,r)},p(e,t){2&t&&i!==(i=e[12].message+"")&&D(r,i),4&t&&q(n,"d-none","/map"!==e[2])},i:e,o:e,d(e){e&&k(n)}}}function Er(e){let t,n;return t=new nr({props:{hidden:"/map"!==e[2],$$slots:{default:[Ar]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.hidden="/map"!==e[2]),8199&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Ar(e){let t,n,o;function r(t){e[8](t)}let i={id:"map",ofp:e[11]};return void 0!==e[0]&&(i.kmlOptions=e[0]),t=new Zo({props:i}),te.push((()=>Ce(t,"kmlOptions",r))),t.$on("save",e[9]),{c(){Le(t.$$.fragment)},m(e,n){je(t,e,n),o=!0},p(e,o){const r={};2&o&&(r.ofp=e[11]),!n&&1&o&&(n=!0,r.kmlOptions=e[0],le((()=>n=!1))),t.$set(r)},i(e){o||(be(t.$$.fragment,e),o=!0)},o(e){xe(t.$$.fragment,e),o=!1},d(e){_e(t,e)}}}function Sr(e){let t,n;return t=new nr({props:{hidden:"/map"!==e[2],$$slots:{default:[Tr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.hidden="/map"!==e[2]),8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Tr(e){let t;return{c(){t=C("div"),t.textContent="traitement en cours...",R(t,"margin","auto")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function Ir(t){let n,o=t[5](t[2])+"";return{c(){n=j(o)},m(e,t){w(e,n,t)},p(e,t){4&t&&o!==(o=e[5](e[2])+"")&&D(n,o)},i:e,o:e,d(e){e&&k(n)}}}function Dr(e){let t,n;return t=new nr({props:{$$slots:{default:[Wr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function zr(e){let t,n;return t=new nr({props:{$$slots:{default:[Nr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Rr(e){let t,n,o,r={ctx:e,current:null,token:null,hasCatch:!0,pending:Kr,then:Gr,catch:qr,value:11,error:12,blocks:[,,,]};return Pe(n=e[1],r),{c(){t=F(),r.block.c()},m(e,n){w(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t,o=!0},p(t,o){if(e=t,r.ctx=e,2&o&&n!==(n=e[1])&&Pe(n,r));else{const t=e.slice();t[11]=t[12]=r.resolved,r.block.p(t,o)}},i(e){o||(be(r.block),o=!0)},o(e){for(let e=0;e<3;e+=1){xe(r.blocks[e])}o=!1},d(e){e&&k(t),r.block.d(e),r.token=null,r=null}}}function Wr(e){let t,n;return t=new dr({}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Nr(e){let t,n;return t=new Nt({}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function qr(t){let n,o,r,i=t[12].message+"";return{c(){n=C("p"),o=j("üò±: "),r=j(i)},m(e,t){w(e,n,t),x(n,o),x(n,r)},p(e,t){2&t&&i!==(i=e[12].message+"")&&D(r,i)},i:e,o:e,d(e){e&&k(n)}}}function Gr(e){let t,n,o,r;const i=[Hr,Ur],a=[];function s(e,t){return"/gramet"===e[2]?0:"/export"===e[2]?1:-1}return~(t=s(e))&&(n=a[t]=i[t](e)),{c(){n&&n.c(),o=F()},m(e,n){~t&&a[t].m(e,n),w(e,o,n),r=!0},p(e,r){let l=t;t=s(e),t===l?~t&&a[t].p(e,r):(n&&(ye(),xe(a[l],1,1,(()=>{a[l]=null})),$e()),~t?(n=a[t],n?n.p(e,r):(n=a[t]=i[t](e),n.c()),be(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(be(n),r=!0)},o(e){xe(n),r=!1},d(e){~t&&a[t].d(e),e&&k(o)}}}function Ur(e){let t,n;return t=new nr({props:{$$slots:{default:[Br]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};8199&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Hr(e){let t,n;return t=new nr({props:{$$slots:{default:[Zr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};8194&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Br(e){let t,n,o,r;return t=new Ot({props:{ofp:e[11]}}),t.$on("save",e[10]),o=new Qe({props:{ofp:e[11]}}),{c(){Le(t.$$.fragment),n=M(),Le(o.$$.fragment)},m(e,i){je(t,e,i),w(e,n,i),je(o,e,i),r=!0},p(e,n){const r={};2&n&&(r.ofp=e[11]),t.$set(r);const i={};2&n&&(i.ofp=e[11]),o.$set(i)},i(e){r||(be(t.$$.fragment,e),be(o.$$.fragment,e),r=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),r=!1},d(e){_e(t,e),e&&k(n),_e(o,e)}}}function Zr(e){let t,n;return t=new Dt({props:{ofp:e[11]}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.ofp=e[11]),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Kr(e){let t,n;return t=new nr({props:{$$slots:{default:[Xr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){je(t,e,o),n=!0},p(e,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){_e(t,e)}}}function Xr(e){let t;return{c(){t=C("div"),t.textContent="traitement en cours...",R(t,"margin","auto")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function Jr(e){let t,n,o,r,i,a;const s=[_r,jr],l=[];return o=navigator&&!1===navigator.standalone&&Ee?0:1,r=l[o]=s[o](e),{c(){t=C("main"),n=C("div"),r.c(),A(n,"class","content svelte-1jwztj3"),A(t,"class",i="container "+(e[2].substr(1)||"home")+" svelte-1jwztj3")},m(e,r){w(e,t,r),x(t,n),l[o].m(n,null),a=!0},p(e,[n]){r.p(e,n),(!a||4&n&&i!==(i="container "+(e[2].substr(1)||"home")+" svelte-1jwztj3"))&&A(t,"class",i)},i(e){a||(be(r),a=!0)},o(e){xe(r),a=!1},d(e){e&&k(t),l[o].d()}}}function Vr(e,t,n){let o,r,i,a;l(e,on,(e=>n(1,o=e))),l(e,un,(e=>n(2,r=e))),l(e,nn,(e=>n(3,i=e))),l(e,tn,(e=>n(4,a=e)));(e=>{const t={},n={};e.length>1&&(e.substr(1)||"").split("&").forEach((function(e){const n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}));for(let[e,o]of Object.entries(t))if(e in et){let t;e.endsWith("Pin")?(o*=1,isNaN(o)||(t=o)):e.endsWith("Color")&&o.match(st)?t=o.toUpperCase():e.endsWith("Display")&&(t=!!o),void 0!==t&&(n[e]=t)}else"downloadType"===e?(o*=1,isNaN(o)||vt.setItem(ht.downloadType,o)):"shortcut"===e&&(o=o.trim(),o&&vt.setItem(ht.shortcut,o));vt.setItem(ht.optionsKML,n)})(window.location.search);let s=(e=>{const t={};for(let[n,o]of Object.entries(e))n in et&&(n.endsWith("Pin")?(o*=1,isNaN(o)||(t[n]=o)):n.endsWith("Color")&&o.match(st)?t[n]=o.toUpperCase():n.endsWith("Display")&&(t[n]=!!o));return{...et,...t}})(vt.getItem(ht.optionsKML)||{});yt(s,r),V((()=>(document.addEventListener("visibilitychange",ln,!1),()=>document.removeEventListener("visibilitychange",ln))));return[s,o,r,i,a,e=>{window.location.hash="#/"},function(t){Q(e,t)},()=>m(nn,i=m(tn,a=!1,a),i),function(e){s=e,n(0,s)},()=>yt(s,r),()=>yt(s,r)]}class Yr extends Fe{constructor(e){super(),Me(this,e,Vr,Jr,s,{})}}try{self["workbox:window:6.1.1"]&&_()}catch(Qr){}function Qr(e,t){return new Promise((function(n){var o=new MessageChannel;o.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[o.port2])}))}function ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ti(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ei(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.1.1"]&&_()}catch(Qr){}var ni=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function oi(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var ri=function(e,t){this.type=e,Object.assign(this,t)};function ii(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ai(){}var si={type:"SKIP_WAITING"};function li(e,t){if(!t)return e&&e.then?e.then(ai):Promise.resolve()}var ci=function(e){var t,n;function o(t,n){var o,r;return void 0===n&&(n={}),(o=e.call(this)||this).nn={},o.tn=0,o.rn=new ni,o.en=new ni,o.on=new ni,o.un=0,o.an=new Set,o.cn=function(){var e=o.fn,t=e.installing;o.tn>0||!oi(t.scriptURL,o.sn)||performance.now()>o.un+6e4?(o.vn=t,e.removeEventListener("updatefound",o.cn)):(o.hn=t,o.an.add(t),o.rn.resolve(t)),++o.tn,t.addEventListener("statechange",o.ln)},o.ln=function(e){var t=o.fn,n=e.target,r=n.state,i=n===o.vn,a={sw:n,isExternal:i,originalEvent:e};!i&&o.mn&&(a.isUpdate=!0),o.dispatchEvent(new ri(r,a)),"installed"===r?o.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&o.dispatchEvent(new ri("waiting",a))}),200):"activating"===r&&(clearTimeout(o.wn),i||o.en.resolve(n))},o.dn=function(e){var t=o.hn;t===navigator.serviceWorker.controller&&(o.dispatchEvent(new ri("controlling",{sw:t,originalEvent:e,isUpdate:o.mn})),o.on.resolve(t))},o.gn=(r=function(e){var t=e.data,n=e.source;return ii(o.getSW(),(function(){o.an.has(n)&&o.dispatchEvent(new ri("message",{data:t,sw:n,originalEvent:e}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),o.sn=t,o.nn=n,navigator.serviceWorker.addEventListener("message",o.gn),o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,i=o.prototype;return i.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var o=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return li(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return o.mn=Boolean(navigator.serviceWorker.controller),o.yn=o.pn(),ii(o.bn(),(function(e){o.fn=e,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&oi(t.scriptURL,o.sn)&&(o.hn=t,Promise.resolve().then((function(){o.dispatchEvent(new ri("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn,{once:!0}),o.fn}))}))}catch(e){return Promise.reject(e)}},i.update=function(){try{return this.fn?li(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},i.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(e){try{return ii(this.getSW(),(function(t){return Qr(t,e)}))}catch(e){return Promise.reject(e)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Qr(this.fn.waiting,si)},i.pn=function(){var e=navigator.serviceWorker.controller;return e&&oi(e.scriptURL,this.sn)?e:void 0},i.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return ii(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(o.prototype,r),o}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=ti(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());let ui,pi=!1;try{ui=new Yr({target:document.body})}catch(e){pi=!0;try{var di=document.createElement("p");di.innerHTML="Erreur: "+e.message+"<br/><br/>OFP2MAP a besoin de navigateurs r√©cents: Safari 14¬†iOS/Mac, Firefox¬†86, Chrome¬†87 et Microsoft Edge¬†87 sont compatibles. <br /><br />Contactez moi sur l'email AF (erdelord@...) en me donnant le message d'erreur.",document.body.appendChild(di)}catch(ti){}}finally{if("serviceWorker"in navigator){const e=new ci("./sw.js");en.set(e),e.addEventListener("installed",(e=>{e.isUpdate})),e.addEventListener("activated",(t=>{t.isUpdate||e.messageSW({type:"CLIENTS_CLAIM"}),t.isExternal})),e.addEventListener("waiting",(t=>{pi?(e.addEventListener("controlling",(()=>{window.location.reload()})),e.messageSkipWaiting()):(t.isExternal,qe(400,Qr(t.sw,{type:"GET_VERSION"})).then((e=>$r(e))).catch((e=>{$r()})))})),e.register().then((e=>{pi&&e&&e.unregister(),vr.set(e)}),console.error)}}return ui}();
//# sourceMappingURL=bundle.js.map
