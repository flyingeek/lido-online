var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(o)}function i(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function c(e){let t;return a(e,(e=>t=e))(),t}function u(e,t,n){e.$$.on_destroy.push(a(t,n))}function d(e,t,n,o){if(e){const r=p(e,t,n,o);return e[0](r)}}function p(e,t,o,r){return e[1]&&r?n(o.ctx.slice(),e[1](r(t))):o.ctx}function m(e,t,n,o,r,s,i){const l=function(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}(t,o,r,s);if(l){const r=p(t,n,o,i);e.p(r,l)}}function f(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function h(e){return null==e?"":e}function v(e,t,n=t){return e.set(n),t}function $(t){return t&&i(t.destroy)?t.destroy:e}const y="undefined"!=typeof window;let b=y?()=>window.performance.now():()=>Date.now(),x=y?e=>requestAnimationFrame(e):e;const w=new Set;function k(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&x(k)}function C(e){let t;return 0===w.size&&x(k),{promise:new Promise((n=>{w.add(t={c:e,f:n})})),abort(){w.delete(t)}}}function P(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode.removeChild(e)}function T(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function M(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function S(e){return document.createTextNode(e)}function A(){return S(" ")}function F(){return S("")}function D(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function j(e){return function(t){return t.preventDefault(),e.call(this,t)}}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function z(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:I(e,o,t[o])}function R(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function W(e){return""===e?null:+e}function N(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function q(e,t){e.value=null==t?"":t}function H(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function U(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function G(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let B;function K(){if(void 0===B){B=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){B=!0}}return B}function Z(e,t,n){e.classList[n?"add":"remove"](t)}function V(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const J=new Set;let Q,X=0;function Y(e,t,n,o,r,s,i,l=0){const a=16.666/o;let c="{\n";for(let e=0;e<=1;e+=a){const o=t+(n-t)*s(e);c+=100*e+`%{${i(o,1-o)}}\n`}const u=c+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${l}`,p=e.ownerDocument;J.add(p);const m=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(M("style")).sheet),f=p.__svelte_rules||(p.__svelte_rules={});f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${r}ms 1 both`,X+=1,d}function ee(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),X-=r,X||x((()=>{X||(J.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),J.clear())})))}function te(e){Q=e}function ne(){if(!Q)throw new Error("Function called outside component initialization");return Q}function oe(e){ne().$$.on_mount.push(e)}function re(e){ne().$$.on_destroy.push(e)}function se(){const e=ne();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=V(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}function ie(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const le=[],ae=[],ce=[],ue=[],de=Promise.resolve();let pe=!1;function me(){pe||(pe=!0,de.then(ye))}function fe(){return me(),de}function ge(e){ce.push(e)}function he(e){ue.push(e)}let ve=!1;const $e=new Set;function ye(){if(!ve){ve=!0;do{for(let e=0;e<le.length;e+=1){const t=le[e];te(t),be(t.$$)}for(te(null),le.length=0;ae.length;)ae.pop()();for(let e=0;e<ce.length;e+=1){const t=ce[e];$e.has(t)||($e.add(t),t())}ce.length=0}while(le.length);for(;ue.length;)ue.pop()();pe=!1,ve=!1,$e.clear()}}function be(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ge)}}let xe;function we(){return xe||(xe=Promise.resolve(),xe.then((()=>{xe=null}))),xe}function ke(e,t,n){e.dispatchEvent(V(`${t?"intro":"outro"}${n}`))}const Ce=new Set;let Pe;function Le(){Pe={r:0,c:[],p:Pe}}function Oe(){Pe.r||s(Pe.c),Pe=Pe.p}function Te(e,t){e&&e.i&&(Ce.delete(e),e.i(t))}function Me(e,t,n,o){if(e&&e.o){if(Ce.has(e))return;Ce.add(e),Pe.c.push((()=>{Ce.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const Ee={duration:0};function Se(n,o,r){let s,l,a=o(n,r),c=!1,u=0;function d(){s&&ee(n,s)}function p(){const{delay:o=0,duration:r=300,easing:i=t,tick:p=e,css:m}=a||Ee;m&&(s=Y(n,0,1,r,o,i,m,u++)),p(0,1);const f=b()+o,g=f+r;l&&l.abort(),c=!0,ge((()=>ke(n,!0,"start"))),l=C((e=>{if(c){if(e>=g)return p(1,0),ke(n,!0,"end"),d(),c=!1;if(e>=f){const t=i((e-f)/r);p(t,1-t)}}return c}))}let m=!1;return{start(){m||(ee(n),i(a)?(a=a(),we().then(p)):p())},invalidate(){m=!1},end(){c&&(d(),c=!1)}}}function Ae(n,o,r,l){let a=o(n,r),c=l?0:1,u=null,d=null,p=null;function m(){p&&ee(n,p)}function f(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(o){const{delay:r=0,duration:i=300,easing:l=t,tick:g=e,css:h}=a||Ee,v={start:b()+r,b:o};o||(v.group=Pe,Pe.r+=1),u||d?d=v:(h&&(m(),p=Y(n,c,o,i,r,l,h)),o&&g(0,1),u=f(v,i),ge((()=>ke(n,o,"start"))),C((e=>{if(d&&e>d.start&&(u=f(d,i),d=null,ke(n,u.b,"start"),h&&(m(),p=Y(n,c,u.b,u.duration,0,l,a.css))),u)if(e>=u.end)g(c=u.b,1-c),ke(n,u.b,"end"),d||(u.b?m():--u.group.r||s(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*l(t/u.duration),g(c,1-c)}return!(!u&&!d)})))}return{run(e){i(a)?we().then((()=>{a=a(),g(e)})):g(e)},end(){m(),u=d=null}}}function Fe(e,t){const n=t.token={};function o(e,o,r,s){if(t.token!==n)return;t.resolved=s;let i=t.ctx;void 0!==r&&(i=i.slice(),i[r]=s);const l=e&&(t.current=e)(i);let a=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(Le(),Me(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Oe())})):t.block.d(1),l.c(),Te(l,1),l.m(t.mount(),t.anchor),a=!0),t.block=l,t.blocks&&(t.blocks[o]=l),a&&ye()}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){const n=ne();if(e.then((e=>{te(n),o(t.then,1,t.value,e),te(null)}),(e=>{if(te(n),o(t.catch,2,t.error,e),te(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var r}const _e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function De(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function je(e){e&&e.c()}function Ie(e,t,n,r){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=e.$$;l&&l.m(t,n),r||ge((()=>{const t=a.map(o).filter(i);c?c.push(...t):s(t),e.$$.on_mount=[]})),u.forEach(ge)}function ze(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Re(t,n,o,i,l,a,c=[-1]){const u=Q;te(t);const d=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:r(),dirty:c,skip_bound:!1};let p=!1;if(d.ctx=o?o(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&l(d.ctx[e],d.ctx[e]=r)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](r),p&&function(e,t){-1===e.$$.dirty[0]&&(le.push(e),me(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],d.update(),p=!0,s(d.before_update),d.fragment=!!i&&i(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(O)}else d.fragment&&d.fragment.c();n.intro&&Te(t.$$.fragment),Ie(t,n.target,n.anchor,n.customElement),ye()}te(u)}class We{$destroy(){ze(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Ne{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}const qe="iPad"===navigator.platform||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,He=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),Ue=/Safari\//i.test(navigator.userAgent)&&!/(Chrome\/|Chromium\/)/i.test(navigator.userAgent),Ge=matchMedia("(hover: hover)").matches;function Be(e,t,n){let o;return function(){const r=this,s=arguments,i=function(){o=null,n||e.apply(r,s)},l=n&&!o;clearTimeout(o),o=setTimeout(i,t),l&&e.apply(r,s)}}function Ke(e){const t=e.split("-").slice(0,-1).join("");switch(t){case"route":return"rmain";case"alternate":return"ralt";case"nat":return"rnat";default:return t}}function Ze(e){switch(e){case"rmain":return"route";case"ralt":return"alternate";case"rnat":return"nat";default:return e}}function Ve(e,t,n){return e<=t?t:e>=n?n:e}function Je(e,t,n){return!(e<t)&&!(e>n)}function Qe(e,t,n,o){return 8&n?[e[0]+(t[0]-e[0])*(o[3]-e[1])/(t[1]-e[1]),o[3]]:4&n?[e[0]+(t[0]-e[0])*(o[1]-e[1])/(t[1]-e[1]),o[1]]:2&n?[o[2],e[1]+(t[1]-e[1])*(o[2]-e[0])/(t[0]-e[0])]:1&n?[o[0],e[1]+(t[1]-e[1])*(o[0]-e[0])/(t[0]-e[0])]:null}function Xe(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function Ye(e,t){let n=new Promise(((t,n)=>{let o=setTimeout((()=>{clearTimeout(o),n("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,n])}const et=async()=>{const e={title:"OFP2MAP",url:window.location.pathname};try{await navigator.share(e)}catch(e){}return!1},tt=(e,t)=>{let n=0,o=e.length-1,r=-1;for(;n<=o;){let s=Math.trunc((n+o)/2);t(e[s])?(r=s,o=s-1):n=s+1}return-1!==r&&t(e[r])?r:-1};function nt(e){const t=e-1;return t*t*t+1}function ot(e,{delay:n=0,duration:o=400,easing:r=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:r,css:e=>"opacity: "+e*s}}function rt(e,{delay:t=0,duration:n=400,easing:o=nt,x:r=0,y:s=0,opacity:i=0}={}){const l=getComputedStyle(e),a=+l.opacity,c="none"===l.transform?"":l.transform,u=a*(1-i);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*r}px, ${(1-e)*s}px);\n\t\t\topacity: ${a-u*t}`}}function st(e,{delay:t=0,duration:n=400,easing:o=nt}={}){const r=getComputedStyle(e),s=+r.opacity,i=parseFloat(r.height),l=parseFloat(r.paddingTop),a=parseFloat(r.paddingBottom),c=parseFloat(r.marginTop),u=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),p=parseFloat(r.borderBottomWidth);return{delay:t,duration:n,easing:o,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*s};height: ${e*i}px;padding-top: ${e*l}px;padding-bottom: ${e*a}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*d}px;border-bottom-width: ${e*p}px;`}}const it=[];function lt(e,t){return{subscribe:at(e,t).subscribe}}function at(t,n=e){let o;const r=[];function s(e){if(l(t,e)&&(t=e,o)){const e=!it.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),it.push(n,t)}if(e){for(let e=0;e<it.length;e+=2)it[e][0](it[e+1]);it.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,l=e){const a=[i,l];return r.push(a),1===r.length&&(o=n(s)||e),i(t),()=>{const e=r.indexOf(a);-1!==e&&r.splice(e,1),0===r.length&&(o(),o=null)}}}}function ct(t,n,o){const r=!Array.isArray(t),l=r?[t]:t,c=n.length<2;return lt(o,(t=>{let o=!1;const u=[];let d=0,p=e;const m=()=>{if(d)return;p();const o=n(r?u[0]:u,t);c?t(o):p=i(o)?o:e},f=l.map(((e,t)=>a(e,(e=>{u[t]=e,d&=~(1<<t),o&&m()}),(()=>{d|=1<<t}))));return o=!0,m(),function(){s(f),p()}}))}const ut=["318","319","320","321","330","340","350","380","787","772","773","77F"],dt=["340","380"];const pt=at(),mt=at(!1),ft=at(!1),gt=at(!1),ht=at(!1),vt=at(!1),$t=function(e){const{subscribe:t,set:n,update:o}=at(e);return{subscribe:t,set:n,update:o,reset:()=>n("object"==typeof e?{...e}:Array.isArray(e)?[...e]:e)}}(!1),yt=at(-1),bt=at(),xt=at(),wt=at(),kt=ct([bt,wt],(([e,t])=>{if(e&&t){if(e.timeMatrix.length>0)return new Date(t.getTime()+6e4*e.timeMatrix[e.timeMatrix.length-1][1]);return new Date(t.getTime()+6e4*e.infos.flightTime)}})),Ct=at(),Pt=ct([bt,Ct],(([e,t])=>{let n;if(t?n=t:e&&(n=e.infos.aircraftType),n&&-1!==ut.indexOf(n))return n}));let Lt=new Date;const Ot=()=>{if("serviceWorker"in navigator){const e=18e5;new Date-Lt>e&&navigator.serviceWorker.getRegistration().then((e=>{e&&(e.waiting?(ft.set(!0),gt.set(!0)):e.update(),mt.set(!1),Lt=new Date)}),console.error)}},Tt=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&Ot()},Mt=lt(!0,(e=>{const t=()=>{document&&document.visibilityState?"visible"===document.visibilityState?e(!0):e(!1):e(!0)};return document.addEventListener("visibilitychange",t),t(),()=>{document.removeEventListener("visibilitychange",t)}})),Et=lt({},(e=>{const t=()=>{e(navigator.onLine)};return"undefined"!=typeof navigator&&"onLine"in navigator?(t(),window.addEventListener("offline",t),window.addEventListener("online",t)):e(void 0),()=>{"undefined"!=typeof navigator&&"onLine"in navigator&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}})),St=lt("/",(e=>{const t=()=>{const t=document.querySelector("meta[name=viewport]"),n=t?t.getAttribute("content"):"";let o=window.location.hash.substr(1)||"/";"/map"===o?(ht.set(!1),n&&t.setAttribute("content",n+",maximum-scale=1")):n&&t.setAttribute("content",n.replace(",maximum-scale=1","")),e(o),Ot()};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}})),At=ct([bt,yt,wt,$t,Mt],(([e,t,n,o,r],s)=>{let i;const l=o?1e4:6e4;if(e&&n){const o=e=>{e<100?s(e):(s(100),clearInterval(i),i=void 0,yt.set(-1))};if(t>=0){let e=t;i=setInterval((()=>{o(e),e++}),100)}else{const t=n,a=new Date(t.getTime()+6e4*e.infos.flightTime),c=()=>{let n=new Date;return n<=t?0:n>=a?100:(n-t)/(60*e.infos.flightTime)/10},u=c();u<100?(r&&(i=setInterval((()=>{const e=c();o(e)}),l)),s(u)):s(100)}}else s(0);return()=>{i&&clearInterval(i)}}),0),Ft=ct([bt,At],(([e,t])=>{if(!e)return{map:{latitude:0,longitude:0},gramet:t,fl:300,reltime:0};const n=e.timeMatrix,o=e.distanceMatrix,r=o[0][0],s=o[o.length-1][0],i=o[o.length-1][1],l=0!==n.length?n[0][2]:o[0][2],a=0!==n.length?n[n.length-1][2]:o[o.length-1][2],c=t*(0!==n.length?n[n.length-1][1]:e.infos.flightTime)/100;if(t<=0)return{map:r,gramet:0,fl:l,reltime:c};if(t>=100)return{map:s,gramet:100,fl:a,reltime:c};if(0!==n.length){const e=tt(n,(e=>e[1]>=c)),[t,s,a]=n[e];if(c-s==0)return{reltime:c,map:t,gramet:100*o[e][1]/i,fl:a};const u=n[e-1];if(u){const n=o[e][1]-o[e-1][1],r=(s-c)/(s-u[1]);return{reltime:c,map:t.atFraction(u[0],r,n),gramet:100*(o[e][1]-r*n)/i,fl:u[2]}}return{reltime:c,map:r,gramet:0,fl:l}}if(0!==o.length){const e=t*o[o.length-1][1]/100,n=tt(o,(t=>t[1]>=e)),[s,i,a]=o[n];if(e-i==0)return{map:s,gramet:t,fl:a,reltime:c};const u=o[n-1];if(u){const n=i-u[1];return{map:s.atFraction(u[0],(i-e)/n,n),gramet:t,fl:u[2],reltime:c}}return{map:r,gramet:0,fl:l,reltime:c}}return{map:s,gramet:100,fl:a,reltime:c}}),{map:{latitude:0,longitude:0},gramet:0,fl:300,reltime:0});function _t(e){let t;return{c(){t=M("textarea"),t.value=e[0],I(t,"class","svelte-1c0wrid")},m(n,o){L(n,t,o),e[5](t)},p(e,n){1&n&&(t.value=e[0])},d(n){n&&O(t),e[5](null)}}}function Dt(t){let n,o,r;return{c(){n=M("a"),n.textContent="copier la route",I(n,"role","button"),I(n,"class","btn btn-primary"),I(n,"href","lhs-mpilot://")},m(e,s){L(e,n,s),o||(r=D(n,"click",t[4]),o=!0)},p:e,d(e){e&&O(n),o=!1,r()}}}function jt(t){let n,o,r;return{c(){n=M("a"),n.innerHTML="ouvrir mPilot <sup>*</sup>",I(n,"role","button"),I(n,"class","btn btn-primary"),I(n,"href","lhs-mpilot://")},m(e,s){L(e,n,s),o||(r=D(n,"click",t[4]),o=!0)},p:e,d(e){e&&O(n),o=!1,r()}}}function It(n){let o,r,l;return{c(){o=M("span"),o.textContent="copié!",I(o,"class","svelte-1c0wrid")},m(e,t){L(e,o,t),l=!0},i(e){l||(r&&r.end(1),l=!0)},o(n){r=function(n,o,r){let l,a=o(n,r),c=!0;const u=Pe;function d(){const{delay:o=0,duration:r=300,easing:i=t,tick:d=e,css:p}=a||Ee;p&&(l=Y(n,1,0,r,o,i,p));const m=b()+o,f=m+r;ge((()=>ke(n,!1,"start"))),C((e=>{if(c){if(e>=f)return d(0,1),ke(n,!1,"end"),--u.r||s(u.c),!1;if(e>=m){const t=i((e-m)/r);d(1-t,t)}}return c}))}return u.r+=1,i(a)?we().then((()=>{a=a(),d()})):d(),{end(e){e&&a.tick&&a.tick(1,0),c&&(l&&ee(n,l),c=!1)}}}(o,ot,{}),l=!1},d(e){e&&O(o),e&&r&&r.end()}}}function zt(e){let t,n,o,r,s,i,l,a,c,u,d,p,m,f,g,h=null!=e[0]&&_t(e);let v=(qe?jt:Dt)(e),$=qe&&function(e){let t;return{c(){t=M("div"),t.innerHTML='<small class="text-muted"><sup>*</sup> Une fois dans l&#39;application mPilot,\n                il vous suffira de faire un coller (la route aura été copiée automatiquement).</small>',I(t,"class","card-text")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}(),y=e[2]&&It();return{c(){h&&h.c(),t=A(),n=M("div"),o=M("div"),r=M("h5"),r.textContent="Route Lido",s=A(),i=M("div"),l=M("div"),l.innerHTML='<p class="card-text">Cette route est optimisée par rapport à celle de PilotMission car elle utilise les airways. Utiliser cette route permet\n                    d&#39;avoir une application Lido plus réactive.</p>',a=A(),c=M("div"),v.c(),u=A(),$&&$.c(),d=A(),p=M("div"),m=S(e[3]),f=A(),y&&y.c(),I(r,"class","card-title"),I(l,"class","col-12 col-md-9"),I(c,"class","text-md-right col align-self-center col-12 col-md-3 py-3 py-md-0"),I(i,"class","row mb-3"),I(p,"class","text-monospace svelte-1c0wrid"),I(o,"class","card-body"),I(n,"class","card mb-3 svelte-1c0wrid")},m(e,b){h&&h.m(e,b),L(e,t,b),L(e,n,b),P(n,o),P(o,r),P(o,s),P(o,i),P(i,l),P(i,a),P(i,c),v.m(c,null),P(o,u),$&&$.m(o,null),P(o,d),P(o,p),P(p,m),P(p,f),y&&y.m(p,null),g=!0},p(e,[n]){null!=e[0]?h?h.p(e,n):(h=_t(e),h.c(),h.m(t.parentNode,t)):h&&(h.d(1),h=null),v.p(e,n),e[2]?y?4&n&&Te(y,1):(y=It(),y.c(),Te(y,1),y.m(p,null)):y&&(Le(),Me(y,1,1,(()=>{y=null})),Oe())},i(e){g||(Te(y),g=!0)},o(e){Me(y),g=!1},d(e){h&&h.d(e),e&&O(t),e&&O(n),v.d(),$&&$.d(),y&&y.d()}}}let Rt=!1;if(navigator.permissions)try{navigator.permissions.query({name:"clipboard-write"}).then((e=>{"granted"!=e.state&&"prompt"!=e.state||(Rt=!0)}))}catch(e){}function Wt(e,t,n){let o;u(e,bt,(e=>n(7,o=e)));let r,s=null;const i=o?o.lidoRoute(!1).join(" "):"";let l,a=!1;return re((()=>{l&&clearTimeout(l)})),[s,r,a,i,e=>{const t=async function(e){let t=!0;if(Rt)navigator.clipboard.writeText(e).then((()=>t=!0),(()=>t=!1));else{n(0,s=e),await fe(),r.focus(),r.select();try{t=document.execCommand("copy")}catch(e){t=!1}n(0,s=null)}return t}(i);qe||(n(2,a=t),l=setTimeout((function(){n(2,a=!1),l&&clearTimeout(l)}),3e3),e.preventDefault())},function(e){ae[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Nt extends We{constructor(e){super(),Re(this,e,Wt,zt,l,{})}}const qt={routeDisplay:!0,routePin:0,routeColor:"FFDA25A8",alternateDisplay:!0,alternatePin:0,alternateColor:"FFFF00FF",natDisplay:!0,natPin:8,natPinPosition:0,natColor:"80DA25A8",natIncompleteColor:"FF0000FF",greatCircleDisplay:!0,greatCircleColor:"5F1478FF",ogimetDisplay:!0,ogimetColor:"40FF0000",airportDisplay:!0,airportPin:0,firDisplay:!0,etopsDisplay:!0,etopsColor:"FF0324FC",iconTextChange:"1.0",lineWidthChange:"1.0",iconSizeChange:"1.0"};function Ht(e,t){e.addFolders({name:"greatcircle",enabled:t.greatCircleDisplay,color:t.greatCircleColor},{name:"ralt",enabled:t.alternateDisplay,color:t.alternateColor,pinId:t.alternatePin},{name:"rmain",color:t.routeColor,pinId:t.routePin},{name:"rnat",enabled:t.natDisplay,color:t.natColor,pinId:t.natPin},{name:"rnat_incomplete",enabled:t.natDisplay,color:t.natIncompleteColor,pinId:t.natPin})}const Ut=()=>(window.kmlGen||(window.kmlGen=new editolido.KMLGenerator,Ht(window.kmlGen,qt)),window.kmlGen);function Gt(e,t){if(e.startsWith("etops-")||e.startsWith("airport-")||e.startsWith("fir-")||e.endsWith("-change")||"nat-incomplete-color"===e||"nat-pin-position"===e||e.startsWith("ogimet-"))return;const n=Ut(),o=Ke(e);e.endsWith("-display")?n.changeFolderState(o,t):e.endsWith("-pin")?n.changeFolderPin(o,t):e.endsWith("-color")&&n.changeFolderColor(o,t.toUpperCase())}function Bt(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function Kt(e){let t,n,o,r=e[14].label+"";return{c(){t=M("option"),n=S(r),t.__value=e[16],t.value=t.__value,t.selected=o=e[16]===e[1]},m(e,o){L(e,t,o),P(t,n)},p(e,n){2&n&&o!==(o=e[16]===e[1])&&(t.selected=o)},d(e){e&&O(t)}}}function Zt(t){let n,o,r,l,a,c,u,d,p,m,f,g,h,v,y,b,x,w,k=tn,C=[];for(let e=0;e<k.length;e+=1)C[e]=Kt(Bt(t,k,e));return{c(){n=M("kmlcolor"),o=M("pin"),r=E("svg"),l=E("use"),a=A(),c=M("select");for(let e=0;e<C.length;e+=1)C[e].c();u=A(),d=M("picker"),p=M("label"),m=M("input"),h=A(),v=M("input"),R(l,"xlink:href","#marker-symbol"),H(l,"stroke",0===t[1]?"#fff":tn[t[1]].color),H(l,"fill",tn[t[1]].color),I(o,"class","form-control svelte-1b9oa5t"),I(c,"name",t[4]),I(c,"class","custom-select"),void 0===t[1]&&ge((()=>t[8].call(c))),I(m,"type","color"),I(p,"style",f=en(t[2])),I(v,"type","range"),I(v,"min","30"),I(v,"max","255"),I(d,"class","form-control"),I(d,"style",y=Yt(t[2][0])),I(n,"class","input-group")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,l),P(n,a),P(n,c);for(let e=0;e<C.length;e+=1)C[e].m(c,null);U(c,t[1]),P(n,u),P(n,d),P(d,p),P(p,m),q(m,t[2][0]),P(d,h),P(d,v),q(v,t[2][1]),x||(w=[D(c,"change",t[8]),D(c,"change",t[9]),D(m,"input",t[10]),$(g=t[5].call(null,p,t[2])),D(v,"change",t[11]),D(v,"input",t[11]),$(b=t[6].call(null,n,t[0]))],x=!0)},p(e,[t]){if(2&t&&H(l,"stroke",0===e[1]?"#fff":tn[e[1]].color),2&t&&H(l,"fill",tn[e[1]].color),2&t){let n;for(k=tn,n=0;n<k.length;n+=1){const o=Bt(e,k,n);C[n]?C[n].p(o,t):(C[n]=Kt(o),C[n].c(),C[n].m(c,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=k.length}2&t&&U(c,e[1]),4&t&&q(m,e[2][0]),4&t&&f!==(f=en(e[2]))&&I(p,"style",f),g&&i(g.update)&&4&t&&g.update.call(null,e[2]),4&t&&q(v,e[2][1]),4&t&&y!==(y=Yt(e[2][0]))&&I(d,"style",y),b&&i(b.update)&&1&t&&b.update.call(null,e[0])},i:e,o:e,d(e){e&&O(n),T(C,e),x=!1,s(w)}}}const Vt=/^[A-F0-9]{8}$/i,Jt=e=>{let[t,n]=Xt(e);return[t,n/255]},Qt=["#FF0000",255],Xt=e=>{try{const t=parseInt(e.slice(0,2),16);return["#"+e.slice(6,8)+e.slice(4,6)+e.slice(2,4),t]}catch(e){return Qt}},Yt=e=>{const[t,n,o]=[e.slice(1,3),e.slice(3,5),e.slice(5,7)].map((e=>parseInt(e,16)));return`--range-red: ${t}; --range-green: ${n}; --range-blue: ${o};`},en=e=>`background-color: ${e[0]}; opacity: ${e[1]/255}`,tn=[{label:"Aucun repère",color:"#FFFFFF"},{label:"Bleu",color:"#6699FF"},{label:"Jaune",color:"#FFFF00"},{label:"Marron* (Rouge pour Avenza/Earth)",color:"#CC9966"},{label:"Orange",color:"#FF9922"},{label:"Rose* (Rouge pour Avenza)",color:"#DD5599"},{label:"Rouge",color:"#FF0000"},{label:"Vert",color:"#22DD44"},{label:"Violet",color:"#BB11EE"}];function nn(e,t,n){const o=se();let{kmlColor:r="FF0000FF"}=t,{selected:s=0}=t,{name:i}=t;const l=i+"-color",a=i+"-pin";let c=Qt;const u=Be(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"selected"in e&&n(1,s=e.selected),"name"in e&&n(7,i=e.name)},[r,s,c,o,a,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),u("change",{name:l,value:r})}}},function(e){return n(2,c=Xt(r)),{update(e){n(2,c=Xt(e)),u("change",{name:l,value:e.toUpperCase()})}}},i,function(){s=G(this),n(1,s)},e=>{e.target.blur(),o("change",{name:a,value:s})},function(){c[0]=this.value,n(2,c)},function(){c[1]=W(this.value),n(2,c)}]}class on extends We{constructor(e){super(),Re(this,e,nn,Zt,l,{kmlColor:0,selected:1,name:7})}}const rn=Object.freeze({optionsKML:"optionsKML",shortcut:"shortcut",downloadType:"downloadType",exportKML:"exportKML"}),sn=new class{constructor(){}getItem(e){const t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(t){this.removeItem(e)}return null}setItem(e,t){const n=JSON.stringify(t);"{}"!==n&&localStorage.setItem(e,n)}removeItem(e){localStorage.removeItem(e)}},ln=(e,t,n="Mon OFP2MAP")=>{const o={},r=["exportKML"];for(const[t,n]of Object.entries(rn)){if(r.includes(n))continue;let s=sn.getItem(n);if(t===rn.optionsKML&&e){const t={};for(const n of Object.keys(e).filter((t=>e[t]!==qt[t])))t[n]=e[n];s=t}if(null!==s)if(t===rn.optionsKML)for(const[e,t]of Object.entries(s))o[e]=t;else o[t]=s}const s=Object.entries(o).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),i=window.location.origin+window.location.pathname+(s?"?"+s:"")+"#"+t;window.history.replaceState(o,n,i)};function an(t){let n,o,r,i,l,a,c,u,d,p;return{c(){n=M("div"),o=M("div"),o.innerHTML='<span class="input-group-text svelte-1xnphi2"></span>',r=A(),i=M("input"),l=A(),a=M("div"),c=M("a"),u=S("Lancer"),I(o,"class","input-group-prepend"),I(i,"class","form-control svelte-1xnphi2"),I(i,"placeholder","Nom du raccourci"),I(i,"type","text"),I(c,"class","btn btn-outline-secondary svelte-1xnphi2"),I(c,"href",t[1]),Z(c,"disabled",!(t[0].trim()&&qe)),I(a,"class","input-group-append"),I(n,"class","input-group")},m(e,s){L(e,n,s),P(n,o),P(n,r),P(n,i),q(i,t[0]),P(n,l),P(n,a),P(a,c),P(c,u),d||(p=[D(i,"input",t[4]),D(i,"change",t[3]),D(c,"click",t[2])],d=!0)},p(e,[t]){1&t&&i.value!==e[0]&&q(i,e[0]),2&t&&I(c,"href",e[1]),1&t&&Z(c,"disabled",!(e[0].trim()&&qe))},i:e,o:e,d(e){e&&O(n),d=!1,s(p)}}}const cn="OFP2MAP";function un(e,t,n){let o;u(e,bt,(e=>n(5,o=e)));const r=se(),s=rn.shortcut;let i,l=sn.getItem(s)||cn;const a=o?o.lidoRoute(!1).join(" "):"";return[l,i,function(e){const t=l.trim();if(t&&qe){const e=Ut(),r={lidoRoute:a,kml:e.render(),kmlAvenza:e.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS}),kmlGoogleEarth:e.render({styleTemplate:editolido.googleEarthStyleTemplate}),grametProxyURL:o.ogimetData.proxyImg};n(1,i="shortcuts://run-shortcut?name="+encodeURIComponent(t)+"&input=text&text="+encodeURIComponent(JSON.stringify(r)))}else e.preventDefault()},function(){const e=l.trim();e===cn?sn.removeItem(s):sn.setItem(s,e),r("save",[s,e])},function(){l=this.value,n(0,l)}]}class dn extends We{constructor(e){super(),Re(this,e,un,an,l,{})}}function pn(e){const t=()=>{document&&document.visibilityState&&"visible"!==document.visibilityState&&e&&e.blur&&e.blur()};return document.addEventListener("visibilitychange",t,!1),{destroy(){document.removeEventListener("visibilitychange",t)}}}function mn(t){let n,o,r,i,l,a,c,u,d,p,m,f,g,h,v,y,b,x,w,k=fn[0]+"",C=fn[1]+"",T=fn[2]+"";return{c(){n=M("div"),o=M("select"),r=M("option"),i=S(k),a=M("option"),c=S(C),d=M("option"),p=S(T),g=A(),h=M("div"),v=M("a"),y=S(t[0]),r.selected=l=0===t[1],r.__value=0,r.value=r.__value,a.selected=u=1===t[1],a.__value=1,a.value=a.__value,d.selected=m=2===t[1],d.__value=2,d.value=d.__value,I(o,"class",f="custom-select choice"+t[1]+" svelte-7fc2wm"),I(o,"aria-label","Example select with button addon"),void 0===t[1]&&ge((()=>t[7].call(o))),I(v,"class",b="btn btn-success choice"+t[1]+" svelte-7fc2wm"),I(v,"download",t[3]),I(v,"href",t[2]),I(h,"class","input-group-append"),I(n,"class","input-group svelte-7fc2wm")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,i),P(o,a),P(a,c),P(o,d),P(d,p),U(o,t[1]),P(n,g),P(n,h),P(h,v),P(v,y),t[8](n),x||(w=[D(o,"change",t[7]),D(o,"change",t[6]),$(pn.call(null,o)),D(v,"click",t[5])],x=!0)},p(e,[t]){2&t&&l!==(l=0===e[1])&&(r.selected=l),2&t&&u!==(u=1===e[1])&&(a.selected=u),2&t&&m!==(m=2===e[1])&&(d.selected=m),2&t&&f!==(f="custom-select choice"+e[1]+" svelte-7fc2wm")&&I(o,"class",f),2&t&&U(o,e[1]),1&t&&N(y,e[0]),2&t&&b!==(b="btn btn-success choice"+e[1]+" svelte-7fc2wm")&&I(v,"class",b),8&t&&I(v,"download",e[3]),4&t&&I(v,"href",e[2])},i:e,o:e,d(e){e&&O(n),t[8](null),x=!1,s(w)}}}const fn=["KML Mapsme","KML Avenza","KML Google Earth"],gn=["green","purple","cyan"];function hn(e,t,n){const o=se();let{label:r}=t;const s=rn.downloadType;let i=sn.getItem(s)||1;"string"==typeof i&&(i=parseInt(i,10)),(i<0||i>=fn.length)&&(i=0);let l,a="",c="";const u=e=>{l.style.setProperty("--color",`var(--${gn[i]})`)},d=(e,t="application/vnd.google-earth.kml+xml")=>{const n=new Blob(e,{type:t});return URL.createObjectURL(n)};return oe((()=>(u(),()=>{a&&a.startsWith("blob:")&&URL.revokeObjectURL(a)}))),e.$$set=e=>{"label"in e&&n(0,r=e.label)},[r,i,a,c,l,function(e){const t=Ut(),o=["_mapsme.kml","_avenza.kml","_googleearth.kml"][i];let r=t.name;if(r?(r=r.trim(),n(3,c=r.replace(/[ \/]/g,"_").replace(/:/g,"")+o)):n(3,c="editolido"+o),a&&a.startsWith("blob:")&&URL.revokeObjectURL(a),0===i)n(2,a=d([t.render()]));else if(1===i)n(2,a=d([t.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS})]));else{if(2!==i)return e.preventDefault(),!1;n(2,a=d([t.render({styleTemplate:editolido.googleEarthStyleTemplate})]))}},function(e){e.target.blur(),1===i?sn.removeItem(s):sn.setItem(s,i),o("save",[s,i]),u()},function(){i=G(this),n(1,i)},function(e){ae[e?"unshift":"push"]((()=>{l=e,n(4,l)}))}]}class vn extends We{constructor(e){super(),Re(this,e,hn,mn,l,{label:0})}}function $n(t){let n,o,r,l,a,c,u,d,p,m,f,g,h,v,y,b,x;return{c(){n=M("kmlcolor"),o=M("div"),r=M("label"),l=M("input"),a=S(t[2]),c=A(),u=M("picker"),d=M("label"),p=M("input"),g=A(),h=M("input"),I(l,"name",t[4]),l.checked=t[1],I(l,"type","checkbox"),I(r,"for",t[4]),I(r,"class","input-group-text"),I(o,"class","input-group-prepend"),I(p,"type","color"),I(d,"style",m=en(t[3])),I(h,"type","range"),I(h,"min","30"),I(h,"max","255"),I(u,"class","form-control"),I(u,"style",v=Yt(t[3][0])),I(n,"class","input-group checkbox-combo")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,l),P(r,a),P(n,c),P(n,u),P(u,d),P(d,p),q(p,t[3][0]),P(u,g),P(u,h),q(h,t[3][1]),b||(x=[D(l,"change",t[8]),D(p,"input",t[9]),$(f=t[5].call(null,d,t[3])),D(h,"change",t[10]),D(h,"input",t[10]),$(y=t[6].call(null,n,t[0]))],b=!0)},p(e,[t]){2&t&&(l.checked=e[1]),4&t&&N(a,e[2]),8&t&&q(p,e[3][0]),8&t&&m!==(m=en(e[3]))&&I(d,"style",m),f&&i(f.update)&&8&t&&f.update.call(null,e[3]),8&t&&q(h,e[3][1]),8&t&&v!==(v=Yt(e[3][0]))&&I(u,"style",v),y&&i(y.update)&&1&t&&y.update.call(null,e[0])},i:e,o:e,d(e){e&&O(n),b=!1,s(x)}}}function yn(e,t,n){const o=se();let{kmlColor:r="FF0000FF"}=t,{checked:s}=t,{name:i}=t,{label:l="Couleur"}=t;const a=i+"-color",c=i+"-display";let u=Qt;const d=Be(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"checked"in e&&n(1,s=e.checked),"name"in e&&n(7,i=e.name),"label"in e&&n(2,l=e.label)},[r,s,l,u,c,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),d("change",{name:a,value:r})}}},function(e){return n(3,u=Xt(r)),{update(e){n(3,u=Xt(e)),d("change",{name:a,value:e.toUpperCase()})}}},i,function(t){ie(e,t)},function(){u[0]=this.value,n(3,u)},function(){u[1]=W(this.value),n(3,u)}]}class bn extends We{constructor(e){super(),Re(this,e,yn,$n,l,{kmlColor:0,checked:1,name:7,label:2})}}function xn(e,t,n){const o=e.slice();return o[9]=t[n],o[11]=n,o}function wn(e){let t,n,o,r=e[9].label+"";return{c(){t=M("option"),n=S(r),t.__value=e[11],t.value=t.__value,t.selected=o=e[11]===e[0]},m(e,o){L(e,t,o),P(t,n)},p(e,n){1&n&&o!==(o=e[11]===e[0])&&(t.selected=o)},d(e){e&&O(t)}}}function kn(t){let n,o,r,i,l,a,c,u,d,p=Cn,m=[];for(let e=0;e<p.length;e+=1)m[e]=wn(xn(t,p,e));return{c(){n=M("div"),o=M("div"),r=M("label"),i=M("input"),l=S("Airports"),a=A(),c=M("select");for(let e=0;e<m.length;e+=1)m[e].c();I(i,"name",t[3]),i.checked=t[1],I(i,"type","checkbox"),I(r,"for",t[3]),I(r,"class","input-group-text"),I(o,"class","input-group-prepend"),I(c,"name",t[4]),I(c,"class","custom-select svelte-aqi3t3"),void 0===t[0]&&ge((()=>t[7].call(c))),I(n,"class","input-group checkbox-combo")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,i),P(r,l),P(n,a),P(n,c);for(let e=0;e<m.length;e+=1)m[e].m(c,null);U(c,t[0]),u||(d=[D(i,"change",t[6]),D(c,"change",t[7]),D(c,"change",t[8])],u=!0)},p(e,[t]){if(2&t&&(i.checked=e[1]),1&t){let n;for(p=Cn,n=0;n<p.length;n+=1){const o=xn(e,p,n);m[n]?m[n].p(o,t):(m[n]=wn(o),m[n].c(),m[n].m(c,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=p.length}1&t&&U(c,e[0])},i:e,o:e,d(e){e&&O(n),T(m,e),u=!1,s(d)}}}const Cn=[{label:"statuts"},{label:"vert/rouge"}];function Pn(e,t,n){const o=se();let{selected:r=0}=t,{name:s="airport"}=t,{checked:i}=t;const l=s+"-display",a=s+"-pin";return e.$$set=e=>{"selected"in e&&n(0,r=e.selected),"name"in e&&n(5,s=e.name),"checked"in e&&n(1,i=e.checked)},[r,i,o,l,a,s,function(t){ie(e,t)},function(){r=G(this),n(0,r)},e=>{e.target.blur(),o("change",{name:a,value:r})}]}class Ln extends We{constructor(e){super(),Re(this,e,Pn,kn,l,{selected:0,name:5,checked:1})}}function On(t){let n,o,r,i,l,a,c,u,d,p,m,f,g;return{c(){n=M("div"),o=M("div"),r=M("label"),i=S(t[2]),l=A(),a=M("button"),a.textContent="-",c=A(),u=M("div"),d=S(t[0]),p=A(),m=M("button"),m.textContent="+",I(r,"for",t[1]),I(r,"class","input-group-text svelte-si7r19"),I(o,"class","input-group-prepend"),I(a,"class","form-control svelte-si7r19"),I(a,"type","button"),I(u,"class"," form-control svelte-si7r19"),I(m,"class","form-control svelte-si7r19"),I(m,"type","button"),I(n,"class","input-group input-group-sm svelte-si7r19")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(r,i),P(n,l),P(n,a),P(n,c),P(n,u),P(u,d),P(n,p),P(n,m),f||(g=[D(a,"click",t[4]),D(m,"click",t[3])],f=!0)},p(e,[t]){4&t&&N(i,e[2]),2&t&&I(r,"for",e[1]),1&t&&N(d,e[0])},i:e,o:e,d(e){e&&O(n),f=!1,s(g)}}}function Tn(e,t,n){const o=se();let{name:r}=t,{label:s}=t,{value:i}=t,{min:l=.9}=t,{max:a=1.4}=t,{step:c=.1}=t;return e.$$set=e=>{"name"in e&&n(1,r=e.name),"label"in e&&n(2,s=e.label),"value"in e&&n(0,i=e.value),"min"in e&&n(5,l=e.min),"max"in e&&n(6,a=e.max),"step"in e&&n(7,c=e.step)},[i,r,s,()=>{const e=i;n(0,i=Math.min(Math.max(parseFloat(i)+c,l),a).toFixed(1)),i!==e&&o("change",{name:r,value:i})},()=>{const e=i;n(0,i=Math.min(Math.max(parseFloat(i)-c,l),a).toFixed(1)),i!==e&&o("change",{name:r,value:i})},l,a,c]}class Mn extends We{constructor(e){super(),Re(this,e,Tn,On,l,{name:1,label:2,value:0,min:5,max:6,step:7})}}function En(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function Sn(e){let t,n,o,r,i,l,a,c,u,d,p,m,f,g,h,v,y,b,x,w,k,C,T,E,F,_,z=e[4]&&An(e);u=new Mn({props:{name:"icon-text-change",label:"Label",value:e[0].iconTextChange}}),u.$on("change",e[5]);let R=e[4]&&Fn(e);m=new Mn({props:{name:"icon-size-change",label:"Icône",value:e[0].iconSizeChange,min:.6,max:2,step:.1}}),m.$on("change",e[5]);let W=!e[1]&&_n(e);return{c(){t=M("div"),n=M("a"),n.innerHTML='<svg class="svelte-szdee6"><use xlink:href="#close-symbol"></use></svg>',o=A(),r=M("form"),z&&z.c(),i=A(),l=M("fieldset"),a=M("legend"),a.textContent="Aspect général",c=A(),je(u.$$.fragment),d=A(),R&&R.c(),p=A(),je(m.$$.fragment),f=A(),g=M("div"),h=M("button"),v=S("Mémoriser"),b=A(),x=M("button"),w=S("Restaurer"),C=A(),W&&W.c(),I(n,"class","closeB svelte-szdee6"),I(n,"role","button"),I(n,"href","."),I(l,"class","form-group svelte-szdee6"),h.disabled=y=!e[2],I(h,"class","btn btn-primary btn-sm mb-2 svelte-szdee6"),I(h,"type","button"),x.disabled=k=!e[2],I(x,"class","btn btn-secondary btn-sm mb-2 svelte-szdee6"),I(x,"type","button"),I(g,"class","last svelte-szdee6"),I(r,"class","svelte-szdee6"),Z(r,"mt-5",!e[4]),I(t,"class","settings svelte-szdee6"),Z(t,"sidebar",e[3])},m(s,y){L(s,t,y),P(t,n),P(t,o),P(t,r),z&&z.m(r,null),P(r,i),P(r,l),P(l,a),P(l,c),Ie(u,l,null),P(l,d),R&&R.m(l,null),P(l,p),Ie(m,l,null),P(r,f),P(r,g),P(g,h),P(h,v),P(g,b),P(g,x),P(x,w),P(g,C),W&&W.m(g,null),E=!0,F||(_=[D(n,"click",j(e[11])),D(h,"click",e[8]),D(x,"click",e[7]),D(r,"submit",j(e[10])),$(En.call(null,t)),D(t,"click_outside",e[12])],F=!0)},p(e,n){e[4]?z?(z.p(e,n),16&n&&Te(z,1)):(z=An(e),z.c(),Te(z,1),z.m(r,i)):z&&(Le(),Me(z,1,1,(()=>{z=null})),Oe());const o={};1&n&&(o.value=e[0].iconTextChange),u.$set(o),e[4]?R?(R.p(e,n),16&n&&Te(R,1)):(R=Fn(e),R.c(),Te(R,1),R.m(l,p)):R&&(Le(),Me(R,1,1,(()=>{R=null})),Oe());const s={};1&n&&(s.value=e[0].iconSizeChange),m.$set(s),(!E||4&n&&y!==(y=!e[2]))&&(h.disabled=y),(!E||4&n&&k!==(k=!e[2]))&&(x.disabled=k),e[1]?W&&(W.d(1),W=null):W?W.p(e,n):(W=_n(e),W.c(),W.m(g,null)),16&n&&Z(r,"mt-5",!e[4]),8&n&&Z(t,"sidebar",e[3])},i(e){E||(Te(z),Te(u.$$.fragment,e),Te(R),Te(m.$$.fragment,e),ge((()=>{T||(T=Ae(t,rt,{duration:300,x:200,y:0},!0)),T.run(1)})),E=!0)},o(e){Me(z),Me(u.$$.fragment,e),Me(R),Me(m.$$.fragment,e),T||(T=Ae(t,rt,{duration:300,x:200,y:0},!1)),T.run(0),E=!1},d(e){e&&O(t),z&&z.d(),ze(u),R&&R.d(),ze(m),W&&W.d(),e&&T&&T.end(),F=!1,s(_)}}}function An(e){let t,n,o,r,i,l,a,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,T,E,F,_,j,z,R,W,N,q,H,U,G,B,K,Z,V,J,Q,X,Y,ee,te;return a=new on({props:{name:"route",kmlColor:e[0].routeColor,selected:e[0].routePin}}),a.$on("change",e[5]),h=new on({props:{name:"alternate",kmlColor:e[0].alternateColor,selected:e[0].alternatePin}}),h.$on("change",e[5]),C=new on({props:{name:"nat",kmlColor:e[0].natColor,selected:e[0].natPin}}),C.$on("change",e[5]),j=new bn({props:{name:"great-circle",label:"Orthodromie",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay}}),j.$on("change",e[5]),W=new bn({props:{name:"ogimet",label:"Route GRAMET",kmlColor:e[0].ogimetColor,checked:e[0].ogimetDisplay}}),W.$on("change",e[5]),H=new bn({props:{name:"etops",label:"ETOPS",kmlColor:e[0].etopsColor,checked:e[0].etopsDisplay}}),H.$on("change",e[5]),B=new Ln({props:{name:"airport",selected:e[0].airportPin,checked:e[0].airportDisplay}}),B.$on("change",e[5]),{c(){t=M("fieldset"),n=M("legend"),o=M("input"),i=S("Route"),l=A(),je(a.$$.fragment),c=A(),u=M("fieldset"),d=M("legend"),p=M("input"),f=S("Dégagement"),g=A(),je(h.$$.fragment),v=A(),$=M("fieldset"),y=M("legend"),b=M("input"),w=S("Tracks"),k=A(),je(C.$$.fragment),T=A(),E=M("small"),E.textContent="Positionné à l'entrée des tracks, un track incomplet restera rouge.",F=A(),_=M("fieldset"),je(j.$$.fragment),z=A(),R=M("fieldset"),je(W.$$.fragment),N=A(),q=M("fieldset"),je(H.$$.fragment),U=A(),G=M("fieldset"),je(B.$$.fragment),K=A(),Z=M("fieldset"),V=M("legend"),J=M("input"),X=S("FIR REG"),I(o,"name","route-display"),o.checked=r=e[0].routeDisplay,I(o,"type","checkbox"),I(t,"class","form-group svelte-szdee6"),I(p,"name","alternate-display"),p.checked=m=e[0].alternateDisplay,I(p,"type","checkbox"),I(u,"class","form-group svelte-szdee6"),I(b,"name","nat-display"),b.checked=x=e[0].natDisplay,I(b,"type","checkbox"),I(E,"class","form-text text-muted svelte-szdee6"),I($,"class","form-group svelte-szdee6"),I(_,"class","form-group svelte-szdee6"),I(R,"class","form-group svelte-szdee6"),I(q,"class","form-group svelte-szdee6"),I(G,"class","form-group svelte-szdee6"),I(J,"name","fir-display"),J.checked=Q=e[0].firDisplay,I(J,"type","checkbox"),I(Z,"class","form-group svelte-szdee6")},m(r,s){L(r,t,s),P(t,n),P(n,o),P(n,i),P(t,l),Ie(a,t,null),L(r,c,s),L(r,u,s),P(u,d),P(d,p),P(d,f),P(u,g),Ie(h,u,null),L(r,v,s),L(r,$,s),P($,y),P(y,b),P(y,w),P($,k),Ie(C,$,null),P($,T),P($,E),L(r,F,s),L(r,_,s),Ie(j,_,null),L(r,z,s),L(r,R,s),Ie(W,R,null),L(r,N,s),L(r,q,s),Ie(H,q,null),L(r,U,s),L(r,G,s),Ie(B,G,null),L(r,K,s),L(r,Z,s),P(Z,V),P(V,J),P(V,X),Y=!0,ee||(te=[D(o,"change",e[5]),D(p,"change",e[5]),D(b,"change",e[5]),D(J,"change",e[5])],ee=!0)},p(e,t){(!Y||1&t&&r!==(r=e[0].routeDisplay))&&(o.checked=r);const n={};1&t&&(n.kmlColor=e[0].routeColor),1&t&&(n.selected=e[0].routePin),a.$set(n),(!Y||1&t&&m!==(m=e[0].alternateDisplay))&&(p.checked=m);const s={};1&t&&(s.kmlColor=e[0].alternateColor),1&t&&(s.selected=e[0].alternatePin),h.$set(s),(!Y||1&t&&x!==(x=e[0].natDisplay))&&(b.checked=x);const i={};1&t&&(i.kmlColor=e[0].natColor),1&t&&(i.selected=e[0].natPin),C.$set(i);const l={};1&t&&(l.kmlColor=e[0].greatCircleColor),1&t&&(l.checked=e[0].greatCircleDisplay),j.$set(l);const c={};1&t&&(c.kmlColor=e[0].ogimetColor),1&t&&(c.checked=e[0].ogimetDisplay),W.$set(c);const u={};1&t&&(u.kmlColor=e[0].etopsColor),1&t&&(u.checked=e[0].etopsDisplay),H.$set(u);const d={};1&t&&(d.selected=e[0].airportPin),1&t&&(d.checked=e[0].airportDisplay),B.$set(d),(!Y||1&t&&Q!==(Q=e[0].firDisplay))&&(J.checked=Q)},i(e){Y||(Te(a.$$.fragment,e),Te(h.$$.fragment,e),Te(C.$$.fragment,e),Te(j.$$.fragment,e),Te(W.$$.fragment,e),Te(H.$$.fragment,e),Te(B.$$.fragment,e),Y=!0)},o(e){Me(a.$$.fragment,e),Me(h.$$.fragment,e),Me(C.$$.fragment,e),Me(j.$$.fragment,e),Me(W.$$.fragment,e),Me(H.$$.fragment,e),Me(B.$$.fragment,e),Y=!1},d(e){e&&O(t),ze(a),e&&O(c),e&&O(u),ze(h),e&&O(v),e&&O($),ze(C),e&&O(F),e&&O(_),ze(j),e&&O(z),e&&O(R),ze(W),e&&O(N),e&&O(q),ze(H),e&&O(U),e&&O(G),ze(B),e&&O(K),e&&O(Z),ee=!1,s(te)}}}function Fn(e){let t,n;return t=new Mn({props:{name:"line-width-change",label:"Ligne",value:e[0].lineWidthChange,min:.6,max:2,step:.1}}),t.$on("change",e[5]),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.value=e[0].lineWidthChange),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function _n(t){let n,o,r;return{c(){n=M("button"),n.textContent="Reset",I(n,"class","btn btn-outline-dark btn-sm reset svelte-szdee6"),I(n,"type","button")},m(e,s){L(e,n,s),o||(r=D(n,"click",t[6]),o=!0)},p:e,d(e){e&&O(n),o=!1,r()}}}function Dn(e){let t,n,o=e[3]&&Sn(e);return{c(){o&&o.c(),t=F()},m(e,r){o&&o.m(e,r),L(e,t,r),n=!0},p(e,[n]){e[3]?o?(o.p(e,n),8&n&&Te(o,1)):(o=Sn(e),o.c(),Te(o,1),o.m(t.parentNode,t)):o&&(Le(),Me(o,1,1,(()=>{o=null})),Oe())},i(e){n||(Te(o),n=!0)},o(e){Me(o),n=!1},d(e){o&&o.d(e),e&&O(t)}}}function jn(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}function In(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function zn(e,t){return JSON.stringify(e)===JSON.stringify(t)}function Rn(e,t,n){let o,r,s,i;u(e,ht,(e=>n(3,s=e))),u(e,bt,(e=>n(4,i=e)));const l=se(),a=rn.optionsKML;let{kmlOptions:c}=t,d={...qt,...sn.getItem(a)||{}};function p(e){let t=!1;for(const[o,r]of Object.entries(e))c[o]!==r&&(n(0,c[o]=r,c),l("change",{name:In(o),value:r}),t=!0);t&&n(0,c={...e})}return e.$$set=e=>{"kmlOptions"in e&&n(0,c=e.kmlOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=zn(qt,c)),513&e.$$.dirty&&n(2,r=!zn(d,c))},[c,o,r,s,i,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=jn(t);c[r]!==o&&(n(0,c[r]=o,c),l("change",{name:t,value:o}))},function(){p(qt)},function(){p(d)},function(){if(o)sn.removeItem(a);else{const e={};for(const t of Object.keys(c).filter((e=>c[e]!==qt[e])))e[t]=c[t];sn.setItem(a,e)}l("save"),n(9,d={...c})},d,function(t){ie(e,t)},()=>{v(ht,s=!s,s)},()=>v(ht,s=!1,s)]}class Wn extends We{constructor(e){super(),Re(this,e,Rn,Dn,l,{kmlOptions:0})}}function Nn(e){let t,n,o,r,i,l,a,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,T,E,F,_,j,z,R,W,N,q,H,U,G,B,K,Z,V,J;return i=new on({props:{name:"route",kmlColor:e[1].routeColor,selected:e[1].routePin}}),i.$on("change",e[4]),f=new on({props:{name:"alternate",kmlColor:e[1].alternateColor,selected:e[1].alternatePin}}),f.$on("change",e[4]),w=new on({props:{name:"nat",kmlColor:e[1].natColor,selected:e[1].natPin}}),w.$on("change",e[4]),F=new bn({props:{name:"great-circle",label:"Orthodromie",kmlColor:e[1].greatCircleColor,checked:e[1].greatCircleDisplay}}),F.$on("change",e[4]),{c(){t=M("div"),n=M("fieldset"),o=M("legend"),o.textContent="Route",r=A(),je(i.$$.fragment),l=A(),a=M("fieldset"),c=M("legend"),u=M("input"),p=S("Dégagement"),m=A(),je(f.$$.fragment),g=A(),h=M("fieldset"),v=M("legend"),$=M("input"),b=S("Tracks"),x=A(),je(w.$$.fragment),k=A(),C=M("small"),C.textContent="Positionné à l'entrée des tracks, un track incomplet restera rouge.",T=A(),E=M("fieldset"),je(F.$$.fragment),_=A(),j=M("div"),z=M("button"),R=S("Mémoriser"),N=A(),q=M("button"),H=S("Restaurer"),G=A(),B=M("button"),K=S("Comme carte"),I(n,"class","form-group svelte-1ikj0u7"),I(u,"name","alternate-display"),u.checked=d=e[1].alternateDisplay,I(u,"type","checkbox"),I(a,"class","form-group svelte-1ikj0u7"),I($,"name","nat-display"),$.checked=y=e[1].natDisplay,I($,"type","checkbox"),I(C,"class","form-text text-muted"),I(h,"class","form-group svelte-1ikj0u7"),I(E,"class","form-group svelte-1ikj0u7"),z.disabled=W=!e[3],I(z,"class","btn btn-primary btn-sm svelte-1ikj0u7"),I(z,"type","button"),q.disabled=U=!e[3]||0===Object.keys(e[0]).length,I(q,"class","btn btn-secondary btn-sm ml-3 svelte-1ikj0u7"),I(q,"type","button"),B.disabled=e[2],I(B,"class","btn btn-outline-secondary btn-sm ml-auto svelte-1ikj0u7"),I(B,"type","button"),I(j,"class","mt-3 mb-1 d-flex")},m(s,d){L(s,t,d),P(t,n),P(n,o),P(n,r),Ie(i,n,null),P(t,l),P(t,a),P(a,c),P(c,u),P(c,p),P(a,m),Ie(f,a,null),P(t,g),P(t,h),P(h,v),P(v,$),P(v,b),P(h,x),Ie(w,h,null),P(h,k),P(h,C),P(t,T),P(t,E),Ie(F,E,null),P(t,_),P(t,j),P(j,z),P(z,R),P(j,N),P(j,q),P(q,H),P(j,G),P(j,B),P(B,K),Z=!0,V||(J=[D(u,"change",e[4]),D($,"change",e[4]),D(z,"click",e[7]),D(q,"click",e[5]),D(B,"click",e[6])],V=!0)},p(e,[t]){const n={};2&t&&(n.kmlColor=e[1].routeColor),2&t&&(n.selected=e[1].routePin),i.$set(n),(!Z||2&t&&d!==(d=e[1].alternateDisplay))&&(u.checked=d);const o={};2&t&&(o.kmlColor=e[1].alternateColor),2&t&&(o.selected=e[1].alternatePin),f.$set(o),(!Z||2&t&&y!==(y=e[1].natDisplay))&&($.checked=y);const r={};2&t&&(r.kmlColor=e[1].natColor),2&t&&(r.selected=e[1].natPin),w.$set(r);const s={};2&t&&(s.kmlColor=e[1].greatCircleColor),2&t&&(s.checked=e[1].greatCircleDisplay),F.$set(s),(!Z||8&t&&W!==(W=!e[3]))&&(z.disabled=W),(!Z||9&t&&U!==(U=!e[3]||0===Object.keys(e[0]).length))&&(q.disabled=U),(!Z||4&t)&&(B.disabled=e[2])},i(e){Z||(Te(i.$$.fragment,e),Te(f.$$.fragment,e),Te(w.$$.fragment,e),Te(F.$$.fragment,e),Z=!0)},o(e){Me(i.$$.fragment,e),Me(f.$$.fragment,e),Me(w.$$.fragment,e),Me(F.$$.fragment,e),Z=!1},d(e){e&&O(t),ze(i),ze(f),ze(w),ze(F),V=!1,s(J)}}}function qn(e,t){return JSON.stringify(e)===JSON.stringify(t)}function Hn(e,t,n){let o,r;const s=["routeDisplay","routeColor","routePin","alternateDisplay","alternateColor","alternatePin","natDisplay","natColor","natPin","greatCircleDisplay","greatCircleColor"];let{mapOptions:i}=t;const l=Object.keys(i).filter((e=>s.includes(e))).reduce(((e,t)=>(e[t]="routeDisplay"===t||i[t],e)),{}),a=rn.exportKML;let c={...sn.getItem(a)||{}},u={...l,...c};function d(e){let t=!1;const o=u!==e;for(const[r,s]of Object.entries(e))o&&u[r]!==s&&(n(1,u[r]=s,u),Gt(In(r),s),t=!0);t&&n(1,u={...e})}d(u);return e.$$set=e=>{"mapOptions"in e&&n(8,i=e.mapOptions)},e.$$.update=()=>{2&e.$$.dirty&&n(2,o=qn(l,u)),3&e.$$.dirty&&n(3,r=!qn(c,u))},[c,u,o,r,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=jn(t);u[r]!==o&&(n(1,u[r]=o,u),Gt(t,o))},()=>d(c),()=>d(l),function(){sn.setItem(a,u),n(0,c={...u})},i]}class Un extends We{constructor(e){super(),Re(this,e,Hn,Nn,l,{mapOptions:8})}}function Gn(e){let t,n,o,r,i,l,a,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,T,E,S,F,_,z,R,W;return u=new Un({props:{mapOptions:e[0]}}),w=new vn({props:{label:"Télécharger"}}),w.$on("save",e[3]),_=new dn({}),_.$on("save",e[4]),{c(){t=M("div"),n=M("div"),o=M("div"),r=M("div"),i=M("form"),l=M("fieldset"),a=M("legend"),a.textContent="Réglages pour l'export",c=A(),je(u.$$.fragment),d=A(),p=M("div"),m=M("form"),f=M("fieldset"),g=M("legend"),g.textContent="Export",h=A(),v=M("fieldset"),$=M("legend"),$.textContent="KML",y=A(),b=M("p"),b.textContent="Choisissez un format (MapsMe, Avenza Maps ou Google Earth) et téléchargez le fichier KML.",x=A(),je(w.$$.fragment),k=A(),C=M("fieldset"),T=M("legend"),T.textContent="Raccourcis",E=A(),S=M("p"),S.innerHTML='Sur iOS on peut lancer un raccourci.\n                            <a href="https://www.icloud.com/shortcuts/886cc07d24d74d83bb0859643242c2df" target="_blank">Exemple de raccourci à installer\n                            </a>. Le raccourci reçoit le KML, la route Lido et le GRAMET.',F=A(),je(_.$$.fragment),I(a,"class","svelte-1l3lo3m"),I(l,"class","form svelte-1l3lo3m"),I(i,"class","settings svelte-1l3lo3m"),I(r,"class","col-12 col-md-6 d-flex pt-2 pt-md-0 svelte-1l3lo3m"),I(g,"class","svelte-1l3lo3m"),I(v,"class","form-group"),I(C,"class","form-group mt-4"),I(f,"class","form svelte-1l3lo3m"),I(m,"class","settings svelte-1l3lo3m"),I(p,"class","col-12 col-md-6 d-flex export svelte-1l3lo3m"),I(o,"class","row"),I(n,"class","card-body"),I(t,"class","card mb-3 svelte-1l3lo3m")},m(s,O){L(s,t,O),P(t,n),P(n,o),P(o,r),P(r,i),P(i,l),P(l,a),P(l,c),Ie(u,l,null),P(o,d),P(o,p),P(p,m),P(m,f),P(f,g),P(f,h),P(f,v),P(v,$),P(v,y),P(v,b),P(v,x),Ie(w,v,null),P(f,k),P(f,C),P(C,T),P(C,E),P(C,S),P(C,F),Ie(_,C,null),z=!0,R||(W=[D(i,"submit",j(e[2])),D(m,"submit",j(e[1]))],R=!0)},p(e,[t]){const n={};1&t&&(n.mapOptions=e[0]),u.$set(n)},i(e){z||(Te(u.$$.fragment,e),Te(w.$$.fragment,e),Te(_.$$.fragment,e),z=!0)},o(e){Me(u.$$.fragment,e),Me(w.$$.fragment,e),Me(_.$$.fragment,e),z=!1},d(e){e&&O(t),ze(u),ze(w),ze(_),R=!1,s(W)}}}function Bn(e,t,n){let{kmlOptions:o}=t;return e.$$set=e=>{"kmlOptions"in e&&n(0,o=e.kmlOptions)},[o,function(t){ie(e,t)},function(t){ie(e,t)},function(t){ie(e,t)},function(t){ie(e,t)}]}class Kn extends We{constructor(e){super(),Re(this,e,Bn,Gn,l,{kmlOptions:0})}}function Zn(t){let n;return{c(){n=S(" ")},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function Vn(t){let n,o,r;return{c(){n=M("button"),n.textContent="Partager l'App",I(n,"class","btn btn-link")},m(e,t){L(e,n,t),o||(r=D(n,"click",et),o=!0)},p:e,d(e){e&&O(n),o=!1,r()}}}function Jn(t){let n,o,r,s,i,l;let a=(!0===navigator.standalone&&navigator.share?Vn:Zn)(t);return{c(){n=M("h1"),o=M("strong"),o.textContent="OFP2MAP ",r=S("Cartographie pour l'OFP \n    "),s=M("img"),l=A(),a.c(),I(o,"class","d-none"),s.src!==(i="svg/Air_France_Logo.svg")&&I(s,"src","svg/Air_France_Logo.svg"),I(s,"alt","logo Air France"),I(s,"class","svelte-drdjg7"),I(n,"class","svelte-drdjg7")},m(e,t){L(e,n,t),P(n,o),P(n,r),P(n,s),P(n,l),a.m(n,null)},p(e,[t]){a.p(e,t)},i:e,o:e,d(e){e&&O(n),a.d()}}}class Qn extends We{constructor(e){super(),Re(this,e,null,Jn,l,{})}}function Xn(t){let n,o,r,s;return n=new Qn({}),{c(){je(n.$$.fragment),o=A(),r=M("div"),r.innerHTML='<div class="card-deck"><div class=" col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card avenza svelte-16k91og"><div class="card-header svelte-16k91og">COMPATIBLE OFFLINE</div> \n      <div class="card-body"><p class="card-text">L&#39;OFP ne quitte pas votre iPad ou votre ordinateur. Fonctionne avec les dernières technologies: PWA, Service Worker, fully responsive, cartes WebGL...</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card mapsme svelte-16k91og"><div class="card-header svelte-16k91og">Multiples Projections</div> \n      <div class="card-body"><p class="card-text">Des cartes LAMBERT conformes, un ATLAS politique, un ATLAS physique, une carte VFR et une MERCATOR avec 12 niveaux de zoom. Export en format KML vers Mapsme, Avenza ou Google Earth</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card ogimet svelte-16k91og"><div class="card-header svelte-16k91og">Compatible avec Ogimet</div> \n      <div class="card-body"><p class="card-text">Calcule une route pour ogimet et affiche le GRAMET qui est un météogramme combinant l&#39;espace et le temps</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-16k91og"><div class="card shortcuts svelte-16k91og"><div class="card-header svelte-16k91og">Compatible Raccourcis</div> \n      <div class="card-body"><p class="card-text">Avec l&#39;app Raccourcis, automatisez en récupérant le KML, le Gramet, ou une route Lido optimisée</p></div></div></div></div>',I(r,"class","row svelte-16k91og")},m(e,t){Ie(n,e,t),L(e,o,t),L(e,r,t),s=!0},p:e,i(e){s||(Te(n.$$.fragment,e),s=!0)},o(e){Me(n.$$.fragment,e),s=!1},d(e){ze(n,e),e&&O(o),e&&O(r)}}}class Yn extends We{constructor(e){super(),Re(this,e,null,Xn,l,{})}}function eo(e,t,n){const o={type:"Feature",geometry:{type:"Point",coordinates:[e[0],e[1]]},properties:{}};return t&&(o.properties.title=t),n&&(o.properties.description=n),o}function to(e){return{type:"geojson",data:{type:"FeatureCollection",features:e}}}function no(e,t){const n={type:"Feature",geometry:{type:"LineString",coordinates:e},properties:{}};return t&&(n.properties.title=t),n}const oo=["#FFFFFF","#6699FF","#FFFF00","#CC9966","#FF9922","#DD5599","#FF0000","#22DD44","#BB11EE","#F56"],ro=(e,t=10,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?10:o},so=(e,t=2)=>{const n=e*t;return isNaN(n)?1:n},io=(e,t=1,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?1:o};function lo(e,t,n,o,r){const s=Ze(t),i=r[`${s}Pin`],l=r[`${s}Display`],a=r[`${s}Color`],c=ro(r.iconTextChange);e.addSource(`${t}-marker-source`,to(((e,t,n)=>{let o=[];const r=e.length;for(let s=0;s<r;s++){const r=t?t([e[s].longitude,e[s].latitude]):[e[s].longitude,e[s].latitude];r&&o.push(n?n(r,e[s]):r)}return o})(n,o,((e,t)=>eo(e,t.name.replace(/00\.0/g,"")))))),e.addLayer(uo(t,i,a,l,c))}function ao(e,t,n,o,r,s,i,l){o?e.addSource(`${t}-line-source`,to(o(n).map((e=>no(e))))):e.addSource(`${t}-line-source`,{type:"geojson",data:no(n.map((e=>[e.longitude,e.latitude])))}),e.addLayer(po(t,r,s,i,l))}function co(e,t,n,o,r,s,i,l){if(o){const r=n.length,s=[];for(let e=0;e<r;e++){const t=o(n[e]),r=t.length;for(let e=0;e<r;e++)s.push(no(t[e]))}e.addSource(`${t}-line-source`,to(s))}else e.addSource(`${t}-line-source`,to(n.map((e=>no(e.map((e=>[e.longitude,e.latitude])))))));e.addLayer(po(t,r,s,i,l))}function uo(e,t,n,o,r){const[s,i]=Jt(n);return{id:`${e}-marker-layer`,type:"symbol",source:`${e}-marker-source`,layout:{"icon-image":0!==t?"sdf-marker-15":"sdf-triangle","icon-size":0!==t?1:.2,"icon-anchor":0!==t?"bottom":"center","icon-offset":[0,0],"icon-allow-overlap":!1,visibility:o?"visible":"none","text-field":["get","title"],"text-size":r,"text-offset":[0,.7],"text-anchor":"top"},paint:{"icon-color":0!==t?oo[t]:s,"icon-halo-width":1,"icon-halo-color":"#000","text-color":s,"text-opacity":Math.max(i,.7)}}}function po(e,t,n,o=2,r=!1){const[s,i]=Jt(t);return{id:`${e}-line-layer`,type:"line",source:`${e}-line-source`,layout:{"line-join":"round","line-cap":"round",visibility:n?"visible":"none"},paint:{"line-color":s,"line-opacity":i,"line-width":o,"line-dasharray":r?[10,10]:[1]}}}function mo(e,t,n=1){const{map:o,value:r,kmlOptions:s}=t,i=`${e}-marker-layer`,l=s[`${Ze(e)}Pin`];return o.getLayer(i)&&o.setLayoutProperty(i,"icon-size",l?io(r,n):.2),!0}function fo(e,t,n=10){const{map:o,value:r}=t,s=`${e}-marker-layer`;return o.getLayer(s)&&o.setLayoutProperty(s,"text-size",ro(r,n)),!0}function go(e,t,n=2){const{map:o,value:r}=t,s=`${e}-line-layer`;return o.getLayer(s)&&o.setPaintProperty(s,"line-width",so(r,n)),!0}function ho(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,s=`${e}-marker-layer`;if(n.getLayer(s)&&n.getLayer(r)){const e=o,t=oo[e],i=n.getPaintProperty(r,"line-color");n.setPaintProperty(s,"icon-color",0!==e?t:i),n.setPaintProperty(s,"text-color",i),n.setLayoutProperty(s,"icon-size",0!==e?1:.2),n.setLayoutProperty(s,"icon-image",0!==e?"sdf-marker-15":"sdf-triangle"),n.setLayoutProperty(s,"icon-anchor",0!==e?"bottom":"center")}return!0}function vo(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,s=`${e}-marker-layer`,[i,l]=Jt(o);return n.getLayer(r)&&(n.setPaintProperty(r,"line-color",i),n.setPaintProperty(r,"line-opacity",l)),n.getLayer(s)&&n.setPaintProperty(s,"text-color",i),!0}function $o(e,t,n){const{map:o}=n,r=`${e}-line-layer`,s=`${e}-marker-layer`;return o.getLayer(r)&&o.setLayoutProperty(r,"visibility",t?"visible":"none"),o.getLayer(s)&&o.setLayoutProperty(s,"visibility",t?"visible":"none"),!0}const yo="airport-layer",bo="airport-emer-layer",xo="airport-source",wo=(e,t,n,o,r)=>r?0===e?(e=>["case",["==",8,["get",`${e}`]],"#ea80d8",["==",7,["get",`${e}`]],"#ea80d8",["==",6,["get",`${e}`]],"#dddddd",["==",5,["get",`${e}`]],"#dddddd",["==",4,["get",`${e}`]],"#fbfe98",["==",3,["get",`${e}`]],"#fbfe98",["==",2,["get",`${e}`]],"#00b0f1",["==",1,["get",`${e}`]],"#00b0f1","#000"])(t):((e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#095","#C71"])(n,o):"#095",ko=(e,t=!0)=>t?["in",`${e}`,["get","type"]]:["!",["in",`${e}`,["get","type"]]],Co=(e,t)=>["case",["in",["get","name"],["literal",t]],0,["get",`${e}`]],Po=(e,t)=>0===e&&t?3:0,Lo=(e,t,n)=>n?["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#000","#C60"]:"#000",Oo=(e,t)=>["case",["in",["get","name"],["literal",e]],ro(t,10),ro(t,8,1.15)],To=e=>ro(e,8,1.15),Mo=(e,t)=>["case",["in",["get","name"],["literal",e]],io(t,1),io(t,.6)],Eo=(e,t)=>t?["case",["==",2,["get","level"]],io(e,.5,1.2),io(e,.4,1.2)]:io(e,.4,1.2);function So(e,t){const{map:n}=e;n.getLayer(yo)&&n.setLayoutProperty(yo,"visibility",t?"visible":"none"),n.getLayer(bo)&&n.setLayoutProperty(bo,"visibility",t?"visible":"none")}const Ao=e=>{const t=e?e.infos.ralts:[];let n=[];return e&&e.infos.EEP&&e.infos.EXP&&e.infos.raltPoints.length>0&&(n=[e.infos.EEP.name,e.infos.EXP.name]),[t,n.concat(t)]};var Fo={show:e=>So(e,!0),hide:e=>So(e,!1),add:e=>{const{map:t,mapData:n,ofp:o,kmlOptions:r}=e,{affineOrDrop:s}=n,i=s;let l=[];o&&o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0&&(l=[o.infos.EEP,o.infos.EXP]);const a=c(Pt),u=o?o.infos.raltPoints:[],d=r.etopsColor,p=r.airportPin,m=r.airportDisplay,[f]=Jt(d),g=l.map((e=>e.name)),h=u.map((e=>e.name)),v=g.concat(h);fetch("data/airports.2107.geojson").then((e=>e.json())).then((e=>{if(i){const t=[];for(let n of e.features)n.geometry.coordinates=i(n.geometry.coordinates),void 0!==n.geometry.coordinates&&t.push(n);e.features=t}t.addSource(xo,{type:"geojson",data:e}),t.addLayer({id:bo,type:"symbol",source:xo,layout:{"icon-image":o?["case",["==",2,["get","level"]],"sdf-star","sdf-airport"]:"sdf-airport","icon-size":Eo(r.iconSizeChange,!!o),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:m?"visible":"none","text-field":["get","name"],"text-size":To(r.iconTextChange),"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1},paint:{"icon-color":o?["case",["==",1,["get","level"]],"#D70","#B02"]:"#B02","icon-halo-width":0,"icon-halo-color":"#000","text-color":"#000","text-opacity":.8},filter:ko(a,!1)}),t.addLayer({id:yo,type:"symbol",source:xo,layout:{"icon-image":["case",["in",["get","name"],["literal",v]],"sdf-triangle","sdf-airport"],"icon-size":Mo(v,r.iconSizeChange),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:m?"visible":"none","text-field":["get","name"],"text-size":Oo(v,r.iconTextChange),"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1,"symbol-sort-key":Co(a,v)},paint:{"icon-halo-color":o?["case",["==",0,["get","level"]],"#095","#D70"]:"#444","icon-halo-width":Po(p,!!o),"icon-color":wo(p,a,h,f,!!o),"text-color":Lo(h,f,!!o),"text-halo-color":"#000","text-halo-width":["case",["==",0,["get","level"]],0,0],"text-opacity":.8},filter:ko(a)});const n=new mapboxgl.Popup({closeButton:!0,closeOnClick:!1,closeOnMove:!Ge}),s=function(e){const r=e.features[0].geometry.coordinates.slice(),s=e.features[0].properties.title,i=e.features[0].properties.name,l=editolido.icao2iata(i);for(;Math.abs(e.lngLat.lng-r[0])>180;)r[0]+=e.lngLat.lng>r[0]?360:-360;let c=`<div class="airport"><h1>${i} / ${l}</h1><h2>${s}</h2>`;const u=e.features[0].properties.level;let d="",p="0";switch(e.features[0].properties[a]){case 1:case 2:d="Destination & RCF",p="3";break;case 3:case 4:d="Dégagement à destination",p="2";break;case 5:case 6:d="Dégagement en route",p="2 ERA";break;case 7:case 8:d="Appui ou adéquat en route",p="1"}o&&(c+=`<p class="status status-${p.charAt(0)}">STATUT ${p}</p>`,u>0&&(c+=`<p class="security-${u}">${1==u?"ORANGE":"RED"}</p>`),d&&(c+=`<p class="status-text">${d}</p>`)),c+="</div>",n.setLngLat(r).setHTML(c).addTo(t)},l=()=>t.getCanvas().style.cursor="pointer",c=()=>t.getCanvas().style.cursor="",u=function(){c(),n.remove()};Ge?(t.on("mouseenter",yo,(e=>{l(),s(e)})),t.on("mouseenter",bo,(e=>{l(),s(e)})),t.on("mouseleave",yo,u),t.on("mouseleave",bo,u)):(t.on("mouseenter",yo,l),t.on("mouseenter",bo,l),t.on("click",yo,s),t.on("click",bo,s),t.on("mouseleave",yo,c),t.on("mouseleave",bo,c))}))},changeMarker:function(e){const{map:t,kmlOptions:n,ofp:o,aircraftType:r}=e,s=o?o.infos.ralts:[],[i]=Jt(n.etopsColor),l=n.airportPin;t.getLayer(yo)&&(t.setPaintProperty(yo,"icon-color",wo(l,r,s,i,!!o)),t.setPaintProperty(yo,"text-color",Lo(s,i,!!o)),t.setPaintProperty(yo,"icon-halo-width",Po(l,!!o)))},change:function(e){const{map:t,kmlOptions:n,aircraftType:o,ofp:r}=e,[s,i]=Ao(r),[l]=Jt(n.etopsColor),a=n.airportPin;t.setFilter(yo,ko(o)),t.setPaintProperty(yo,"icon-color",wo(a,o,s,l)),t.setLayoutProperty(yo,"symbol-sort-key",Co(o,i)),t.setFilter(bo,ko(o,!1))},changeIconText:e=>{const{map:t,kmlOptions:n,ofp:o}=e,[,r]=Ao(o);t.getLayer(yo)&&t.setLayoutProperty(yo,"text-size",Oo(r,n.iconTextChange)),t.getLayer(bo)&&t.setLayoutProperty(bo,"text-size",To(n.iconTextChange))},changeIconSize:e=>{const{map:t,kmlOptions:n,ofp:o}=e,[,r]=Ao(o);t.getLayer(yo)&&t.setLayoutProperty(yo,"icon-size",Mo(r,n.iconSizeChange)),t.getLayer(bo)&&t.setLayoutProperty(bo,"icon-size",Eo(n.iconSizeChange))}};const _o="etops-ep-circle-line-layer",Do="etops-etops-circle-line-layer";function jo(e,t){const{map:n}=e;n.getLayer(Do)&&n.setLayoutProperty(Do,"visibility",t?"visible":"none"),n.getLayer(_o)&&n.setLayoutProperty(_o,"visibility",t?"visible":"none")}var Io={show:e=>jo(e,!0),hide:e=>jo(e,!1),add:function(e){const{map:t,mapData:n,ofp:o,kmlOptions:r}=e;if(!o)return;const s=so(r.lineWidthChange,1);if(o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0){const{affineAndClip:e}=n,i=o.infos.maxETOPS,l=r.etopsDisplay;co(t,"etops-ep-circle",[o.infos.EEP.circle(420,48),o.infos.EXP.circle(420,48)],e,r.routeColor,l,s,!0),co(t,"etops-etops-circle",o.infos.raltPoints.map((e=>e.circle(7*i))),e,r.etopsColor,l,s,!0)}},changeLine:e=>function(e){const{map:t}=e,[n,o]=Jt(e.value);t.getLayer(Do)&&(t.setPaintProperty(Do,"line-color",n),t.setPaintProperty(Do,"line-opacity",o))}(e),changeLineWidth:function(e){const{map:t,value:n}=e,o=so(n,1);return t.getLayer(Do)&&t.setPaintProperty(Do,"line-width",o),t.getLayer(_o)&&t.setPaintProperty(_o,"line-width",o),!0}};const zo="fir-reg-line-layer",Ro="fir-reg-layer",Wo="fir-reg-source";function No(e,t){const{map:n}=e;n.getLayer(Ro)&&n.setLayoutProperty(Ro,"visibility",t?"visible":"none"),n.getLayer(zo)&&n.setLayoutProperty(zo,"visibility",t?"visible":"none")}var qo={show:e=>No(e,!0),hide:e=>No(e,!1),add:e=>{const{ofp:t,map:n,mapData:o,kmlOptions:r,mapOptions:s}=e;if("jb_pacific"===s.id||s.id.startsWith("vb_"))return;if(!t)return;const{affine:i}=o,l=r.firDisplay;fetch("data/fir-reg.2107.geojson").then((e=>e.json())).then((e=>{if(i)for(let t=0;t<e.features.length;t++){const n=e.features[t].geometry.coordinates[0];e.features[t].geometry.coordinates=[n.map((e=>i(e)))]}n.addSource(Wo,{type:"geojson",data:e}),n.addLayer({id:Ro,type:"fill",source:Wo,layout:{visibility:l?"visible":"none"},paint:{"fill-color":["case",["==","FIR-RED",["get","type"]],"rgba(255,0,0,0.2)","rgba(255,127,0,0.25)"]}}),n.addLayer({id:zo,type:"line",source:Wo,layout:{visibility:l?"visible":"none"},paint:{"line-color":["case",["==","FIR-RED",["get","type"]],"rgb(255,0,0)","rgb(255,127,0)"],"line-width":1,"line-opacity":["case",["==","FIR-RED",["get","type"]],.4,.6]}})}))}};const Ho="great-circle";var Uo={show:$o.bind(null,Ho,!0),hide:$o.bind(null,Ho,!1),add:e=>{const{ofp:t,kmlOptions:n,mapData:o,map:r,mapOptions:s}=e;if(s.id.startsWith("vb_"))return;if(!t)return;const{affineAndClip:i}=o,l=`${t.infos.depICAO}-${t.infos.destICAO}`,a=t.route,c=new editolido.Route([a.points[0],a.points[a.points.length-1]]).split(300,{name:`Ortho ${l}`});ao(r,Ho,c.points,i,n.greatCircleColor,n.greatCircleDisplay)},changeLine:vo.bind(null,Ho)};const Go="ogimet";var Bo={show:$o.bind(null,Go,!0),hide:$o.bind(null,Go,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r,mapOptions:s}=e;if(s.id.startsWith("vb_"))return;if(!n)return;const{affineAndClip:i}=r;ao(t,Go,n.ogimetData.route.points,i,o.ogimetColor,o.ogimetDisplay)},changeLine:vo.bind(null,Go)};const Ko="ralt";var Zo={show:$o.bind(null,Ko,!0),hide:$o.bind(null,Ko,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(!n)return;const{affineAndClip:s,affineOrDrop:i}=r,l=new editolido.Route(n.wptCoordinatesAlternate(),{name:"Route Dégagement"});ao(t,Ko,l.points,s,o.alternateColor,o.alternateDisplay),lo(t,Ko,l.points,i,o)},changeLine:vo.bind(null,Ko),changeMarker:ho.bind(null,Ko),changeIconText:fo.bind(null,Ko),changeLineWidth:go.bind(null,Ko),changeIconSize:mo.bind(null,Ko)};const Vo="rmain";var Jo={show:$o.bind(null,Vo,!0),hide:$o.bind(null,Vo,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(!n)return;const{affineAndClip:s,affineOrDrop:i}=r,l=n.route;l.name=`${n.infos.depICAO}-${n.infos.destICAO}`,l.description=n.description,ao(t,Vo,l.points,s,o.routeColor,!0),lo(t,Vo,l.points,i,o)},changeLine:e=>vo(Vo,e)&&function(e){const{map:t,kmlOptions:n}=e,[o,r]=Jt(n.routeColor);t.getLayer(_o)&&(t.setPaintProperty(_o,"line-color",o),t.setPaintProperty(_o,"line-opacity",r))}(e),changeMarker:ho.bind(null,Vo),changeIconText:fo.bind(null,Vo),changeLineWidth:go.bind(null,Vo),changeIconSize:mo.bind(null,Vo)};const Qo="rnat";const Xo={airport:Fo,etops:Io,fir:qo,greatcircle:Uo,ogimet:Bo,ralt:Zo,rmain:Jo,rnat:{show:e=>$o(Qo,!0,e)&&$o("rnat-incomplete",!0,e),hide:e=>$o(Qo,!1,e)&&$o("rnat-incomplete",!1,e),add:function(e){const{map:t,ofp:n,mapData:o,kmlOptions:r}=e;if(!n)return;const{affineOrDrop:s,affineAndClip:i}=o,l=s,a=i,c=r.natColor,u=r.natPin,d=r.natDisplay,p={rnat:[],"rnat-incomplete":[]},m={rnat:[],"rnat-incomplete":[]};for(let e of n.tracks){const t=e.isComplete?"rnat":"rnat-incomplete";if(a){const n=a(e.points),o=n.length;for(let r=0;r<o;r++)p[t].push(no(n[r],e.name))}else p[t].push(no(e.points.map((e=>[e.longitude,e.latitude])),e.name));const n=e.points[0];let o=l?l([n.longitude,n.latitude]):[n.longitude,n.latitude];if(o&&m[t].push(eo(o,`${e.name}\n${n.name}`,e.description)),e.isMine){const n=e.points[e.points.length-1];o=l?l([n.longitude,n.latitude]):[n.longitude,n.latitude],o&&m[t].push(eo(o,`${e.name}\n${n.name}`,e.description))}}t.addSource("rnat-marker-source",to(m.rnat)),t.addSource("rnat-incomplete-marker-source",to(m["rnat-incomplete"])),t.addSource("rnat-line-source",to(p.rnat)),t.addSource("rnat-incomplete-line-source",to(p["rnat-incomplete"]));const f=ro(r.iconTextChange,10),g=so(r.lineWidthChange,1);t.addLayer(po("rnat",c,d,g)),t.addLayer(po("rnat-incomplete",r.natIncompleteColor,d,g)),t.addLayer(uo("rnat",u,c,d,f)),t.addLayer(uo("rnat-incomplete",u,c,d,f));const h=e=>{for(var n=e.features[0].geometry.coordinates.slice(),o=e.features[0].properties.description;Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;(new mapboxgl.Popup).setLngLat(n).setHTML(o).addTo(t)},v=e=>{const n=e+"-marker-layer";t.on("click",n,h),t.on("mouseenter",n,(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave",n,(function(){t.getCanvas().style.cursor=""}))};v("rnat"),v("rnat-incomplete")},changeLine:vo.bind(null,Qo),changeMarker:ho.bind(null,Qo),changeIconText:function(e){const{map:t,value:n}=e,o=ro(n,10);return t.getLayer("rnat-marker-layer")&&t.setLayoutProperty("rnat-marker-layer","text-size",o),t.getLayer("rnat-incomplete-marker-layer")&&t.setLayoutProperty("rnat-incomplete-marker-layer","text-size",o),!0},changeLineWidth:function(e){const{map:t,value:n}=e,o=so(n,1);return t.getLayer("rnat-line-layer")&&t.setPaintProperty("rnat-line-layer","line-width",o),t.getLayer("rnat-incomplete-line-layer")&&t.setPaintProperty("rnat-incomplete-line-layer","line-width",o),!0},changeIconSize:function(e){const{map:t,value:n,kmlOptions:o}=e,r=o.natPin?io(n,1):.2;return t.getLayer("rnat-marker-layer")&&t.setLayoutProperty("rnat-marker-layer","icon-size",r),t.getLayer("rnat-incomplete-marker-layer")&&t.setLayoutProperty("rnat-incomplete-marker-layer","icon-size",r),!0}}},Yo=2*Math.PI,er=Math.PI/4,tr=function(e){return Math.abs(e)<=3.14159265359?e:e-function(e){return e<0?-1:1}(e)*Yo};var nr={init:function(){},forward:function(e){var t=e.x,n=e.y,o=tr(t-this.long0),r=Math.tan(n/2),s=Math.sin(er*r),i=s*s,l=this.x0+this.a*o*(.74482-.34588*i),a=this.y0+1.70711*this.a*r;return e.x=l,e.y=a,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.y/1.70711/this.a,n=Math.sin(er*t),o=n*n,r=tr(this.long0+e.x/this.a/(.74482-.34588*o)),s=2*Math.atan(t);return e.x=r,e.y=s,e},names:["The Times","times"]};const or=Math.abs,rr=Math.asin,sr=Math.cos,ir=Math.sin,lr=Math.sqrt,ar=1.340264,cr=-.081106,ur=893e-6,dr=.003796,pr=lr(3)/2;var mr={init:function(){},forward:function(e){const t=e.x,n=e.y,o=rr(pr*ir(n)),r=o*o,s=r*r*r;return e.x=this.a*t*sr(o)/(pr*(ar+3*cr*r+s*(7*ur+9*dr*r))),e.y=this.a*o*(ar+cr*r+s*(ur+dr*r)),e},inverse:function(e){const t=e.y/this.a,n=e.x/this.a;let o=t,r=o*o,s=r*r*r;for(var i,l=0;l<12&&(o-=i=(o*(ar+cr*r+s*(ur+dr*r))-t)/(ar+3*cr*r+s*(7*ur+9*dr*r)),r=o*o,s=r*r*r,!(or(i)<1e-12));++l);return e.x=pr*n*(ar+3*cr*r+s*(7*ur+9*dr*r))/sr(o),e.y=rr(ir(o)/pr),e},names:["Equal Earth","eqearth"]};function fr(e,t,n,o,r){window.proj4.Proj.projections.get("times")||window.proj4.Proj.projections.add(nr),window.proj4.Proj.projections.get("eqearth")||window.proj4.Proj.projections.add(mr);let s={container:e,center:[0,49],zoom:2,attributionControl:!0,customAttribution:(()=>{const e="Airports/FIR © Olivier Ravet";return t.id.startsWith("ed_eqe")?`© equal-earth.com - ${e}`:t.id.startsWith("jb_")||t.id.startsWith("ed_")?`Yammer/QGIS & Avenza maps - ${e}`:t.id.startsWith("vb_")?`© ${window.atob("Q2FydGFCb3NzeQ==")}.com - Airports © Olivier Ravet`:`Yammer/Maps.me - ${e}`})()};const i=new mapboxgl.Map({...t.mapboxOptions,...s});let l,a,c,u;i._setCacheLimits(320,32),i.loadImage("sdf/maki-marker-sdf.png",(function(e,t){e||i.addImage("sdf-marker-15",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-triangle-sdf.png",(function(e,t){e||i.addImage("sdf-triangle",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-circle-sdf.png",(function(e,t){e||i.addImage("sdf-airport",t,{pixelRatio:2,sdf:!0})})),i.loadImage("sdf/map-star-sdf.png",(function(e,t){e||i.addImage("sdf-star",t,{pixelRatio:2,sdf:!0})})),window.proj4.defs("WGS84","+proj=longlat +datum=WGS84"),window.proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");let d,p=e=>window.proj4("WGS84","EPSG:3857",e),m=e=>window.proj4("EPSG:3857","WGS84",e);if(t.extent){let e,n,o,r;if(window.proj4.defs("CUSTOM",t.proj4),t.affineTransform)[e,n,o,r]=t.affineTransform;else{const s=[-20026376.39,-20048966.1,20026376.39,20048966.1],[i,l,a,c]=t.extent;let[u,d,p,m]=s;if(t.ratio){const e=s[3]-s[1],[n,o]=t.ratio,r=o/n*e;[u,d,p,m]=[s[0],s[3]-r,s[2],s[3]]}e=(p-u)/(a-i),n=u-e*i,o=(m-d)/(c-l),r=d-o*l}const[s,i,d,f]=t.viewport?t.viewport:t.extent,g=e=>window.proj4("WGS84","CUSTOM",e),h=t=>[e*t[0]+n,o*t[1]+r],v=e=>m(h(e));p=e=>h(g(e)),l=e=>m(p(e)),a=e=>{let[t,n]=g(e);return t=Ve(t,s,d),n=Ve(n,i,f),v([t,n])},c=e=>{let[t,n]=g(e);if(Je(t,s,d)&&Je(n,i,f))return v([t,n])},u=e=>{if(0===e.length)return[];return function(e,t,n){var o,r,s,i,l,a=e.length,c=Xe(e[0],t),u=[];for(n||(n=[]),o=1;o<a;o++){for(r=e[o-1],i=l=Xe(s=e[o],t);;){if(!(c|i)){u.push(r),i!==l?(u.push(s),o<a-1&&(n.push(u),u=[])):o===a-1&&u.push(s);break}if(c&i)break;c?c=Xe(r=Qe(r,s,c,t),t):i=Xe(s=Qe(r,s,i,t),t)}c=l}return u.length&&n.push(u),n}(e.map((e=>g([e.longitude,e.latitude]))),t.extent).map((e=>e.map((e=>v(e)))))}}let f=[];if(n){for(const e of n.tracks)f=f.concat(e.points);f=f.concat(n.route.points,n.wptCoordinatesAlternate()),d=((e,t,n=[1/0,1/0,-1/0,-1/0])=>{for(const[o,r]of e.map((e=>t?t([e.longitude,e.latitude]):[e.longitude,e.latitude])))n[0]>o&&(n[0]=o),n[1]>r&&(n[1]=r),n[2]<o&&(n[2]=o),n[3]<r&&(n[3]=r);return n[0]-=1,n[1]-=1,n[2]+=1,n[3]+=1,n})(f,a),i.fitBounds(d,{padding:{top:30,bottom:80,left:30,right:30}})}const g=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!1},fitBoundsOptions:{maxZoom:3},trackUserLocation:!0});if(l){const e=g._onSuccess;g._onSuccess=function(t){const[n,o]=l([t.coords.longitude,t.coords.latitude]);return e.apply(this,[{coords:{longitude:n,latitude:o,accuracy:t.coords.accuracy}}])}}const h={map:i,affine:l,affineAndClamp:a,affineAndClip:u,affineOrDrop:c,bbox:d,mapOptions:t,geolocate:g};return i.addControl(new class{onAdd(e){return this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl  mapboxgl-ctrl-group",this._button=document.createElement("button"),this._button.className="mapboxgl-ctrl-layers",this._button.setAttribute("type","button"),this._button.setAttribute("title","Personnaliser la carte"),this._button.innerHTML='<svg><use xlink:href="#layers-symbol"/></svg>',this._container.appendChild(this._button),this._toggleSidebar=()=>ht.update((e=>!e)),this._button.addEventListener("click",this._toggleSidebar),this._container}onRemove(){this._button.removeEventListener("click",this._toggleSidebar),this._container.parentNode.removeChild(this._container),this._map=void 0}}),i.addControl(g),i.on("load",(function(){(e=>{const{map:t,mapOptions:n}=e;n.tiles&&(t.addSource("jb-raster",{type:"raster",tiles:n.tiles,tileSize:n.tileSize}),t.addLayer({id:"jb-layer",type:"raster",source:"jb-raster",minzoom:0,maxzoom:22,paint:{"raster-opacity":1}})),Object.values(Xo).forEach((t=>t.add&&t.add(e)))})({ofp:n,kmlOptions:o,mapData:h,map:i,mapOptions:t}),r&&r(i,t)})),i.on("remove",(function(){})),h}class gr{constructor(e,t,n){this.dbName=e,this.dbPromise=new Promise(((o,r)=>{const s=indexedDB.open(e,t);s.onsuccess=()=>{o(s)},s.onerror=()=>{r("Error while opening DB")},s.onupgradeneeded=n?n.bind(null,s):()=>{}}))}getImageIdFromURL(e){return e.pathname.replace(/[/.]/g,"_")}async fetchImageFromDB(e,t){const n=await this.dbPromise;return new Promise(((o,r)=>{const s=n.result.transaction(t,"readonly").objectStore(t).get(e);s.onsuccess=()=>{o(s.result)},s.onerror=()=>{r("Something went wrong while fetching image from DB ")}}))}async putImageInDB(e,t,n){const o=await this.dbPromise;return new Promise(((r,s)=>{const i=o.result.transaction(t,"readwrite").objectStore(t),l=i.put(n,e);l.onsuccess=()=>{const t=i.get(e);t.onsuccess=()=>{r(t.result)}},l.onerror=()=>{s("Something went wrong while putting image in DB ")}}))}getCacheHandler(e){return this._cacheHandler.bind(this,e)}async isNotCached(e,t){const n=this.getImageIdFromURL(t),o=await this.dbPromise;return new Promise(((r,s)=>{const i=o.result.transaction(e,"readonly").objectStore(e).getKey(n);i.onsuccess=()=>{r(void 0===i.result?t:null)},i.onerror=()=>{s("Something went wrong while checking if cached from DB ")}}))}async countTiles(e){const t=await this.dbPromise;return new Promise(((n,o)=>{const r=t.result.transaction(e,"readonly").objectStore(e).count();r.onsuccess=()=>n(r.result),r.onerror=()=>o("Something went wrong while counting entries from DB")}))}async close(){(await this.dbPromise).result.close()}async _cacheHandler(e,{request:t,url:n}){const o=this.getImageIdFromURL(n);return this.fetchImageFromDB(o,e).then((n=>n?new Response(n):fetch(t).then((e=>e.clone().blob())).then((t=>t.type.startsWith("image/")||"application/x-protobuf"===t.type?this.putImageInDB(o,e,t).then((e=>new Response(e))):new Response("",{status:404,statusText:"invalid image found (sw)"})))))}}function hr(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}function vr(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}const $r=async(e,t)=>{const{map:n,mapOptions:o,bbox:r}=t;if(!n)return[];const s=new gr("lido-tiles");if(o.cacheAll){const e=await s.countTiles(o.cacheName);let t;if(t=o.matrix?o.matrix.map((([e,t])=>e*t)):[...Array(o.cacheZoom+1).keys()].map((e=>Math.pow(2,e)*Math.pow(2,e))),e>=t.reduce(((e,t)=>e+t),0))return s.close(),caches[o.id]=!0,[]}const[i,l]=[[r[0],r[1]],[r[2],r[3]]],a=[];for(let e=0;e<=o.cacheZoom;e++){let t,r;const c=Math.pow(2,e);let u,d;o.cacheAll?(t={x:0,y:c-1},r={x:c-1,y:0}):(t={x:hr(i[0],e),y:vr(i[1],e)},r={x:hr(l[0],e),y:vr(l[1],e)}),o.matrix?[u,d]=o.matrix[e]:[u,d]=[c,c];for(let i=t.x;i<=r.x;i++)for(let l=r.y;l<=t.y;l++)if(i>=0&&l>=0&&i<u&&l<d){let t;o.tiles?(t=new URL(o.tiles[0].replace("{z}",e).replace("{x}",i).replace("{y}",l)),a.push(s.isNotCached(o.cacheName,t))):(t=new URL(`https://api.mapbox.com/v4/denizotjb.6nts91f3/${e}/${i}/${l}@2x.webp?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),a.push(s.isNotCached(o.cacheName,t)),t=new URL(`https://api.mapbox.com/v4/denizotjb.9001lcsf,denizotjb.494jxmoa,mapbox.mapbox-streets-v8,denizotjb.1x3i1g8r,denizotjb.bifqeinj,denizotjb.cz0kdfpx,denizotjb.aop85z8z,mapbox.mapbox-terrain-v2/${e}/${i}/${l}.vector.pbf?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),a.push(s.isNotCached(o.cacheName,t)))}}const c=await Promise.all(a);return s.close(),c.filter((e=>null!==e))};function yr(e){let t,n,o,r,s,i;const l=e[4].default,a=d(l,e,e[3],null);return{c(){t=E("svg"),n=E("path"),o=E("path"),s=A(),a&&a.c(),I(n,"d","M50,5A45 45 0 1 1 49.9999 5"),I(n,"class","svelte-1bp2w4i"),I(o,"d",r=e[0]()),I(o,"class","svelte-1bp2w4i"),I(t,"viewBox","0 0 100 100"),I(t,"class","svelte-1bp2w4i")},m(e,r){L(e,t,r),P(t,n),P(t,o),L(e,s,r),a&&a.m(e,r),i=!0},p(e,[t]){(!i||1&t&&r!==(r=e[0]()))&&I(o,"d",r),a&&a.p&&8&t&&m(a,l,e,e[3],t,null,null)},i(e){i||(Te(a,e),i=!0)},o(e){Me(a,e),i=!1},d(e){e&&O(t),e&&O(s),a&&a.d(e)}}}function br(e,t,n){let o,{$$slots:r={},$$scope:s}=t,{value:i=0}=t,{max:l=100}=t;return e.$$set=e=>{"value"in e&&n(1,i=e.value),"max"in e&&n(2,l=e.max),"$$scope"in e&&n(3,s=e.$$scope)},e.$$.update=()=>{6&e.$$.dirty&&n(0,o=()=>{if(i<=0)return"";if(i>=l)return"M50,5A45 45 0 1 1 49.9999 5";{const e=2*Math.PI*(i/l),t=50+45*Math.cos(e-Math.PI/2),n=50+45*Math.sin(e-Math.PI/2);let o="M50,5";return e>Math.PI&&(o+="A45 45 0 0 1 50 95"),o+=`A45 45 0 0 1 ${t} ${n}`,o}})},[o,i,l,s,r]}class xr extends We{constructor(e){super(),Re(this,e,br,yr,l,{value:1,max:2})}}function wr(e,t,n){const o=e.slice();return o[6]=t[n],o}function kr(t){let n,o;return{c(){n=M("option"),o=S("???"),n.__value=void 0,n.value=n.__value,n.selected=!0},m(e,t){L(e,n,t),P(n,o)},p:e,d(e){e&&O(n)}}}function Cr(e){let t,n,o,r=e[6]+"";return{c(){t=M("option"),n=S(r),t.__value=e[6],t.value=t.__value,t.selected=o=e[6]===e[2]},m(e,o){L(e,t,o),P(t,n)},p(e,n){4&n&&o!==(o=e[6]===e[2])&&(t.selected=o)},d(e){e&&O(t)}}}function Pr(e){let t,n=e[6]===e[2]||!dt.includes(e[6]),o=n&&Cr(e);return{c(){o&&o.c(),t=F()},m(e,n){o&&o.m(e,n),L(e,t,n)},p(e,r){4&r&&(n=e[6]===e[2]||!dt.includes(e[6])),n?o?o.p(e,r):(o=Cr(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&O(t)}}}function Lr(t){let n,o,r,i,l=!t[2]&&kr(),a=ut,c=[];for(let e=0;e<a.length;e+=1)c[e]=Pr(wr(t,a,e));return{c(){n=M("select"),l&&l.c(),o=F();for(let e=0;e<c.length;e+=1)c[e].c();I(n,"name","aircraftType"),I(n,"class","svelte-1xpiicm"),void 0===t[1]&&ge((()=>t[5].call(n)))},m(e,s){L(e,n,s),l&&l.m(n,null),P(n,o);for(let e=0;e<c.length;e+=1)c[e].m(n,null);t[4](n),U(n,t[1]),r||(i=[D(n,"change",t[5]),D(n,"change",t[3]),$(pn.call(null,n))],r=!0)},p(e,[t]){if(e[2]?l&&(l.d(1),l=null):l?l.p(e,t):(l=kr(),l.c(),l.m(n,o)),4&t){let o;for(a=ut,o=0;o<a.length;o+=1){const r=wr(e,a,o);c[o]?c[o].p(r,t):(c[o]=Pr(r),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=a.length}2&t&&U(n,e[1])},i:e,o:e,d(e){e&&O(n),l&&l.d(),T(c,e),t[4](null),r=!1,s(i)}}}function Or(e,t,n){let o,r;u(e,Ct,(e=>n(1,o=e))),u(e,Pt,(e=>n(2,r=e)));let{aircraftTypeSelectElement:s=null}=t;return e.$$set=e=>{"aircraftTypeSelectElement"in e&&n(0,s=e.aircraftTypeSelectElement)},[s,o,r,function(t){ie(e,t)},function(e){ae[e?"unshift":"push"]((()=>{s=e,n(0,s)}))},function(){o=G(this),Ct.set(o)}]}class Tr extends We{constructor(e){super(),Re(this,e,Or,Lr,l,{aircraftTypeSelectElement:0})}}function Mr(e,t,n){let o,r;u(e,Ft,(e=>n(1,o=e)));let{mapData:s}=t;const i=window.document.createElement("div");i.classList.add("mapboxgl-user-location-dot","map-plane");const l=e=>{if(r){const t=s.affine,[n,o]=t?t([e.longitude,e.latitude]):[e.longitude,e.latitude];r.setLngLat([n,o])}};return oe((()=>{r=new mapboxgl.Marker(i),l(o.map),r.addTo(s.map)})),re((()=>{r&&(r.remove(),r=void 0)})),e.$$set=e=>{"mapData"in e&&n(0,s=e.mapData)},e.$$.update=()=>{2&e.$$.dirty&&l(o.map)},[s,o]}class Er extends We{constructor(e){super(),Re(this,e,Mr,null,l,{mapData:0})}}const Sr={version:8,name:"Blank pour App",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template","mapbox:sdk-support":{js:"1.9.0",android:"8.6.0",ios:"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},center:[0,0],zoom:1.2946207284336362,bearing:0,pitch:0,sources:{},sprite:"mapbox://sprites/flyingeek/ckbhlmwdm0mn51imw8t4dddqs/ck2u8j60r58fu0sgyxrigm3cu",glyphs:"mapbox://fonts/flyingeek/{fontstack}/{range}.pbf",layers:[],created:"2020-06-16T07:22:32.952Z",id:"ckbhlmwdm0mn51imw8t4dddqs",modified:"2020-06-16T07:23:29.539Z",owner:"flyingeek",visibility:"public",draft:!1},Ar=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?256:512,Fr=[{label:"Mercator",id:"mercator",mapboxOptions:{style:"mapbox://styles/flyingeek/cknj4nmwu0t8117ny6rk7dwbg",renderWorldCopies:!1,maxZoom:12},cacheName:"denizotjbv2",cacheZoom:6},{label:"Lambert North",id:"jb_north",extent:[-7441575.3298294,-5719574.1644927,7383398.17621086,9105399.34154755],proj4:"+proj=lcc +lat_1=30 +lat_2=65 +lat_0=47.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Sr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-northv3.netlify.app/northv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"northv3",cacheAll:!0,tileSize:Ar},{label:"Lambert South",id:"jb_south",extent:[-12613000.20107552,-12796118.19556621,13437104.14597977,13253986.15148908],validity:[-12613903.56963206,-9420000.1608799,13437054.51836624,5862747.38325809],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Sr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-southv3.netlify.app/southv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"southv3",cacheAll:!0,tileSize:Ar},{label:"Lambert Pacific",id:"jb_pacific",extent:[-8306365.14297095,-7788164.66141786,6519185.45830619,7037385.93985927],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=-140 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Sr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-pacificv1.netlify.app/pacificv1/{z}/{x}/{y}.jpg"],cacheName:"pacificv1",cacheZoom:4,cacheAll:!0,tileSize:Ar},{label:"The World",id:"jb_theworld",affineTransform:[1.314746085506463,-45260.546626176685,1.315,648e4],extent:[-15201502.45260082,-8478963.56607166,15262747.04890729,10300929.57326125],proj4:"+proj=times +ellps=sphere +no_defs +wktext +lon_0=0 +x_0=0 +y_0=0",mapboxOptions:{style:Sr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-theworldv2.netlify.app/theworldv2/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,10],[32,20],[64,40]],cacheZoom:5,cacheName:"theworldv2",cacheAll:!0,tileSize:Ar},{label:"=Physique=",id:"ed_eqe_physical_fr",affineTransform:[1.104,-855.8520345054567,1.1,931e4],extent:[-18145536.6946,-10300589.33644032,18143985.81684419,9720047.1747],proj4:"+proj=eqearth +datum=WGS84 +wktext",mapboxOptions:{style:Sr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-eqephysicalfrv1.netlify.app/eqephysicalfrv1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,9],[32,18],[64,36]],cacheZoom:5,cacheName:"eqephysicalfrv1",cacheAll:!0,tileSize:Ar},{label:atob("Q2FydGFCb3NzeQ==")+" 2020",id:"vb_2020",ratio:[19449,18352],extent:[26966.11818123,-430589.86447607,1262485.62823696,735241.49181695],proj4:"+proj=lcc +lat_1=45.89893890000052 +lat_2=47.69601440000037 +lat_0=46.8 +lon_0=2.33722917 +x_0=600000 +y_0=200000 +datum=WGS84 +units=m +no_defs ",mapboxOptions:{style:Sr,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-cb2020v1.netlify.app/cb2020v1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,4],[8,8],[16,16],[32,31],[64,61]],cacheName:"cb2020v1",cacheZoom:5,cacheAll:!0,tileSize:Ar}];function _r(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function Dr(e){let t,n,o,r=(e[7].id===e[2]?`${e[7].label.toUpperCase()}`:e[7].label)+"";return{c(){t=M("option"),n=S(r),t.__value=e[7],t.value=t.__value,t.selected=o=e[7].id===e[0].id},m(e,o){L(e,t,o),P(t,n)},p(e,s){4&s&&r!==(r=(e[7].id===e[2]?`${e[7].label.toUpperCase()}`:e[7].label)+"")&&N(n,r),9&s&&o!==(o=e[7].id===e[0].id)&&(t.selected=o)},d(e){e&&O(t)}}}function jr(t){let n,o,r,i=t[3],l=[];for(let e=0;e<i.length;e+=1)l[e]=Dr(_r(t,i,e));return{c(){n=M("select");for(let e=0;e<l.length;e+=1)l[e].c();I(n,"name",t[1]),I(n,"class","form-control form-control-sm svelte-1uc3ace"),void 0===t[0]&&ge((()=>t[6].call(n)))},m(e,s){L(e,n,s);for(let e=0;e<l.length;e+=1)l[e].m(n,null);U(n,t[0]),o||(r=[D(n,"change",t[6]),D(n,"change",t[5]),$(pn.call(null,n))],o=!0)},p(e,[t]){if(13&t){let o;for(i=e[3],o=0;o<i.length;o+=1){const r=_r(e,i,o);l[o]?l[o].p(r,t):(l[o]=Dr(r),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=i.length}2&t&&I(n,"name",e[1]),9&t&&U(n,e[0])},i:e,o:e,d(e){e&&O(n),T(l,e),o=!1,s(r)}}}function Ir(e,t,n){if(!e.proj4)return!1;try{const o=e.validity?e.validity:e.extent;for(let r of[t,n]){const[t,n]=window.proj4(e.proj4,[r.longitude,r.latitude]);if(t<o[0]||t>o[2]||n<o[1]||n>o[3])return!1}}catch(e){return!1}return!0}function zr(e,t,n){let{name:o="map-style"}=t,{ofp:r}=t,{selected:s=Fr[0]}=t,i=s.id;const l=r?Fr:Fr.filter((e=>!e.id.startsWith("vb_")&&"jb_theworld"!==e.id));return oe((()=>{if(s.id===Fr[0].id&&r){const e=r.route.points[0],t=r.route.points[r.route.points.length-1],o=Fr.find((e=>"vb_2020"===e.id)),i=Fr.find((e=>"jb_north"===e.id));Ir(o,e,t)?n(0,s=o):e.distanceTo(t,editolido.rad_to_nm)<=1500||(t.latitude>30&&e.latitude>30?n(0,s=i):t.longitude<-80&&e.longitude<-80?n(0,s=Fr.find((e=>"jb_pacific"===e.id))):(t.latitude>30||e.latitude>30)&&e.atFraction(t,.5).latitude>=30&&Ir(i,e,t)?n(0,s=i):n(0,s=Fr.find((e=>"jb_south"===e.id))))}n(2,i=s.id)})),e.$$set=e=>{"name"in e&&n(1,o=e.name),"ofp"in e&&n(4,r=e.ofp),"selected"in e&&n(0,s=e.selected)},[s,o,i,l,r,function(t){ie(e,t)},function(){s=G(this),n(0,s),n(3,l)}]}class Rr extends We{constructor(e){super(),Re(this,e,zr,jr,l,{name:1,ofp:4,selected:0})}}function Wr(t){let n,o,r,i,l,a,c,u=t[2]>=0?"◼︎":"▶︎";return{c(){n=M("label"),o=S(u),r=A(),i=M("input"),I(i,"name",t[0]),I(i,"type","checkbox"),i.checked=l=t[2]>=0,I(i,"class","svelte-1t9v15q"),I(n,"for",t[0]),I(n,"class","svelte-1t9v15q")},m(e,s){L(e,n,s),P(n,o),P(n,r),P(n,i),t[4](i),a||(c=[D(i,"change",t[3]),D(n,"click",t[3])],a=!0)},p(e,[t]){4&t&&u!==(u=e[2]>=0?"◼︎":"▶︎")&&N(o,u),1&t&&I(i,"name",e[0]),4&t&&l!==(l=e[2]>=0)&&(i.checked=l),1&t&&I(n,"for",e[0])},i:e,o:e,d(e){e&&O(n),t[4](null),a=!1,s(c)}}}function Nr(e,t,n){let o;u(e,yt,(e=>n(2,o=e)));let r,{name:s="simulator"}=t;return e.$$set=e=>{"name"in e&&n(0,s=e.name)},[s,r,o,()=>{n(1,r.checked=!r.checked,r),v(yt,o=r.checked?0:-1,o)},function(e){ae[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class qr extends We{constructor(e){super(),Re(this,e,Nr,Wr,l,{name:0})}}const Hr=at(),Ur=at({});function Gr(e,{ofp:t,pos:n,fl:o}){const r=document.getElementById("gt-plane");let s,i,l,a,c,u=parseFloat(n),d=t,p=o;const m=e.clientHeight,f=e.clientWidth,g=getComputedStyle(document.body),h=parseFloat(g.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),v=e=>65*c+(a-130*c)*e/100,$=e=>{const t=v(e),n=65*c,o=f/3,r=n+o,s=a-n-(f-o);return t>r&&t<s?o-t:t<=r?o-r:o-s},y=(e,t,n,o)=>{e&&(e.style.left=n+(v(t)-e.clientWidth/2)+"px",e.style.top=(h-Math.round(-6e-4*o*o+.8985*o+46.264))*c-e.clientHeight/2+"px")},b=()=>{const t=i.height||700;l=i.cloneNode(),l.id="grametImg",l.style.display="none",l.crossOrigin="anonymous",l.addEventListener("load",x),l.addEventListener("error",w),document.body.appendChild(l),i.style.height=t/h*m+"px",i.style.objectFit="contain",i.style.position="absolute",i.style.opacity=.01,e.appendChild(i),a=i.clientWidth;const n=i.clientHeight/t;c=n;const o=$(u);i.style.top=`-${33*n}px`,i.style.left=`${o}px`},x=()=>{Hr.set("success"),r.style.display="block",i.style.opacity=1;const e=$(u);y(r,u,e,p)},w=()=>{r.style.display="none",Hr.set("error")},k=()=>{i&&i.removeEventListener("load",b),i&&i.removeEventListener("error",w),i&&i.remove(),vt.set(!1),l&&l.removeEventListener("load",x),l&&l.removeEventListener("error",w),l&&l.remove(),l=void 0,i=void 0,s&&URL.revokeObjectURL(s),s=void 0},C=async e=>{i=document.createElement("img"),Hr.set("loading"),r.style.display="none",fetch(e.ogimetData.proxyImg).then((function(e){e.ok?(Ur.set({status:e.status,text:e.statusText||"OK"}),e.blob().then((e=>{i&&(s=URL.createObjectURL(e),i.addEventListener("load",b),i.addEventListener("error",w),i.src=s)}))):(w(),e.headers?Ur.set({status:e.status,text:e.statusText||e.headers.get("X-ofp2map-status")}):Ur.set({status:e.status,text:e.statusText||""}))})).catch((function(e){w(),Ur.set({status:0,text:e.message})}))};return C(t),{update({ofp:e,pos:t,fl:n}){if(u=parseFloat(t),e!==d)d=e,k(),C(e);else{const e=$(u);i.style.left=e+"px",p=n,y(r,u,e,n)}},destroy(){k()}}}const Br=(e,{pos:t,fl:n})=>{const o=e.parentNode.querySelector("svg"),r=document.getElementById("grametImg"),s=getComputedStyle(document.body),i=parseFloat(s.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),l=parseFloat(e.parentNode.dataset.maxHeight||"370"),a=r.width,c=r.height,u=document.querySelector("nav").clientWidth;let d;d=0!==a?Math.min(u/a*c,l):Math.min(c,l);let p,m,f=parseFloat(t),g=0,h=0,v=n;const $=e=>(65+(a-130)*e/100)*p,y=(e,t,n)=>{e.style.left=g+($(t)-e.clientWidth/2+2)+"px",e.style.top=(i+33-2-Math.round(-6e-4*n*n+.8985*n+46.264))*p-e.clientHeight/2+h+"px"},b=e=>{const t=$(e),n=u/3,o=0+n,r=a*p-0-(u-n);return t>o&&t<r?n-t:t<=o?n-o:n-r},x=()=>{g=e.x,h=e.y,p=e.scale,m=u<=a*p,y(o,f,v)};return f<=0||f>=100?(p=0===a?l/(i+70):Math.min(u/a,d/(i+70)),h=0):(p=d/i,h=-33*p),u>a*p?(g=(u-a*p)/2,m=!1):(g=b(f),m=!0),y(o,f,v),r.style.display="block",e.style.maxHeight=`${l}px`,e.appendChild(r),e.setTransform({scale:p,x:g,y:h}),e.addEventListener("change",x),{update({pos:t,fl:n}){f=parseFloat(t),v=n,m&&(g=b(f),e.setTransform({x:g})),y(o,f,n)},destroy(){r.style.display="none",document.body.appendChild(r),e.removeEventListener("change",x)}}},Kr=e=>{const t=document.getElementById("grametImg"),n=t.width,o=t.height||700,r=parseFloat(e.dataset.maxHeight||"370"),s=document.querySelector("nav").clientWidth;let i=1;0!==n&&(i=s/n);const l=Math.min(i*o,r);e.style.height=`${l}px`};function Zr(e){let t,n;return t=new qr({}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Vr(e){let t,n,o,r,l,a,c,u,d,p,m,f=(0===e[0].gramet||100===e[0].gramet||e[1]>=0)&&Zr();return{c(){var e,o,s;t=M("div"),n=M("pinch-zoom"),r=A(),l=E("svg"),a=E("use"),c=A(),f&&f.c(),s="0.3",(o="min-scale")in(e=n)?e[o]=s:I(e,o,s),R(a,"xlink:href","#plane-symbol"),I(l,"class","svelte-dwqlg"),I(t,"class","pinch-zoom-parent svelte-dwqlg"),I(t,"data-max-height",Jr)},m(s,i){L(s,t,i),P(t,n),P(t,r),P(t,l),P(l,a),P(t,c),f&&f.m(t,null),d=!0,p||(m=[$(o=Br.call(null,n,{pos:e[0].gramet,fl:e[0].fl})),$(Kr.call(null,t))],p=!0)},p(n,[r]){e=n,o&&i(o.update)&&1&r&&o.update.call(null,{pos:e[0].gramet,fl:e[0].fl}),0===e[0].gramet||100===e[0].gramet||e[1]>=0?f?3&r&&Te(f,1):(f=Zr(),f.c(),Te(f,1),f.m(t,null)):f&&(Le(),Me(f,1,1,(()=>{f=null})),Oe())},i(e){d||(Te(f),ge((()=>{u||(u=Ae(t,rt,{y:Jr},!0)),u.run(1)})),d=!0)},o(e){Me(f),u||(u=Ae(t,rt,{y:Jr},!1)),u.run(0),d=!1},d(e){e&&O(t),f&&f.d(),e&&u&&u.end(),p=!1,s(m)}}}const Jr=370;function Qr(e,t,n){let o,r;return u(e,Ft,(e=>n(0,o=e))),u(e,yt,(e=>n(1,r=e))),[o,r]}class Xr extends We{constructor(e){super(),Re(this,e,Qr,Vr,l,{})}}function Yr(e,t){let n=t;const o=()=>n&&n.resize(),r=new IntersectionObserver(((e,t)=>{e.forEach((e=>{1===e.intersectionRatio&&o()}))}),{threshold:1});r.observe(e);const s=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&o()};return document.addEventListener("visibilitychange",s,!1),window.addEventListener("orientationchange",o),{update(e){n=e},destroy(){r.unobserve(e),r.disconnect(),window.removeEventListener("orientationchange",o),document.removeEventListener("visibilitychange",s),n&&n.remove()}}}function es(e){let t,n,o,r,s;return n=new xr({props:{value:e[8],max:e[7],$$slots:{default:[ts]},$$scope:{ctx:e}}}),{c(){t=M("div"),je(n.$$.fragment),I(t,"class","cacheButton svelte-tkabcd"),Z(t,"cacheError",e[9]),Z(t,"cacheProgress",e[8]>0||e[7]>0)},m(l,a){L(l,t,a),Ie(n,t,null),o=!0,r||(s=D(t,"click",(function(){i(e[11]?ls:e[21])&&(e[11]?ls:e[21]).apply(this,arguments)})),r=!0)},p(o,r){e=o;const s={};256&r[0]&&(s.value=e[8]),128&r[0]&&(s.max=e[7]),268435456&r[0]&&(s.$$scope={dirty:r,ctx:e}),n.$set(s),512&r[0]&&Z(t,"cacheError",e[9]),384&r[0]&&Z(t,"cacheProgress",e[8]>0||e[7]>0)},i(e){o||(Te(n.$$.fragment,e),o=!0)},o(e){Me(n.$$.fragment,e),o=!1},d(e){e&&O(t),ze(n),r=!1,s()}}}function ts(e){let t;const n=e[23].default,o=d(n,e,e[28],null),r=o||function(e){let t;return{c(){t=M("span"),t.textContent="↓",I(t,"class","svelte-tkabcd")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}();return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){o&&o.p&&268435456&t[0]&&m(o,n,e,e[28],t,null,null)},i(e){t||(Te(r,e),t=!0)},o(e){Me(r,e),t=!1},d(e){r&&r.d(e)}}}function ns(e){let t;return{c(){t=M("div"),t.textContent="Votre navigateur ne supporte pas l'affichage d'images au format .webp",I(t,"class","nowebp svelte-tkabcd")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function os(e){let t,n;return t=new Er({props:{mapData:e[4]}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};16&n[0]&&(o.mapData=e[4]),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function rs(e){let t,n;return t=new Xr({}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ss(e){let t,n,o,r,s,l,a,c,u,d,p,m,f,g,h,v,y,b,x,w,k=!e[12]&&e[4]&&e[4].mapOptions&&e[4].mapOptions.tiles&&e[4].mapOptions.tiles[0].endsWith(".webp");function C(t){e[24](t)}let T={ofp:e[1]};void 0!==e[5]&&(T.selected=e[5]),s=new Rr({props:T}),ae.push((()=>De(s,"selected",C))),s.$on("change",e[18]);let E=e[5]&&e[1]&&window.indexedDB&&e[14]&&!0!==e[10][e[5].id]&&!e[13]&&es(e),S=k&&ns(),_=e[4]&&!!e[1]&&(e[15]||e[16]>=0)&&os(e);function D(t){e[25](t)}let j={};function z(t){e[26](t)}void 0!==e[6]&&(j.aircraftTypeSelectElement=e[6]),p=new Tr({props:j}),ae.push((()=>De(p,"aircraftTypeSelectElement",D))),p.$on("change",e[19]);let R={};void 0!==e[0]&&(R.kmlOptions=e[0]),g=new Wn({props:R}),ae.push((()=>De(g,"kmlOptions",z))),g.$on("change",e[20]),g.$on("save",e[27]);let W=e[17]&&rs();return{c(){t=M("div"),o=A(),r=M("div"),je(s.$$.fragment),a=A(),E&&E.c(),c=A(),S&&S.c(),u=A(),_&&_.c(),d=A(),je(p.$$.fragment),f=A(),je(g.$$.fragment),v=A(),W&&W.c(),y=F(),I(t,"id",e[2]),I(t,"class","svelte-tkabcd"),I(r,"class","mapmenu svelte-tkabcd")},m(i,l){L(i,t,l),L(i,o,l),L(i,r,l),Ie(s,r,null),P(r,a),E&&E.m(r,null),P(r,c),S&&S.m(r,null),L(i,u,l),_&&_.m(i,l),L(i,d,l),Ie(p,i,l),L(i,f,l),Ie(g,i,l),L(i,v,l),W&&W.m(i,l),L(i,y,l),b=!0,x||(w=$(n=Yr.call(null,t,e[3])),x=!0)},p(e,o){(!b||4&o[0])&&I(t,"id",e[2]),n&&i(n.update)&&8&o[0]&&n.update.call(null,e[3]);const a={};2&o[0]&&(a.ofp=e[1]),!l&&32&o[0]&&(l=!0,a.selected=e[5],he((()=>l=!1))),s.$set(a),e[5]&&e[1]&&window.indexedDB&&e[14]&&!0!==e[10][e[5].id]&&!e[13]?E?(E.p(e,o),25634&o[0]&&Te(E,1)):(E=es(e),E.c(),Te(E,1),E.m(r,c)):E&&(Le(),Me(E,1,1,(()=>{E=null})),Oe()),4112&o[0]&&(k=!e[12]&&e[4]&&e[4].mapOptions&&e[4].mapOptions.tiles&&e[4].mapOptions.tiles[0].endsWith(".webp")),k?S||(S=ns(),S.c(),S.m(r,null)):S&&(S.d(1),S=null),e[4]&&e[1]&&(e[15]||e[16]>=0)?_?(_.p(e,o),98322&o[0]&&Te(_,1)):(_=os(e),_.c(),Te(_,1),_.m(d.parentNode,d)):_&&(Le(),Me(_,1,1,(()=>{_=null})),Oe());const u={};!m&&64&o[0]&&(m=!0,u.aircraftTypeSelectElement=e[6],he((()=>m=!1))),p.$set(u);const f={};!h&&1&o[0]&&(h=!0,f.kmlOptions=e[0],he((()=>h=!1))),g.$set(f),e[17]?W?131072&o[0]&&Te(W,1):(W=rs(),W.c(),Te(W,1),W.m(y.parentNode,y)):W&&(Le(),Me(W,1,1,(()=>{W=null})),Oe())},i(e){b||(Te(s.$$.fragment,e),Te(E),Te(_),Te(p.$$.fragment,e),Te(g.$$.fragment,e),Te(W),b=!0)},o(e){Me(s.$$.fragment,e),Me(E),Me(_),Me(p.$$.fragment,e),Me(g.$$.fragment,e),Me(W),b=!1},d(e){e&&O(t),e&&O(o),e&&O(r),ze(s),E&&E.d(),S&&S.d(),e&&O(u),_&&_.d(e),e&&O(d),ze(p,e),e&&O(f),ze(g,e),e&&O(v),W&&W.d(e),e&&O(y),x=!1,w()}}}const is=e=>{$t.set(!1)},ls=()=>!1;function as(e,t,n){let o,r,s,i,l,a;u(e,Pt,(e=>n(29,r=e))),u(e,Et,(e=>n(14,s=e))),u(e,$t,(e=>n(15,i=e))),u(e,yt,(e=>n(16,l=e))),u(e,vt,(e=>n(17,a=e)));let{$$slots:d={},$$scope:p}=t;const m=se();let f,g,h,v,{kmlOptions:$}=t,{ofp:y}=t,b=0,x=0,w=!1,k=[];const C={};let{id:P="map"}=t;async function L(){if(y)try{n(22,k=await $r(0,g))}catch(e){n(22,k=[])}else n(22,k=[]);const e=document.querySelector(`#${P} .mapboxgl-ctrl-attrib-inner`);e&&(e.appendChild(document.createTextNode(" | ")),e.appendChild(v),e.appendChild(document.createTextNode(`${"2107".substring(0,2)}.${"2107".substring(2,4)}`)))}const O=e=>{(e=>{const{name:t,value:n}=e,o=Ke(t);if("icontext"===o)return Object.values(Xo).forEach((t=>t.changeIconText&&t.changeIconText(e)));if("linewidth"===o)return Object.values(Xo).forEach((t=>t.changeLineWidth&&t.changeLineWidth(e)));if("iconsize"===o)return Object.values(Xo).forEach((t=>t.changeIconSize&&t.changeIconSize(e)));const r=Xo[o];r&&(t.endsWith("-display")?n?r.show&&r.show(e):r.hide&&r.hide(e):t.endsWith("-pin")?r.changeMarker&&r.changeMarker(e):t.endsWith("-color")?r.changeLine&&r.changeLine(e):t.endsWith("-change")&&r.change&&r.change(e))})({map:f,mapData:g,name:e.detail.name,value:e.detail.value,ofp:y,kmlOptions:$,aircraftType:r}),m("save")};let T=!1;let M=!0;return(async()=>{const e=e=>{n(12,M=!(!e||"load"!==e.type)&&1==t.width)},t=new Image;t.onerror=e,t.onload=e,t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})(),oe((()=>{mapboxgl.accessToken="pk.eyJ1IjoiZmx5aW5nZWVrIiwiYSI6ImNrYXpmZzhuYjBpczUycW1pZzZ1b2Z4NjAifQ.5S-VzSXpJkui8NDMlTU51Q",n(4,g=fr(P,h,y,$,L)),is(),$t.reset(),n(3,f=g.map),g.geolocate.on("trackuserlocationstart",is)})),re((()=>{g.geolocate.off("trackuserlocationstart",is),n(3,f=void 0),n(4,g=void 0)})),e.$$set=e=>{"kmlOptions"in e&&n(0,$=e.kmlOptions),"ofp"in e&&n(1,y=e.ofp),"id"in e&&n(2,P=e.id),"$$scope"in e&&n(28,p=e.$$scope)},e.$$.update=()=>{4194304&e.$$.dirty[0]&&n(13,o=0===k.length)},[$,y,P,f,g,h,v,b,x,w,C,T,M,o,s,i,l,a,function(e){e.target.blur(),f&&f.remove(),n(8,x=0),n(9,w=!1),n(22,k=[]),n(7,b=0),g&&g.geolocate&&g.geolocate.off("trackuserlocationstart",is);const t=c($t);is(),n(4,g=fr(P,h,y,$,L)),n(3,f=g.map),g.geolocate.on("trackuserlocationstart",is),setTimeout((async()=>{await fe,$t.set(t)}),0)},function(e){e.target.blur(),O({detail:{value:r,name:"airport-change"}})},O,async e=>{if(T)return!1;n(11,T=!0);try{n(7,b=k.length),n(9,w=!1);try{await Ye(4e3,fetch(`./manifest.json?dummy=${Date.now()}`,{cache:"no-store"}))}catch(e){return n(11,T=!1),n(9,w=!0),!1}n(8,x=0),await async function(e,t){const n=e;let o=0,r=0;return await new Promise((e=>{const s=setInterval((async()=>{if(0===n.filter((e=>e)).length&&(clearInterval(s),e()),o>=5||r>n.length-1)return;const i=r++,l=n[i];o++;try{await fetch(l),t&&t()}catch(e){}o--,delete n[i]}),100)}))}(k,(()=>n(8,x++,x))),x>=b&&(n(10,C[h.id]=!0,C),n(10,C),n(22,k=[]),n(7,b=0))}finally{n(11,T=!1)}},k,d,function(e){h=e,n(5,h)},function(e){v=e,n(6,v)},function(e){$=e,n(0,$)},function(t){ie(e,t)},p]}class cs extends We{constructor(e){super(),Re(this,e,as,ss,l,{kmlOptions:0,ofp:1,id:2},[-1,-1])}}var us=["bottom-right","bottom-center","bottom-left","top-right","top-center","top-left","right-bottom","right-center","right-top","left-bottom","left-center","left-top"];const ds="right",ps="left",ms="top",fs="bottom";function gs(){return"undefined"!=typeof window&&"undefined"!=typeof document}const hs=(e,{top:t,bottom:n,left:o,right:r,height:s,width:i,clientWidth:l,clientHeight:a})=>{const c=t>s,u=n+s<a,d=o>i,p=r+i<l;return{top:()=>!c&&u?fs:ms,bottom:()=>c&&!u?ms:fs,left:()=>!d&&p?ds:ps,right:()=>!p&&d?ps:ds}[e]()},vs=(e,{top:t,bottom:n,left:o,right:r,height:s,width:i,clientWidth:l,clientHeight:a})=>{const c=t+(n-t)/2,u=n>s,d=t+s<a,p=c-s/2>0&&c+s/2<a,m=r>i,f=o+i<l,g={top:()=>!u&&d?fs:ms,center:()=>p?"center":g.top(),bottom:()=>!d&&u?ms:fs,left:()=>!m&&f?ds:ps,right:()=>!f&&m?ps:ds};return g[e]()},{window:$s}=_e,ys=e=>({isOpen:2048&e[0]}),bs=e=>({toggle:e[12],isOpen:e[11],open:e[13],close:e[14]}),xs=e=>({isOpen:2048&e[0]}),ws=e=>({toggle:e[12],isOpen:e[11],open:e[13],close:e[14]});function ks(e){let t,n,o;const r=e[26].content,s=d(r,e,e[25],bs);return{c(){t=M("div"),s&&s.c(),I(t,"class",n=h(`content ${e[4]||""}`)+" svelte-d6atc3")},m(n,r){L(n,t,r),s&&s.m(t,null),e[28](t),o=!0},p(e,i){s&&s.p&&33556480&i[0]&&m(s,r,e,e[25],i,ys,bs),(!o||16&i[0]&&n!==(n=h(`content ${e[4]||""}`)+" svelte-d6atc3"))&&I(t,"class",n)},i(e){o||(Te(s,e),o=!0)},o(e){Me(s,e),o=!1},d(n){n&&O(t),s&&s.d(n),e[28](null)}}}function Cs(e){let t,n,o,r,i,l,a,c,u,p;const f=e[26].parent,g=d(f,e,e[25],ws);let v=e[11]&&ks(e);return{c(){t=M("div"),n=M("div"),g&&g.c(),o=A(),r=M("div"),v&&v.c(),I(n,"class","svelte-d6atc3"),I(r,"class","content-wrapper svelte-d6atc3"),I(r,"style",i=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`),I(t,"class",l=h(`overlay ${e[10]}`)+" svelte-d6atc3"),I(t,"style",a=`z-index:${e[0]}; ${e[1]}`)},m(s,i){L(s,t,i),P(t,n),g&&g.m(n,null),e[27](n),P(t,o),P(t,r),v&&v.m(r,null),e[29](t),c=!0,u||(p=[D($s,"mousedown",e[15]),D($s,"keydown",e[16])],u=!0)},p(e,n){g&&g.p&&33556480&n[0]&&m(g,f,e,e[25],n,xs,ws),e[11]?v?(v.p(e,n),2048&n[0]&&Te(v,1)):(v=ks(e),v.c(),Te(v,1),v.m(r,null)):v&&(Le(),Me(v,1,1,(()=>{v=null})),Oe()),(!c||961&n[0]&&i!==(i=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`))&&I(r,"style",i),(!c||1024&n[0]&&l!==(l=h(`overlay ${e[10]}`)+" svelte-d6atc3"))&&I(t,"class",l),(!c||3&n[0]&&a!==(a=`z-index:${e[0]}; ${e[1]}`))&&I(t,"style",a)},i(e){c||(Te(g,e),Te(v),c=!0)},o(e){Me(g,e),Me(v),c=!1},d(n){n&&O(t),g&&g.d(n),e[27](null),v&&v.d(),e[29](null),u=!1,s(p)}}}function Ps(e,t,o){let r,s,i,l;const a=["isOpen","updateOnScroll","closeOnScroll","position","closeOnClickOutside","zIndex","onWindowKeyDown","style"];let c=g(t,a),{$$slots:u={},$$scope:d}=t;const p=se(),m=us[0];let h,v,$,{isOpen:y=!1}=t,{updateOnScroll:b=!1}=t,{closeOnScroll:x=!1}=t,{position:w=m}=t,{closeOnClickOutside:k=!1}=t,{zIndex:C=1}=t,{onWindowKeyDown:P=(()=>{})}=t,{style:L=""}=t,O=null,T=0,M=0,E=0,S=0;function A(){gs()&&(window.addEventListener("resize",R),x?window.addEventListener("scroll",I):b&&window.addEventListener("scroll",R))}function F(){gs()&&(window.removeEventListener("resize",R),window.removeEventListener("scroll",R),window.removeEventListener("scroll",I))}var _;function D(e){const t=y,n=!0===e||!1===e?e:!y;(n&&s&&i||!n)&&o(17,y=n),t!==y&&(p("toggle",y),y?(A(),p("open")):(p("close"),F()))}function j(){l||D(!0)}function I(){l&&D(!1)}function z(e){const t=e.path||e.composedPath();return t.includes(h)||t.includes(v)}async function R(){if(await fe(),!l)return;us.includes(w)||o(18,w=m);const{top:e,bottom:t,left:n,right:r,width:s,height:i}=h.getBoundingClientRect(),{height:a,width:c}=v.getBoundingClientRect(),u=((e,t)=>{const n=Math.min(document.body.clientHeight,document.documentElement.clientHeight),o=Math.min(document.body.clientWidth,document.documentElement.clientWidth);Object.assign(t,{clientWidth:o,clientHeight:n});const[r,s]=e.split("-");return`${hs(r,t)}-${vs(s,t)}`})(w,{top:e,bottom:t,left:n,right:r,height:a,width:c});O!==u&&o(4,O=u),o(6,T=e),o(7,M=n),o(8,E=s),o(9,S=i)}return oe((()=>{l&&A()})),re((()=>{gs()&&F()})),_=R,ne().$$.before_update.push(_),e.$$set=e=>{t=n(n({},t),f(e)),o(36,c=g(t,a)),"isOpen"in e&&o(17,y=e.isOpen),"updateOnScroll"in e&&o(19,b=e.updateOnScroll),"closeOnScroll"in e&&o(20,x=e.closeOnScroll),"position"in e&&o(18,w=e.position),"closeOnClickOutside"in e&&o(21,k=e.closeOnClickOutside),"zIndex"in e&&o(0,C=e.zIndex),"onWindowKeyDown"in e&&o(22,P=e.onWindowKeyDown),"style"in e&&o(1,L=e.style),"$$scope"in e&&o(25,d=e.$$scope)},e.$$.update=()=>{if(o(10,r=c.class||""),4&e.$$.dirty[0]&&o(23,s=!h||!!h.childNodes.length),8&e.$$.dirty[0]&&o(24,i=!v||!!v.childNodes.length),8388608&e.$$.dirty[0]&&!s)throw new Error("parent slot is required");if(16777216&e.$$.dirty[0]&&!i)throw new Error("content slot is required");25296896&e.$$.dirty[0]&&o(11,l=y&&s&&i)},[C,L,h,v,O,$,T,M,E,S,r,l,D,j,I,function(e){k&&l&&!z(e)&&I()},function(e){P&&l&&P(e,{isOpen:l,open:j,close:I,toggle:D,contains:z})},y,w,b,x,k,P,s,i,d,u,function(e){ae[e?"unshift":"push"]((()=>{h=e,o(2,h)}))},function(e){ae[e?"unshift":"push"]((()=>{v=e,o(3,v)}))},function(e){ae[e?"unshift":"push"]((()=>{$=e,o(5,$)}))}]}class Ls extends We{constructor(e){super(),Re(this,e,Ps,Cs,l,{isOpen:17,updateOnScroll:19,closeOnScroll:20,position:18,closeOnClickOutside:21,zIndex:0,onWindowKeyDown:22,style:1},[-1,-1])}}function Os(e){let t,o;const r=e[3].default,s=d(r,e,e[2],null);let i=[{href:e[0]},e[1]],l={};for(let e=0;e<i.length;e+=1)l=n(l,i[e]);return{c(){t=M("a"),s&&s.c(),z(t,l)},m(e,n){L(e,t,n),s&&s.m(t,null),o=!0},p(e,[n]){s&&s.p&&4&n&&m(s,r,e,e[2],n,null,null),z(t,l=function(e,t){const n={},o={},r={$$scope:1};let s=e.length;for(;s--;){const i=e[s],l=t[s];if(l){for(const e in i)e in l||(o[e]=1);for(const e in l)r[e]||(n[e]=l[e],r[e]=1);e[s]=l}else for(const e in i)r[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}(i,[(!o||1&n)&&{href:e[0]},e[1]]))},i(e){o||(Te(s,e),o=!0)},o(e){Me(s,e),o=!1},d(e){e&&O(t),s&&s.d(e)}}}function Ts(e,t,o){const r=["href"];let s=g(t,r),{$$slots:i={},$$scope:l}=t,{href:a}=t;const c=a&&!a.startsWith("#")?Object.assign({rel:"noreferrer",target:"_blank"},s):s;return e.$$set=e=>{t=n(n({},t),f(e)),o(5,s=g(t,r)),"href"in e&&o(0,a=e.href),"$$scope"in e&&o(2,l=e.$$scope)},[a,c,l,i]}class Ms extends We{constructor(e){super(),Re(this,e,Ts,Os,l,{href:0})}}function Es(t){let n;return{c(){n=M("div"),n.innerHTML='<p class="svelte-gy2syo">↻</p><p class="svelte-gy2syo">Mise à jour</p>',I(n,"class","gramet-thumbnail updating svelte-gy2syo")},m(e,t){L(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function Ss(e){let t,n;return t=new Ls({props:{position:"bottom-center",$$slots:{content:[Rs,({close:e})=>({10:e}),({close:e})=>e?1024:0],parent:[Fs,({toggle:e})=>({11:e}),({toggle:e})=>e?2048:0]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};7210&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function As(e){let t,n,o,r,l,a,c,u,d,p,m=e[2]&&Ws();return c=new Ls({props:{position:"bottom-center",style:"margin-right: 0 !important;",isOpen:e[0],$$slots:{content:[qs,({close:e})=>({10:e}),({close:e})=>e?1024:0],parent:[Ns]},$$scope:{ctx:e}}}),{c(){t=M("div"),n=E("svg"),o=E("circle"),r=A(),m&&m.c(),a=A(),je(c.$$.fragment),I(o,"cx","50"),I(o,"cy","50"),I(o,"r","50"),I(n,"id","gt-plane"),I(n,"viewBox","0 0 100 100"),I(n,"xmlns","http://www.w3.org/2000/svg"),I(n,"class","svelte-gy2syo"),I(t,"class","gramet-thumbnail svelte-gy2syo"),Z(t,"open",e[2])},m(s,i){L(s,t,i),P(t,n),P(n,o),P(t,r),m&&m.m(t,null),L(s,a,i),Ie(c,s,i),u=!0,d||(p=[$(l=Gr.call(null,t,{ofp:e[3],pos:e[4].gramet,fl:e[4].fl})),D(t,"click",e[6])],d=!0)},p(e,n){e[2]?m||(m=Ws(),m.c(),m.m(t,null)):m&&(m.d(1),m=null),l&&i(l.update)&&24&n&&l.update.call(null,{ofp:e[3],pos:e[4].gramet,fl:e[4].fl}),4&n&&Z(t,"open",e[2]);const o={};1&n&&(o.isOpen=e[0]),5120&n&&(o.$$scope={dirty:n,ctx:e}),c.$set(o)},i(e){u||(Te(c.$$.fragment,e),u=!0)},o(e){Me(c.$$.fragment,e),u=!1},d(e){e&&O(t),m&&m.d(),e&&O(a),ze(c,e),d=!1,s(p)}}}function Fs(e){let t,n,o;return{c(){t=M("button"),t.innerHTML='<svg class="gramet-error svelte-gy2syo"><use xlink:href="#info-symbol"></use></svg>',I(t,"slot","parent"),I(t,"class","btn btn-light svelte-gy2syo")},m(r,s){L(r,t,s),n||(o=D(t,"click",(function(){i(e[11])&&e[11].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&O(t),n=!1,o()}}}function _s(e){let t;return{c(){t=S("ogimet")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Ds(e){let t,n,o,r=0!==e[5].status&&zs(e);return{c(){t=M("p"),t.textContent="A certaines heures le site ogimet est saturé, il faut essayer 2 ou 3 fois en temporisant de 30 secondes à chaque essai.",n=A(),r&&r.c(),o=F()},m(e,s){L(e,t,s),L(e,n,s),r&&r.m(e,s),L(e,o,s)},p(e,t){0!==e[5].status?r?r.p(e,t):(r=zs(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(e){e&&O(t),e&&O(n),r&&r.d(e),e&&O(o)}}}function js(t){let n;return{c(){n=M("p"),n.textContent="Le serveur ogimet indique qu'il est indisponible (no grib data). Sa mise à jour débute normalement à 00:00z et c'est long..."},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function Is(e){let t,n,o,r,s,i=e[5].text+"";return{c(){t=M("p"),n=S('Erreur construction route GRAMET: Station "'),o=M("code"),r=S(i),s=S("\" non reconnue par ogimet,\n                    merci de me remonter l'information pour que je corrige l'application. Inutile de réessayer.")},m(e,i){L(e,t,i),P(t,n),P(t,o),P(o,r),P(t,s)},p(e,t){32&t&&i!==(i=e[5].text+"")&&N(r,i)},d(e){e&&O(t)}}}function zs(e){let t,n,o,r,s=(e[5].text||e[5].status)+"";return{c(){t=M("p"),n=S("Pour information, le proxy a retourné: "),o=M("code"),r=S(s)},m(e,s){L(e,t,s),P(t,n),P(t,o),P(o,r)},p(e,t){32&t&&s!==(s=(e[5].text||e[5].status)+"")&&N(r,s)},d(e){e&&O(t)}}}function Rs(e){let t,n,o,r,l,a,c,u,d,p,m,f,g,h,v,$;function y(e,t){return 409===e[5].status?Is:"no grib data"===e[5].text?js:Ds}m=new Ms({props:{href:e[3].ogimetData.url,target:"_blank",$$slots:{default:[_s]},$$scope:{ctx:e}}});let b=y(e),x=b(e);return{c(){t=M("div"),n=M("div"),o=M("h3"),r=S("😱: Erreur de récupération du Gramet"),l=M("button"),l.innerHTML='<svg class="svelte-gy2syo"><use xlink:href="#close-symbol"></use></svg>',a=A(),c=M("div"),u=M("p"),d=M("a"),d.textContent="essayez à nouveau",p=S(" ou allez sur "),je(m.$$.fragment),f=S("."),g=A(),x.c(),I(l,"type","button"),I(l,"class","close svelte-gy2syo"),I(l,"aria-label","Close"),I(o,"class","popover-header"),I(d,"href","."),I(c,"class","popover-body"),I(n,"class","popover"),I(n,"role","tooltip"),H(n,"max-width","330px"),I(t,"slot","content"),H(t,"width","330px")},m(s,y){L(s,t,y),P(t,n),P(n,o),P(o,r),P(o,l),P(n,a),P(n,c),P(c,u),P(u,d),P(u,p),Ie(m,u,null),P(u,f),P(c,g),x.m(c,null),h=!0,v||($=[D(l,"click",(function(){i(e[10])&&e[10].apply(this,arguments)})),D(d,"click",j(e[8]))],v=!0)},p(t,n){e=t;const o={};8&n&&(o.href=e[3].ogimetData.url),4096&n&&(o.$$scope={dirty:n,ctx:e}),m.$set(o),b===(b=y(e))&&x?x.p(e,n):(x.d(1),x=b(e),x&&(x.c(),x.m(c,null)))},i(e){h||(Te(m.$$.fragment,e),h=!0)},o(e){Me(m.$$.fragment,e),h=!1},d(e){e&&O(t),ze(m),x.d(),v=!1,s($)}}}function Ws(e){let t,n;return{c(){t=E("svg"),n=E("use"),R(n,"xlink:href","#close-symbol"),I(t,"class","gramet-close svelte-gy2syo")},m(e,o){L(e,t,o),P(t,n)},d(e){e&&O(t)}}}function Ns(e){let t;return{c(){t=M("div"),I(t,"slot","parent"),I(t,"class","d-none")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function qs(e){let t,n,o,r,l,a,c,u,d,p,m;return{c(){t=M("div"),n=M("div"),o=M("h3"),r=S("Nouveau GRAMET disponible"),l=M("button"),l.innerHTML='<svg class="svelte-gy2syo"><use xlink:href="#close-symbol"></use></svg>',a=A(),c=M("div"),u=M("p"),d=M("button"),d.textContent="Mettre à jour",I(l,"type","button"),I(l,"class","close svelte-gy2syo"),I(l,"aria-label","Close"),I(o,"class","popover-header"),I(d,"class","btn btn-primary"),I(u,"class","text-center"),I(c,"class","popover-body"),I(n,"class","popover"),I(n,"role","tooltip"),H(n,"left","calc(-1rem - 35px)"),H(n,"max-width","290px"),H(n,"top","20px"),I(t,"slot","content"),H(t,"width","290px")},m(s,f){L(s,t,f),P(t,n),P(n,o),P(o,r),P(o,l),P(n,a),P(n,c),P(c,u),P(u,d),p||(m=[D(l,"click",(function(){i(e[10])&&e[10].apply(this,arguments)})),D(d,"click",e[7])],p=!0)},p(t,n){e=t},d(e){e&&O(t),p=!1,s(m)}}}function Hs(e){let t,n,o,r;const s=[As,Ss,Es],i=[];function l(e,t){return"error"!==e[1]&&"reload"!==e[1]?0:"reload"!==e[1]?1:"reload"===e[1]?2:-1}return~(t=l(e))&&(n=i[t]=s[t](e)),{c(){n&&n.c(),o=F()},m(e,n){~t&&i[t].m(e,n),L(e,o,n),r=!0},p(e,[r]){let a=t;t=l(e),t===a?~t&&i[t].p(e,r):(n&&(Le(),Me(i[a],1,1,(()=>{i[a]=null})),Oe()),~t?(n=i[t],n?n.p(e,r):(n=i[t]=s[t](e),n.c()),Te(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(Te(n),r=!0)},o(e){Me(n),r=!1},d(e){~t&&i[t].d(e),e&&O(o)}}}function Us(e,t,n){let o,r,s,i,l;u(e,Hr,(e=>n(1,o=e))),u(e,vt,(e=>n(2,r=e))),u(e,bt,(e=>n(3,s=e))),u(e,Ft,(e=>n(4,i=e))),u(e,Ur,(e=>n(5,l=e)));let a=!1;const c=async()=>{v(Hr,o="reload",o),v(vt,r=!1,r),n(0,a=!1),await fe,v(Hr,o="loading",o)},d=async e=>{if("workbox-broadcast-update"===e.data.meta&&"CACHE_UPDATED"===e.data.type){const{updatedURL:t}=e.data.payload;t===s.ogimetData.proxyImg&&(r?n(0,a=!0):c())}};navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",d),re((()=>{navigator&&navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",d)}));return[a,o,r,s,i,l,()=>{"success"===o&&v(vt,r=!r,r)},c,()=>v(Hr,o="loading",o)]}class Gs extends We{constructor(e){super(),Re(this,e,Us,Hs,l,{})}}var Bs={"OFP2MAP-AURORA":{version:2,url:"https://www.icloud.com/shortcuts/53d0afcb3f11463fac59974e64236e21",description:"NOAA Aurora Forecast 30-90mn et prévisions à 3 jours."},"OFP2MAP-ETOPS":{version:2,url:"https://www.icloud.com/shortcuts/ca95c6f5ccc440689260a5910d50ef93",description:"Affiche un cartouche ETOPS actualisé."},"OFP2MAP-MENU":{version:2,url:"https://www.icloud.com/shortcuts/2db576c98d8d48d095bf751f56b54f56",description:"Menu affichant l'ensemble des plugins installés."},"OFP2MAP-PLANE FINDER":{version:2,url:"https://www.icloud.com/shortcuts/3f67e5d6f47d42d0b16fd620a4170407",description:"Recherche l'avion avec flightaware.com."},"OFP2MAP-PLUGIN":{version:2,url:"https://www.icloud.com/shortcuts/28d507b414fb45979be635cc87b2d70d",description:"Modèle pour démarrer un plugin,  permet de visualiser les données disponibles."}};const Ks=["CDG","ORY"],Zs=(e,t)=>e.longitude>=-30&&e.longitude<=40&&e.latitude>=25&&t.longitude>=-30&&t.longitude<=40&&t.latitude>=25?"MC":"LC",Vs=(e,t)=>"PAR"===e?Ks.includes(t):e===t,Js=(e,{base:t})=>{const n=e.legs[e.legs.length-1];return n&&(e.OUT=e.legs[0].OUT,e.IN=n.IN,e.TVSV=e.legs.reduce(((e,t)=>t.blockTime+e),0),Vs(t,n.destIATA)||(e.layover=n.destIATA,e.layoverTZ=n.destTZ)),e},Qs=e=>{const t={};if(!e)return t;let n,o,r,s={},i=[];try{const a=editolido.extract(e.text,"CREW PAIRING","Generated");let c,u;if(o=/TSV\s+-\s+(\d{2}):(\d{2})/u,r=o.exec(a),n=r?parseInt(r[2],10)+60*parseInt(r[1],10):0,o=/DATE\s:\s(\d+)\.(\S{3})\.(\d{4})/u,r=o.exec(a),!r)throw new Error("could not extract pairing month/year");if(u=parseInt(r[3],10),c=editolido.months3.indexOf(r[2])+1,c<=0)throw new Error("could not extract pairing month");o=new RegExp(String.raw`>\s${e.infos.depIATA}\s\(([-+.0-9]+)\)`,"u"),r=o.exec(a),t.depTZ=r?r[1]:"",o=new RegExp(String.raw`>\s${e.infos.destIATA}\s\(([-+.0-9]+)\)`,"u"),r=o.exec(a),t.destTZ=r?r[1]:"",o=/OPERATION VERSION\s(.+?)\s\d+\sNB PAX/u,r=o.exec(a),t.aircraftOpsVersion=r?r[1]:"",o=/(\d{2})\/(\d{2})\s\S+\s(\S{3})\s>\s(\S{3})\s\(([-+\d.]+)\)\s(\d{2}):(\d{2})\s(?:\d{2}:\d{2})\s(\d{2}):(\d{2})/gu;let d,p=0,m={legs:[]},f="MC",g="MC1";for(r of a.matchAll(o)){const t=parseInt(r[2],10),n=parseInt(r[1],10),o=t<c?u+1:u,s=new Date(Date.UTC(o,t-1,n,parseInt(r[6],10),parseInt(r[7],10))),a=parseInt(r[9],10)+60*parseInt(r[8],10),h=new Date(s.getTime()+6e4*a),v=r[3],$=editolido.iata2GeoPoint(v);d||(d=Ks.includes(v)?"PAR":v);const y=editolido.iata2GeoPoint(r[4]),b=Math.round($.distanceTo(y,editolido.rad_to_nm));if("LC"!==f&&"LC"===Zs($,y)&&(f="LC"),"LC"!==g){const e=(l=b)<=2100?"MC1":l<=3e3?"MC2":"LC";("LC"===e||"MC2"===e&&"MC1"===g)&&(g=e)}0!==m.legs.length&&s-m.legs[m.legs.length-1].IN>36e6&&(i.push(Js(m,{base:d})),m={legs:[]}),m.legs.push({depICAO:$.name,depIATA:v,destIATA:r[4],destICAO:y.name,destTZ:r[5],depTZ:p,OUT:s,IN:h,blockTime:a,isOFP:s.toISOString()===e.infos.ofpOUT.toISOString()}),p=r[5]}m.legs.length>0&&i.push(Js(m,{base:d})),s.baseTZ=p,s.base=d,i.length>0&&(i[0].legs[0].depTZ=p),s.flightTypePNT="MC2"===g&&((e,t,n)=>{const o=[];for(const r of n){const n=r.legs[r.legs.length-1];Vs(e,n.destIATA)||o.push(Math.abs(parseFloat(n.destTZ)-t))}return Math.max(o)})(d,parseFloat(s.baseTZ),i)>=4?"LC":g,s.flightTypePNC=f}catch(e){editolido.StringExtractException,i=[]}var l;t.pairing=s,t.pairing.duties=i;const a=i.filter((e=>e.legs.reduce(((e,t)=>t.isOFP||e),!1))).pop();if(t.scheduledTSV=n,a&&(a.TSV=n,a.legs.length>0)){const e=a.legs[a.legs.length-1];Vs(s.base,e.destIATA)||(a.layover=e.destIATA,a.layoverTZ=e.destTZ)}return t.duty=a,t};function Xs(e){let t;return{c(){t=M("p"),t.textContent="ETOPS",I(t,"class","etops svelte-umbsa6")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Ys(t){let n,o,r,s,i,l,a,c,u,d,p,m,f,g,h,v,$,y,b,x=t[1].infos.flightNo+"",w=t[1].infos.depICAO+"",k=t[1].infos.destICAO+"",C=t[1].infos.ofpTextDate+"",T=t[1].infos.ofp.includes("/")?"":"ofp: ",F=t[1].infos.ofp+"",_=t[2]<20&&Xs(),j=navigator&&navigator.share&&function(e){let t,n;return{c(){t=E("svg"),n=E("use"),R(n,"xlink:href","#share-symbol"),I(t,"class","svelte-umbsa6")},m(e,o){L(e,t,o),P(t,n)},d(e){e&&O(t)}}}();return{c(){n=M("div"),_&&_.c(),o=A(),r=M("div"),s=M("p"),i=M("b"),l=S(x),a=A(),c=S(w),u=S("-"),d=S(k),p=A(),m=M("p"),f=S(C),g=A(),h=S(T),v=S(F),$=A(),j&&j.c(),I(s,"class","svelte-umbsa6"),I(m,"class","svelte-umbsa6"),I(r,"class","details svelte-umbsa6"),I(n,"class","infos svelte-umbsa6"),Z(n,"cursor-pointer",navigator&&navigator.share)},m(e,x){L(e,n,x),_&&_.m(n,null),P(n,o),P(n,r),P(r,s),P(s,i),P(i,l),P(s,a),P(s,c),P(s,u),P(s,d),P(r,p),P(r,m),P(m,f),P(m,g),P(m,h),P(m,v),P(m,$),j&&j.m(m,null),y||(b=D(n,"click",navigator&&navigator.share?t[0]:null),y=!0)},p(e,[t]){e[2]<20?_||(_=Xs(),_.c(),_.m(n,o)):_&&(_.d(1),_=null),2&t&&x!==(x=e[1].infos.flightNo+"")&&N(l,x),2&t&&w!==(w=e[1].infos.depICAO+"")&&N(c,w),2&t&&k!==(k=e[1].infos.destICAO+"")&&N(d,k),2&t&&C!==(C=e[1].infos.ofpTextDate+"")&&N(f,C),2&t&&T!==(T=e[1].infos.ofp.includes("/")?"":"ofp: ")&&N(h,T),2&t&&F!==(F=e[1].infos.ofp+"")&&N(v,F)},i:e,o:e,d(e){e&&O(n),_&&_.d(),j&&j.d(),y=!1,b()}}}function ei(e,t,n){let o,r,s;u(e,bt,(e=>n(1,r=e))),u(e,wt,(e=>n(3,s=e)));const i=e=>{const t=[],n=e=>e.getUTCHours().toString().padStart(2,"0"),o=e=>e.getUTCMinutes().toString().padStart(2,"0");for(const r of e)if("ETOPS"===r.description)t.push(`\n**Appui**: ${r.name} ${r.runway} - Plage: **${n(r.startWindow)}${o(r.startWindow)}-${n(r.endWindow)}${o(r.endWindow)}**`);else{let e;e=r.description.startsWith("ETP")?`**${r.description}** ${r.name}`:`**${r.description.substring(0,3)}**${r.description.substring(3)}`,t.push(`\n${e} ➔ ETO: **${n(r.ETO)}:${o(r.ETO)}** | ΔFUEL: **${r.fuelMargin}**\n`)}return t},l=(e,t)=>{let n="";const o=[];for(const[r,s,,,i,l,a,c,u,d,p]of function*(e,t){if(!e||!t)return[];let n="";const o=e.infos.ralts;if(o.length>0)try{n=e.text.extract("ETOPS SUMMARY","SUMMARY-").replace(e.removePageFooterRegex,"")}catch(e){}const r=String.raw`(EEP\(\S{4}\)|ETP\S+|EXP\(\S{4}\))\s+\d{2}\.\d{2}\s+(\S+)\s+(\S+)\s+EET (\d{2})\.(\d{2}) .+? ([\d.]+)\/EFOB ([\d.]+)(?:.+?(${o.join("|")})\s(\S+).+?\sREQ\s(\d{2})(\d{2})-(\d{2})(\d{2}))?`,s=new RegExp(r,"gm"),i=new Date(t),l=t-e.infos.ofpOFF;i.setUTCHours(0,0);const a=n.matchAll(s);for(let[,e,n,o,r,s,c,u,d,p,m,f,g,h]of a){const a=editolido.dm_normalizer([n,o]),v=60*parseInt(r,10)+parseInt(s,10),$=new Date(t.getTime()+6e4*v),y=Math.round(10*(parseFloat(u)-parseFloat(c)))/10,b=void 0!==m&&void 0!==f?new Date(i.getTime()+36e5*parseInt(m,10)+6e4*parseInt(f,10)+l):void 0,x=void 0!==g&&void 0!==h?new Date(i.getTime()+36e5*parseInt(g,10)+6e4*parseInt(h,10)+l):void 0;yield[e,$,parseFloat(c),parseFloat(u),y,d,p,b,x,a,v]}}(e,t)){const t={latitude:d.latitude,longitude:d.longitude,EET:p,ETO:s,fuelMargin:i.toFixed(1)};if(r.startsWith("ETP")?(t.name=`${n}/${l}`,t.description=r):(t.name=r.substring(4,8),t.description=r.substring(0,3)),o.push(t),l){const t=e.infos.raltPoints.filter((e=>e.name===l)).pop();let r,s;t&&(r=t.latitude,s=t.longitude),o.push({name:l,description:"ETOPS",latitude:r,longitude:s,runway:a,startWindow:c,endWindow:u}),n=l}}return o},a=e=>e.timeMatrix.length>0?e.timeMatrix.map((([e,t,n])=>({name:e.name,tte:t,fl:n,latitude:e.latitude.toFixed(6),longitude:e.longitude.toFixed(6)}))):e.route.points.map((e=>({name:e.name,latitude:e.latitude.toFixed(6),longitude:e.longitude.toFixed(6)})));return e.$$.update=()=>{2&e.$$.dirty&&n(2,o=r.infos.minFuelMarginETOPS/(r.infos.tripFuel/r.infos.flightTime))},[async()=>{const e=r,t=s,n=["EEP","EXP","raltPoints","rawFPL","inFlightStart","inFlightReleased"],o=Object.fromEntries(Object.entries(e.infos).filter((([e,t])=>!n.includes(e)))),c={title:"OFP2MAP",text:JSON.stringify({...o,lidoFPL:e.lidoRoute(!1).join(" "),realOFF:t,altnETOPS:e.infos.ralts,route:a(e),...Qs(e),registration:e.infos.aircraftRegistration,ralts:e.infos.ralts,etopsOutput:i(l(e,t)),"ofp2map-takeoff":t,plugins:Bs,rawText:e.text})};try{await navigator.share(c)}catch(e){}return!1},r,o]}class ti extends We{constructor(e){super(),Re(this,e,ei,Ys,l,{shareOFP:0})}get shareOFP(){return this.$$.ctx[0]}}function ni(t){let n,o,r,i,l,a,c,u,d,p,m;return{c(){n=M("div"),o=E("svg"),r=E("use"),i=A(),l=M("label"),a=S("Heure de décollage"),c=A(),u=M("input"),R(r,"xlink:href","#takeoff-symbol"),I(o,"class","svelte-1oz2xlj"),Z(o,"show",t[2]||t[3]>=0),Z(o,"hide",!(t[2]||t[3]>=0)),I(l,"for",t[0]),I(l,"class","svelte-1oz2xlj"),I(u,"id",t[0]),I(u,"name",t[0]),I(u,"type","time"),u.value=d=t[4](t[1].getUTCHours(),t[1].getUTCMinutes()),I(u,"class","svelte-1oz2xlj"),I(n,"class","svelte-1oz2xlj")},m(e,s){L(e,n,s),P(n,o),P(o,r),P(n,i),P(n,l),P(l,a),P(n,c),P(n,u),p||(m=[D(o,"click",t[7]),$(pn.call(null,u)),D(u,"change",t[5])],p=!0)},p(e,[t]){12&t&&Z(o,"show",e[2]||e[3]>=0),12&t&&Z(o,"hide",!(e[2]||e[3]>=0)),1&t&&I(l,"for",e[0]),1&t&&I(u,"id",e[0]),1&t&&I(u,"name",e[0]),2&t&&d!==(d=e[4](e[1].getUTCHours(),e[1].getUTCMinutes()))&&(u.value=d)},i:e,o:e,d(e){e&&O(n),p=!1,s(m)}}}function oi(e,t,n){let o,r,s,i,l;u(e,wt,(e=>n(8,r=e))),u(e,bt,(e=>n(6,s=e))),u(e,$t,(e=>n(2,i=e))),u(e,yt,(e=>n(3,l=e)));let{name:a="take-off"}=t;const c=(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return e.$$set=e=>{"name"in e&&n(0,a=e.name)},e.$$.update=()=>{64&e.$$.dirty&&n(1,o=(e=>{const t=new Date(e.infos.ofpOFF.getTime());return v(wt,r=t,r),t})(s))},[a,o,i,l,c,e=>{let t,n;""==e.target.value?(n=o.getUTCHours(),t=o.getUTCMinutes(),e.target.blur(),e.target.value=c(n,t)):(n=parseFloat(e.target.value.slice(0,2)),t=parseFloat(e.target.value.slice(3)));let s=new Date(o);s.setUTCMinutes(t),s.setUTCHours(n);const i=(s.getTime()-o.getTime())/6e4;i<-720?s=new Date(s.getTime()+864e5):i>720&&(s=new Date(s.getTime()-864e5)),v(wt,r=s,r),s.toISOString()!==o.toISOString()?e.target.classList.add("changed"):e.target.classList.remove("changed")},s,()=>v($t,i=!i,i)]}class ri extends We{constructor(e){super(),Re(this,e,oi,ni,l,{name:0})}}const si=Math.PI,ii=Math.sin,li=Math.cos,ai=Math.tan,ci=Math.asin,ui=Math.acos,di=Math.atan2,pi=180/si,mi=si/180,fi=2451545,gi=e=>e.valueOf()/864e5-.5+2440588,hi=e=>(gi(e)-fi)/36525,vi=e=>((e,t)=>(e%t+t)%t)(280.46646+e*(36000.76983+3032e-7*e),360),$i=e=>357.52911+e*(35999.05029-1537e-7*e),yi=e=>vi(e)+(e=>{const t=mi*$i(e);return ii(t)*(1.914602-e*(.004817+14e-6*e))+ii(2*t)*(.019993-101e-6*e)+289e-6*ii(3*t)})(e),bi=e=>yi(e)-.00569-.00478*ii(mi*(125.04-1934.136*e)),xi=e=>(e=>23+(26+(21.448-e*(46.815+e*(59e-5-.001813*e)))/60)/60)(e)+.00256*li(mi*(125.04-1934.136*e)),wi=e=>{const t=mi*xi(e),n=mi*bi(e),o=ii(t)*ii(n);return ci(o)},ki=e=>{var t=mi*xi(e),n=mi*bi(e),o=li(t)*ii(n),r=li(n);return di(o,r)},Ci=(e,t)=>{const{longitude:n}=t,o=e.getUTCHours(),r=e.getUTCMinutes(),s=e.getUTCSeconds(),i=hi(e),l=(e=>{const t=(e=>.016708634-e*(42037e-9+1.267e-7*e))(e),n=mi*xi(e),o=mi*vi(e),r=mi*$i(e),s=Math.pow(ai(n/2),2),i=s*ii(2*o)-2*t*ii(r)+4*t*s*ii(r)*li(2*o)-.5*s*s*ii(4*o)-1.25*t*t*ii(2*r);return pi*i*4})(i)+4*n,a=wi(i);let c=(60*o+r+s/60+l)%1440/4-180;c<-180&&(c+=360);const u=t.latitude*mi;let d=ii(u)*ii(a)+li(u)*li(a)*li(mi*c);d>1?d=1:d<-1&&(d=-1);const p=ui(d);return{elevation:90-pi*p}},Pi=[[-15,"night"],[-12,"astronomical twilight"],[-6,"nautical twilight"],[-.833,"civil twilight"]],Li=new Map([["night",([e,t])=>Ti(e,t)?"astronomicalDawn":"nightStart"],["astronomical twilight",([e,t])=>Ti(e,t)?"nauticalDawn":"astronomicalDusk"],["nautical twilight",([e,t])=>Ti(e,t)?"civilDawn":"nauticalDusk"],["civil twilight",([e,t])=>Ti(e,t)?"sunrise":"civilDusk"],["day",([e,t])=>Ti(e,t)?"dayStart":"sunset"]]),Oi=Array.from(Li.keys()),Ti=(e,t)=>Oi.indexOf(t)>=Oi.indexOf(e),Mi=(e,t,n=0)=>{const o=Ci(e,t).elevation,r=1.15*Math.sqrt(100*n)/60;for(const[e,t]of Pi)if(o<=e-r)return{state:t,elevation:o};return{state:"day",elevation:o}},Ei=e=>gi(e)-fi,Si=23.4397*mi,Ai=(e,t)=>di(ii(e)*li(Si)-ai(t)*ii(Si),li(e)),Fi=(e,t)=>ci(ii(t)*li(Si)+li(t)*ii(Si)*ii(e)),_i=e=>{const t=mi*(134.963+13.064993*e),n=mi*(93.272+13.22935*e),o=mi*(218.316+13.176396*e)+6.289*mi*ii(t),r=5.128*mi*ii(n),s=385001-20905*li(t);return{ra:Ai(o,r),dec:Fi(o,r),dist:s}},Di=e=>{const t=hi(e),n={dec:wi(t),ra:ki(t)},o=_i(Ei(e)),r=149598e3,s=ui(ii(n.dec)*ii(o.dec)+li(n.dec)*li(o.dec)*li(n.ra-o.ra)),i=di(r*ii(s),o.dist-r*li(s)),l=di(li(n.dec)*ii(n.ra-o.ra),ii(n.dec)*li(o.dec)-li(n.dec)*ii(o.dec)*li(n.ra-o.ra));return{fraction:(1+li(i))/2,phase:.5+.5*i*(l<0?-1:1)/Math.PI,angle:l}},ji=function(e,t){var n=-t.longitude*mi,o=t.latitude*mi,r=Ei(e),s=_i(r),i=((e,t)=>mi*(280.16+360.9856235*e)-t)(r,n)-s.ra;return{altitude:((e,t,n)=>ci(ii(t)*ii(n)+li(t)*li(n)*li(e)))(i,o,s.dec),parallacticAngle:di(ii(i),ai(o)*li(s.dec)-ii(s.dec)*li(i))}},Ii=(e,t,n=0)=>{const o=1.15*mi*Math.sqrt(100*n)/60,r=ji(e,t).altitude;return{state:r>-.005794821282742547-o,elevation:pi*r}},zi=new Map([[!1,()=>"moonrise"],[!0,()=>"moonset"]]),Ri={name:"sun",getState:Mi,stateMap:Li},Wi={name:"moon",getState:Ii,stateMap:zi};function*Ni({prev:e,next:t,takeOffTime:n,flightTime:o,segmentLength:r,getState:s,stateMap:i,increment:l=3e4}){let a=e.state;const c=6e4*e.sum,u=6e4*t.sum;for(let d=c+l;d<=u;d+=l){let l=e.fl;d>=u&&(l=t.fl);const p=new Date(n+d);let m;const f=u-c;if(0===f)m=t.p;else{const n=(d-c)/f;m=e.p.atFraction(t.p,n,r)}const{state:g}=s(p,m,l);if(g!==a){const e=Math.round(1e3*d/o)/10,n=i.get(a)([a,g]);if(yield{position:m,type:n,date:p,fl:l,relpos:e},g===t.state)break}a=g}}const qi=()=>({[Wi.name]:[],[Ri.name]:[],route:[]}),Hi=ct([bt,wt],(([e,t])=>{if(!t||!e||0===e.timeMatrix.length)return qi();const n=t.getTime(),o=qi(),r=e.timeMatrix,s=e.distanceMatrix;let i=r.length-1;const l=6e4*r[i][1],a=[];for(const e of[Ri,Wi]){const t=[];let c=null;for(const[o,[u,d,p]]of r.entries()){let r=p;0!==o&&o!==i||(r=0);const m=new Date(n+6e4*d),f=e.getState(m,u,r).state,g={p:u,sum:d,fl:r,state:f};if(c&&f!==c.state){const r={prev:c,next:g,takeOffTime:n,flightTime:l,segmentLength:s[o][1]-s[o-1][1],getState:e.getState,stateMap:e.stateMap,increment:"sun"===e.name?3e4:6e4};for(const n of Ni(r))t.push(n),e===Ri&&a.push(n)}c=g,e===Ri&&a.push({position:u,type:f,date:m,relpos:Math.round(1e3*d*6e4/l)/10})}o[e.name]=t}return o.route=a,o}),qi()),Ui=e=>{switch(e){case 0:case 1:case 2:return"#69B34C";case 3:return"#ACB334";case 4:return"#FAB733";case 5:return"#FF8E15";case 6:return"#FF4E11";case 7:case 8:case 9:return"#FF0D0D";default:return"lightgray"}},Gi=at(),Bi=async()=>fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").then((e=>e.json())).then((e=>{try{const t=[];for(let n=e.length-1;n>=1;n--){const[o,r]=e[n],s=Date.parse(o.replace(" ","T")+"Z");t.push([s,parseFloat(r)])}Gi.set(t)}catch(e){}})).catch((function(e){})),Ki=ct([kt,wt,Gi],(([e,t,n])=>{if(!e||!t||!n)return;let o=[];const r=t.getTime(),s=e-t;const i=e.getTime()+0,l=tt(n,(e=>e[0]<=i)),a=r+0,c=tt(n,(e=>e[0]<=a));c>=0&&l>=0&&(o=n.slice(l,c+1));const u=o.map((e=>({date:new Date(e[0]-0),kp:e[1],relpos:Math.round(1e4*(e[0]-0-r)/s)/100})));return{timetable:u,get:e=>{if(e)for(let t=0;t<u.length;t++)if(e>=u[t].date)return u[t].kp;return-1}}})),Zi=ct([Hi,Ki],(([e,t])=>{if(0===e.route.length||!t)return[];const n=[];let o=[];for(const{position:r,date:s,type:i,relpos:l}of e.route){const e=t.get(s);["night","astronomicalDusk","astronomicalDawn"].includes(i)&&Math.round(Ji(r))<=e?o.push({position:r,date:s,relpos:l,predictedKp:e}):o.length>0&&(n.push(o),o=[])}o.length>0&&n.push(o);const r=[],s=3e5;for(const e of n){const t=e.length-1,n=e[0].date.getTime(),o=e[t].date.getTime(),i=1===e.length?3e5:0,l=Math.floor((n-i)/s)*s,a=Math.ceil((o+i)/s)*s,c=l/n*e[0].relpos,u=a/o*e[t].relpos;r.push({period:[new Date(l),new Date(a)],relpos:[c,u]})}return r})),Vi=[80.7,-72.7],Ji=e=>{if(e.latitude<=40)return[-90,99];const t=90-e.distanceTo(new editolido.GeoPoint(Vi),editolido.rad_to_deg);return t>66.5?0:(66.5-t)/2};function Qi(t,n,o){let r,s=e;u(t,Ki,(e=>o(0,r=e))),t.$$.on_destroy.push((()=>s()));const i=async e=>{if("workbox-broadcast-update"===e.data.meta&&"CACHE_UPDATED"===e.data.type){const{updatedURL:t}=e.data.payload;"https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"===t&&Bi()}};return oe((()=>{navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",i);const e=bt.subscribe((async()=>{await(async()=>{let e=!1;if(window.caches){const t=await window.caches.open("lido-noaa").then((e=>e.keys()));for(const n of t)if("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"===n.url){e=!0;break}}return e})()&&void 0!==r?fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").catch((()=>{})):Bi()}));return()=>{e(),navigator&&navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",i)}})),[]}class Xi extends We{constructor(e){super(),Re(this,e,Qi,null,l,{})}}function Yi(e,t,n){const o=e.slice();return o[11]=t[n].period,o[12]=t[n].relpos,o}function el(e,t,n){const o=e.slice();return o[15]=t[n].type,o[12]=t[n].relpos,o[16]=t[n].date,o[17]=t[n].position,o}function tl(e,t,n){const o=e.slice();return o[20]=t[n],o[22]=n,o}function nl(e){let t;return{c(){t=M("p"),t.textContent="Les prédictions de Kp sont indisponibles."},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function ol(e){let t,n,o,r,s=("civilDawn"===e[20].type||"civilDusk"===e[20].type)&&rl(e);return{c(){t=E("line"),s&&s.c(),r=F(),I(t,"stroke","gray"),I(t,"stroke-width","1"),I(t,"x1",n=fl(e[20].relpos)),I(t,"y1","30"),I(t,"x2",o=fl(e[20].relpos)),I(t,"y2","32")},m(e,n){L(e,t,n),s&&s.m(e,n),L(e,r,n)},p(e,i){16&i&&n!==(n=fl(e[20].relpos))&&I(t,"x1",n),16&i&&o!==(o=fl(e[20].relpos))&&I(t,"x2",o),"civilDawn"===e[20].type||"civilDusk"===e[20].type?s?s.p(e,i):(s=rl(e),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(e){e&&O(t),s&&s.d(e),e&&O(r)}}}function rl(e){let t,n,o,r;return{c(){t=E("text"),n=S(gl),I(t,"fill",o="civilDawn"===e[20].type?"#FCBF49":"#000B18"),I(t,"text-anchor","middle"),I(t,"x",r=fl(e[20].relpos)),I(t,"y","44")},m(e,o){L(e,t,o),P(t,n)},p(e,n){16&n&&o!==(o="civilDawn"===e[20].type?"#FCBF49":"#000B18")&&I(t,"fill",o),16&n&&r!==(r=fl(e[20].relpos))&&I(t,"x",r)},d(e){e&&O(t)}}}function sl(e){let t,n,o,r;return{c(){t=E("rect"),I(t,"x",n=fl(e[4].sun[e[22]-1].relpos)),I(t,"width",o=ml*(e[20].relpos-e[4].sun[e[22]-1].relpos)+"%"),I(t,"fill",r=hl(e[4].sun[e[22]-1].type)),I(t,"y","20"),I(t,"height","10px")},m(e,n){L(e,t,n)},p(e,s){16&s&&n!==(n=fl(e[4].sun[e[22]-1].relpos))&&I(t,"x",n),16&s&&o!==(o=ml*(e[20].relpos-e[4].sun[e[22]-1].relpos)+"%")&&I(t,"width",o),16&s&&r!==(r=hl(e[4].sun[e[22]-1].type))&&I(t,"fill",r)},d(e){e&&O(t)}}}function il(e){let t,n,o;return{c(){t=E("rect"),I(t,"x",fl(0)),I(t,"width",n=ml*e[20].relpos+"%"),I(t,"fill",o=hl(e[0].state)),I(t,"y","20"),I(t,"height","10px")},m(e,n){L(e,t,n)},p(e,r){16&r&&n!==(n=ml*e[20].relpos+"%")&&I(t,"width",n),1&r&&o!==(o=hl(e[0].state))&&I(t,"fill",o)},d(e){e&&O(t)}}}function ll(e){let t,n,o=["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e[20].type),r=o&&ol(e);let s=function(e,t){return 0===e[22]?il:sl}(e)(e);return{c(){r&&r.c(),t=F(),s.c(),n=F()},m(e,o){r&&r.m(e,o),L(e,t,o),s.m(e,o),L(e,n,o)},p(e,n){16&n&&(o=["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e[20].type)),o?r?r.p(e,n):(r=ol(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),s.p(e,n)},d(e){r&&r.d(e),e&&O(t),s.d(e),e&&O(n)}}}function al(e){let t,n,o,r,s,i,l,a;return{c(){t=E("line"),r=E("text"),s=S("☾"),I(t,"stroke","gray"),I(t,"stroke-width","1"),I(t,"x1",n=fl(e[12])),I(t,"y1","18"),I(t,"x2",o=fl(e[12])),I(t,"y2","20"),I(r,"fill",i="moonrise"===e[15]?"#FCBF49":"gray"),I(r,"text-anchor","middle"),I(r,"x",l=fl(e[12])),I(r,"y","16"),I(r,"transform",a=e[9](e[16],e[17],fl(e[12],e[2]),9))},m(e,n){L(e,t,n),L(e,r,n),P(r,s)},p(e,s){16&s&&n!==(n=fl(e[12]))&&I(t,"x1",n),16&s&&o!==(o=fl(e[12]))&&I(t,"x2",o),16&s&&i!==(i="moonrise"===e[15]?"#FCBF49":"gray")&&I(r,"fill",i),16&s&&l!==(l=fl(e[12]))&&I(r,"x",l),20&s&&a!==(a=e[9](e[16],e[17],fl(e[12],e[2]),9))&&I(r,"transform",a)},d(e){e&&O(t),e&&O(r)}}}function cl(e){let t,n,o,r,s,i,l,a,c,u=pl(e[11][0])+"",d=pl(e[11][1])+"";return{c(){t=E("rect"),r=E("text"),s=S(u),l=E("text"),a=S(d),I(t,"stroke","lime"),I(t,"stroke-opacity","60%"),I(t,"fill","transparent"),I(t,"stroke-width","2"),I(t,"x",n=fl(e[12][0])),I(t,"y","18"),I(t,"width",o=ml*(e[12][1]-e[12][0])+"%"),I(t,"height","14"),I(r,"fill","green"),I(r,"text-anchor","middle"),I(r,"font-size","0.7em"),I(r,"x",i=fl(e[12][0]+(e[12][1]-e[12][0])/2)),I(r,"y","15"),I(l,"fill","green"),I(l,"text-anchor","middle"),I(l,"font-size","0.7em"),I(l,"x",c=fl(e[12][0]+(e[12][1]-e[12][0])/2)),I(l,"y","42")},m(e,n){L(e,t,n),L(e,r,n),P(r,s),L(e,l,n),P(l,a)},p(e,p){32&p&&n!==(n=fl(e[12][0]))&&I(t,"x",n),32&p&&o!==(o=ml*(e[12][1]-e[12][0])+"%")&&I(t,"width",o),32&p&&u!==(u=pl(e[11][0])+"")&&N(s,u),32&p&&i!==(i=fl(e[12][0]+(e[12][1]-e[12][0])/2))&&I(r,"x",i),32&p&&d!==(d=pl(e[11][1])+"")&&N(a,d),32&p&&c!==(c=fl(e[12][0]+(e[12][1]-e[12][0])/2))&&I(l,"x",c)},d(e){e&&O(t),e&&O(r),e&&O(l)}}}function ul(e){let t;return{c(){t=M("div"),t.innerHTML='<span class="svelte-1x2hvh5">zone favorable aux aurores boréales</span>',I(t,"class","aurora-legend svelte-1x2hvh5")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function dl(t){let n,o,r,s,i,l,a,c,u,d,p,m,f,g,h,v,$=pl(t[7])+"",y=pl(t[8])+"",b=!t[3]&&nl(),x=t[4].sun,w=[];for(let e=0;e<x.length;e+=1)w[e]=ll(tl(t,x,e));let k=t[4].moon,C=[];for(let e=0;e<k.length;e+=1)C[e]=al(el(t,k,e));let _=t[5],j=[];for(let e=0;e<_.length;e+=1)j[e]=cl(Yi(t,_,e));let z=t[5].length>0&&ul();return{c(){n=M("div"),b&&b.c(),o=A(),r=M("div"),s=E("svg"),i=E("rect");for(let e=0;e<w.length;e+=1)w[e].c();a=F();for(let e=0;e<C.length;e+=1)C[e].c();c=F();for(let e=0;e<j.length;e+=1)j[e].c();u=E("circle"),p=E("text"),m=S($),f=E("text"),g=S(y),v=A(),z&&z.c(),I(i,"x",fl(0)),I(i,"width",100*ml+"%"),I(i,"fill",l=hl(t[1].state)),I(i,"y","20"),I(i,"height","10px"),I(u,"fill","#FCBF49"),I(u,"stroke","black"),I(u,"stroke-width","0.5"),I(u,"cx",d=fl(t[6])),I(u,"cy","25"),I(u,"r","2.5"),I(p,"fill","black"),I(p,"text-anchor","middle"),I(p,"x","5%"),I(p,"y","56"),I(f,"fill","black"),I(f,"text-anchor","middle"),I(f,"x","95%"),I(f,"y","56"),I(s,"width","100%"),I(s,"height","60px"),I(s,"xmlns","http://www.w3.org/2000/svg"),ge((()=>t[10].call(r)))},m(e,l){L(e,n,l),b&&b.m(n,null),P(n,o),P(n,r),P(r,s),P(s,i);for(let e=0;e<w.length;e+=1)w[e].m(s,null);P(s,a);for(let e=0;e<C.length;e+=1)C[e].m(s,null);P(s,c);for(let e=0;e<j.length;e+=1)j[e].m(s,null);P(s,u),P(s,p),P(p,m),P(s,f),P(f,g),h=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=M("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=K();let r;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=D(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{r=D(n.contentWindow,"resize",t)}),P(e,n),()=>{(o||r&&n.contentWindow)&&r(),O(n)}}(r,t[10].bind(r)),P(n,v),z&&z.m(n,null)},p(e,[t]){if(e[3]?b&&(b.d(1),b=null):b||(b=nl(),b.c(),b.m(n,o)),2&t&&l!==(l=hl(e[1].state))&&I(i,"fill",l),17&t){let n;for(x=e[4].sun,n=0;n<x.length;n+=1){const o=tl(e,x,n);w[n]?w[n].p(o,t):(w[n]=ll(o),w[n].c(),w[n].m(s,a))}for(;n<w.length;n+=1)w[n].d(1);w.length=x.length}if(532&t){let n;for(k=e[4].moon,n=0;n<k.length;n+=1){const o=el(e,k,n);C[n]?C[n].p(o,t):(C[n]=al(o),C[n].c(),C[n].m(s,c))}for(;n<C.length;n+=1)C[n].d(1);C.length=k.length}if(32&t){let n;for(_=e[5],n=0;n<_.length;n+=1){const o=Yi(e,_,n);j[n]?j[n].p(o,t):(j[n]=cl(o),j[n].c(),j[n].m(s,u))}for(;n<j.length;n+=1)j[n].d(1);j.length=_.length}64&t&&d!==(d=fl(e[6]))&&I(u,"cx",d),128&t&&$!==($=pl(e[7])+"")&&N(m,$),256&t&&y!==(y=pl(e[8])+"")&&N(g,y),e[5].length>0?z||(z=ul(),z.c(),z.m(n,null)):z&&(z.d(1),z=null)},i:e,o:e,d(e){e&&O(n),b&&b.d(),T(w,e),T(C,e),T(j,e),h(),z&&z.d()}}}const pl=(e,t=!1)=>e?t?e.toJSON().slice(11,19):e.getUTCSeconds(e)<30?e.toJSON().slice(11,16):new Date(e.getTime()+6e4).toJSON().slice(11,16):t?"--:--:--":"--:--",ml=.9,fl=(e,t)=>t?""+t*(5+ml*e)/100:5+ml*e+"%",gl="✽",hl=e=>{switch(e){case"dayStart":case"day":case"sunrise":return"#89d4ff";case"sunset":case"civil twilight":case"civilDawn":return"#2383C2";case"civilDusk":case"nautical twilight":case"nauticalDawn":return"#0052A2";case"nauticalDusk":case"astronomical twilight":case"astronomicalDawn":case"astronomicalDusk":case"night":case"nighStart":return"#000B18";default:return"red"}};function vl(e,t,n){let o,r,s,i,l,a;u(e,Ki,(e=>n(3,o=e))),u(e,Hi,(e=>n(4,r=e))),u(e,Zi,(e=>n(5,s=e))),u(e,At,(e=>n(6,i=e))),u(e,wt,(e=>n(7,l=e))),u(e,kt,(e=>n(8,a=e)));let c=364;let{departureSun:d}=t,{arrivalSun:p}=t;return e.$$set=e=>{"departureSun"in e&&n(0,d=e.departureSun),"arrivalSun"in e&&n(1,p=e.arrivalSun)},[d,p,c,o,r,s,i,l,a,(e,t,n,o)=>`rotate(${180*-(Di(e).angle-ji(e,t).parallacticAngle)/Math.PI+132}, ${n}, ${o})`,function(){c=this.clientWidth,n(2,c)}]}class $l extends We{constructor(e){super(),Re(this,e,vl,dl,l,{departureSun:0,arrivalSun:1})}}function yl(e,t,n){const o=e.slice();return o[7]=t[n].date,o[8]=t[n].kp,o[9]=t[n].relpos,o[11]=n,o}function bl(t){let n;return{c(){n=M("p"),n.textContent="Les prévisions sont disponibles de J-7 à J+2",I(n,"class","svelte-1t8wt3o")},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function xl(t){let n;return{c(){n=M("p"),n.textContent="Les prévisions de Kp sont indisponibles.",I(n,"class","svelte-1t8wt3o")},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function wl(e){let t,n,o,r,s,i,l,a=pl(e[3])+"",c=pl(e[4])+"",u=e[1],d=[];for(let t=0;t<u.length;t+=1)d[t]=Cl(yl(e,u,t));let p=0===e[5].length&&!!e[0]&&Pl();return{c(){t=E("svg");for(let e=0;e<d.length;e+=1)d[e].c();n=E("circle"),r=E("text"),s=S(a),i=E("text"),l=S(c),p&&p.c(),I(n,"fill","#FCBF49"),I(n,"stroke","black"),I(n,"stroke-width","0.5"),I(n,"cx",o=fl(e[2])),I(n,"cy","20"),I(n,"r","2.5"),I(r,"fill","black"),I(r,"text-anchor","middle"),I(r,"x","5%"),I(r,"y","49"),I(i,"fill","black"),I(i,"text-anchor","middle"),I(i,"x","95%"),I(i,"y","49"),I(t,"width","100%"),I(t,"height","53px"),I(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){L(e,t,o);for(let e=0;e<d.length;e+=1)d[e].m(t,null);P(t,n),P(t,r),P(r,s),P(t,i),P(i,l),p&&p.m(t,null)},p(e,r){if(66&r){let o;for(u=e[1],o=0;o<u.length;o+=1){const s=yl(e,u,o);d[o]?d[o].p(s,r):(d[o]=Cl(s),d[o].c(),d[o].m(t,n))}for(;o<d.length;o+=1)d[o].d(1);d.length=u.length}4&r&&o!==(o=fl(e[2]))&&I(n,"cx",o),8&r&&a!==(a=pl(e[3])+"")&&N(s,a),16&r&&c!==(c=pl(e[4])+"")&&N(l,c),0===e[5].length&&e[0]?p||(p=Pl(),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},d(e){e&&O(t),T(d,e),p&&p.d()}}}function kl(e){let t,n,o,r=pl(e[7])+"";return{c(){t=E("text"),n=S(r),I(t,"fill","gray"),I(t,"text-anchor","middle"),I(t,"font-size","0.7em"),I(t,"x",o=fl(e[9])),I(t,"y","31")},m(e,o){L(e,t,o),P(t,n)},p(e,s){2&s&&r!==(r=pl(e[7])+"")&&N(n,r),2&s&&o!==(o=fl(e[9]))&&I(t,"x",o)},d(e){e&&O(t)}}}function Cl(e){let t,n,o,r,s,i,l,a,c=e[8]+"",u=e[9]>5&&e[9]<95&&kl(e);return{c(){t=E("rect"),s=E("text"),i=S(c),u&&u.c(),a=F(),I(t,"fill",n=Ui(e[8])),I(t,"x",o=fl(e[6](e[9]))),I(t,"y","7"),I(t,"width",r=ml*(e[6](0===e[11]?100:e[1][e[11]-1].relpos-.2)-e[6](e[9]))+"%"),I(t,"height","14px"),I(s,"fill","white"),I(s,"stroke","white"),I(s,"text-anchor","middle"),I(s,"font-size","0.7em"),I(s,"x",l=fl((e[6](e[9])+e[6](0===e[11]?100:e[1][e[11]-1].relpos))/2)),I(s,"y","17")},m(e,n){L(e,t,n),L(e,s,n),P(s,i),u&&u.m(e,n),L(e,a,n)},p(e,d){2&d&&n!==(n=Ui(e[8]))&&I(t,"fill",n),2&d&&o!==(o=fl(e[6](e[9])))&&I(t,"x",o),2&d&&r!==(r=ml*(e[6](0===e[11]?100:e[1][e[11]-1].relpos-.2)-e[6](e[9]))+"%")&&I(t,"width",r),2&d&&c!==(c=e[8]+"")&&N(i,c),2&d&&l!==(l=fl((e[6](e[9])+e[6](0===e[11]?100:e[1][e[11]-1].relpos))/2))&&I(s,"x",l),e[9]>5&&e[9]<95?u?u.p(e,d):(u=kl(e),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},d(e){e&&O(t),e&&O(s),u&&u.d(e),e&&O(a)}}}function Pl(e){let t,n;return{c(){t=E("text"),n=S("aucune aurore boréale prévue sur la route"),I(t,"fill","gray"),I(t,"text-anchor","middle"),I(t,"font-size","0.8em"),I(t,"x","50%"),I(t,"y","49")},m(e,o){L(e,t,o),P(t,n)},d(e){e&&O(t)}}}function Ll(t){let n;function o(e,t){return e[1].length>0?wl:e[0]?bl:xl}let r=o(t),s=r(t);return{c(){n=M("div"),s.c()},m(e,t){L(e,n,t),s.m(n,null)},p(e,[t]){r===(r=o(e))&&s?s.p(e,t):(s.d(1),s=r(e),s&&(s.c(),s.m(n,null)))},i:e,o:e,d(e){e&&O(n),s.d()}}}function Ol(e,t,n){let o,r,s,i,l,a;u(e,Ki,(e=>n(0,r=e))),u(e,At,(e=>n(2,s=e))),u(e,wt,(e=>n(3,i=e))),u(e,kt,(e=>n(4,l=e))),u(e,Zi,(e=>n(5,a=e)));return e.$$.update=()=>{1&e.$$.dirty&&n(1,o=r?r.timetable:[])},[r,o,s,i,l,a,e=>Math.min(100,Math.max(0,e))]}class Tl extends We{constructor(e){super(),Re(this,e,Ol,Ll,l,{})}}function Ml(e){let t,n,o;const r=e[5].default,s=d(r,e,e[4],null);return{c(){t=M("div"),s&&s.c(),I(t,"class","moon svelte-1ae9xab"),I(t,"style",n=e[1]()),Z(t,"rise","moonrise"===e[0])},m(e,n){L(e,t,n),s&&s.m(t,null),o=!0},p(e,[i]){s&&s.p&&16&i&&m(s,r,e,e[4],i,null,null),(!o||2&i&&n!==(n=e[1]()))&&I(t,"style",n),1&i&&Z(t,"rise","moonrise"===e[0])},i(e){o||(Te(s,e),o=!0)},o(e){Me(s,e),o=!1},d(e){e&&O(t),s&&s.d(e)}}}const El=e=>Math.round(100*e.fraction),Sl=e=>{const t=e.phase,n=El(e);return n<=0?"Nouvelle lune":t<.5&&n<50?"Premier croissant":t<.5&&50===n?"Premier quartier":t<.5&&n<100?"Gibbeuse croissante":100===n?"Pleine Lune":t>=.5&&n>50?"Gibbeuse décroissante":t>=.5&&50===n?"Dernier quartier":"Dernier croissant"};function Al(e,t,n){let o,{$$slots:r={},$$scope:s}=t,{date:i}=t,{position:l}=t,{type:a=null}=t;return e.$$set=e=>{"date"in e&&n(2,i=e.date),"position"in e&&n(3,l=e.position),"type"in e&&n(0,a=e.type),"$$scope"in e&&n(4,s=e.$$scope)},e.$$.update=()=>{12&e.$$.dirty&&n(1,o=()=>{if(!i||!l)return 0;const e=Di(i),t=e.phase>=.5?Math.PI/2:-Math.PI/2;return`transform: rotate(${-(e.angle-ji(i,l).parallacticAngle)+t}rad);`})},[a,o,i,l,s,r]}class Fl extends We{constructor(e){super(),Re(this,e,Al,Ml,l,{date:2,position:3,type:0})}}function _l(e,t,n){const o=e.slice();return o[14]=t[n],o}function Dl(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function jl(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function Il(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function zl(t){let n,o;return{c(){n=E("rect"),o=E("rect"),I(n,"fill",hl(t[17])),I(n,"y",0+6*t[19]),I(n,"x","0"),I(n,"width","45%"),I(n,"height","5"),I(o,"fill",hl(t[12][t[12].length-1-t[19]])),I(o,"y",0+6*t[19]),I(o,"x","55%"),I(o,"width","45%"),I(o,"height","5")},m(e,t){L(e,n,t),L(e,o,t)},p:e,d(e){e&&O(n),e&&O(o)}}}function Rl(e){let t;return{c(){t=M("tr"),t.innerHTML='<td colspan="4">Aucun événement</td>'},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Wl(e){let t,n,o,r=e[10](e[4].arrival,e[5],e[7])+"";return{c(){t=M("td"),n=S("Atterrissage "),o=S(r),I(t,"colspan","4")},m(e,r){L(e,t,r),P(t,n),P(t,o)},p(e,t){176&t&&r!==(r=e[10](e[4].arrival,e[5],e[7])+"")&&N(o,r)},d(e){e&&O(t)}}}function Nl(e){let t,n,o,r=e[11](e[17].type)+"",s=e[17].type.startsWith("civil"),i=s&&Hl(e);return{c(){t=M("td"),n=S(r),o=S(" en montée\n                        "),i&&i.c(),I(t,"colspan","4")},m(e,r){L(e,t,r),P(t,n),P(t,o),i&&i.m(t,null)},p(e,o){512&o&&r!==(r=e[11](e[17].type)+"")&&N(n,r),512&o&&(s=e[17].type.startsWith("civil")),s?i?i.p(e,o):(i=Hl(e),i.c(),i.m(t,null)):i&&(i.d(1),i=null)},d(e){e&&O(t),i&&i.d()}}}function ql(e){let t,n,o,r,s,i,l,a,c,u,d,p,m,f=e[11](e[17].type)+"",g=e[17].type.startsWith("civil"),h=pl(e[17].date)+"",v=e[17].fl+"",$=g&&Ul(e);return{c(){t=M("td"),n=S(f),o=A(),$&&$.c(),r=A(),s=M("td"),l=A(),a=M("td"),c=S(h),u=A(),d=M("td"),p=S("FL"),m=S(v),I(s,"class",i="color "+e[17].type+"-color svelte-cgxttd")},m(e,i){L(e,t,i),P(t,n),P(t,o),$&&$.m(t,null),L(e,r,i),L(e,s,i),L(e,l,i),L(e,a,i),P(a,c),L(e,u,i),L(e,d,i),P(d,p),P(d,m)},p(e,o){512&o&&f!==(f=e[11](e[17].type)+"")&&N(n,f),512&o&&(g=e[17].type.startsWith("civil")),g?$?$.p(e,o):($=Ul(e),$.c(),$.m(t,null)):$&&($.d(1),$=null),512&o&&i!==(i="color "+e[17].type+"-color svelte-cgxttd")&&I(s,"class",i),512&o&&h!==(h=pl(e[17].date)+"")&&N(c,h),512&o&&v!==(v=e[17].fl+"")&&N(m,v)},d(e){e&&O(t),$&&$.d(),e&&O(r),e&&O(s),e&&O(l),e&&O(a),e&&O(u),e&&O(d)}}}function Hl(e){let t;return{c(){t=M("span"),t.textContent=`${gl}`,I(t,"class","svelte-cgxttd"),Z(t,"rise","civilDawn"===e[17].type)},m(e,n){L(e,t,n)},p(e,n){512&n&&Z(t,"rise","civilDawn"===e[17].type)},d(e){e&&O(t)}}}function Ul(e){let t;return{c(){t=M("span"),t.textContent=`${gl}`,I(t,"class","svelte-cgxttd"),Z(t,"rise","civilDawn"===e[17].type)},m(e,n){L(e,t,n)},p(e,n){512&n&&Z(t,"rise","civilDawn"===e[17].type)},d(e){e&&O(t)}}}function Gl(e){let t,n;function o(e,t){return 0!==e[17].fl?ql:0===e[19]?Nl:Wl}let r=o(e),s=r(e);return{c(){t=M("tr"),s.c(),n=A()},m(e,o){L(e,t,o),s.m(t,null),P(t,n)},p(e,i){r===(r=o(e))&&s?s.p(e,i):(s.d(1),s=r(e),s&&(s.c(),s.m(t,n)))},d(e){e&&O(t),s.d()}}}function Bl(e){let t;return{c(){t=S(e[1])},m(e,n){L(e,t,n)},p(e,n){2&n&&N(t,e[1])},d(e){e&&O(t)}}}function Kl(e){let t;return{c(){t=M("tr"),t.innerHTML='<td colspan="4">Aucun événement</td>'},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Zl(e){let t,n,o,r,s,i,l,a=e[11](e[17].type)+"",c=0===e[19]?"montée":"descente";return i=new Fl({props:{position:e[17].position,type:e[17].type,date:e[17].date,$$slots:{default:[Jl]},$$scope:{ctx:e}}}),{c(){t=M("td"),n=S(a),o=S(" en "),r=S(c),s=A(),je(i.$$.fragment),I(t,"colspan","4")},m(e,a){L(e,t,a),P(t,n),P(t,o),P(t,r),P(t,s),Ie(i,t,null),l=!0},p(e,t){(!l||512&t)&&a!==(a=e[11](e[17].type)+"")&&N(n,a);const o={};512&t&&(o.position=e[17].position),512&t&&(o.type=e[17].type),512&t&&(o.date=e[17].date),4194306&t&&(o.$$scope={dirty:t,ctx:e}),i.$set(o)},i(e){l||(Te(i.$$.fragment,e),l=!0)},o(e){Me(i.$$.fragment,e),l=!1},d(e){e&&O(t),ze(i)}}}function Vl(e){let t,n,o,r,s,i,l,a,c,u,d,p,m,f,g=e[11](e[17].type)+"",h=pl(e[17].date)+"",v=e[17].fl+"";return r=new Fl({props:{position:e[17].position,type:e[17].type,date:e[17].date,$$slots:{default:[Ql]},$$scope:{ctx:e}}}),{c(){t=M("td"),n=S(g),o=A(),je(r.$$.fragment),s=A(),i=M("td"),l=A(),a=M("td"),c=S(h),u=A(),d=M("td"),p=S("FL"),m=S(v),I(i,"class","color svelte-cgxttd")},m(e,g){L(e,t,g),P(t,n),P(t,o),Ie(r,t,null),L(e,s,g),L(e,i,g),L(e,l,g),L(e,a,g),P(a,c),L(e,u,g),L(e,d,g),P(d,p),P(d,m),f=!0},p(e,t){(!f||512&t)&&g!==(g=e[11](e[17].type)+"")&&N(n,g);const o={};512&t&&(o.position=e[17].position),512&t&&(o.type=e[17].type),512&t&&(o.date=e[17].date),4194306&t&&(o.$$scope={dirty:t,ctx:e}),r.$set(o),(!f||512&t)&&h!==(h=pl(e[17].date)+"")&&N(c,h),(!f||512&t)&&v!==(v=e[17].fl+"")&&N(m,v)},i(e){f||(Te(r.$$.fragment,e),f=!0)},o(e){Me(r.$$.fragment,e),f=!1},d(e){e&&O(t),ze(r),e&&O(s),e&&O(i),e&&O(l),e&&O(a),e&&O(u),e&&O(d)}}}function Jl(e){let t;return{c(){t=S(e[1])},m(e,n){L(e,t,n)},p(e,n){2&n&&N(t,e[1])},d(e){e&&O(t)}}}function Ql(e){let t;return{c(){t=S(e[1])},m(e,n){L(e,t,n)},p(e,n){2&n&&N(t,e[1])},d(e){e&&O(t)}}}function Xl(e){let t,n,o,r,s;const i=[Vl,Zl],l=[];function a(e,t){return 0!==e[17].fl?0:1}return n=a(e),o=l[n]=i[n](e),{c(){t=M("tr"),o.c(),r=A()},m(e,o){L(e,t,o),l[n].m(t,null),P(t,r),s=!0},p(e,s){let c=n;n=a(e),n===c?l[n].p(e,s):(Le(),Me(l[c],1,1,(()=>{l[c]=null})),Oe(),o=l[n],o?o.p(e,s):(o=l[n]=i[n](e),o.c()),Te(o,1),o.m(t,r))},i(e){s||(Te(o),s=!0)},o(e){Me(o),s=!1},d(e){e&&O(t),l[n].d()}}}function Yl(t){let n,o,r;return{c(){n=E("rect"),o=E("text"),r=S(t[14]),I(n,"stroke",Ui(t[14])),I(n,"stroke-width","1"),I(n,"fill","transparent"),I(n,"x",2+15*t[14]),I(n,"y","2"),I(n,"width","12"),I(n,"height","12"),I(o,"fill","gray"),I(o,"text-anchor","middle"),I(o,"font-size","0.7em"),I(o,"x",8+15*t[14]),I(o,"y","11.5")},m(e,t){L(e,n,t),L(e,o,t),P(o,r)},p:e,d(e){e&&O(n),e&&O(o)}}}function ea(e){let t,n,o,r,s,i,l,a,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,F,_,D,j,z,R,W,q,H,U,G,B,K,Z,V,J=Sl(e[2])+"",Q=El(e[2])+"",X=e[8]?"":"non visible";n=new $l({props:{arrivalSun:e[7],departureSun:e[0]}});let Y=e[12],ee=[];for(let t=0;t<Y.length;t+=1)ee[t]=zl(Il(e,Y,t));let te=e[9].sun.filter(ta),ne=[];for(let t=0;t<te.length;t+=1)ne[t]=Gl(jl(e,te,t));let oe=null;te.length||(oe=Rl()),w=new Fl({props:{date:e[3],position:e[6].map,$$slots:{default:[Bl]},$$scope:{ctx:e}}});let re=e[9].moon,se=[];for(let t=0;t<re.length;t+=1)se[t]=Xl(Dl(e,re,t));const ie=e=>Me(se[e],1,1,(()=>{se[e]=null}));let le=null;re.length||(le=Kl());let ae=[0,1,2,3,4,5,6,7,8,9],ce=[];for(let t=0;t<10;t+=1)ce[t]=Yl(_l(e,ae,t));return Z=new Tl({}),{c(){t=M("div"),je(n.$$.fragment),o=A(),r=M("table"),s=M("thead"),i=M("tr"),l=M("th"),l.textContent="Soleil",a=A(),c=M("th"),u=E("svg");for(let e=0;e<ee.length;e+=1)ee[e].c();d=A(),p=M("th"),p.textContent="Heure",m=A(),f=M("th"),f.textContent="FL",g=A(),h=M("tbody");for(let e=0;e<ne.length;e+=1)ne[e].c();oe&&oe.c(),v=A(),$=M("thead"),y=M("tr"),b=M("th"),x=S("Lune "),je(w.$$.fragment),k=A(),C=S(J),F=A(),_=S(Q),D=S("% "),j=S(X),z=A(),R=M("tbody");for(let e=0;e<se.length;e+=1)se[e].c();le&&le.c(),W=A(),q=M("thead"),H=M("tr"),U=M("th"),G=S("Prévisions de Kp\n                    "),B=E("svg");for(let e=0;e<10;e+=1)ce[e].c();K=A(),je(Z.$$.fragment),I(l,"scope","col"),I(l,"class","svelte-cgxttd"),I(u,"width","100%"),I(u,"height","27px"),I(u,"xmlns","http://www.w3.org/2000/svg"),I(c,"scope","col"),I(c,"class","color svelte-cgxttd"),I(p,"scope","col"),I(p,"class","svelte-cgxttd"),I(f,"scope","col"),I(f,"class","svelte-cgxttd"),I(b,"scope","col"),I(b,"colspan","4"),I(b,"class","svelte-cgxttd"),I(B,"width","150px"),I(B,"height","13px"),I(B,"xmlns","http://www.w3.org/2000/svg"),I(B,"class","svelte-cgxttd"),I(U,"scope","col"),I(U,"colspan","4"),I(U,"class","kp svelte-cgxttd"),I(r,"class","table svelte-cgxttd"),I(t,"class","popover-body")},m(e,O){L(e,t,O),Ie(n,t,null),P(t,o),P(t,r),P(r,s),P(s,i),P(i,l),P(i,a),P(i,c),P(c,u);for(let e=0;e<ee.length;e+=1)ee[e].m(u,null);P(i,d),P(i,p),P(i,m),P(i,f),P(r,g),P(r,h);for(let e=0;e<ne.length;e+=1)ne[e].m(h,null);oe&&oe.m(h,null),P(r,v),P(r,$),P($,y),P(y,b),P(b,x),Ie(w,b,null),P(b,k),P(b,C),P(b,F),P(b,_),P(b,D),P(b,j),P(r,z),P(r,R);for(let e=0;e<se.length;e+=1)se[e].m(R,null);le&&le.m(R,null),P(r,W),P(r,q),P(q,H),P(H,U),P(U,G),P(U,B);for(let e=0;e<10;e+=1)ce[e].m(B,null);P(t,K),Ie(Z,t,null),V=!0},p(e,[t]){const o={};if(128&t&&(o.arrivalSun=e[7]),1&t&&(o.departureSun=e[0]),n.$set(o),4096&t){let n;for(Y=e[12],n=0;n<Y.length;n+=1){const o=Il(e,Y,n);ee[n]?ee[n].p(o,t):(ee[n]=zl(o),ee[n].c(),ee[n].m(u,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=Y.length}if(3760&t){let n;for(te=e[9].sun.filter(ta),n=0;n<te.length;n+=1){const o=jl(e,te,n);ne[n]?ne[n].p(o,t):(ne[n]=Gl(o),ne[n].c(),ne[n].m(h,null))}for(;n<ne.length;n+=1)ne[n].d(1);ne.length=te.length,te.length?oe&&(oe.d(1),oe=null):oe||(oe=Rl(),oe.c(),oe.m(h,null))}const r={};if(8&t&&(r.date=e[3]),64&t&&(r.position=e[6].map),4194306&t&&(r.$$scope={dirty:t,ctx:e}),w.$set(r),(!V||4&t)&&J!==(J=Sl(e[2])+"")&&N(C,J),(!V||4&t)&&Q!==(Q=El(e[2])+"")&&N(_,Q),(!V||256&t)&&X!==(X=e[8]?"":"non visible")&&N(j,X),2562&t){let n;for(re=e[9].moon,n=0;n<re.length;n+=1){const o=Dl(e,re,n);se[n]?(se[n].p(o,t),Te(se[n],1)):(se[n]=Xl(o),se[n].c(),Te(se[n],1),se[n].m(R,null))}for(Le(),n=re.length;n<se.length;n+=1)ie(n);Oe(),re.length?le&&(le.d(1),le=null):le||(le=Kl(),le.c(),le.m(R,null))}if(0&t){let n;for(ae=[0,1,2,3,4,5,6,7,8,9],n=0;n<10;n+=1){const o=_l(e,ae,n);ce[n]?ce[n].p(o,t):(ce[n]=Yl(o),ce[n].c(),ce[n].m(B,null))}for(;n<10;n+=1)ce[n].d(1)}},i(e){if(!V){Te(n.$$.fragment,e),Te(w.$$.fragment,e);for(let e=0;e<re.length;e+=1)Te(se[e]);Te(Z.$$.fragment,e),V=!0}},o(e){Me(n.$$.fragment,e),Me(w.$$.fragment,e),se=se.filter(Boolean);for(let e=0;e<se.length;e+=1)Me(se[e]);Me(Z.$$.fragment,e),V=!1},d(e){e&&O(t),ze(n),T(ee,e),T(ne,e),oe&&oe.d(),ze(w),T(se,e),le&&le.d(),T(ce,e),ze(Z)}}}const ta=e=>["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e.type);function na(e,t,n){let o,r,s,i,l,a;u(e,bt,(e=>n(4,s=e))),u(e,kt,(e=>n(5,i=e))),u(e,Ft,(e=>n(6,l=e))),u(e,Hi,(e=>n(9,a=e)));let{departureSun:c}=t,{moonEmoji:d}=t,{moonIllumination:p}=t,{estimatedDate:m}=t;const f={astronomicalDawn:"Aube astronomique",astronomicalDusk:"Nuit astronomique",nauticalDawn:"Aube nautique",nauticalDusk:"Nuit nautique",civilDawn:"Aube civile",civilDusk:"Nuit civile",sunrise:"Lever du soleil",sunset:"Coucher du soleil",day:"Jour",night:"Nuit",moonrise:"Lever de lune",moonset:"Coucher de lune"},g=Oi.slice(1);return e.$$set=e=>{"departureSun"in e&&n(0,c=e.departureSun),"moonEmoji"in e&&n(1,d=e.moonEmoji),"moonIllumination"in e&&n(2,p=e.moonIllumination),"estimatedDate"in e&&n(3,m=e.estimatedDate)},e.$$.update=()=>{48&e.$$.dirty&&n(7,o=s&&i?((e,t,n)=>{const{state:o,elevation:r}=Mi(e,t,n);return{state:o,isRising:r<Ci(new Date(e.getTime()+6e5),t).elevation}})(i,s.arrival,0):""),72&e.$$.dirty&&n(8,r=l&&m?Ii(m,l.map,l.fl).state:"")},[c,d,p,m,s,i,l,o,r,a,(e,t,{state:n,isRising:o})=>e&&t?"day"===n?"de jour":"night"===n||"astronomical twilight"===n?"de nuit":"nautical twilight"===n?o?"durant l'aube nautique":"durant le crépuscule nautique":"civil twilight"===n?o?"durant l'aube civile":"durant le crépuscule civil":`#ERREUR ${n}#`:"",e=>f[e]||e,g]}class oa extends We{constructor(e){super(),Re(this,e,na,ea,l,{departureSun:0,moonEmoji:1,moonIllumination:2,estimatedDate:3})}}function ra(e,t,n){const o=e.slice();return o[17]=t[n],o}function sa(e){let t,n;return t=new Ls({props:{position:"bottom-center",isOpen:!1,$$slots:{content:[da,({close:e})=>({15:e}),({close:e})=>e?32768:0],parent:[ua,({toggle:e})=>({16:e}),({toggle:e})=>e?65536:0]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};1147389&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ia(t){let n;return{c(){n=S(t[4])},m(e,t){L(e,n,t)},p(e,t){16&t&&N(n,e[4])},i:e,o:e,d(e){e&&O(n)}}}function la(e){let t,n;return t=new Fl({props:{position:e[3].map,date:e[2],$$slots:{default:[aa]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.position=e[3].map),4&n&&(o.date=e[2]),1048704&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function aa(e){let t;return{c(){t=S(e[7])},m(e,n){L(e,t,n)},p(e,n){128&n&&N(t,e[7])},d(e){e&&O(t)}}}function ca(e){let t,n,o,r,s=e[17].type.includes("rise")?"↥":"↧",i=pl(e[17].date)+"";return{c(){t=M("p"),n=S(s),o=A(),r=S(i),I(t,"class","svelte-id4n19")},m(e,s){L(e,t,s),P(t,n),P(t,o),P(t,r)},p(e,t){64&t&&s!==(s=e[17].type.includes("rise")?"↥":"↧")&&N(n,s),64&t&&i!==(i=pl(e[17].date)+"")&&N(r,i)},d(e){e&&O(t)}}}function ua(e){let t,n,o,r,s,l,a,c,u;const d=[la,ia],p=[];function m(e,t){return"moon"===e[4]?0:1}o=m(e),r=p[o]=d[o](e);let f=e[6].slice(0,3),g=[];for(let t=0;t<f.length;t+=1)g[t]=ca(ra(e,f,t));return{c(){t=M("div"),n=M("p"),r.c(),s=A(),l=M("div");for(let e=0;e<g.length;e+=1)g[e].c();I(n,"class","icon svelte-id4n19"),I(l,"class","details svelte-id4n19"),Z(l,"two",2===e[6].length),Z(l,"three",e[6].length>=3),I(t,"slot","parent"),I(t,"class","sun svelte-id4n19"),Z(t,"aurora",e[8].length>0)},m(r,d){L(r,t,d),P(t,n),p[o].m(n,null),P(t,s),P(t,l);for(let e=0;e<g.length;e+=1)g[e].m(l,null);a=!0,c||(u=D(t,"click",(function(){i(e[16])&&e[16].apply(this,arguments)})),c=!0)},p(s,i){let a=o;if(o=m(e=s),o===a?p[o].p(e,i):(Le(),Me(p[a],1,1,(()=>{p[a]=null})),Oe(),r=p[o],r?r.p(e,i):(r=p[o]=d[o](e),r.c()),Te(r,1),r.m(n,null)),64&i){let t;for(f=e[6].slice(0,3),t=0;t<f.length;t+=1){const n=ra(e,f,t);g[t]?g[t].p(n,i):(g[t]=ca(n),g[t].c(),g[t].m(l,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=f.length}64&i&&Z(l,"two",2===e[6].length),64&i&&Z(l,"three",e[6].length>=3),256&i&&Z(t,"aurora",e[8].length>0)},i(e){a||(Te(r),a=!0)},o(e){Me(r),a=!1},d(e){e&&O(t),p[o].d(),T(g,e),c=!1,u()}}}function da(e){let t,n,o,r,s,l,a,c,u,d;return l=new oa({props:{departureSun:e[0],moonEmoji:e[7],estimatedDate:e[2],moonIllumination:e[5]}}),{c(){t=M("div"),n=M("h3"),o=S("Éphémérides du vol"),r=M("button"),r.innerHTML='<svg class="svelte-id4n19"><use xlink:href="#close-symbol"></use></svg>',s=A(),je(l.$$.fragment),I(r,"type","button"),I(r,"class","close"),I(r,"aria-label","Close"),I(n,"class","popover-header"),I(t,"slot","content"),H(t,"width","390px"),H(t,"max-width","390px"),H(t,"position","static"),I(t,"class","popover")},m(a,p){L(a,t,p),P(t,n),P(n,o),P(n,r),P(t,s),Ie(l,t,null),c=!0,u||(d=D(r,"click",(function(){i(e[15])&&e[15].apply(this,arguments)})),u=!0)},p(t,n){e=t;const o={};1&n&&(o.departureSun=e[0]),128&n&&(o.moonEmoji=e[7]),4&n&&(o.estimatedDate=e[2]),32&n&&(o.moonIllumination=e[5]),l.$set(o)},i(e){c||(Te(l.$$.fragment,e),a||ge((()=>{a=Se(t,st,{duration:200}),a.start()})),c=!0)},o(e){Me(l.$$.fragment,e),c=!1},d(e){e&&O(t),ze(l),u=!1,d()}}}function pa(e){let t,n,o,r;t=new Xi({});let s=e[1]&&e[1].timeMatrix.length>0&&sa(e);return{c(){je(t.$$.fragment),n=A(),s&&s.c(),o=F()},m(e,i){Ie(t,e,i),L(e,n,i),s&&s.m(e,i),L(e,o,i),r=!0},p(e,[t]){e[1]&&e[1].timeMatrix.length>0?s?(s.p(e,t),2&t&&Te(s,1)):(s=sa(e),s.c(),Te(s,1),s.m(o.parentNode,o)):s&&(Le(),Me(s,1,1,(()=>{s=null})),Oe())},i(e){r||(Te(t.$$.fragment,e),Te(s),r=!0)},o(e){Me(t.$$.fragment,e),Me(s),r=!1},d(e){ze(t,e),e&&O(n),s&&s.d(e),e&&O(o)}}}function ma(e,t,n){let o,r,s,i,l,a,c,d,p,m,f,g,h,v;u(e,bt,(e=>n(1,m=e))),u(e,wt,(e=>n(9,f=e))),u(e,Ft,(e=>n(3,g=e))),u(e,Hi,(e=>n(12,h=e))),u(e,Zi,(e=>n(8,v=e)));return e.$$.update=()=>{514&e.$$.dirty&&n(0,o=m&&f?Ri.getState(f,m.departure,0):""),514&e.$$.dirty&&n(10,r=m&&f?Wi.getState(f,m.departure,0):""),522&e.$$.dirty&&n(2,s=f&&g?new Date(f.getTime()+6e4*g.reltime):f||m.infos.ofpOFF),4096&e.$$.dirty&&n(11,i=h.sun.filter((e=>["sunrise","sunset"].includes(e.type)))),5120&e.$$.dirty&&n(13,l=h.moon.length>0||r.state),10241&e.$$.dirty&&n(4,a=i.length>0?"☀️":((e,t)=>"day"===e.state?"☀️":t?"moon":"🔭")(o,l)),6160&e.$$.dirty&&n(6,c="☀️"===a?i:"moon"===a?h.moon:[]),4&e.$$.dirty&&n(5,d=s?Di(s):{}),32&e.$$.dirty&&n(7,p=(e=>{const t=e.phase,n=e.fraction;return t&&n?n<=.02?"🌑":t<.5&&n<=.34?"🌒":t<.5&&n<=.65?"🌓":t<.5&&n<.97?"🌔":n>=.97?"🌕":t>=.5&&n>.65?"🌖":t>=.5&&n>.34?"🌗":"🌘":"☽"})(d))},[o,m,s,g,a,d,c,p,v,f,r,i,h,l]}class fa extends We{constructor(e){super(),Re(this,e,ma,pa,l,{})}}function ga(e){let t,n,o,r,s,i;t=new ti({}),o=new ri({});let l="/map"===e[2]&&ha();return{c(){je(t.$$.fragment),n=A(),je(o.$$.fragment),r=A(),l&&l.c(),s=F()},m(e,a){Ie(t,e,a),L(e,n,a),Ie(o,e,a),L(e,r,a),l&&l.m(e,a),L(e,s,a),i=!0},p(e,t){"/map"===e[2]?l?4&t&&Te(l,1):(l=ha(),l.c(),Te(l,1),l.m(s.parentNode,s)):l&&(Le(),Me(l,1,1,(()=>{l=null})),Oe())},i(e){i||(Te(t.$$.fragment,e),Te(o.$$.fragment,e),Te(l),i=!0)},o(e){Me(t.$$.fragment,e),Me(o.$$.fragment,e),Me(l),i=!1},d(e){ze(t,e),e&&O(n),ze(o,e),e&&O(r),l&&l.d(e),e&&O(s)}}}function ha(e){let t,n,o;return t=new Gs({}),n=new fa({}),{c(){je(t.$$.fragment),je(n.$$.fragment)},m(e,r){Ie(t,e,r),Ie(n,e,r),o=!0},i(e){o||(Te(t.$$.fragment,e),Te(n.$$.fragment,e),o=!0)},o(e){Me(t.$$.fragment,e),Me(n.$$.fragment,e),o=!1},d(e){ze(t,e),ze(n,e)}}}function va(e){let t,n,o,r;return{c(){t=M("li"),n=M("a"),n.innerHTML='<span class="svelte-113ykdq">CARTE</span>',I(n,"class","nav-link"),I(n,"href","#/map"),I(t,"class","nav-item svelte-113ykdq"),Z(t,"active","/map"===e[2])},m(s,i){L(s,t,i),P(t,n),o||(r=D(n,"click",e[4]),o=!0)},p(e,n){4&n&&Z(t,"active","/map"===e[2])},d(e){e&&O(t),o=!1,r()}}}function $a(e){let t,n,o,r;return{c(){t=M("li"),n=M("a"),n.innerHTML='<span class="svelte-113ykdq">EXPORT</span>',I(n,"class","nav-link"),I(n,"href","#/export"),I(t,"class","nav-item svelte-113ykdq"),Z(t,"active","/export"===e[2])},m(s,i){L(s,t,i),P(t,n),o||(r=D(n,"click",e[4]),o=!0)},p(e,n){4&n&&Z(t,"active","/export"===e[2])},d(e){e&&O(t),o=!1,r()}}}function ya(e){let t,n,o,r,i,l,a,c,u,p,f,g,h,v,$,y,b,x,w,k,C;const T=e[6].default,S=d(T,e,e[5],null);let F=e[1]&&ga(e),_=(e[1]||e[3]||"/map"===e[2])&&va(e),j=(e[1]||"/export"===e[2])&&$a(e);return{c(){t=M("nav"),n=M("input"),o=A(),S&&S.c(),r=A(),F&&F.c(),i=A(),l=M("label"),l.innerHTML='<span class="navbar-toggler-icon"></span>',a=A(),c=M("ul"),u=M("li"),p=M("a"),f=M("strong"),f.textContent="OFP2MAP ",g=E("svg"),h=E("use"),v=A(),_&&_.c(),$=A(),j&&j.c(),y=A(),b=M("li"),x=M("a"),x.innerHTML='<span class="svelte-113ykdq">AIDE</span>',I(n,"type","checkbox"),I(n,"id","menu"),I(n,"class","svelte-113ykdq"),I(l,"class","navbar-toggler"),I(l,"for","menu"),I(f,"class","d-none"),R(h,"xlink:href","#home-symbol"),I(g,"class","svelte-113ykdq"),I(p,"class","nav-link"),I(p,"href","#/"),I(u,"class","nav-item svelte-113ykdq"),Z(u,"active","/"===e[2]),I(x,"class","nav-link"),I(x,"href","#/help"),I(b,"class","nav-item svelte-113ykdq"),Z(b,"active","/help"===e[2]),I(c,"class","navbar-nav collapse navbar-collapse svelte-113ykdq"),I(c,"id","navbarToggler"),I(t,"class","navbar navbar-expand-md navbar-light svelte-113ykdq")},m(s,d){L(s,t,d),P(t,n),e[7](n),P(t,o),S&&S.m(t,null),P(t,r),F&&F.m(t,null),P(t,i),P(t,l),P(t,a),P(t,c),P(c,u),P(u,p),P(p,f),P(p,g),P(g,h),P(c,v),_&&_.m(c,null),P(c,$),j&&j.m(c,null),P(c,y),P(c,b),P(b,x),w=!0,k||(C=[D(p,"click",e[4]),D(x,"click",e[4])],k=!0)},p(e,[n]){S&&S.p&&32&n&&m(S,T,e,e[5],n,null,null),e[1]?F?(F.p(e,n),2&n&&Te(F,1)):(F=ga(e),F.c(),Te(F,1),F.m(t,i)):F&&(Le(),Me(F,1,1,(()=>{F=null})),Oe()),4&n&&Z(u,"active","/"===e[2]),e[1]||e[3]||"/map"===e[2]?_?_.p(e,n):(_=va(e),_.c(),_.m(c,$)):_&&(_.d(1),_=null),e[1]||"/export"===e[2]?j?j.p(e,n):(j=$a(e),j.c(),j.m(c,y)):j&&(j.d(1),j=null),4&n&&Z(b,"active","/help"===e[2])},i(e){w||(Te(S,e),Te(F),w=!0)},o(e){Me(S,e),Me(F),w=!1},d(n){n&&O(t),e[7](null),S&&S.d(n),F&&F.d(),_&&_.d(),j&&j.d(),k=!1,s(C)}}}function ba(e,t,n){let o,r,s;u(e,bt,(e=>n(1,o=e))),u(e,St,(e=>n(2,r=e))),u(e,Pt,(e=>n(3,s=e)));let i,{$$slots:l={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&n(5,a=e.$$scope)},[i,o,r,s,()=>n(0,i.checked=!1,i),a,l,function(e){ae[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class xa extends We{constructor(e){super(),Re(this,e,ba,ya,l,{})}}function wa(e,t,n){const o=e.slice();return o[18]=t[n],o}function ka(t){let n,o,r,s,i;return{c(){n=M("label"),o=S("Changer"),r=M("input"),I(r,"id",Ea),I(r,"name",Ea),I(r,"type","file"),I(r,"accept","application/pdf"),r.hidden=!0,I(n,"class","btn btn-outline-secondary btn-sm svelte-vs1fb2")},m(e,l){L(e,n,l),P(n,o),P(n,r),s||(i=D(r,"change",t[6]),s=!0)},p:e,d(e){e&&O(n),s=!1,i()}}}function Ca(e){let t,n,o,r,i,l,a;return{c(){t=M("div"),n=M("input"),o=A(),r=M("label"),i=S(e[1]),I(n,"id",Ea),I(n,"name",Ea),I(n,"type","file"),I(n,"accept","application/pdf"),n.disabled=e[0],I(n,"class","custom-file-input svelte-vs1fb2"),I(r,"class","custom-file-label text-truncate svelte-vs1fb2"),I(r,"for",Ea),Z(r,"ready",e[2]),I(t,"class","custom-file svelte-vs1fb2"),Z(t,"blink",!e[3])},m(s,c){L(s,t,c),P(t,n),P(t,o),P(t,r),P(r,i),l||(a=[D(n,"change",e[6]),D(n,"click",e[5],{once:!0})],l=!0)},p(e,o){1&o&&(n.disabled=e[0]),2&o&&N(i,e[1]),4&o&&Z(r,"ready",e[2]),8&o&&Z(t,"blink",!e[3])},d(e){e&&O(t),l=!1,s(a)}}}function Pa(e){let t,n,o,r,i,l,a=ut.filter(e[10]),c=[];for(let t=0;t<a.length;t+=1)c[t]=La(wa(e,a,t));return{c(){t=M("div"),n=M("select"),o=M("option"),r=S("pas d'ofp ?");for(let e=0;e<c.length;e+=1)c[e].c();o.__value=void 0,o.value=o.__value,I(n,"class","form-control-sm svelte-vs1fb2"),n.disabled=e[0],I(t,"class","footer svelte-vs1fb2")},m(s,a){L(s,t,a),P(t,n),P(n,o),P(o,r);for(let e=0;e<c.length;e+=1)c[e].m(n,null);i||(l=[D(n,"click",e[5],{once:!0}),D(n,"change",e[7])],i=!0)},p(e,t){if(0&t){let o;for(a=ut.filter(e[10]),o=0;o<a.length;o+=1){const r=wa(e,a,o);c[o]?c[o].p(r,t):(c[o]=La(r),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=a.length}1&t&&(n.disabled=e[0])},d(e){e&&O(t),T(c,e),i=!1,s(l)}}}function La(t){let n,o,r=t[18]+"";return{c(){n=M("option"),o=S(r),n.__value=t[18],n.value=n.__value},m(e,t){L(e,n,t),P(n,o)},p:e,d(e){e&&O(n)}}}function Oa(t){let n,o,r,s;function i(e,t){return e[3]?ka:Ca}let l=i(t),a=l(t),c=!t[3]&&!t[4]&&Pa(t);return{c(){n=M("form"),a.c(),o=A(),c&&c.c(),I(n,"class","form-inline")},m(e,i){L(e,n,i),a.m(n,null),P(n,o),c&&c.m(n,null),r||(s=D(n,"submit",j(t[9])),r=!0)},p(e,[t]){l===(l=i(e))&&a?a.p(e,t):(a.d(1),a=l(e),a&&(a.c(),a.m(n,o))),e[3]||e[4]?c&&(c.d(1),c=null):c?c.p(e,t):(c=Pa(e),c.c(),c.m(n,null))},i:e,o:e,d(e){e&&O(n),a.d(),c&&c.d(),r=!1,s()}}}const Ta=[{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.min.js"},{type:"script",url:"./js/lidojs.1.6.7.min.js"},{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.min.js"},{type:"script",url:"./js/wmo.1.6.7.var.js"},{type:"script",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.js"},{type:"script",url:"https://unpkg.com/pinch-zoom-element-js@1.1.2/dist/pinch-zoom-min.js"},{type:"link",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.css"}],Ma=async(e,t)=>{const n=await e.getPage(t);return(await n.getTextContent()).items.map((e=>e.str)).join(1===t?" ":"")};let Ea="file";function Sa(e,t,n){let o,r,s,i,l;u(e,vt,(e=>n(12,o=e))),u(e,xt,(e=>n(13,r=e))),u(e,wt,(e=>n(14,s=e))),u(e,bt,(e=>n(3,i=e))),u(e,Ct,(e=>n(4,l=e)));let a,{kmlOptions:c}=t,d=!1,p=new Ne,m="Choisir un OFP",f=!1;const g=se();function h(){!function(e,t,n){let o=e.length;function r(){o=--o,o<1&&n()}t()?n():e.forEach((({type:e,url:t,options:n={async:!0,defer:!0}})=>{const s="script"===e,i=document.createElement(s?"script":"link");(t.startsWith("http")||t.startsWith("//"))&&(i.crossOrigin="anonymous");let l=!0;s?(i.src=t,i.async=n.async,i.defer=n.defer):(i.href=t,"prefetch"in n?(i.rel="prefetch",o-=1,l=!1):"preload"in n?(i.rel="preload",o-=1,l=!1):(i.rel="stylesheet",o-=1,l=!1)),l&&(i.onload=r),document.body.appendChild(i)}))}(Ta,(()=>!!window["pdfjs-dist/build/pdf"]),(()=>{const e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.worker.min.js",a&&!a.destroyed||(a=new e.PDFWorker),p.resolve(!0),n(2,f=!0)}))}const $=e=>{const t=new FileReader;return new Promise(((n,o)=>{t.onload=e=>{if(!a||a.destroyed){const e=window["pdfjs-dist/build/pdf"];a=new e.PDFWorker}(async e=>{const t=window["pdfjs-dist/build/pdf"],n=[];let o=0;const r=await t.getDocument(e).promise,s=r.numPages;for(let e=1;e<=s;e+=1){const t=await Ma(r,e);if(t.includes("(Long copy #1)"))n.push(t),o+=1;else{if(0!==o)break;(t.includes("FPL SUMMARY")||t.includes("CREW PAIRING"))&&n.push(t)}}return n.join("\n")})({data:e.target.result,verbosity:0,worker:a}).then((e=>{if(e)try{const t=new editolido.Ofp("_PDFJS_"+e),r=new editolido.GeoGridIndex;r.data=window.WMO;const s=editolido.ogimetData(t,r);s.proxyImg=`https://ofp2map-gramet.vercel.app/api/${s.proxy}__${s.route.name.replace(/[^a-z0-9\-_]/giu,"_")}.png`,s.route.description=s.wmo.join(" "),t.ogimetData=s;let i=0,l=t.infos.averageFL;const a=t.route.segments.map((([e,t])=>(i+=e.distanceTo(t),[t,i,l])));a.unshift([t.route.points[0],0]),t.distanceMatrix=a;let u=[];try{u=t.wptNamesEET(t.route.points)}catch(e){}0===u.length?document.body.style.setProperty("--plane-halo-color","red"):document.body.style.setProperty("--plane-halo-color","var(--plane-color)"),t.timeMatrix=u,t.departure=t.route.points[0],t.arrival=t.route.points[t.route.points.length-1];try{Ut(),function(e,t){let n={...qt,...t};const o=Ut();Ht(o,n);const r=e.description;if(o.setName(r),!e)return;const s=`${e.infos.depICAO}-${e.infos.destICAO}`,i=new editolido.Route(e.wptCoordinates(),{name:s,description:r}),l=new editolido.Route(e.wptCoordinatesAlternate(),{name:"Route Dégagement"}),a=new editolido.Route([i.points[0],i.points[i.points.length-1]]).split(300,{name:`Ortho ${s}`});let c=[];for(let t of e.tracks){let e=t.isComplete?"rnat":"rnat_incomplete";o.addLine(e,t);let n=new editolido.GeoPoint(t.points[0],{name:t.name,description:t.description});o.addPoint(e,n),t.isMine&&(c.push(n),n=new editolido.GeoPoint(t.points[t.points.length-1],{name:t.name,description:t.description}),c.push(n),o.addPoint(e,n))}o.addLine("greatcircle",a),o.addLine("rmain",i),o.addPoints("rmain",i,{excluded:c}),o.addLine("ralt",l),o.addPoints("ralt",l)}(t,c),n(t)}catch(e){o(e)}}catch(e){o(e)}else o(Error("OFP non reconnu. Attention il y a 2 OFP dans PilotMission, il faut bien choisir celui nommé « Dossier de vol OFP »."))}),(e=>{o(e)}))},t.onerror=e=>{o(Error("Fichier illisible !"))},t.readAsArrayBuffer(e)}))};return e.$$set=e=>{"kmlOptions"in e&&n(8,c=e.kmlOptions)},[d,m,f,i,l,h,async function(e){n(0,d=!0),v(vt,o=!1,o),h(),await p.promise.then((()=>{const t=e.target.files[0],o=e.target.closest("form");t&&(v(xt,r="loading",r),v(wt,s=void 0,s),n(1,m=e.target.value.split(/([\\/])/g).pop()),g("change",m),window.location.hash="#/map",$(t).then((t=>{v(bt,i=t,i),v(Ct,l=void 0,l),v(xt,r="success",r),o.blur(),e.target.blur()})).catch((e=>{v(xt,r=e,r),v(bt,i=void 0,i)})).finally((()=>{o.reset()})))})),n(0,d=!1)},async function(e){n(0,d=!0),v(xt,r="loading",r),h(),await p.promise.then((()=>{v(bt,i=void 0,i);try{Ut(),v(Ct,l=e.target.value,l),v(xt,r="success",r)}catch(e){v(xt,r=e,r)}window.location.hash="#/map"})),n(0,d=!1)},c,function(t){ie(e,t)},e=>!dt.includes(e)]}class Aa extends We{constructor(e){super(),Re(this,e,Sa,Oa,l,{kmlOptions:8})}}function Fa(e){let t,n,o,r;const s=e[4].default,i=d(s,e,e[3],null);return{c(){t=M("page"),i&&i.c(),I(t,"style",n=e[1]?`max-width: ${e[1]}; align-self: center;`:""),I(t,"class","svelte-1de5e3b"),Z(t,"fadein",!1===e[0]),Z(t,"d-none",!0===e[0])},m(e,n){L(e,t,n),i&&i.m(t,null),r=!0},p(e,[o]){i&&i.p&&8&o&&m(i,s,e,e[3],o,null,null),(!r||2&o&&n!==(n=e[1]?`max-width: ${e[1]}; align-self: center;`:""))&&I(t,"style",n),1&o&&Z(t,"fadein",!1===e[0]),1&o&&Z(t,"d-none",!0===e[0])},i(n){r||(Te(i,n),o||ge((()=>{o=Se(t,e[2],{}),o.start()})),r=!0)},o(e){Me(i,e),r=!1},d(e){e&&O(t),i&&i.d(e)}}}function _a(e,t,n){let{$$slots:o={},$$scope:r}=t,{hidden:s}=t,{maxWidth:i}=t;return e.$$set=e=>{"hidden"in e&&n(0,s=e.hidden),"maxWidth"in e&&n(1,i=e.maxWidth),"$$scope"in e&&n(3,r=e.$$scope)},[s,i,(e,t,n)=>{if(void 0===s)return ot(e,t)},r,o]}class Da extends We{constructor(e){super(),Re(this,e,_a,Fa,l,{hidden:0,maxWidth:1})}}function ja(e,t,n){const o=e.slice();return o[3]=t[n][0],o[4]=t[n][1].url,o[5]=t[n][1].description,o}function Ia(t){let n,o;return{c(){n=S(t[1]),o=S(".com")},m(e,t){L(e,n,t),L(e,o,t)},p:e,d(e){e&&O(n),e&&O(o)}}}function za(e){let t;return{c(){t=S("ce lien")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Ra(e){let t;return{c(){t=S("ogimet.com")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Wa(e){let t;return{c(){t=S("Guide d'interprétation")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Na(t){let n,o=t[3]+"";return{c(){n=S(o)},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function qa(e){let t,n,o,r,s,i,l=e[5]+"";return n=new Ms({props:{href:e[4],$$slots:{default:[Na]},$$scope:{ctx:e}}}),{c(){t=M("li"),je(n.$$.fragment),o=A(),r=S(l),s=A()},m(e,l){L(e,t,l),Ie(n,t,null),P(t,o),P(t,r),P(t,s),i=!0},p(e,t){const o={};256&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){i||(Te(n.$$.fragment,e),i=!0)},o(e){Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),ze(n)}}}function Ha(e){let t;return{c(){t=S("liste des commits")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Ua(e){let t;return{c(){t=S("Equal Earth")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Ga(t){let n,o;return{c(){n=S(t[1]),o=S(".com")},m(e,t){L(e,n,t),L(e,o,t)},p:e,d(e){e&&O(n),e&&O(o)}}}function Ba(e){let t;return{c(){t=S("l'app")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Ka(e){let t;return{c(){t=S("le proxy")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Za(e){let t;return{c(){t=M("span"),t.innerHTML="Fly<span>Tax</span>",I(t,"class","flytax")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Va(e){let t,n,o,r,s,i,l,a,c,u,d,p,m,f,g,h,v,$,y,b,x,w,k,C,E,F,_,D,j,z,R,W,N,q,H,U,G,B,K,Z,V,J,Q,X,Y,ee,te,ne,oe,re,se,ie,le,ae,ce,ue,de,pe,me,fe,ge,he,ve,$e,ye,be,xe,we,ke,Ce,Pe,Ee,Se,Ae,Fe,_e,De,Re,We,Ne,qe,He,Ue,Ge,Be,Ke,Ze,Ve,Je,Qe,Xe,Ye,et,tt,nt,ot,rt,st,it,lt,at,ct,ut,dt,pt,mt,ft,gt,ht,vt,$t,yt,bt,xt,wt,kt,Ct,Pt,Lt,Ot,Tt,Mt,Et,St,At,Ft,_t,Dt,jt,It,zt,Rt,Wt,Nt,qt,Ht,Ut,Gt,Bt,Kt,Zt,Vt,Jt,Qt,Xt,Yt,en,tn,nn,on,rn,sn,ln,an,cn,un,dn,pn,mn,fn,gn,hn,vn,$n,yn,bn,xn,wn,kn,Cn=window.atob("VmluY2VudCBCb3NzeQ==")+"";R=new Ms({props:{href:`https://www.${e[1].toLowerCase()}.com`,$$slots:{default:[Ia]},$$scope:{ctx:e}}});let Pn=!0!==navigator.standalone&&function(e){let t,n,o,r;return n=new Ms({props:{href:"http://flyingeek.github.io/lido-online/index.html",$$slots:{default:[za]},$$scope:{ctx:e}}}),{c(){t=S("Pour mémoire, dans un navigateur, il suffit de partager l'url ou "),je(n.$$.fragment),o=S(".")},m(e,s){L(e,t,s),Ie(n,e,s),L(e,o,s),r=!0},i(e){r||(Te(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),ze(n,e),e&&O(o)}}}(e);me=new Ms({props:{href:e[0],$$slots:{default:[Ra]},$$scope:{ctx:e}}}),be=new Ms({props:{href:"http://www.ogimet.com/guia_gramet.phtml.en",$$slots:{default:[Wa]},$$scope:{ctx:e}}});let Ln=Object.entries(Bs),On=[];for(let t=0;t<Ln.length;t+=1)On[t]=qa(ja(e,Ln,t));const Tn=e=>Me(On[e],1,1,(()=>{On[e]=null}));return _t=new Ms({props:{href:"https://github.com/flyingeek/lido-online/commits/master",$$slots:{default:[Ha]},$$scope:{ctx:e}}}),Ut=new Ms({props:{href:"https://equal-earth.com/physical/",$$slots:{default:[Ua]},$$scope:{ctx:e}}}),Jt=new Ms({props:{href:`https://www.${e[1].toLowerCase()}.com`,$$slots:{default:[Ga]},$$scope:{ctx:e}}}),cn=new Ms({props:{href:"https://github.com/flyingeek/lido-online",$$slots:{default:[Ba]},$$scope:{ctx:e}}}),dn=new Ms({props:{href:"https://github.com/flyingeek/ofp2map-gramet",$$slots:{default:[Ka]},$$scope:{ctx:e}}}),xn=new Ms({props:{href:"https://flyingeek.github.io/flytax/",rel:"noopener",$$slots:{default:[Za]},$$scope:{ctx:e}}}),{c(){t=M("h2"),t.textContent="Préambule",n=A(),o=M("p"),o.textContent="OFP2MAP est une application PWA (ou Web Application), elle peut être lancée soit depuis un navigateur, soit depuis l'écran d'accueil de l'iPad. Initialement, simple convertisseur de l'OFP en KML, OFP2MAP est devenu une vraie application de cartographie. OFP2MAP nécessite des navigateurs récents pour fonctionner. Safari 14 iOS/Mac est compatible, Chrome 83 fonctionne aussi.",r=A(),s=M("p"),s.textContent="L'OFP ne transite sur aucun serveur, seule une route calculée (basée sur au plus 21 stations météo) est transmise à l'hébergeur du proxy (voir plus bas) puis à Ogimet.com pour récupérer le Gramet. L'app ne collecte aucune donnée.",i=A(),l=M("h2"),l.textContent="Utilisation",a=A(),c=M("ol"),u=M("li"),u.innerHTML="<p>Dans Pilot Mission, onglet «Dossier de vol», affichez le PDF nommé &quot;Dossier de vol OFP&quot;. Sur la gauche, cliquez sur le carré avec une flèche vers le haut. Choisissez «Enregistrer dans Fichiers». Dans l&#39;app, c&#39;est cet OFP qu&#39;il faut ensuite sélectionner.</p>",d=A(),p=M("li"),m=M("p"),m.textContent=`La carte par défaut dépend de la distance: ${e[1]} 2020, puis Mercator jusqu'à 1500nm puis LAMBERT, il est possible sur la carte, en haut à gauche, de basculer sur d'autres projections :`,f=A(),g=M("ul"),h=M("li"),h.textContent="LAMBERT NORTH (parallèles sécants N30 et N65) est recommandée au-dessus du N40",v=A(),$=M("li"),$.textContent="LAMBERT SOUTH & PACIFIC (sécants N30 et S15 ) sont recommandées sous N30",y=A(),b=M("li"),b.textContent="THE WORLD permet de disposer d'un Atlas off-line, c'est une projection Times",x=A(),w=M("li"),w.textContent="MERCATOR est une Web Mercator avec un thème est inspiré des cartes VFR. Il y a 12 niveaux de zoom, dont 6 disponibles off-line",k=A(),C=M("li"),C.textContent="=Physique= est un Atlas physique basé sur une projection Equal Earth (qui montre les continents et les pays à leur taille réelle) avec des étiquettes en français (par Tom Patterson).",E=A(),F=M("li"),_=S(e[1]),D=S(" 2020 est une carte VFR, elle couvre France/Belgique/Luxembourg/Suisse et "),j=S(Cn),z=S(" a autorisé son utilisation. Sur cette carte, déjà très dense en informations, la route Gramet, l'orthodromie et les FIR sont désactivées. La dernière version est disponible sur "),je(R.$$.fragment),W=S("."),N=A(),q=M("ol"),q.innerHTML="<li>Navigation dans la carte: on peut avec un doigt déplacer la carte, zoomer ou orienter la carte avec deux doigts.<br/><strong><big>☞</big> Il est aussi possible de modifier l&#39;angle de vue en balayant de bas en haut avec deux doigts</strong>.</li>",H=A(),U=M("h2"),U.textContent="Mémo visuel",G=A(),B=M("p"),B.innerHTML='<img src="./images/map-help.webp" alt="mémo visuel" id="memovisuel"/><br/>',K=A(),Z=M("h2"),Z.textContent="Réglages des calques",V=A(),J=M("p"),J.innerHTML='<figure><img src="./images/layers-settings.webp" alt="layers settings help"/><figcaption>Réglages des calques</figcaption></figure>La carte, en haut à droite, dispose d&#39;un bouton pour personnaliser les calques et les couleurs. Un calque contient un type d&#39;information, par exemple les cercles ETOPS, les FIR réglementées, les tracks, la route...\nIl est possible d&#39;afficher ou de masquer chaque calque en utilisant la coche qui précède son nom. La plupart des calques permettent de choisir la couleur et l&#39;opacité, certains permettent de choisir une icône. Les icônes sont surtout utiles pour l’export dans les fichiers KML.\nPour les aéroports (le type avion est déterminé dans l&#39;OFP), il est possible de choisir entre 2 thèmes: couleur du statut ou vert/rouge. Si vous optez pour le second, le statut reste accessible en cliquant sur un terrain (popup).\nEnfin, trois boutons permettent la sauvegarde, la restauration ou un retour aux valeurs par défaut. Le bouton RESTAURER permet, après avoir fait des modifications temporaires (non sauvegardées), de revenir rapidement aux réglages précédents.',Q=A(),X=M("p"),X.textContent="Pour vous entraîner, je vous recommande de modifier la couleur des terrains en vert/rouge et de sauvegarder votre choix.",Y=A(),ee=M("h2"),ee.textContent="Particularités de l'iPad",te=A(),ne=M("p"),ne.textContent="OFP2MAP ne peut être lancé que depuis l'écran d'accueil, l'application se lance en plein écran. On ne peut pas recharger la page comme dans un navigateur : il faudra pour cela aller dans le menu d'aide (cet écran) ou un bouton spécifique sera affiché en haut.",oe=A(),re=M("p"),se=S("Pour partager le lien vers OFP2MAP, utilisez le bouton situé en haut sur cette page, ou le lien situé sous le logo sur la page d'accueil, puis utilisez AirDrop. "),Pn&&Pn.c(),ie=A(),le=M("p"),le.textContent="À noter que parfois, des bugs d'affichage peuvent apparaître :  lorsque l'on retourne sur l'app, l'app est zoomée, il faut alors juste dézoomer en utilisant un pinch de deux doigts sur la barre de menu. Il est aussi possible de tuer l'app,  même en mode déconnecté, pour la relancer.",ae=A(),ce=M("h2"),ce.textContent="GRAMET",ue=A(),de=M("p"),pe=S("Le GRAMET est un météogramme représentant le temps et l'espace. Il indique, en tout point de la route, et à l'heure de passage estimée, une coupe verticale de la météo prévue.\nLe GRAMET est réalisé par "),je(me.$$.fragment),fe=S(" à partir d'une route calculée. Il est possible d'afficher le GRAMET et sa route sur la carte. La route est particulièrement utile lors des vols océaniques car il n'y a aucune station en mer.\nPour construire la route du GRAMET, on utilise non pas les waypoints, mais au plus 21 stations météo (WMO). Il y a au total 13000 WMO dans le monde. Le GRAMET débute toujours à l'heure hh:00. Pour un decollage à 19h30, il débutera à 19h, pour un décollage à 19h31, il débutera à 20h. Pour les OFP anciens, c'est l'heure actuelle qui est envoyée. En mode déconnecté, OFP2MAP utilise la version du GRAMET qu'il a mis en cache pendant 48h. Après l'heure de décollage initialement prévue, vous pouvez forcer une mise à jour, soit en rechargeant l'ofp, soit en changeant brièvement de page."),ge=A(),he=M("p"),he.textContent="Pour afficher le Gramet, cliquez sur sa miniature à gauche de l'OFP. Pour afficher la route, direction le réglage des calques de la carte. Par défaut elle est affichée en bleu. En fonction de l'heure de décollage (modifiable), le Gramet et sa miniature affichent la position avion. Avant l'horaire prévu de décollage, un bouton play permet de lancer une animation.",ve=A(),$e=M("p"),ye=S("Pour mieux comprendre le GRAMET, je vous conseille son "),je(be.$$.fragment),xe=S("."),we=A(),ke=M("h2"),ke.textContent="Position estimée / GPS",Ce=A(),Pe=M("p"),Pe.textContent="Il est possible d'afficher la position avion sur la carte (bouton en forme de mire). Si vous l'autorisez, la position GPS sera prise en compte. Si la localisation GPS semble ne pas fonctionner (au sol ou en vol avec un gps externe), vérifiez que vous n'avez pas désactivé la localisation dans iPad / Réglages / Confidentialité / Service de localisation / Sites Safari. Vous devez choisir «Lorsque l'app est active» ou «Demander la prochaine fois». Le Bouton a deux ou trois positions: OFF, ON centré, ON non centré. Si, dans la position ON centré, vous déplacez la carte, il passe en ON non centré. L'appui suivant le repassera en ON centré. Un dernier appui le mettra sur OFF.",Ee=A(),Se=M("p"),Se.textContent="En l'absence de GPS, l'avion dans la barre de menu (à gauche de l'heure de décollage) permet d'afficher la position estimée. Si la reconnaissance des waypoints s'est bien effectuée, les estimées de l'OFP seront prises en compte. Sinon, ce sera un simple ratio horaire, merci de me transmettre l'OFP dans ce cas (ce sera signalé par un avion rouge dans la barre de menu et par l'absence des éphémérides). L'heure de décollage est modifiable et permet toujours d'ajuster la position estimée.",Ae=A(),Fe=M("h2"),Fe.textContent="ETOPS",_e=A(),De=M("p"),De.textContent="La capacité ETOPS est determinée depuis l'OFP et les cercles sont tracés. Un drapeau ETOPS apparait dans le pavé d'information de l'OFP si le carburant est limitatif (20mn, soit environ 2T de marge sur 777). Pour avoir plus d'informations vous pouvez utiliser un plugin (voir ci-dessous).",Re=A(),We=M("h2"),We.textContent="Éphémérides / Aurore Boréale",Ne=A(),qe=M("p"),qe.textContent="Le symbole du widget est dynamique:",He=A(),Ue=M("ul"),Ue.innerHTML="<li>☀️ si le soleil est visible pendant le vol</li> \n<li>🌕🌖🌗🌘🌑🌒🌓🌔 si la lune est visible pendant le vol</li> \n<li>🔭 si vous restez dans le noir</li> \n<li>un halo vert se superpose si les conditions sont favorables à l&#39;observation d&#39;aurores boréales</li>",Ge=A(),Be=M("p"),Be.textContent="Le widget affiche également les heures de lever ou de coucher. Un clic révèle des éphémérides avec 2 timelines. La première synthétise le jour et la nuit le long du vol ainsi que les zones favorables à l'observation des aurores boréales. La seconde montre les prévisions de Kp. Le Kp permet de prédire les aurores boréales. Entre ces deux timelines, la Lune est aussi un objet dynamique: l'angle des cornes va se modifier en fonction de la position estimée et cet angle est indiqué pour les levers et les couchers. Pour le soleil, l'aube nautique est indiquée, car ce n'est pas tout à fait la nuit: en vol l'horizon est partiellement discernable, et au sol on distingue encore le relief.",Ke=A(),Ze=M("p"),Ze.innerHTML="<strong>Précision des calculs :</strong> si vous avez bien recalé la position estimée d&#39;OFP2MAP sur la carte (en modifiant l&#39;heure de décollage), la précision attendue est de ±2 min sous 72° de latitude et de 10 min au-delà. Pour la lune, on est plutôt sur une précision de ±5 min. Le calcul n&#39;est valable que pour la croisière, reportez vous à EWAS pour un calcul précis au départ ou à destination.",Ve=A(),Je=M("p"),Je.innerHTML="<strong>Correction d&#39;altitude :</strong> Si votre niveau de vol est différent de l&#39;OFP, appliquez une correction de 15s/1000ft pour le soleil. Exemple: FL OFP 400, FL réel 360, il faut ajouter 1min pour le lever, et soustraire 1min pour le coucher.",Qe=A(),Xe=M("p"),Xe.textContent="Pour rappel, la chronologie des événements pour le soleil est:",Ye=A(),et=M("table"),et.innerHTML="<thead><tr><th>Angle</th><th>▲ Soleil levant</th><th>▼ Soleil couchant</th></tr></thead> \n<tbody><tr><td>-0.83°</td><td>↑ Lever du soleil (fin aube civile)</td><td>↓ Coucher du soleil (début crépuscule civil)</td></tr> \n<tr><td>-6°</td><td>↑ début aube civile (jour civil)</td><td>↓ fin du crépuscule civil (début nuit civile)</td></tr> \n<tr><td>-12°</td><td>↑ début aube nautique (jour nautique)</td><td>↓ fin du crépuscule nautique (début nuit nautique)</td></tr></tbody>",tt=A(),nt=M("p"),nt.textContent="Et pour la lune:",ot=A(),rt=M("table"),rt.innerHTML="<thead><tr><th>Jour</th><th>Nom</th><th>Hémisphère nord</th><th>Hémisphère sud</th></tr></thead> \n<tbody><tr><td>1</td><td>Nouvelle lune</td><td>🌑</td><td>🌑</td></tr> \n<tr><td></td><td>Premier croissant</td><td>🌒</td><td>🌘</td></tr> \n<tr><td>7</td><td>Premier quartier</td><td>🌓</td><td>🌗</td></tr> \n<tr><td></td><td>Lune gibbeuse croissante</td><td>🌔</td><td>🌖</td></tr> \n<tr><td>14</td><td>Pleine lune</td><td>🌕</td><td>🌕</td></tr> \n<tr><td></td><td>Lune gibbeuse décroissante</td><td>🌖</td><td>🌔</td></tr> \n<tr><td>21</td><td>Dernier quartier</td><td>🌗</td><td>🌓</td></tr> \n<tr><td></td><td>Dernier croissant</td><td>🌘</td><td>🌒</td></tr></tbody>",st=A(),it=M("h2"),it.textContent="Mode off-line / Cache",lt=A(),at=M("p"),at.textContent="Une fois un premier OFP chargé, il est possible même en mode déconnecté de charger un autre OFP pour l'exporter. Le cache de l'App vous permettra de naviguer sur les cartes déjà visualisées. Pour mettre en cache les cartes, il suffit de les consulter.",ct=A(),ut=M("p"),ut.textContent=`Il existe aussi un bouton de mise en cache : le pictogramme ↓ situé à droite du sélecteur de carte. Sur les cartes LAMBERT, THE WORLD, =Physique= et ${e[1]}, il mettra en cache la totalité de la carte. Sur la MERCATOR, seule la partie de carte incluant la route sera mise en cache.`,dt=A(),pt=M("p"),pt.textContent=`Les premières mises en cache peuvent prendre du temps : sur la Mercator, un vol LC peut nécessiter le téléchargement de 40Mo de données. Les caches des autres projections utilisent : 7Mo pour la NORTH, 4Mo pour la PACIFIC, 7Mo pour la SOUTH, 32Mo pour THE WORLD, 40Mo pour =Physique= et 40Mo pour ${e[1]}.`,mt=A(),ft=M("h2"),ft.textContent="Export / Plugins (Raccourcis)",gt=A(),ht=M("p"),ht.textContent="La page Export permet d'exporter la route et les tracks au format KML, elle dispose de ses propres réglages pour générer le KML. Par défaut les réglages sont ceux de la carte. Si vous avez déjà sauvegardé un réglage d'export, alors le bouton « COMME CARTE » permet de récupérer les réglages choisis pour la carte.",vt=A(),$t=M("p"),$t.innerHTML='Sur iPad, l&#39;export des fichiers KML affiche une page un peu particulière, utilisez le bouton <svg style="vertical-align: bottom;"><use xlink:href="#share-symbol"></use></svg> pour choisir l&#39;app qui recevra le fichier. Cliquez en haut à gauche sur OK pour revenir à OFP2MAP. Alternativement, vous pouvez utiliser « Options... » pour définir une app qui recevra les fichiers kml par défaut et utiliser Ouvrir dans « nom de l&#39;app ».',yt=A(),bt=M("p"),bt.textContent="Un raccourci peut être lancé depuis la page Export, il recevra les fichiers KML, la route Lido et le Gramet. Le nom du raccourci est modifiable, il faut que le raccourci soit installé avant de le lancer.",xt=A(),wt=M("p"),wt.innerHTML="<strong>Plugins depuis la carte :</strong> Il est aussi possible de lancer des raccourcis ayant accès au contenu de l&#39;OFP depuis le pavé d&#39;informations du vol dans la barre de menu. Il faut autoriser les raccourcis non fiables dans Réglages/Raccourcis (après avoir lancé au moins un raccourci &quot;fiable&quot;), puis installer le(s) plugin(s).",kt=A(),Ct=M("p"),Ct.textContent="Liste des plugins:",Pt=A(),Lt=M("ul");for(let e=0;e<On.length;e+=1)On[e].c();Ot=A(),Tt=M("h2"),Tt.textContent="Mise à jour",Mt=A(),Et=M("p"),Et.textContent="L'app détecte les mises à jour automatiquement, normalement vous n'avez rien à faire. Eventuellement un prompt peut\napparaitre vous demandant d'autoriser cette mise à jour. La version AIRAC et le type avion détecté dans l'OFP sont affichés en bas à droite de la carte dans le champ d'attribution.",St=A(),At=M("p"),Ft=S("Pour connaître les dernières nouveautés d'OFP2MAP, je poste dans Yammer/Mapsme et Teams/MyConcorde. En attendant une solution plus conviviale, vous pouvez aussi consulter la "),je(_t.$$.fragment),Dt=S(' sur GitHub (ce n\'est pas "user friendly").'),jt=A(),It=M("h2"),It.textContent="Crédits",zt=A(),Rt=M("ul"),Wt=M("li"),Wt.textContent="Les données terrains/FIR sont fournies par Olivier Ravet forum Yammer/Mapsme",Nt=A(),qt=M("li"),Ht=S("=Physique= est une carte de Tom Patterson disponible sur "),je(Ut.$$.fragment),Gt=A(),Bt=M("li"),Kt=S("La dernière version de la carte "),Zt=S(e[1]),Vt=S(" est disponible sur le site "),je(Jt.$$.fragment),Qt=A(),Xt=M("li"),Xt.textContent="Les autres cartes sont de Jean-Baptiste Denizot forum Yammer/QGIS & Avenza Maps",Yt=A(),en=M("li"),en.textContent="Le GRAMET provient du site ogimet.com",tn=A(),nn=M("li"),nn.textContent="Le site est développé en javascript à l'aide du framework SVELTE",on=A(),rn=M("li"),rn.textContent="La partie serveur (un proxy pour pouvoir récupérer l'image du GRAMET) est en python.",sn=A(),ln=M("li"),an=S("Eric Delord CDB 777 est l'auteur. Le code source est disponible sur GitHub pour "),je(cn.$$.fragment),un=S(" et "),je(dn.$$.fragment),pn=A(),mn=M("h2"),mn.textContent="Hébergement",fn=A(),gn=M("p"),gn.textContent="L'hébergement des images est normalement fourni par alwaysdata.com (pack gratuit) mais en raison d'un blacklistage sur le réseau internet d'AF, les fonds de cartes sont à présent hébergés sur netlify. Le proxy gramet est lui dorénavant hébergé sur vercel. Le site est hébergé sur GitHub.",hn=A(),vn=M("h2"),vn.textContent="Liens",$n=A(),yn=M("ul"),bn=M("li"),je(xn.$$.fragment),wn=S(" une aide aux calculs des frais professionnels (même auteur)."),I(t,"id","md_préambule"),I(l,"id","md_utilisation"),I(q,"start","3"),I(U,"id","md_mémo-visuel"),I(Z,"id","md_réglages-des-calques"),I(ee,"id","md_particularités-de-lipad"),I(ce,"id","md_gramet"),I(ke,"id","md_position-estimée--gps"),I(Fe,"id","md_etops"),I(We,"id","md_éphémérides--aurore-boréale"),I(et,"class","table"),I(rt,"class","table moon"),I(it,"id","md_mode-off-line--cache"),I(ft,"id","md_export--plugins-raccourcis"),I(Tt,"id","md_mise-à-jour"),I(It,"id","md_crédits"),I(mn,"id","md_hébergement"),I(vn,"id","md_liens")},m(e,O){L(e,t,O),L(e,n,O),L(e,o,O),L(e,r,O),L(e,s,O),L(e,i,O),L(e,l,O),L(e,a,O),L(e,c,O),P(c,u),P(c,d),P(c,p),P(p,m),P(p,f),P(p,g),P(g,h),P(g,v),P(g,$),P(g,y),P(g,b),P(g,x),P(g,w),P(g,k),P(g,C),P(g,E),P(g,F),P(F,_),P(F,D),P(F,j),P(F,z),Ie(R,F,null),P(F,W),L(e,N,O),L(e,q,O),L(e,H,O),L(e,U,O),L(e,G,O),L(e,B,O),L(e,K,O),L(e,Z,O),L(e,V,O),L(e,J,O),L(e,Q,O),L(e,X,O),L(e,Y,O),L(e,ee,O),L(e,te,O),L(e,ne,O),L(e,oe,O),L(e,re,O),P(re,se),Pn&&Pn.m(re,null),L(e,ie,O),L(e,le,O),L(e,ae,O),L(e,ce,O),L(e,ue,O),L(e,de,O),P(de,pe),Ie(me,de,null),P(de,fe),L(e,ge,O),L(e,he,O),L(e,ve,O),L(e,$e,O),P($e,ye),Ie(be,$e,null),P($e,xe),L(e,we,O),L(e,ke,O),L(e,Ce,O),L(e,Pe,O),L(e,Ee,O),L(e,Se,O),L(e,Ae,O),L(e,Fe,O),L(e,_e,O),L(e,De,O),L(e,Re,O),L(e,We,O),L(e,Ne,O),L(e,qe,O),L(e,He,O),L(e,Ue,O),L(e,Ge,O),L(e,Be,O),L(e,Ke,O),L(e,Ze,O),L(e,Ve,O),L(e,Je,O),L(e,Qe,O),L(e,Xe,O),L(e,Ye,O),L(e,et,O),L(e,tt,O),L(e,nt,O),L(e,ot,O),L(e,rt,O),L(e,st,O),L(e,it,O),L(e,lt,O),L(e,at,O),L(e,ct,O),L(e,ut,O),L(e,dt,O),L(e,pt,O),L(e,mt,O),L(e,ft,O),L(e,gt,O),L(e,ht,O),L(e,vt,O),L(e,$t,O),L(e,yt,O),L(e,bt,O),L(e,xt,O),L(e,wt,O),L(e,kt,O),L(e,Ct,O),L(e,Pt,O),L(e,Lt,O);for(let e=0;e<On.length;e+=1)On[e].m(Lt,null);L(e,Ot,O),L(e,Tt,O),L(e,Mt,O),L(e,Et,O),L(e,St,O),L(e,At,O),P(At,Ft),Ie(_t,At,null),P(At,Dt),L(e,jt,O),L(e,It,O),L(e,zt,O),L(e,Rt,O),P(Rt,Wt),P(Rt,Nt),P(Rt,qt),P(qt,Ht),Ie(Ut,qt,null),P(Rt,Gt),P(Rt,Bt),P(Bt,Kt),P(Bt,Zt),P(Bt,Vt),Ie(Jt,Bt,null),P(Rt,Qt),P(Rt,Xt),P(Rt,Yt),P(Rt,en),P(Rt,tn),P(Rt,nn),P(Rt,on),P(Rt,rn),P(Rt,sn),P(Rt,ln),P(ln,an),Ie(cn,ln,null),P(ln,un),Ie(dn,ln,null),L(e,pn,O),L(e,mn,O),L(e,fn,O),L(e,gn,O),L(e,hn,O),L(e,vn,O),L(e,$n,O),L(e,yn,O),P(yn,bn),Ie(xn,bn,null),P(bn,wn),kn=!0},p(e,[t]){const n={};256&t&&(n.$$scope={dirty:t,ctx:e}),R.$set(n);const o={};1&t&&(o.href=e[0]),256&t&&(o.$$scope={dirty:t,ctx:e}),me.$set(o);const r={};if(256&t&&(r.$$scope={dirty:t,ctx:e}),be.$set(r),0&t){let n;for(Ln=Object.entries(Bs),n=0;n<Ln.length;n+=1){const o=ja(e,Ln,n);On[n]?(On[n].p(o,t),Te(On[n],1)):(On[n]=qa(o),On[n].c(),Te(On[n],1),On[n].m(Lt,null))}for(Le(),n=Ln.length;n<On.length;n+=1)Tn(n);Oe()}const s={};256&t&&(s.$$scope={dirty:t,ctx:e}),_t.$set(s);const i={};256&t&&(i.$$scope={dirty:t,ctx:e}),Ut.$set(i);const l={};256&t&&(l.$$scope={dirty:t,ctx:e}),Jt.$set(l);const a={};256&t&&(a.$$scope={dirty:t,ctx:e}),cn.$set(a);const c={};256&t&&(c.$$scope={dirty:t,ctx:e}),dn.$set(c);const u={};256&t&&(u.$$scope={dirty:t,ctx:e}),xn.$set(u)},i(e){if(!kn){Te(R.$$.fragment,e),Te(Pn),Te(me.$$.fragment,e),Te(be.$$.fragment,e);for(let e=0;e<Ln.length;e+=1)Te(On[e]);Te(_t.$$.fragment,e),Te(Ut.$$.fragment,e),Te(Jt.$$.fragment,e),Te(cn.$$.fragment,e),Te(dn.$$.fragment,e),Te(xn.$$.fragment,e),kn=!0}},o(e){Me(R.$$.fragment,e),Me(Pn),Me(me.$$.fragment,e),Me(be.$$.fragment,e),On=On.filter(Boolean);for(let e=0;e<On.length;e+=1)Me(On[e]);Me(_t.$$.fragment,e),Me(Ut.$$.fragment,e),Me(Jt.$$.fragment,e),Me(cn.$$.fragment,e),Me(dn.$$.fragment,e),Me(xn.$$.fragment,e),kn=!1},d(e){e&&O(t),e&&O(n),e&&O(o),e&&O(r),e&&O(s),e&&O(i),e&&O(l),e&&O(a),e&&O(c),ze(R),e&&O(N),e&&O(q),e&&O(H),e&&O(U),e&&O(G),e&&O(B),e&&O(K),e&&O(Z),e&&O(V),e&&O(J),e&&O(Q),e&&O(X),e&&O(Y),e&&O(ee),e&&O(te),e&&O(ne),e&&O(oe),e&&O(re),Pn&&Pn.d(),e&&O(ie),e&&O(le),e&&O(ae),e&&O(ce),e&&O(ue),e&&O(de),ze(me),e&&O(ge),e&&O(he),e&&O(ve),e&&O($e),ze(be),e&&O(we),e&&O(ke),e&&O(Ce),e&&O(Pe),e&&O(Ee),e&&O(Se),e&&O(Ae),e&&O(Fe),e&&O(_e),e&&O(De),e&&O(Re),e&&O(We),e&&O(Ne),e&&O(qe),e&&O(He),e&&O(Ue),e&&O(Ge),e&&O(Be),e&&O(Ke),e&&O(Ze),e&&O(Ve),e&&O(Je),e&&O(Qe),e&&O(Xe),e&&O(Ye),e&&O(et),e&&O(tt),e&&O(nt),e&&O(ot),e&&O(rt),e&&O(st),e&&O(it),e&&O(lt),e&&O(at),e&&O(ct),e&&O(ut),e&&O(dt),e&&O(pt),e&&O(mt),e&&O(ft),e&&O(gt),e&&O(ht),e&&O(vt),e&&O($t),e&&O(yt),e&&O(bt),e&&O(xt),e&&O(wt),e&&O(kt),e&&O(Ct),e&&O(Pt),e&&O(Lt),T(On,e),e&&O(Ot),e&&O(Tt),e&&O(Mt),e&&O(Et),e&&O(St),e&&O(At),ze(_t),e&&O(jt),e&&O(It),e&&O(zt),e&&O(Rt),ze(Ut),ze(Jt),ze(cn),ze(dn),e&&O(pn),e&&O(mn),e&&O(fn),e&&O(gn),e&&O(hn),e&&O(vn),e&&O($n),e&&O(yn),ze(xn)}}}function Ja(e,t,n){let o,r;u(e,bt,(e=>n(2,r=e)));const s=window.atob("Q2FydGFCb3NzeQ==");return e.$$.update=()=>{4&e.$$.dirty&&n(0,o=r?r.ogimetData.url:"http://www.ogimet.com")},[o,s,r]}class Qa extends We{constructor(e){super(),Re(this,e,Ja,Va,l,{})}}function Xa(e,t,n){const o=e.slice();return o[23]=t[n].id,o[24]=t[n].label,o}function Ya(e,t,n){const o=e.slice();return o[28]=t[n][0],o[29]=t[n][1],o}function ec(e,t,n){const o=e.slice();return o[32]=t[n][0],o[33]=t[n][1],o}function tc(e,t,n){const o=e.slice();return o[36]=t[n],o}function nc(e){let t,n,o,r,s,i,l,a,c,u,d,p,m={ctx:e,current:null,token:null,hasCatch:!1,pending:ac,then:rc,catch:oc,value:27};return Fe(u=e[6],m),{c(){t=M("div"),n=M("div"),o=M("div"),r=M("div"),s=M("h5"),s.textContent="CHANGELOG",i=A(),l=M("button"),l.innerHTML='<span aria-hidden="true">×</span>',a=A(),c=M("div"),m.block.c(),I(s,"class","modal-title"),I(l,"type","button"),I(l,"class","close"),I(l,"data-dismiss","modal"),I(l,"aria-label","Close"),I(r,"class","modal-header"),I(c,"class","modal-body svelte-g1tsd0"),I(o,"class","modal-content"),I(n,"class","modal-dialog svelte-g1tsd0"),I(n,"role","document"),I(t,"class","modal svelte-g1tsd0"),I(t,"tabindex","-1"),I(t,"role","dialog")},m(u,f){L(u,t,f),P(t,n),P(n,o),P(o,r),P(r,s),P(r,i),P(r,l),P(o,a),P(o,c),m.block.m(c,m.anchor=null),m.mount=()=>c,m.anchor=null,d||(p=D(l,"click",e[13]),d=!0)},p(t,n){if(e=t,m.ctx=e,64&n[0]&&u!==(u=e[6])&&Fe(u,m));else{const t=e.slice();t[27]=m.resolved,m.block.p(t,n)}},d(e){e&&O(t),m.block.d(),m.token=null,m=null,d=!1,p()}}}function oc(t){return{c:e,m:e,p:e,d:e}}function rc(e){let t,n=Object.entries(e[27].CHANGELOG),o=[];for(let t=0;t<n.length;t+=1)o[t]=lc(Ya(e,n,t));return{c(){t=M("ul");for(let e=0;e<o.length;e+=1)o[e].c()},m(e,n){L(e,t,n);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,r){if(1088&r[0]){let s;for(n=Object.entries(e[27].CHANGELOG),s=0;s<n.length;s+=1){const i=Ya(e,n,s);o[s]?o[s].p(i,r):(o[s]=lc(i),o[s].c(),o[s].m(t,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(e){e&&O(t),T(o,e)}}}function sc(e){let t,n,o,r=e[36]+"";return{c(){t=M("div"),n=S("- "),o=S(r),I(t,"class","changelog svelte-g1tsd0")},m(e,r){L(e,t,r),P(t,n),P(t,o)},p(e,t){64&t[0]&&r!==(r=e[36]+"")&&N(o,r)},d(e){e&&O(t)}}}function ic(e){let t,n,o,r,s=e[10](e[32])+"",i=e[33].raw.split("- ").filter(mc),l=[];for(let t=0;t<i.length;t+=1)l[t]=sc(tc(e,i,t));return{c(){t=M("h3"),n=S(s),o=A();for(let e=0;e<l.length;e+=1)l[e].c();r=F(),I(t,"class","svelte-g1tsd0")},m(e,s){L(e,t,s),P(t,n),L(e,o,s);for(let t=0;t<l.length;t+=1)l[t].m(e,s);L(e,r,s)},p(e,t){if(64&t[0]&&s!==(s=e[10](e[32])+"")&&N(n,s),64&t[0]){let n;for(i=e[33].raw.split("- ").filter(mc),n=0;n<i.length;n+=1){const o=tc(e,i,n);l[n]?l[n].p(o,t):(l[n]=sc(o),l[n].c(),l[n].m(r.parentNode,r))}for(;n<l.length;n+=1)l[n].d(1);l.length=i.length}},d(e){e&&O(t),e&&O(o),T(l,e),e&&O(r)}}}function lc(e){let t,n,o,r,s,i=e[28]+"",l=Object.entries(e[29]),a=[];for(let t=0;t<l.length;t+=1)a[t]=ic(ec(e,l,t));return{c(){t=M("li"),n=M("h2"),o=S(i),r=A();for(let e=0;e<a.length;e+=1)a[e].c();s=A(),I(n,"class","svelte-g1tsd0"),I(t,"class","svelte-g1tsd0")},m(e,i){L(e,t,i),P(t,n),P(n,o),P(t,r);for(let e=0;e<a.length;e+=1)a[e].m(t,null);P(t,s)},p(e,n){if(64&n[0]&&i!==(i=e[28]+"")&&N(o,i),1088&n[0]){let o;for(l=Object.entries(e[29]),o=0;o<l.length;o+=1){const r=ec(e,l,o);a[o]?a[o].p(r,n):(a[o]=ic(r),a[o].c(),a[o].m(t,s))}for(;o<a.length;o+=1)a[o].d(1);a.length=l.length}},d(e){e&&O(t),T(a,e)}}}function ac(t){let n;return{c(){n=M("p"),n.textContent="chargement..."},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function cc(t){let n,o,r,s,i=!!navigator.share&&function(t){let n,o,r;return{c(){n=M("button"),n.textContent="Partager l'App",I(n,"class","btn btn-outline-secondary btn-sm svelte-g1tsd0")},m(e,t){L(e,n,t),o||(r=D(n,"click",et),o=!0)},p:e,d(e){e&&O(n),o=!1,r()}}}();return{c(){i&&i.c(),n=A(),o=M("button"),o.textContent="Recharger l'App",I(o,"class","btn btn-outline-secondary btn-sm svelte-g1tsd0")},m(e,l){i&&i.m(e,l),L(e,n,l),L(e,o,l),r||(s=D(o,"click",t[8]),r=!0)},p(e,t){navigator.share&&i.p(e,t)},d(e){i&&i.d(e),e&&O(n),e&&O(o),r=!1,s()}}}function uc(e){let t,n,o,r=e[24]+"";return{c(){t=M("option"),n=S(r),t.__value=e[23],t.value=t.__value,t.selected=o=e[23]===e[0]},m(e,o){L(e,t,o),P(t,n)},p(e,n){2049&n[0]&&o!==(o=e[23]===e[0])&&(t.selected=o)},d(e){e&&O(t)}}}function dc(e){let t,n,o,r,i,l,a,c,u,d,p,m,f,g,h,v,y,b,x,w,k,C,E=e[5]&&nc(e),F=!0===navigator.standalone&&cc(e),_=e[11],j=[];for(let t=0;t<_.length;t+=1)j[t]=uc(Xa(e,_,t));return x=new Qa({}),{c(){t=M("div"),E&&E.c(),n=A(),o=M("div"),r=M("div"),i=M("h1"),l=M("div"),l.innerHTML='<img src="images/ofp2map-icons/icon-128x128.png" alt="logo" class="svelte-g1tsd0"/>',a=A(),c=M("div"),u=M("div"),u.textContent=`OFP2MAP v${pc}`,d=M("small"),p=S("ServiceWorker : "),m=S(e[2]),f=A(),F&&F.c(),g=A(),h=M("button"),h.textContent="CHANGELOG",v=A(),y=M("select");for(let e=0;e<j.length;e+=1)j[e].c();b=A(),je(x.$$.fragment),I(l,"class","app svelte-g1tsd0"),I(d,"class","svelte-g1tsd0"),I(c,"class","infos svelte-g1tsd0"),I(h,"class","btn btn-outline-secondary btn-sm svelte-g1tsd0"),I(y,"class","custom-select custom-select-sm svelte-g1tsd0"),void 0===e[0]&&ge((()=>e[15].call(y))),I(i,"class","svelte-g1tsd0"),I(o,"class","scrollContainer svelte-g1tsd0"),I(t,"class","markdown svelte-g1tsd0"),I(t,"style",e[7])},m(s,O){L(s,t,O),E&&E.m(t,null),P(t,n),P(t,o),P(o,r),P(r,i),P(i,l),P(i,a),P(i,c),P(c,u),P(c,d),P(d,p),P(d,m),P(i,f),F&&F.m(i,null),P(i,g),P(i,h),P(i,v),P(i,y);for(let e=0;e<j.length;e+=1)j[e].m(y,null);U(y,e[0]),e[16](i),P(r,b),Ie(x,r,null),e[17](o),w=!0,k||(C=[D(d,"click",e[14],{once:!0}),D(h,"click",e[9]),D(y,"change",e[15]),D(y,"change",e[12]),$(pn.call(null,y))],k=!0)},p(e,o){if(e[5]?E?E.p(e,o):(E=nc(e),E.c(),E.m(t,n)):E&&(E.d(1),E=null),(!w||4&o[0])&&N(m,e[2]),!0===navigator.standalone&&F.p(e,o),2049&o[0]){let t;for(_=e[11],t=0;t<_.length;t+=1){const n=Xa(e,_,t);j[t]?j[t].p(n,o):(j[t]=uc(n),j[t].c(),j[t].m(y,null))}for(;t<j.length;t+=1)j[t].d(1);j.length=_.length}2049&o[0]&&U(y,e[0]),(!w||128&o[0])&&I(t,"style",e[7])},i(e){w||(Te(x.$$.fragment,e),w=!0)},o(e){Me(x.$$.fragment,e),w=!1},d(n){n&&O(t),E&&E.d(),F&&F.d(),T(j,n),e[16](null),ze(x),e[17](null),k=!1,s(C)}}}const pc="1.13.3",mc=e=>!e.match(/^\s*$/g);function fc(e,t,n){let o,r;u(e,pt,(e=>n(1,r=e)));let s="";const i={ADDED:"Ajouté",FIXED:"Corrigé",DEPRECATED:"Obsolète",CHANGED:"Modifié",REMOVED:"Supprimé",SECURITY:"Sécurité"};let l,a;const c=[];let d,p,m,f=!1,g=null;oe((()=>(d=a.querySelectorAll("h2[id]"),m=new IntersectionObserver((e=>{const t=a.scrollTop;if(t<Math.floor(a.scrollHeight-a.clientHeight)){let e=c[0].id;for(const n of d){if(t<n.offsetTop-a.offsetTop-l.clientHeight)break;e=n.id}n(0,p=e)}}),{root:a,rootMargin:0-l.clientHeight+"px 0px 30px 0px",threshold:1}),d.forEach((e=>{c.push({id:e.id,label:e.innerText}),m.observe(e)})),n(0,p=c[0].id),()=>{m.disconnect(),d=void 0,m=void 0})));return e.$$.update=()=>{var t;2&e.$$.dirty[0]&&(t=r)&&t.messageSW({type:"GET_VERSION"}).then((e=>n(2,s=e))),1&e.$$.dirty[0]&&n(7,o=void 0===p||p===c[0].id?"padding-top: 1rem;":"padding-top: 0.25rem;")},[p,r,s,l,a,f,g,o,()=>{window.location.hash="#/",window.location.reload()},async()=>{n(5,f=!0),n(6,g=fetch("./CHANGELOG.json").then((e=>{if(e.ok)return e.json();throw new Error("CHANGELOG.json not available")})))},e=>i[e.toUpperCase()]||e,c,e=>{e.target.blur(),m.disconnect(),function(e,t){const n=e-a.offsetTop-l.clientHeight,o=n.toFixed(),r=Math.floor(a.scrollHeight-a.clientHeight),s=function(){(a.scrollTop.toFixed()===o||a.scrollTop>=r)&&(a.removeEventListener("scroll",s),t&&t())};a.addEventListener("scroll",s),s(),a.scrollTo({top:n,behavior:"smooth"})}(document.getElementById(p).offsetTop,(()=>{d.forEach((e=>{m.observe(e)}))}))},()=>n(5,f=!1),()=>r&&r.update()&&void 0,function(){p=G(this),n(0,p),n(11,c)},function(e){ae[e?"unshift":"push"]((()=>{l=e,n(3,l)}))},function(e){ae[e?"unshift":"push"]((()=>{a=e,n(4,a)}))}]}class gc extends We{constructor(e){super(),Re(this,e,fc,dc,l,{},[-1,-1])}}function hc(e){let t,n,o,r,i,l,a,c,u,d,p,m,f,g,h,v;return{c(){t=M("div"),n=M("div"),o=M("strong"),o.innerHTML='<span class="svelte-395rpc">👨🏻‍✈️</span>Mise à jour disponible',r=A(),i=M("button"),i.innerHTML='<span aria-hidden="true">×</span>',l=A(),a=M("div"),c=M("p"),c.textContent="Il faudra recharger l'OFP",u=A(),d=M("button"),p=M("span"),m=S(e[1]),I(o,"class","svelte-395rpc"),I(i,"type","button"),I(i,"class","close svelte-395rpc"),I(i,"aria-label","Close"),I(n,"class","toast-header svelte-395rpc"),I(p,"class","svelte-395rpc"),Z(p,"blinking",e[1].endsWith("...")),I(d,"class","btn btn-primary"),I(d,"type","button"),I(a,"class","toast-body text-center"),I(t,"class","toast svelte-395rpc"),H(t,"position","fixed"),H(t,"top","0"),H(t,"right","0")},m(s,f){L(s,t,f),P(t,n),P(n,o),P(n,r),P(n,i),P(t,l),P(t,a),P(a,c),P(a,u),P(a,d),P(d,p),P(p,m),g=!0,h||(v=[D(i,"click",e[6]),D(d,"click",e[7],{once:!0})],h=!0)},p(e,t){(!g||2&t)&&N(m,e[1]),2&t&&Z(p,"blinking",e[1].endsWith("..."))},i(e){g||(ge((()=>{f||(f=Ae(t,ot,{},!0)),f.run(1)})),g=!0)},o(e){f||(f=Ae(t,ot,{},!1)),f.run(0),g=!1},d(e){e&&O(t),e&&f&&f.end(),h=!1,s(v)}}}function vc(t){let n,o,r,s,i,l,a,c,u,d,p=(t[4](700)||"")+"";return{c(){n=M("div"),o=M("div"),r=M("div"),r.innerHTML='<strong class="svelte-395rpc"><span class="svelte-395rpc">👨🏻‍✈️</span>Mise à jour détectée</strong>',s=A(),i=M("div"),l=M("button"),l.innerHTML="<span>Mise à jour...</span>",a=A(),c=S(p),I(r,"class","toast-header svelte-395rpc"),I(l,"class","btn"),I(l,"type","button"),I(i,"class","toast-body text-center"),I(o,"class","toast svelte-395rpc"),I(n,"class","modal svelte-395rpc")},m(e,p){L(e,n,p),P(n,o),P(o,r),P(o,s),P(o,i),P(i,l),P(n,a),L(e,c,p),u||(d=D(l,"click",j(t[5])),u=!0)},p:e,i:e,o:e,d(e){e&&O(n),e&&O(c),u=!1,d()}}}function $c(e){let t,n,o,r;const s=[vc,hc],i=[];function l(e,t){return!e[3]||e[2]||e[0]?e[3]&&!e[2]?1:-1:0}return~(t=l(e))&&(n=i[t]=s[t](e)),{c(){n&&n.c(),o=F()},m(e,n){~t&&i[t].m(e,n),L(e,o,n),r=!0},p(e,[r]){let a=t;t=l(e),t===a?~t&&i[t].p(e,r):(n&&(Le(),Me(i[a],1,1,(()=>{i[a]=null})),Oe()),~t?(n=i[t],n?n.p(e,r):(n=i[t]=s[t](e),n.c()),Te(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(Te(n),r=!0)},o(e){Me(n),r=!1},d(e){~t&&i[t].d(e),e&&O(o)}}}const yc=at(),bc=e=>{ft.set(!0),mt.set(!1),e?gt.set(!((e,t)=>{const n=e.split("."),o=t.split(".");return n.slice(0,-1).join(".")===o.slice(0,-1).join(".")})("1.13.3",e)):gt.set(!0)};function xc(t,n,o){let r,s,i,l,a=e;u(t,mt,(e=>o(2,r=e))),u(t,pt,(e=>o(8,s=e))),u(t,yc,(e=>o(9,i=e))),u(t,ft,(e=>o(3,l=e))),t.$$.on_destroy.push((()=>a()));let c="Installer";v(mt,r=!1,r);let{prompt:d=!1}=n;const p=(e=0)=>{let t;s&&i&&i.waiting?(navigator.serviceWorker.addEventListener("controllerchange",(()=>{t||(t=!0,e?setTimeout((()=>window.location.reload()),e):window.location.reload())})),o(1,c="En cours..."),i.waiting.postMessage({type:"SKIP_WAITING"})):window.location.reload()};return t.$$set=e=>{"prompt"in e&&o(0,d=e.prompt)},[d,c,r,l,p,function(e){ie(t,e)},()=>v(mt,r=!0,r),()=>p()]}class wc extends We{constructor(e){super(),Re(this,e,xc,$c,l,{prompt:0})}}function kc(e){let t;return{c(){t=M("ol"),t.innerHTML='<li class="svelte-3tetng">Dans la barre de menu, cliquez sur <svg class="svelte-3tetng"><use xlink:href="#share-symbol"></use></svg></li> \n                    <li class="svelte-3tetng">Faites défiler, choisir : <em>Sur l&#39;écran d&#39;accueil</em>  <svg style="width:22px;height:22px;" class="svelte-3tetng"><use xlink:href="#add2home-symbol"></use></svg></li> \n                    <li class="svelte-3tetng">Lancez l&#39;application depuis l&#39;écran d&#39;accueil</li>',I(t,"class","guide svelte-3tetng")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Cc(e){let t;return{c(){t=M("p"),t.textContent="Merci d'ouvrir cette page dans Safari",I(t,"class","guide error svelte-3tetng")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Pc(t){let n,o,r,s,i,l,a,c,u,d,p,m,f,g;n=new Qn({});let h=function(e,t){return e[0]?kc:Cc}(t)(t);return f=new wc({}),{c(){je(n.$$.fragment),o=A(),r=M("div"),s=M("div"),i=M("div"),i.innerHTML='<img src="./images/ofp2map-icons/icon-128x128.png" alt="OFP2MAP" class="svelte-3tetng"/>',l=A(),a=M("div"),c=M("h3"),c.textContent="Installez OFP2MAP",u=A(),d=M("p"),d.innerHTML='Si OFP2MAP est déjà sur l&#39;écran d&#39;accueil, ne l&#39;installez pas une deuxième fois. <b>Attention:</b> l&#39;installation ne peut se faire que depuis\n                le navigateur Safari, <b>si présent, cliquez sur <svg class="safari svelte-3tetng"><use xlink:href="#safari-symbol"></use></svg> en haut à droite</b>.',p=A(),h.c(),m=A(),je(f.$$.fragment),I(i,"class","icon-container svelte-3tetng"),I(c,"class","title svelte-3tetng"),I(d,"class","text svelte-3tetng"),I(a,"class","prompt-content svelte-3tetng"),I(s,"class","prompt svelte-3tetng"),I(r,"class","prompt-container svelte-3tetng")},m(e,t){Ie(n,e,t),L(e,o,t),L(e,r,t),P(r,s),P(s,i),P(s,l),P(s,a),P(a,c),P(a,u),P(a,d),P(a,p),h.m(a,null),L(e,m,t),Ie(f,e,t),g=!0},p:e,i(e){g||(Te(n.$$.fragment,e),Te(f.$$.fragment,e),g=!0)},o(e){Me(n.$$.fragment,e),Me(f.$$.fragment,e),g=!1},d(e){ze(n,e),e&&O(o),e&&O(r),h.d(),e&&O(m),ze(f,e)}}}function Lc(e){return[Ue&&!He]}class Oc extends We{constructor(e){super(),Re(this,e,Lc,Pc,l,{})}}function Tc(e){let t,n,o,r,s,i,l,a,c;t=new xa({props:{$$slots:{default:[Ec]},$$scope:{ctx:e}}}),o=new wc({props:{prompt:!!e[1]}});let u=(e[1]||e[4])&&"success"===e[2]&&Sc(e);const d=[zc,Ic,jc,Dc,_c,Fc],p=[];function m(e,t){return"loading"===e[2]?0:e[2]&&"success"!==e[2]&&"/map"===e[3]?1:"/export"===e[3]&&"success"===e[2]?2:"/"===e[3]?3:"/help"===e[3]?4:!e[1]&&!e[4]||"/map"!==e[3]?5:-1}return~(i=m(e))&&(l=p[i]=d[i](e)),{c(){je(t.$$.fragment),n=A(),je(o.$$.fragment),r=A(),u&&u.c(),s=A(),l&&l.c(),a=F()},m(e,l){Ie(t,e,l),L(e,n,l),Ie(o,e,l),L(e,r,l),u&&u.m(e,l),L(e,s,l),~i&&p[i].m(e,l),L(e,a,l),c=!0},p(e,n){const r={};4097&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const c={};2&n&&(c.prompt=!!e[1]),o.$set(c),(e[1]||e[4])&&"success"===e[2]?u?(u.p(e,n),22&n&&Te(u,1)):(u=Sc(e),u.c(),Te(u,1),u.m(s.parentNode,s)):u&&(Le(),Me(u,1,1,(()=>{u=null})),Oe());let f=i;i=m(e),i===f?~i&&p[i].p(e,n):(l&&(Le(),Me(p[f],1,1,(()=>{p[f]=null})),Oe()),~i?(l=p[i],l?l.p(e,n):(l=p[i]=d[i](e),l.c()),Te(l,1),l.m(a.parentNode,a)):l=null)},i(e){c||(Te(t.$$.fragment,e),Te(o.$$.fragment,e),Te(u),Te(l),c=!0)},o(e){Me(t.$$.fragment,e),Me(o.$$.fragment,e),Me(u),Me(l),c=!1},d(e){ze(t,e),e&&O(n),ze(o,e),e&&O(r),u&&u.d(e),e&&O(s),~i&&p[i].d(e),e&&O(a)}}}function Mc(t){let n,o;return n=new Oc({}),{c(){je(n.$$.fragment)},m(e,t){Ie(n,e,t),o=!0},p:e,i(e){o||(Te(n.$$.fragment,e),o=!0)},o(e){Me(n.$$.fragment,e),o=!1},d(e){ze(n,e)}}}function Ec(e){let t,n;return t=new Aa({props:{kmlOptions:e[0]}}),t.$on("change",e[6]),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Sc(e){let t,n;return t=new Da({props:{hidden:"/map"!==e[3],$$slots:{default:[Ac]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.hidden="/map"!==e[3]),4107&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Ac(e){let t,n,o;function r(t){e[7](t)}let s={id:"map",ofp:e[1]};return void 0!==e[0]&&(s.kmlOptions=e[0]),t=new cs({props:s}),ae.push((()=>De(t,"kmlOptions",r))),t.$on("save",e[8]),{c(){je(t.$$.fragment)},m(e,n){Ie(t,e,n),o=!0},p(e,o){const r={};2&o&&(r.ofp=e[1]),!n&&1&o&&(n=!0,r.kmlOptions=e[0],he((()=>n=!1))),t.$set(r)},i(e){o||(Te(t.$$.fragment,e),o=!0)},o(e){Me(t.$$.fragment,e),o=!1},d(e){ze(t,e)}}}function Fc(t){let n,o=t[5](t[3])+"";return{c(){n=S(o)},m(e,t){L(e,n,t)},p(e,t){8&t&&o!==(o=e[5](e[3])+"")&&N(n,o)},i:e,o:e,d(e){e&&O(n)}}}function _c(e){let t,n;return t=new Da({props:{maxWidth:"1366px",$$slots:{default:[Rc]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Dc(e){let t,n;return t=new Da({props:{maxWidth:"1366px",$$slots:{default:[Wc]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function jc(e){let t,n;return t=new Da({props:{maxWidth:"1366px",$$slots:{default:[Nc]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};4105&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Ic(e){let t,n;return t=new Da({props:{$$slots:{default:[qc]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};4100&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function zc(e){let t,n;return t=new Da({props:{$$slots:{default:[Hc]},$$scope:{ctx:e}}}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Rc(e){let t,n;return t=new gc({}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Wc(e){let t,n;return t=new Yn({}),{c(){je(t.$$.fragment)},m(e,o){Ie(t,e,o),n=!0},i(e){n||(Te(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Nc(e){let t,n,o,r;return t=new Kn({props:{kmlOptions:e[0]}}),t.$on("save",e[9]),o=new Nt({}),{c(){je(t.$$.fragment),n=A(),je(o.$$.fragment)},m(e,s){Ie(t,e,s),L(e,n,s),Ie(o,e,s),r=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){r||(Te(t.$$.fragment,e),Te(o.$$.fragment,e),r=!0)},o(e){Me(t.$$.fragment,e),Me(o.$$.fragment,e),r=!1},d(e){ze(t,e),e&&O(n),ze(o,e)}}}function qc(e){let t,n,o;return{c(){t=M("p"),n=S("😱: "),o=S(e[2]),I(t,"class","ofpError svelte-1s76kjl")},m(e,r){L(e,t,r),P(t,n),P(t,o)},p(e,t){4&t&&N(o,e[2])},d(e){e&&O(t)}}}function Hc(e){let t;return{c(){t=M("div"),t.textContent="traitement en cours...",H(t,"margin","auto")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Uc(e){let t,n,o,r,s,i;const l=[Mc,Tc],a=[];function c(e,t){return"/install"===e[3]||navigator&&!1===navigator.standalone&&qe?0:1}return o=c(e),r=a[o]=l[o](e),{c(){t=M("main"),n=M("div"),r.c(),I(n,"class","content svelte-1s76kjl"),I(t,"class",s="container "+(e[3].substr(1)||"home")+" svelte-1s76kjl")},m(e,r){L(e,t,r),P(t,n),a[o].m(n,null),i=!0},p(e,[u]){let d=o;o=c(e),o===d?a[o].p(e,u):(Le(),Me(a[d],1,1,(()=>{a[d]=null})),Oe(),r=a[o],r?r.p(e,u):(r=a[o]=l[o](e),r.c()),Te(r,1),r.m(n,null)),(!i||8&u&&s!==(s="container "+(e[3].substr(1)||"home")+" svelte-1s76kjl"))&&I(t,"class",s)},i(e){i||(Te(r),i=!0)},o(e){Me(r),i=!1},d(e){e&&O(t),a[o].d()}}}function Gc(e,t,n){let o,r,s,i,l,a;u(e,bt,(e=>n(1,o=e))),u(e,xt,(e=>n(2,r=e))),u(e,St,(e=>n(3,s=e))),u(e,ht,(e=>n(10,i=e))),u(e,mt,(e=>n(11,l=e))),u(e,Pt,(e=>n(4,a=e)));(e=>{const t={},n={};e.length>1&&(e.substr(1)||"").split("&").forEach((function(e){const n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}));for(let[e,o]of Object.entries(t))if(e in qt){let t;e.endsWith("Pin")?(o*=1,isNaN(o)||(t=o)):e.endsWith("Color")&&o.match(Vt)?t=o.toUpperCase():e.endsWith("Display")?t=!!o:e.endsWith("Change")&&(o*=1,isNaN(o)||(t=o.toFixed(1))),void 0!==t&&(n[e]=t)}else"downloadType"===e?(o*=1,isNaN(o)||sn.setItem(rn.downloadType,o)):"shortcut"===e&&(o=o.trim(),o&&sn.setItem(rn.shortcut,o));sn.setItem(rn.optionsKML,n)})(window.location.search);let c=(e=>{const t={};for(let[n,o]of Object.entries(e))n in qt&&(n.endsWith("Pin")?(o*=1,isNaN(o)||(t[n]=o)):n.endsWith("Color")&&o.match(Vt)?t[n]=o.toUpperCase():n.endsWith("Display")?t[n]=!!o:n.endsWith("Change")&&(o*=1,isNaN(o)||(t[n]=o.toFixed(1))));return{...qt,...t}})(sn.getItem(rn.optionsKML)||{});ln(c,s);oe((()=>(document.addEventListener("visibilitychange",Tt,!1),()=>document.removeEventListener("visibilitychange",Tt))));return[c,o,r,s,a,e=>{window.location.hash="#/"},()=>{v(ht,i=!1,i),v(mt,l=!1,l)},function(e){c=e,n(0,c)},()=>ln(c,s),()=>ln(c,s)]}class Bc extends We{constructor(e){super(),Re(this,e,Gc,Uc,l,{})}}try{self["workbox:window:6.1.2"]&&_()}catch(Kc){}function Kc(e,t){return new Promise((function(n){var o=new MessageChannel;o.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[o.port2])}))}function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Vc(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.1.2"]&&_()}catch(Kc){}var Jc=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function Qc(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var Xc=function(e,t){this.type=e,Object.assign(this,t)};function Yc(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function eu(){}var tu={type:"SKIP_WAITING"};function nu(e,t){if(!t)return e&&e.then?e.then(eu):Promise.resolve()}var ou=function(e){var t,n;function o(t,n){var o,r;return void 0===n&&(n={}),(o=e.call(this)||this).nn={},o.tn=0,o.rn=new Jc,o.en=new Jc,o.on=new Jc,o.un=0,o.an=new Set,o.cn=function(){var e=o.fn,t=e.installing;o.tn>0||!Qc(t.scriptURL,o.sn)||performance.now()>o.un+6e4?(o.vn=t,e.removeEventListener("updatefound",o.cn)):(o.hn=t,o.an.add(t),o.rn.resolve(t)),++o.tn,t.addEventListener("statechange",o.ln)},o.ln=function(e){var t=o.fn,n=e.target,r=n.state,s=n===o.vn,i={sw:n,isExternal:s,originalEvent:e};!s&&o.mn&&(i.isUpdate=!0),o.dispatchEvent(new Xc(r,i)),"installed"===r?o.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&o.dispatchEvent(new Xc("waiting",i))}),200):"activating"===r&&(clearTimeout(o.wn),s||o.en.resolve(n))},o.dn=function(e){var t=o.hn;t===navigator.serviceWorker.controller&&(o.dispatchEvent(new Xc("controlling",{sw:t,originalEvent:e,isUpdate:o.mn})),o.on.resolve(t))},o.gn=(r=function(e){var t=e.data,n=e.source;return Yc(o.getSW(),(function(){o.an.has(n)&&o.dispatchEvent(new Xc("message",{data:t,sw:n,originalEvent:e}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),o.sn=t,o.nn=n,navigator.serviceWorker.addEventListener("message",o.gn),o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,s=o.prototype;return s.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var o=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return nu(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return o.mn=Boolean(navigator.serviceWorker.controller),o.yn=o.pn(),Yc(o.bn(),(function(e){o.fn=e,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&Qc(t.scriptURL,o.sn)&&(o.hn=t,Promise.resolve().then((function(){o.dispatchEvent(new Xc("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn,{once:!0}),o.fn}))}))}catch(e){return Promise.reject(e)}},s.update=function(){try{return this.fn?nu(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},s.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},s.messageSW=function(e){try{return Yc(this.getSW(),(function(t){return Kc(t,e)}))}catch(e){return Promise.reject(e)}},s.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&Kc(this.fn.waiting,tu)},s.pn=function(){var e=navigator.serviceWorker.controller;return e&&Qc(e.scriptURL,this.sn)?e:void 0},s.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Yc(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(o.prototype,r),o}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=Vc(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());let ru,su=!1;try{ru=new Bc({target:document.body})}catch(e){su=!0;try{var iu=document.createElement("p");iu.innerHTML="Erreur: "+e.message+"<br/><br/>OFP2MAP a besoin de navigateurs récents: Safari 14 iOS/Mac, Firefox 86, Chrome 87 et Microsoft Edge 87 sont compatibles. <br /><br />Contactez moi sur l'email AF (erdelord@...) en me donnant le message d'erreur.",document.body.appendChild(iu)}catch(Vc){}}finally{if("serviceWorker"in navigator){const e=new ou("./sw.js");pt.set(e),e.addEventListener("installed",(e=>{e.isUpdate})),e.addEventListener("activated",(t=>{t.isUpdate||e.messageSW({type:"CLIENTS_CLAIM"}),t.isExternal})),e.addEventListener("waiting",(t=>{su?(e.addEventListener("controlling",(()=>{window.location.reload()})),e.messageSkipWaiting()):(t.isExternal,Ye(400,Kc(t.sw,{type:"GET_VERSION"})).then((e=>bc(e))).catch((e=>{bc()})))})),e.register().then((e=>{su&&e&&e.unregister(),yc.set(e)}),console.error)}}return ru}();
//# sourceMappingURL=bundle.js.map
