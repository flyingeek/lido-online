var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function r(){return Object.create(null)}function i(e){e.forEach(o)}function a(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function c(e,t,n,o){if(e){const r=u(e,t,n,o);return e[0](r)}}function u(e,t,o,r){return e[1]&&r?n(o.ctx.slice(),e[1](r(t))):o.ctx}function p(e,t,n,o,r,i,a){const s=function(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}(t,o,r,i);if(s){const r=u(t,n,o,a);e.p(r,s)}}function d(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function m(e,t,n=t){return e.set(n),t}function f(t){return t&&a(t.destroy)?t.destroy:e}const g="undefined"!=typeof window;let h=g?()=>window.performance.now():()=>Date.now(),v=g?e=>requestAnimationFrame(e):e;const y=new Set;function b(e){y.forEach((t=>{t.c(e)||(y.delete(t),t.f())})),0!==y.size&&v(b)}function $(e){let t;return 0===y.size&&v(b),{promise:new Promise((n=>{y.add(t={c:e,f:n})})),abort(){y.delete(t)}}}function x(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function P(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function C(e){return document.createElement(e)}function L(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function M(e){return document.createTextNode(e)}function j(){return M(" ")}function F(){return M("")}function E(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function O(e){return function(t){return t.preventDefault(),e.call(this,t)}}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function A(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:S(e,o,t[o])}function T(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function I(e){return""===e?null:+e}function D(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function R(e,t){e.value=null==t?"":t}function z(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function q(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function W(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function N(e,t,n){e.classList[n?"add":"remove"](t)}function G(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const U=new Set;let H,B=0;function Z(e,t,n,o,r,i,a,s=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*i(e);c+=100*e+`%{${a(o,1-o)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,p=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${s}`,d=e.ownerDocument;U.add(d);const m=d.__svelte_stylesheet||(d.__svelte_stylesheet=d.head.appendChild(C("style")).sheet),f=d.__svelte_rules||(d.__svelte_rules={});f[p]||(f[p]=!0,m.insertRule(`@keyframes ${p} ${u}`,m.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${p} ${o}ms linear ${r}ms 1 both`,B+=1,p}function K(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),B-=r,B||v((()=>{B||(U.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),U.clear())})))}function X(e){H=e}function J(){if(!H)throw new Error("Function called outside component initialization");return H}function V(e){J().$$.on_mount.push(e)}function Y(){const e=J();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=G(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}function Q(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const ee=[],te=[],ne=[],oe=[],re=Promise.resolve();let ie=!1;function ae(){ie||(ie=!0,re.then(pe))}function se(e){ne.push(e)}function le(e){oe.push(e)}let ce=!1;const ue=new Set;function pe(){if(!ce){ce=!0;do{for(let e=0;e<ee.length;e+=1){const t=ee[e];X(t),de(t.$$)}for(X(null),ee.length=0;te.length;)te.pop()();for(let e=0;e<ne.length;e+=1){const t=ne[e];ue.has(t)||(ue.add(t),t())}ne.length=0}while(ee.length);for(;oe.length;)oe.pop()();ie=!1,ce=!1,ue.clear()}}function de(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(se)}}let me;function fe(){return me||(me=Promise.resolve(),me.then((()=>{me=null}))),me}function ge(e,t,n){e.dispatchEvent(G(`${t?"intro":"outro"}${n}`))}const he=new Set;let ve;function ye(){ve={r:0,c:[],p:ve}}function be(){ve.r||i(ve.c),ve=ve.p}function $e(e,t){e&&e.i&&(he.delete(e),e.i(t))}function xe(e,t,n,o){if(e&&e.o){if(he.has(e))return;he.add(e),ve.c.push((()=>{he.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const we={duration:0};function ke(n,o,r,s){let l=o(n,r),c=s?0:1,u=null,p=null,d=null;function m(){d&&K(n,d)}function f(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(o){const{delay:r=0,duration:a=300,easing:s=t,tick:g=e,css:v}=l||we,y={start:h()+r,b:o};o||(y.group=ve,ve.r+=1),u||p?p=y:(v&&(m(),d=Z(n,c,o,a,r,s,v)),o&&g(0,1),u=f(y,a),se((()=>ge(n,o,"start"))),$((e=>{if(p&&e>p.start&&(u=f(p,a),p=null,ge(n,u.b,"start"),v&&(m(),d=Z(n,c,u.b,u.duration,0,s,l.css))),u)if(e>=u.end)g(c=u.b,1-c),ge(n,u.b,"end"),p||(u.b?m():--u.group.r||i(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*s(t/u.duration),g(c,1-c)}return!(!u&&!p)})))}return{run(e){a(l)?fe().then((()=>{l=l(),g(e)})):g(e)},end(){m(),u=p=null}}}function Pe(e,t){const n=t.token={};function o(e,o,r,i){if(t.token!==n)return;t.resolved=i;let a=t.ctx;void 0!==r&&(a=a.slice(),a[r]=i);const s=e&&(t.current=e)(a);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(ye(),xe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),be())})):t.block.d(1),s.c(),$e(s,1),s.m(t.mount(),t.anchor),l=!0),t.block=s,t.blocks&&(t.blocks[o]=s),l&&pe()}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){const n=J();if(e.then((e=>{X(n),o(t.then,1,t.value,e),X(null)}),(e=>{if(X(n),o(t.catch,2,t.error,e),X(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var r}function Ce(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Le(e){e&&e.c()}function _e(e,t,n){const{fragment:r,on_mount:s,on_destroy:l,after_update:c}=e.$$;r&&r.m(t,n),se((()=>{const t=s.map(o).filter(a);l?l.push(...t):i(t),e.$$.on_mount=[]})),c.forEach(se)}function Me(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(t,n,o,a,s,l,c=[-1]){const u=H;X(t);const p=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:c,skip_bound:!1};let d=!1;if(p.ctx=o?o(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&s(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),d&&function(e,t){-1===e.$$.dirty[0]&&(ee.push(e),ae(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),d=!0,i(p.before_update),p.fragment=!!a&&a(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(k)}else p.fragment&&p.fragment.c();n.intro&&$e(t.$$.fragment),_e(t,n.target,n.anchor),pe()}X(u)}class Fe{$destroy(){Me(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Ee{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}const Oe="iPad"===navigator.platform||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Se=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),Ae=/Safari\//i.test(navigator.userAgent)&&!/(Chrome\/|Chromium\/)/i.test(navigator.userAgent),Te=matchMedia("(hover: hover)").matches;function Ie(e,t,n){let o;return function(){const r=this,i=arguments,a=function(){o=null,n||e.apply(r,i)},s=n&&!o;clearTimeout(o),o=setTimeout(a,t),s&&e.apply(r,i)}}function De(e){const t=e.split("-").slice(0,-1).join("");switch(t){case"route":return"rmain";case"alternate":return"ralt";case"nat":return"rnat";default:return t}}function Re(e,t,n){return e<=t?t:e>=n?n:e}function ze(e,t,n){return!(e<t)&&!(e>n)}function qe(e,t,n,o){return 8&n?[e[0]+(t[0]-e[0])*(o[3]-e[1])/(t[1]-e[1]),o[3]]:4&n?[e[0]+(t[0]-e[0])*(o[1]-e[1])/(t[1]-e[1]),o[1]]:2&n?[o[2],e[1]+(t[1]-e[1])*(o[2]-e[0])/(t[0]-e[0])]:1&n?[o[0],e[1]+(t[1]-e[1])*(o[0]-e[0])/(t[0]-e[0])]:null}function We(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function Ne(e,t){let n=new Promise(((t,n)=>{let o=setTimeout((()=>{clearTimeout(o),n("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,n])}const Ge=async()=>{const e={title:"OFP2MAP",url:window.location.pathname};try{await navigator.share(e)}catch(e){}return!1};function Ue(e){const t=e-1;return t*t*t+1}function He(e,{delay:n=0,duration:o=400,easing:r=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:r,css:e=>"opacity: "+e*i}}function Be(e,{delay:t=0,duration:n=400,easing:o=Ue,x:r=0,y:i=0,opacity:a=0}={}){const s=getComputedStyle(e),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-a);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*r}px, ${(1-e)*i}px);\n\t\t\topacity: ${l-u*t}`}}function Ze(e){let t;return{c(){t=C("textarea"),t.value=e[0],S(t,"class","svelte-12a0ij3")},m(n,o){w(n,t,o),e[6](t)},p(e,n){1&n&&(t.value=e[0])},d(n){n&&k(t),e[6](null)}}}function Ke(t){let n,o,r;return{c(){n=C("a"),n.textContent="copier la route",S(n,"role","button"),S(n,"class","btn btn-primary svelte-12a0ij3"),S(n,"href","lhs-mpilot://")},m(e,i){w(e,n,i),o||(r=E(n,"click",t[4]),o=!0)},p:e,d(e){e&&k(n),o=!1,r()}}}function Xe(t){let n,o,r,i,a;return{c(){n=C("a"),n.innerHTML="ouvrir mPilot <sup>*</sup>",o=j(),r=C("p"),r.innerHTML='<small class="text-muted"><sup>*</sup> Une fois dans l&#39;application mPilot,\n             il vous suffira de faire un coller (la route aura √©t√© copi√©e automatiquement).</small>',S(n,"role","button"),S(n,"class","btn btn-primary svelte-12a0ij3"),S(n,"href","lhs-mpilot://"),S(r,"class","card-text")},m(e,s){w(e,n,s),w(e,o,s),w(e,r,s),i||(a=E(n,"click",t[4]),i=!0)},p:e,d(e){e&&k(n),e&&k(o),e&&k(r),i=!1,a()}}}function Je(n){let o,r,s;return{c(){o=C("span"),o.textContent="copi√©!",S(o,"class","svelte-12a0ij3")},m(e,t){w(e,o,t),s=!0},i(e){s||(r&&r.end(1),s=!0)},o(n){r=function(n,o,r){let s,l=o(n,r),c=!0;const u=ve;function p(){const{delay:o=0,duration:r=300,easing:a=t,tick:p=e,css:d}=l||we;d&&(s=Z(n,1,0,r,o,a,d));const m=h()+o,f=m+r;se((()=>ge(n,!1,"start"))),$((e=>{if(c){if(e>=f)return p(0,1),ge(n,!1,"end"),--u.r||i(u.c),!1;if(e>=m){const t=a((e-m)/r);p(1-t,t)}}return c}))}return u.r+=1,a(l)?fe().then((()=>{l=l(),p()})):p(),{end(e){e&&l.tick&&l.tick(1,0),c&&(s&&K(n,s),c=!1)}}}(o,He,{}),s=!1},d(e){e&&k(o),e&&r&&r.end()}}}function Ve(e){let t,n,o,r,i,a,s,l,c,u,p,d,m=null!=e[0]&&Ze(e);let f=(Oe?Xe:Ke)(e),g=e[2]&&Je();return{c(){m&&m.c(),t=j(),n=C("div"),o=C("div"),r=C("h5"),r.textContent="Route Lido",i=j(),a=C("p"),a.textContent="Cette route est optimis√©e par rapport √† celle de PilotMission car elle utilise les airways. Utiliser cette route permet\nd'avoir une application Lido plus r√©active.",s=j(),f.c(),l=j(),c=C("div"),u=M(e[3]),p=j(),g&&g.c(),S(r,"class","card-title"),S(a,"class","card-text"),S(c,"class","text-monospace svelte-12a0ij3"),S(o,"class","card-body"),S(n,"class","card mb-3 svelte-12a0ij3")},m(e,h){m&&m.m(e,h),w(e,t,h),w(e,n,h),x(n,o),x(o,r),x(o,i),x(o,a),x(o,s),f.m(o,null),x(o,l),x(o,c),x(c,u),x(c,p),g&&g.m(c,null),d=!0},p(e,[n]){null!=e[0]?m?m.p(e,n):(m=Ze(e),m.c(),m.m(t.parentNode,t)):m&&(m.d(1),m=null),f.p(e,n),e[2]?g?4&n&&$e(g,1):(g=Je(),g.c(),$e(g,1),g.m(c,null)):g&&(ye(),xe(g,1,1,(()=>{g=null})),be())},i(e){d||($e(g),d=!0)},o(e){xe(g),d=!1},d(e){m&&m.d(e),e&&k(t),e&&k(n),f.d(),g&&g.d()}}}let Ye=!1;if(navigator.permissions)try{navigator.permissions.query({name:"clipboard-write"}).then((e=>{"granted"!=e.state&&"prompt"!=e.state||(Ye=!0)}))}catch(e){}function Qe(e,t,n){let o,{ofp:r}=t,i=null;const a=r?r.lidoRoute().join(" "):"";let s=!1;return e.$$set=e=>{"ofp"in e&&n(5,r=e.ofp)},[i,o,s,a,e=>{e.target.classList.remove("hasactive");const t=async function(e){let t=!0;if(Ye)navigator.clipboard.writeText(e).then((()=>t=!0),(()=>t=!1));else{n(0,i=e),await(ae(),re),o.focus(),o.select();try{t=document.execCommand("copy")}catch(e){t=!1}n(0,i=null)}return t}(a);Oe||(n(2,s=t),setTimeout((function(){n(2,s=!1)}),3e3),e.preventDefault())},r,function(e){te[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class et extends Fe{constructor(e){super(),je(this,e,Qe,Ve,s,{ofp:5})}}const tt={routePin:0,routeColor:"FFDA25A8",alternateDisplay:!0,alternatePin:0,alternateColor:"FFFF00FF",natDisplay:!0,natPin:8,natPinPosition:0,natColor:"80DA25A8",natIncompleteColor:"FF0000FF",greatCircleDisplay:!0,greatCircleColor:"5F1478FF",ogimetDisplay:!0,ogimetColor:"40FF0000",airportDisplay:!0,airportPin:0,firDisplay:!0,etopsDisplay:!0,etopsColor:"FF0324FC"};function nt(e,t){e.addFolders({name:"greatcircle",enabled:t.greatCircleDisplay,color:t.greatCircleColor},{name:"ogimet",enabled:t.ogimetDisplay,color:t.ogimetColor},{name:"ralt",enabled:t.alternateDisplay,color:t.alternateColor,pinId:t.alternatePin},{name:"rmain",color:t.routeColor,pinId:t.routePin},{name:"rnat",enabled:t.natDisplay,color:t.natColor,pinId:t.natPin},{name:"rnat_incomplete",enabled:t.natDisplay,color:t.natIncompleteColor,pinId:t.natPin})}const ot=()=>(window.kmlGen||(window.kmlGen=new editolido.KMLGenerator,nt(window.kmlGen,tt)),window.kmlGen);function rt(e,t){let n={...tt,...t};const o=ot();nt(o,n);const r=e.description;if(o.setName(r),e.isFake)return;const i=`${e.infos.departure}-${e.infos.destination}`,a=new editolido.Route(e.wptCoordinates(),{name:i,description:r}),s=new editolido.Route(e.wptCoordinatesAlternate(),{name:"Route D√©gagement"}),l=new editolido.Route([a.points[0],a.points[a.points.length-1]]).split(300,{name:`Ortho ${i}`});let c=[];for(let t of e.tracks){let e=t.isComplete?"rnat":"rnat_incomplete";o.addLine(e,t);let n=new editolido.GeoPoint(t.points[0],{name:t.name,description:t.description});o.addPoint(e,n),t.isMine&&(c.push(n),n=new editolido.GeoPoint(t.points[t.points.length-1],{name:t.name,description:t.description}),c.push(n),o.addPoint(e,n))}o.addLine("greatcircle",l),o.addLine("rmain",a),o.addPoints("rmain",a,{excluded:c}),o.addLine("ralt",s),o.addLine("ogimet",e.ogimetData.route),o.addPoints("ralt",s)}function it(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function at(e){let t,n,o,r=e[14].label+"";return{c(){t=C("option"),n=M(r),t.__value=e[16],t.value=t.__value,t.selected=o=e[16]===e[1]},m(e,o){w(e,t,o),x(t,n)},p(e,n){2&n&&o!==(o=e[16]===e[1])&&(t.selected=o)},d(e){e&&k(t)}}}function st(t){let n,o,r,s,l,c,u,p,d,m,g,h,v,y,b,$,_,M,F=ft,O=[];for(let e=0;e<F.length;e+=1)O[e]=at(it(t,F,e));return{c(){n=C("kmlcolor"),o=C("pin"),r=L("svg"),s=L("use"),l=j(),c=C("select");for(let e=0;e<O.length;e+=1)O[e].c();u=j(),p=C("picker"),d=C("label"),m=C("input"),v=j(),y=C("input"),T(s,"xlink:href","#marker-symbol"),z(s,"stroke",0===t[1]?"#fff":"#000"),z(s,"fill",ft[t[1]].color),S(o,"class","form-control svelte-15ps55h"),S(c,"name",t[4]),S(c,"class","custom-select"),void 0===t[1]&&se((()=>t[8].call(c))),S(m,"type","color"),S(d,"style",g=mt(t[2])),S(y,"type","range"),S(y,"min","30"),S(y,"max","255"),S(p,"class","form-control"),S(p,"style",b=dt(t[2][0])),S(n,"class","input-group")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,s),x(n,l),x(n,c);for(let e=0;e<O.length;e+=1)O[e].m(c,null);q(c,t[1]),x(n,u),x(n,p),x(p,d),x(d,m),R(m,t[2][0]),x(p,v),x(p,y),R(y,t[2][1]),_||(M=[E(c,"change",t[8]),E(c,"change",t[9]),E(m,"input",t[10]),f(h=t[5].call(null,d,t[2])),E(y,"change",t[11]),E(y,"input",t[11]),f($=t[6].call(null,n,t[0]))],_=!0)},p(e,[t]){if(2&t&&z(s,"stroke",0===e[1]?"#fff":"#000"),2&t&&z(s,"fill",ft[e[1]].color),2&t){let n;for(F=ft,n=0;n<F.length;n+=1){const o=it(e,F,n);O[n]?O[n].p(o,t):(O[n]=at(o),O[n].c(),O[n].m(c,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=F.length}2&t&&q(c,e[1]),4&t&&R(m,e[2][0]),4&t&&g!==(g=mt(e[2]))&&S(d,"style",g),h&&a(h.update)&&4&t&&h.update.call(null,e[2]),4&t&&R(y,e[2][1]),4&t&&b!==(b=dt(e[2][0]))&&S(p,"style",b),$&&a($.update)&&1&t&&$.update.call(null,e[0])},i:e,o:e,d(e){e&&k(n),P(O,e),_=!1,i(M)}}}const lt=/^[A-F0-9]{8}$/i,ct=e=>{let[t,n]=pt(e);return[t,n/255]},ut=["#FF0000",255],pt=e=>{try{const t=parseInt(e.slice(0,2),16);return["#"+e.slice(6,8)+e.slice(4,6)+e.slice(2,4),t]}catch(e){swatch=ut}},dt=e=>{const[t,n,o]=[e.slice(1,3),e.slice(3,5),e.slice(5,7)].map((e=>parseInt(e,16)));return`--range-red: ${t}; --range-green: ${n}; --range-blue: ${o};`},mt=e=>`background-color: ${e[0]}; opacity: ${e[1]/255}`,ft=[{label:"Aucun rep√®re",color:"#FFFFFF"},{label:"Bleu",color:"#6699FF"},{label:"Jaune",color:"#FFFF00"},{label:"Marron* (Rouge pour Avenza)",color:"#CC9966"},{label:"Orange",color:"#FF9922"},{label:"Rose* (Rouge pour Avenza)",color:"#DD5599"},{label:"Rouge",color:"#FF0000"},{label:"Vert",color:"#22DD44"},{label:"Violet",color:"#BB11EE"}];function gt(e,t,n){const o=Y();let{kmlColor:r="FF0000FF"}=t,{selected:i=0}=t,{name:a}=t;const s=a+"-color",l=a+"-pin";let c=ut;const u=Ie(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"selected"in e&&n(1,i=e.selected),"name"in e&&n(7,a=e.name)},[r,i,c,o,l,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),u("change",{name:s,value:r})}}},function(e){return n(2,c=pt(r)),{update(e){n(2,c=pt(e)),u("change",{name:s,value:e.toUpperCase()})}}},a,function(){i=W(this),n(1,i)},e=>{e.target.blur(),o("change",{name:l,value:i})},function(){c[0]=this.value,n(2,c)},function(){c[1]=I(this.value),n(2,c)}]}class ht extends Fe{constructor(e){super(),je(this,e,gt,st,s,{kmlColor:0,selected:1,name:7})}}const vt=Object.freeze({optionsKML:"optionsKML",shortcut:"shortcut",downloadType:"downloadType"}),yt=new class{constructor(){}getItem(e){const t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(t){this.removeItem(e)}return null}setItem(e,t){"{}"!==(t=JSON.stringify(t))&&localStorage.setItem(e,t)}removeItem(e){localStorage.removeItem(e)}},bt=(e,t,n="Mon OFP2MAP")=>{const o={};for(const[t,n]of Object.entries(vt)){let r=yt.getItem(n);if(t===vt.optionsKML&&e){const t={};for(const n of Object.keys(e).filter((t=>e[t]!==tt[t])))t[n]=e[n];r=t}if(null!==r)if(t===vt.optionsKML)for(const[e,t]of Object.entries(r))o[e]=t;else o[t]=r}const r=Object.entries(o).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),i=window.location.origin+window.location.pathname+(r?"?"+r:"")+"#"+t;window.history.replaceState(o,n,i)};function $t(t){let n,o,r,a,s,l,c,u,p,d;return{c(){n=C("div"),o=C("div"),o.innerHTML='<span class="input-group-text svelte-1ecyaux"></span>',r=j(),a=C("input"),s=j(),l=C("div"),c=C("a"),u=M("Lancer"),S(o,"class","input-group-prepend"),S(a,"class","form-control svelte-1ecyaux"),S(a,"placeholder","Nom du raccourci"),S(a,"type","text"),S(c,"class","btn btn-outline-secondary svelte-1ecyaux"),S(c,"href",t[1]),N(c,"disabled",!(t[0].trim()&&Oe)),S(l,"class","input-group-append"),S(n,"class","input-group")},m(e,i){w(e,n,i),x(n,o),x(n,r),x(n,a),R(a,t[0]),x(n,s),x(n,l),x(l,c),x(c,u),p||(d=[E(a,"input",t[5]),E(a,"change",t[3]),E(c,"click",t[2])],p=!0)},p(e,[t]){1&t&&a.value!==e[0]&&R(a,e[0]),2&t&&S(c,"href",e[1]),1&t&&N(c,"disabled",!(e[0].trim()&&Oe))},i:e,o:e,d(e){e&&k(n),p=!1,i(d)}}}const xt="OFP2MAP";function wt(e,t,n){const o=Y(),r=vt.shortcut;let i,a=yt.getItem(r)||xt,{ofp:s}=t;const l=s?s.lidoRoute().join(" "):"";return e.$$set=e=>{"ofp"in e&&n(4,s=e.ofp)},[a,i,function(e){const t=a.trim();if(t&&Oe){const e=ot(),o={lidoRoute:l,kml:e.render(),kmlAvenza:e.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS}),grametProxyURL:s.ogimetData.proxyImg};n(1,i="shortcuts://run-shortcut?name="+encodeURIComponent(t)+"&input=text&text="+encodeURIComponent(JSON.stringify(o)))}else e.preventDefault()},function(){const e=a.trim();e===xt?yt.removeItem(r):yt.setItem(r,e),o("save",[r,e])},s,function(){a=this.value,n(0,a)}]}class kt extends Fe{constructor(e){super(),je(this,e,wt,$t,s,{ofp:4})}}function Pt(t){let n,o,r,a,s,l,c,u,p,d,m,f,g,h,v,y=_t[0]+"",b=_t[1]+"";return{c(){n=C("div"),o=C("select"),r=C("option"),a=M(y),l=C("option"),c=M(b),p=j(),d=C("div"),m=C("a"),f=M(t[0]),r.selected=s=0===t[1],r.__value=0,r.value=r.__value,l.selected=u=1===t[1],l.__value=1,l.value=l.__value,S(o,"class","custom-select svelte-19hokx5"),S(o,"aria-label","Example select with button addon"),void 0===t[1]&&se((()=>t[6].call(o))),S(m,"class","btn btn-success"),S(m,"download",g=navigator.standalone?null:t[3]),S(m,"href",t[2]),S(m,"target",Ct),S(d,"class","input-group-append"),S(n,"class","input-group")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,a),x(o,l),x(l,c),q(o,t[1]),x(n,p),x(n,d),x(d,m),x(m,f),h||(v=[E(o,"change",t[6]),E(o,"change",t[5]),E(m,"click",t[4])],h=!0)},p(e,[t]){2&t&&s!==(s=0===e[1])&&(r.selected=s),2&t&&u!==(u=1===e[1])&&(l.selected=u),2&t&&q(o,e[1]),1&t&&D(f,e[0]),8&t&&g!==(g=navigator.standalone?null:e[3])&&S(m,"download",g),4&t&&S(m,"href",e[2])},i:e,o:e,d(e){e&&k(n),h=!1,i(v)}}}const Ct=navigator.standalone||navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)?"_blank":null,Lt=function(e,t="application/vnd.google-earth.kml+xml"){return"data:"+t+";base64,"+btoa(unescape(encodeURIComponent(e)))},_t=["KML Mapsme","KML Avenza"];function Mt(e,t,n){const o=Y();let{label:r}=t;const i=vt.downloadType;let a=yt.getItem(i)||1;"string"==typeof a&&(a=parseInt(a,10)),(a<0||a>=_t.length)&&(a=0);let s="",l="";return e.$$set=e=>{"label"in e&&n(0,r=e.label)},[r,a,s,l,function(e){const t=ot(),o=["_mapsme.kml","_avenza.kml",".geojson"][a];let r=t.name;if(r?(r=r.trim(),n(3,l=r.replace(/[ \/]/g,"_").replace(/:/g,"")+o)):n(3,l="editolido"+o),0===a)n(2,s=Lt(t.render()));else{if(1!==a)return e.preventDefault(),!1;n(2,s=Lt(t.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS})))}},function(){1===a?yt.removeItem(i):yt.setItem(i,a),o("save",[i,a])},function(){a=W(this),n(1,a)}]}class jt extends Fe{constructor(e){super(),je(this,e,Mt,Pt,s,{label:0})}}function Ft(e){let t,n,o,r,i,a,s,l,c,u,p,d,m,f,g;return s=new jt({props:{label:"T√©l√©charger"}}),s.$on("save",e[1]),d=new kt({props:{ofp:e[0]}}),d.$on("save",e[2]),{c(){t=C("div"),n=C("div"),o=C("h5"),o.textContent="Export",r=j(),i=C("div"),a=C("div"),Le(s.$$.fragment),l=j(),c=C("small"),c.textContent="Le fichier est g√©n√©r√© en fonction des options choisies sur la carte.",u=j(),p=C("div"),Le(d.$$.fragment),m=j(),f=C("small"),f.innerHTML='Sur iOS on peut lancer un raccourci.\n                <a href="https://www.icloud.com/shortcuts/2585d34bc76941febff60b8d064517ee" target="_blank">Exemple de raccourci √† installer</a>',S(o,"class","card-title"),S(c,"class","text-muted"),S(a,"class","col-12 col-sm-6 col-md-6"),S(f,"class","text-muted"),S(p,"class","col-12 col-sm-6 col-md-6"),S(i,"class","row"),S(n,"class","card-body"),S(t,"class","card mb-3 svelte-17snbjk")},m(e,h){w(e,t,h),x(t,n),x(n,o),x(n,r),x(n,i),x(i,a),_e(s,a,null),x(a,l),x(a,c),x(i,u),x(i,p),_e(d,p,null),x(p,m),x(p,f),g=!0},p(e,[t]){const n={};1&t&&(n.ofp=e[0]),d.$set(n)},i(e){g||($e(s.$$.fragment,e),$e(d.$$.fragment,e),g=!0)},o(e){xe(s.$$.fragment,e),xe(d.$$.fragment,e),g=!1},d(e){e&&k(t),Me(s),Me(d)}}}function Et(e,t,n){let{ofp:o}=t;return e.$$set=e=>{"ofp"in e&&n(0,o=e.ofp)},[o,function(t){Q(e,t)},function(t){Q(e,t)}]}class Ot extends Fe{constructor(e){super(),je(this,e,Et,Ft,s,{ofp:0})}}function St(e){let t;return{c(){t=C("div"),t.innerHTML='<span class="sr-only">Loading...</span>',S(t,"class","spinner-border text-warning"),S(t,"role","status")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function At(e){let t,n,o,r,i,a,s,l,c,u,p;return{c(){t=C("div"),n=C("p"),o=M("üò±: Erreur de r√©cup√©ration du Gramet, "),r=C("a"),r.textContent="essayez √† nouveau",i=M(" ou allez sur "),a=C("a"),s=M("ogimet"),c=M("."),S(r,"href","."),S(a,"href",l=e[0].ogimetData.url),S(a,"target","_blank"),S(n,"class","svelte-i1m2fr"),S(t,"class","error svelte-i1m2fr")},m(l,d){w(l,t,d),x(t,n),x(n,o),x(n,r),x(n,i),x(n,a),x(a,s),x(n,c),u||(p=E(r,"click",O(e[4])),u=!0)},p(e,t){1&t&&l!==(l=e[0].ogimetData.url)&&S(a,"href",l)},d(e){e&&k(t),u=!1,p()}}}function Tt(e){let t,n,o,r;return{c(){t=C("img"),S(t,"crossorigin","anonymous"),t.src!==(n=e[0].ogimetData.proxyImg)&&S(t,"src",n),S(t,"alt","gramet demo"),S(t,"class","img-fluid svelte-i1m2fr")},m(n,i){w(n,t,i),o||(r=[E(t,"error",e[2]),E(t,"load",e[3])],o=!0)},p(e,o){1&o&&t.src!==(n=e[0].ogimetData.proxyImg)&&S(t,"src",n)},d(e){e&&k(t),o=!1,i(r)}}}function It(t){let n,o,r,i,a,s,l,c,u,p,d,m,f,g,h,v,y,b,$,P,L,_="loading"===t[1]&&St();function F(e,t){return"error"!==e[1]?Tt:At}let E=F(t),O=E(t);return{c(){n=C("div"),o=C("h1"),o.innerHTML='Le GRAMET est un m√©t√©ogramme repr√©sentant le temps et l&#39;espace. Il indique, en tout point de la route,\n    et √† l&#39;heure de passage estim√©e, une coupe verticale de la m√©t√©o pr√©vue.\n    <a class="text-warning" href="http://www.ogimet.com/guia_gramet.phtml.en" target="_blank">Guide d&#39;interpr√©tation</a>',r=j(),i=C("div"),_&&_.c(),a=j(),O.c(),s=j(),l=C("div"),c=C("div"),u=C("div"),p=C("div"),d=C("div"),d.textContent="Route Ogimet",m=j(),f=C("div"),g=C("p"),h=M("Le GRAMET est r√©alis√© par "),v=C("a"),y=M("www.ogimet.com"),$=M(" √† partir\n    d'une route calcul√©e. Il est possible d'afficher la route sur la carte. Cel√† est\n    particuli√®rement utile lors des vols oc√©aniques car il n'y a aucune station en mer."),P=j(),L=C("div"),L.innerHTML='<div class="card ogimet2 svelte-i1m2fr"><div class="card-header svelte-i1m2fr">Algorithme de calcul</div> \n            <div class="card-body"><p class="card-text">Apr√®s avoir s√©lectionner les stations m√©t√©o proches de la route (13000 dans le monde), \n                une minimisation du &quot;cross track error&quot; est effectu√© pour r√©duire le nombre de points. 21 points est la\n                limite maximale pour Ogimet.</p></div></div>',S(o,"class","svelte-i1m2fr"),S(i,"class","text-center svelte-i1m2fr"),S(d,"class","card-header svelte-i1m2fr"),S(v,"class","text-warning"),S(v,"href",b=t[0].ogimetData.url),S(v,"target","_blank"),S(g,"class","card-text"),S(f,"class","card-body"),S(p,"class","card ogimet svelte-i1m2fr"),S(u,"class"," col-12 col-sm-6 col-md-6 col-xl-6"),S(L,"class","col-12 col-sm-6 col-md-6 col-xl-6"),S(c,"class","card-deck"),S(l,"class","row")},m(e,t){w(e,n,t),x(n,o),x(n,r),x(n,i),_&&_.m(i,null),x(i,a),O.m(i,null),x(n,s),x(n,l),x(l,c),x(c,u),x(u,p),x(p,d),x(p,m),x(p,f),x(f,g),x(g,h),x(g,v),x(v,y),x(g,$),x(c,P),x(c,L)},p(e,[t]){"loading"===e[1]?_||(_=St(),_.c(),_.m(i,a)):_&&(_.d(1),_=null),E===(E=F(e))&&O?O.p(e,t):(O.d(1),O=E(e),O&&(O.c(),O.m(i,null))),1&t&&b!==(b=e[0].ogimetData.url)&&S(v,"href",b)},i:e,o:e,d(e){e&&k(n),_&&_.d(),O.d()}}}function Dt(e,t,n){let o="loading",{ofp:r}=t;return e.$$set=e=>{"ofp"in e&&n(0,r=e.ofp)},[r,o,()=>n(1,o="error"),()=>n(1,o="success"),()=>n(1,o="loading")]}class Rt extends Fe{constructor(e){super(),je(this,e,Dt,It,s,{ofp:0})}}function zt(t){let n;return{c(){n=M("¬†")},m(e,t){w(e,n,t)},p:e,d(e){e&&k(n)}}}function qt(t){let n,o,r;return{c(){n=C("button"),n.textContent="Partager l'App",S(n,"class","btn btn-link")},m(e,t){w(e,n,t),o||(r=E(n,"click",Ge),o=!0)},p:e,d(e){e&&k(n),o=!1,r()}}}function Wt(t){let n,o,r,i,a;let s=(!0===navigator.standalone&&navigator.share?qt:zt)(t);return{c(){n=C("h1"),o=M("Cartographie pour l'OFP \n    "),r=C("img"),a=j(),s.c(),r.src!==(i="svg/Air_France_Logo.svg")&&S(r,"src","svg/Air_France_Logo.svg"),S(r,"alt","logo Air France"),S(r,"class","svelte-drdjg7"),S(n,"class","svelte-drdjg7")},m(e,t){w(e,n,t),x(n,o),x(n,r),x(n,a),s.m(n,null)},p(e,[t]){s.p(e,t)},i:e,o:e,d(e){e&&k(n),s.d()}}}class Nt extends Fe{constructor(e){super(),je(this,e,null,Wt,s,{})}}function Gt(t){let n,o,r,i;return n=new Nt({}),{c(){Le(n.$$.fragment),o=j(),r=C("div"),r.innerHTML='<div class="card-deck"><div class=" col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card avenza svelte-z58ee3"><div class="card-header svelte-z58ee3">COMPATIBLE OFFLINE</div> \n      <div class="card-body"><p class="card-text">L&#39;OFP ne quitte pas votre iPad ou votre ordinateur. Fonctionne avec les derni√®res technologies: PWA, Service Worker, fully responsive, cartes WebGL...</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card mapsme svelte-z58ee3"><div class="card-header svelte-z58ee3">Multiples Projections</div> \n      <div class="card-body"><p class="card-text">Des cartes LAMBERT conformes, un ATLAS, et une MERCATOR avec 12 niveaux de zoom. Export en format KML vers Mapsme ou Avenza</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card ogimet svelte-z58ee3"><div class="card-header svelte-z58ee3">Compatible avec Ogimet</div> \n      <div class="card-body"><p class="card-text">Calcule une route pour ogimet et affiche le GRAMET qui est un m√©t√©ogramme combinant l&#39;espace et le temps</p></div></div></div> \n    <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-z58ee3"><div class="card shortcuts svelte-z58ee3"><div class="card-header svelte-z58ee3">Compatible Raccourcis</div> \n      <div class="card-body"><p class="card-text">Avec l&#39;app Raccourcis, automatisez en r√©cup√©rant le KML, le Gramet, ou une route Lido optimis√©e</p></div></div></div></div>',S(r,"class","row svelte-z58ee3")},m(e,t){_e(n,e,t),w(e,o,t),w(e,r,t),i=!0},p:e,i(e){i||($e(n.$$.fragment,e),i=!0)},o(e){xe(n.$$.fragment,e),i=!1},d(e){Me(n,e),e&&k(o),e&&k(r)}}}class Ut extends Fe{constructor(e){super(),je(this,e,null,Gt,s,{})}}function Ht(t){let n,o,r,s,l,c,u,p,d,m,g,h,v,y,b,$,P;return{c(){n=C("kmlcolor"),o=C("div"),r=C("label"),s=C("input"),l=M(t[2]),c=j(),u=C("picker"),p=C("label"),d=C("input"),h=j(),v=C("input"),S(s,"name",t[4]),s.checked=t[1],S(s,"type","checkbox"),S(r,"for",t[4]),S(r,"class","input-group-text"),S(o,"class","input-group-prepend"),S(d,"type","color"),S(p,"style",m=mt(t[3])),S(v,"type","range"),S(v,"min","30"),S(v,"max","255"),S(u,"class","form-control"),S(u,"style",y=dt(t[3][0])),S(n,"class","input-group checkbox-combo")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,s),x(r,l),x(n,c),x(n,u),x(u,p),x(p,d),R(d,t[3][0]),x(u,h),x(u,v),R(v,t[3][1]),$||(P=[E(s,"change",t[8]),E(d,"input",t[9]),f(g=t[5].call(null,p,t[3])),E(v,"change",t[10]),E(v,"input",t[10]),f(b=t[6].call(null,n,t[0]))],$=!0)},p(e,[t]){2&t&&(s.checked=e[1]),4&t&&D(l,e[2]),8&t&&R(d,e[3][0]),8&t&&m!==(m=mt(e[3]))&&S(p,"style",m),g&&a(g.update)&&8&t&&g.update.call(null,e[3]),8&t&&R(v,e[3][1]),8&t&&y!==(y=dt(e[3][0]))&&S(u,"style",y),b&&a(b.update)&&1&t&&b.update.call(null,e[0])},i:e,o:e,d(e){e&&k(n),$=!1,i(P)}}}function Bt(e,t,n){const o=Y();let{kmlColor:r="FF0000FF"}=t,{checked:i}=t,{name:a}=t,{label:s="Couleur"}=t;const l=a+"-color",c=a+"-display";let u=ut;const p=Ie(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"checked"in e&&n(1,i=e.checked),"name"in e&&n(7,a=e.name),"label"in e&&n(2,s=e.label)},[r,i,s,u,c,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),p("change",{name:l,value:r})}}},function(e){return n(3,u=pt(r)),{update(e){n(3,u=pt(e)),p("change",{name:l,value:e.toUpperCase()})}}},a,function(t){Q(e,t)},function(){u[0]=this.value,n(3,u)},function(){u[1]=I(this.value),n(3,u)}]}class Zt extends Fe{constructor(e){super(),je(this,e,Bt,Ht,s,{kmlColor:0,checked:1,name:7,label:2})}}function Kt(e,t,n){const o=e.slice();return o[9]=t[n],o[11]=n,o}function Xt(e){let t,n,o,r=e[9].label+"";return{c(){t=C("option"),n=M(r),t.__value=e[11],t.value=t.__value,t.selected=o=e[11]===e[0]},m(e,o){w(e,t,o),x(t,n)},p(e,n){1&n&&o!==(o=e[11]===e[0])&&(t.selected=o)},d(e){e&&k(t)}}}function Jt(t){let n,o,r,a,s,l,c,u,p,d=Vt,m=[];for(let e=0;e<d.length;e+=1)m[e]=Xt(Kt(t,d,e));return{c(){n=C("div"),o=C("div"),r=C("label"),a=C("input"),s=M("Airports"),l=j(),c=C("select");for(let e=0;e<m.length;e+=1)m[e].c();S(a,"name",t[3]),a.checked=t[1],S(a,"type","checkbox"),S(r,"for",t[3]),S(r,"class","input-group-text"),S(o,"class","input-group-prepend"),S(c,"name",t[4]),S(c,"class","custom-select svelte-aqi3t3"),void 0===t[0]&&se((()=>t[7].call(c))),S(n,"class","input-group checkbox-combo")},m(e,i){w(e,n,i),x(n,o),x(o,r),x(r,a),x(r,s),x(n,l),x(n,c);for(let e=0;e<m.length;e+=1)m[e].m(c,null);q(c,t[0]),u||(p=[E(a,"change",t[6]),E(c,"change",t[7]),E(c,"change",t[8])],u=!0)},p(e,[t]){if(2&t&&(a.checked=e[1]),1&t){let n;for(d=Vt,n=0;n<d.length;n+=1){const o=Kt(e,d,n);m[n]?m[n].p(o,t):(m[n]=Xt(o),m[n].c(),m[n].m(c,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=d.length}1&t&&q(c,e[0])},i:e,o:e,d(e){e&&k(n),P(m,e),u=!1,i(p)}}}const Vt=[{label:"statuts"},{label:"vert/rouge"}];function Yt(e,t,n){const o=Y();let{selected:r=0}=t,{name:i="airport"}=t,{checked:a}=t;const s=i+"-display",l=i+"-pin";return e.$$set=e=>{"selected"in e&&n(0,r=e.selected),"name"in e&&n(5,i=e.name),"checked"in e&&n(1,a=e.checked)},[r,a,o,s,l,i,function(t){Q(e,t)},function(){r=W(this),n(0,r)},e=>{e.target.blur(),o("change",{name:l,value:r})}]}class Qt extends Fe{constructor(e){super(),je(this,e,Yt,Jt,s,{selected:0,name:5,checked:1})}}const en=[];function tn(e,t){return{subscribe:nn(e,t).subscribe}}function nn(t,n=e){let o;const r=[];function i(e){if(s(t,e)&&(t=e,o)){const e=!en.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),en.push(n,t)}if(e){for(let e=0;e<en.length;e+=2)en[e][0](en[e+1]);en.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,s=e){const l=[a,s];return r.push(l),1===r.length&&(o=n(i)||e),a(t),()=>{const e=r.indexOf(l);-1!==e&&r.splice(e,1),0===r.length&&(o(),o=null)}}}}const on=nn(),rn=nn(!1),an=nn(!1),sn=nn(),ln=nn(!1);let cn=new Date;const un=()=>{if("serviceWorker"in navigator){const e=18e5;new Date-cn>e&&navigator.serviceWorker.getRegistration().then((e=>{e&&(e.waiting||e.update(),rn.set(!1),cn=new Date)}),console.error)}},pn=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&un()},dn=tn({},(e=>{const t=()=>{e(navigator.onLine)};return"undefined"!=typeof navigator&&"onLine"in navigator?(t(),window.addEventListener("offline",t),window.addEventListener("online",t)):e(void 0),()=>{"undefined"!=typeof navigator&&"onLine"in navigator&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}})),mn=tn("/",(e=>{const t=()=>{const t=document.querySelector("meta[name=viewport]"),n=t?t.getAttribute("content"):"";let o=window.location.hash.substr(1)||"/";"/map"===o?(an.set(!1),n&&t.setAttribute("content",n+",maximum-scale=1")):n&&t.setAttribute("content",n.replace(",maximum-scale=1","")),e(o),un()};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}}));function fn(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function gn(e){let t,n,o,r,a,s,l,c,u,p,d,m,g,h,v,y,b,$,P,L,_,F,A,T,I,D,R,z,q,W,G,U,H,B,Z,K,X,J,V,Y,Q,ee,te,ne,oe,re,ie,ae,le,ce,ue,pe,de,me,fe,ge,he,ve,ye,be;return d=new ht({props:{name:"route",kmlColor:e[0].routeColor,selected:e[0].routePin}}),d.$on("change",e[4]),P=new ht({props:{name:"alternate",kmlColor:e[0].alternateColor,selected:e[0].alternatePin}}),P.$on("change",e[4]),R=new ht({props:{name:"nat",kmlColor:e[0].natColor,selected:e[0].natPin}}),R.$on("change",e[4]),U=new Zt({props:{name:"great-circle",label:"Orthodromie",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay}}),U.$on("change",e[4]),Z=new Zt({props:{name:"ogimet",label:"Route GRAMET",kmlColor:e[0].ogimetColor,checked:e[0].ogimetDisplay}}),Z.$on("change",e[4]),J=new Zt({props:{name:"etops",label:"ETOPS",kmlColor:e[0].etopsColor,checked:e[0].etopsDisplay}}),J.$on("change",e[4]),Q=new Qt({props:{name:"airport",selected:e[0].airportPin,checked:e[0].airportDisplay}}),Q.$on("change",e[4]),{c(){t=C("div"),n=C("a"),n.innerHTML='<svg class="svelte-1jmn2gc"><use xlink:href="#close-symbol"></use></svg>',o=j(),r=C("form"),a=C("div"),s=C("button"),s.textContent="Revenir aux valeurs par d√©faut",l=j(),c=C("fieldset"),u=C("legend"),u.textContent="Route",p=j(),Le(d.$$.fragment),m=j(),g=C("fieldset"),h=C("legend"),v=C("input"),b=M("D√©gagement"),$=j(),Le(P.$$.fragment),L=j(),_=C("fieldset"),F=C("legend"),A=C("input"),I=M("Tracks"),D=j(),Le(R.$$.fragment),z=j(),q=C("small"),q.textContent="Positionn√© √† l'entr√©e des tracks, un track incomplet restera rouge.",W=j(),G=C("fieldset"),Le(U.$$.fragment),H=j(),B=C("fieldset"),Le(Z.$$.fragment),K=j(),X=C("fieldset"),Le(J.$$.fragment),V=j(),Y=C("fieldset"),Le(Q.$$.fragment),ee=j(),te=C("fieldset"),ne=C("legend"),oe=C("input"),ie=M("FIR S√õRET√â"),ae=j(),le=C("div"),ce=C("button"),ue=M("M√©moriser"),de=j(),me=C("button"),fe=M("Restaurer"),S(n,"class","closeB svelte-1jmn2gc"),S(n,"role","button"),S(n,"href","."),S(s,"class","btn btn-light btn-sm svelte-1jmn2gc"),S(s,"type","button"),N(s,"invisible",e[1]),S(a,"class","reset svelte-1jmn2gc"),S(c,"class","form-group"),S(v,"name","alternate-display"),v.checked=y=e[0].alternateDisplay,S(v,"type","checkbox"),S(g,"class","form-group"),S(A,"name","nat-display"),A.checked=T=e[0].natDisplay,S(A,"type","checkbox"),S(q,"class","form-text text-muted svelte-1jmn2gc"),S(_,"class","form-group"),S(G,"class","form-group"),S(B,"class","form-group"),S(X,"class","form-group"),S(Y,"class","form-group"),S(oe,"name","fir-display"),oe.checked=re=e[0].firDisplay,S(oe,"type","checkbox"),S(te,"class","form-group"),ce.disabled=pe=!e[2],S(ce,"class","btn btn-primary btn-sm mb-2 svelte-1jmn2gc"),S(ce,"type","button"),me.disabled=ge=!e[2],S(me,"class","btn btn-secondary btn-sm mb-2 svelte-1jmn2gc"),S(me,"type","button"),S(le,"class","last svelte-1jmn2gc"),S(r,"class","svelte-1jmn2gc"),S(t,"class","settings svelte-1jmn2gc"),N(t,"sidebar",e[3])},m(i,y){w(i,t,y),x(t,n),x(t,o),x(t,r),x(r,a),x(a,s),x(r,l),x(r,c),x(c,u),x(c,p),_e(d,c,null),x(r,m),x(r,g),x(g,h),x(h,v),x(h,b),x(g,$),_e(P,g,null),x(r,L),x(r,_),x(_,F),x(F,A),x(F,I),x(_,D),_e(R,_,null),x(_,z),x(_,q),x(r,W),x(r,G),_e(U,G,null),x(r,H),x(r,B),_e(Z,B,null),x(r,K),x(r,X),_e(J,X,null),x(r,V),x(r,Y),_e(Q,Y,null),x(r,ee),x(r,te),x(te,ne),x(ne,oe),x(ne,ie),x(r,ae),x(r,le),x(le,ce),x(ce,ue),x(le,de),x(le,me),x(me,fe),ve=!0,ye||(be=[E(n,"click",O(e[10])),E(s,"click",e[5]),E(v,"change",e[4]),E(A,"change",e[4]),E(oe,"change",e[4]),E(ce,"click",e[7]),E(me,"click",e[6]),E(r,"submit",O(e[9])),f(fn.call(null,t)),E(t,"click_outside",e[11])],ye=!0)},p(e,n){2&n&&N(s,"invisible",e[1]);const o={};1&n&&(o.kmlColor=e[0].routeColor),1&n&&(o.selected=e[0].routePin),d.$set(o),(!ve||1&n&&y!==(y=e[0].alternateDisplay))&&(v.checked=y);const r={};1&n&&(r.kmlColor=e[0].alternateColor),1&n&&(r.selected=e[0].alternatePin),P.$set(r),(!ve||1&n&&T!==(T=e[0].natDisplay))&&(A.checked=T);const i={};1&n&&(i.kmlColor=e[0].natColor),1&n&&(i.selected=e[0].natPin),R.$set(i);const a={};1&n&&(a.kmlColor=e[0].greatCircleColor),1&n&&(a.checked=e[0].greatCircleDisplay),U.$set(a);const l={};1&n&&(l.kmlColor=e[0].ogimetColor),1&n&&(l.checked=e[0].ogimetDisplay),Z.$set(l);const c={};1&n&&(c.kmlColor=e[0].etopsColor),1&n&&(c.checked=e[0].etopsDisplay),J.$set(c);const u={};1&n&&(u.selected=e[0].airportPin),1&n&&(u.checked=e[0].airportDisplay),Q.$set(u),(!ve||1&n&&re!==(re=e[0].firDisplay))&&(oe.checked=re),(!ve||4&n&&pe!==(pe=!e[2]))&&(ce.disabled=pe),(!ve||4&n&&ge!==(ge=!e[2]))&&(me.disabled=ge),8&n&&N(t,"sidebar",e[3])},i(e){ve||($e(d.$$.fragment,e),$e(P.$$.fragment,e),$e(R.$$.fragment,e),$e(U.$$.fragment,e),$e(Z.$$.fragment,e),$e(J.$$.fragment,e),$e(Q.$$.fragment,e),se((()=>{he||(he=ke(t,Be,{duration:300,x:200,y:0},!0)),he.run(1)})),ve=!0)},o(e){xe(d.$$.fragment,e),xe(P.$$.fragment,e),xe(R.$$.fragment,e),xe(U.$$.fragment,e),xe(Z.$$.fragment,e),xe(J.$$.fragment,e),xe(Q.$$.fragment,e),he||(he=ke(t,Be,{duration:300,x:200,y:0},!1)),he.run(0),ve=!1},d(e){e&&k(t),Me(d),Me(P),Me(R),Me(U),Me(Z),Me(J),Me(Q),e&&he&&he.end(),ye=!1,i(be)}}}function hn(e){let t,n,o=e[3]&&gn(e);return{c(){o&&o.c(),t=F()},m(e,r){o&&o.m(e,r),w(e,t,r),n=!0},p(e,[n]){e[3]?o?(o.p(e,n),8&n&&$e(o,1)):(o=gn(e),o.c(),$e(o,1),o.m(t.parentNode,t)):o&&(ye(),xe(o,1,1,(()=>{o=null})),be())},i(e){n||($e(o),n=!0)},o(e){xe(o),n=!1},d(e){o&&o.d(e),e&&k(t)}}}function vn(e,t){return JSON.stringify(e)===JSON.stringify(t)}function yn(e,t,n){let o,r,i;l(e,an,(e=>n(3,i=e)));const a=Y(),s=vt.optionsKML;let{kmlOptions:c}=t,u={...tt,...yt.getItem(s)||{}};function p(e){let t=!1;for(const[r,i]of Object.entries(e))c[r]!==i&&(n(0,c[r]=i,c),a("change",{name:(o=r,o.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()),value:i}),t=!0);var o;t&&n(0,c={...e})}return e.$$set=e=>{"kmlOptions"in e&&n(0,c=e.kmlOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=vn(tt,c)),257&e.$$.dirty&&n(2,r=!vn(u,c))},[c,o,r,i,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=t.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}));c[r]!==o&&(n(0,c[r]=o,c),a("change",{name:t,value:o}))},function(){p(tt)},function(){p(u)},function(){if(o)yt.removeItem(s);else{const e={};for(const t of Object.keys(c).filter((e=>c[e]!==tt[e])))e[t]=c[t];yt.setItem(s,e)}a("save"),n(8,u={...c})},u,function(t){Q(e,t)},()=>{m(an,i=!i,i)},()=>m(an,i=!1,i)]}class bn extends Fe{constructor(e){super(),je(this,e,yn,hn,s,{kmlOptions:0})}}const $n="airport-layer",xn="airport-emer-layer",wn="airport-source",kn=(e,t,n,o)=>0===e?(e=>["case",["==",8,["get",`${e}`]],"#ea80d8",["==",7,["get",`${e}`]],"#ea80d8",["==",6,["get",`${e}`]],"#dddddd",["==",5,["get",`${e}`]],"#dddddd",["==",4,["get",`${e}`]],"#fbfe98",["==",3,["get",`${e}`]],"#fbfe98",["==",2,["get",`${e}`]],"#00b0f1",["==",1,["get",`${e}`]],"#00b0f1","#000"])(t):((e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#095","#C71"])(n,o),Pn=(e,t=!0)=>t?["in",`${e}`,["get","type"]]:["!",["in",`${e}`,["get","type"]]],Cn=(e,t)=>["case",["in",["get","name"],["literal",t]],0,["get",`${e}`]],Ln=e=>0===e?3:0,_n=(e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#000","#C60"];function Mn(e,t){const{map:n}=e;n.getLayer($n)&&n.setLayoutProperty($n,"visibility",t?"visible":"none"),n.getLayer(xn)&&n.setLayoutProperty(xn,"visibility",t?"visible":"none")}var jn={show:e=>Mn(e,!0),hide:e=>Mn(e,!1),remove:()=>{},add:e=>{const{map:t,mapData:n,ofp:o,kmlOptions:r}=e,{affineOrDrop:i}=n,a=i;let s=[];o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0&&(s=[o.infos.EEP,o.infos.EXP]);const l=o.isFake?o.isFake:o.infos.aircraft,c=o.infos.raltPoints,u=r.etopsColor,p=r.airportPin,d=r.airportDisplay,[m]=ct(u),f=s.map((e=>e.name)),g=c.map((e=>e.name)),h=f.concat(g);fetch("data/airports.2102a.geojson").then((e=>e.json())).then((e=>{if(a){const t=[];for(let n of e.features)n.geometry.coordinates=a(n.geometry.coordinates),void 0!==n.geometry.coordinates&&t.push(n);e.features=t}t.addSource(wn,{type:"geojson",data:e}),t.addLayer({id:xn,type:"symbol",source:wn,layout:{"icon-image":["case",["==",2,["get","level"]],"sdf-star","sdf-airport"],"icon-size":["case",["==",2,["get","level"]],.5,.4],"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:d?"visible":"none","text-field":["get","name"],"text-size":8,"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1},paint:{"icon-color":["case",["==",1,["get","level"]],"#D70","#B02"],"icon-halo-width":0,"icon-halo-color":"#000","text-color":"#000","text-opacity":.8},filter:Pn(l,!1)}),t.addLayer({id:$n,type:"symbol",source:wn,layout:{"icon-image":["case",["in",["get","name"],["literal",h]],"sdf-triangle","sdf-airport"],"icon-size":["case",["in",["get","name"],["literal",h]],1,.6],"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:d?"visible":"none","text-field":["get","name"],"text-size":["case",["in",["get","name"],["literal",h]],10,8],"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1,"symbol-sort-key":Cn(l,h)},paint:{"icon-halo-color":["case",["==",0,["get","level"]],"#095","#D70"],"icon-halo-width":Ln(p),"icon-color":kn(p,l,g,m),"text-color":_n(g,m),"text-halo-color":"#000","text-halo-width":["case",["==",0,["get","level"]],0,0],"text-opacity":.8},filter:Pn(l)});const n=new mapboxgl.Popup({closeButton:!1,closeOnClick:!1,closeOnMove:!Te}),o=function(e){const o=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.title;for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;n.setLngLat(o).setHTML(r).addTo(t)},r=()=>t.getCanvas().style.cursor="pointer",i=()=>t.getCanvas().style.cursor="",s=function(){i(),n.remove()};Te?(t.on("mouseenter",$n,(e=>{r(),o(e)})),t.on("mouseenter",xn,(e=>{r(),o(e)})),t.on("mouseleave",$n,s),t.on("mouseleave",xn,s)):(t.on("mouseenter",$n,r),t.on("mouseenter",xn,r),t.on("click",$n,o),t.on("click",xn,o),t.on("mouseleave",$n,i),t.on("mouseleave",xn,i))}))},changeLine:()=>{},changeMarker:function(e){const{map:t,kmlOptions:n,ofp:o,aircraftType:r}=e,i=o.isFake?[]:o.infos.ralts,[a]=ct(n.etopsColor),s=n.airportPin;t.getLayer($n)&&(t.setPaintProperty($n,"icon-color",kn(s,r,i,a)),t.setPaintProperty($n,"text-color",_n(i,a)),t.setPaintProperty($n,"icon-halo-width",Ln(s)))},change:function(e){const{map:t,kmlOptions:n,aircraftType:o,ofp:r}=e,i=r.isFake?[]:r.infos.ralts,[a]=ct(n.etopsColor),s=n.airportPin;let l=[];r.infos.EEP&&r.infos.EXP&&r.infos.raltPoints.length>0&&(l=[r.infos.EEP.name,r.infos.EXP.name]);const c=l.concat(i);t.setFilter($n,Pn(o)),t.setPaintProperty($n,"icon-color",kn(s,o,i,a)),t.setLayoutProperty($n,"symbol-sort-key",Cn(o,c)),t.setFilter(xn,Pn(o,!1))}};function Fn(e,t,n){const o={type:"Feature",geometry:{type:"Point",coordinates:[e[0],e[1]]},properties:{}};return t&&(o.properties.title=t),n&&(o.properties.description=n),o}function En(e){return{type:"geojson",data:{type:"FeatureCollection",features:e}}}function On(e,t){const n={type:"Feature",geometry:{type:"LineString",coordinates:e},properties:{}};return t&&(n.properties.title=t),n}const Sn=["#FFFFFF","#6699FF","#FFFF00","#CC9966","#FF9922","#DD5599","#FF0000","#22DD44","#BB11EE","#F56"];function An(e,t,n,o,r,i,a){e.addSource(`${t}-marker-source`,En(((e,t,n)=>{let o=[];const r=e.length;for(let i=0;i<r;i++){const r=t?t([e[i].longitude,e[i].latitude]):[e[i].longitude,e[i].latitude];r&&o.push(n?n(r,e[i]):r)}return o})(n,o,((e,t)=>Fn(e,t.name.replace(/00\.0/g,"")))))),e.addLayer(Dn(t,r,a,i))}function Tn(e,t,n,o,r,i){o?e.addSource(`${t}-line-source`,En(o(n).map((e=>On(e))))):e.addSource(`${t}-line-source`,{type:"geojson",data:On(n.map((e=>[e.longitude,e.latitude])))}),e.addLayer(Rn(t,r,i))}function In(e,t,n,o,r,i){if(o){const r=n.length,i=[];for(let e=0;e<r;e++){const t=o(n[e]),r=t.length;for(let e=0;e<r;e++)i.push(On(t[e]))}e.addSource(`${t}-line-source`,En(i))}else e.addSource(`${t}-line-source`,En(n.map((e=>On(e.map((e=>[e.longitude,e.latitude])))))));e.addLayer(Rn(t,r,i))}function Dn(e,t,n,o){const[r,i]=ct(n);return{id:`${e}-marker-layer`,type:"symbol",source:`${e}-marker-source`,layout:{"icon-image":0!==t?"sdf-marker-15":"sdf-triangle","icon-size":0!==t?1:.2,"icon-anchor":0!==t?"bottom":"center","icon-offset":[0,0],"icon-allow-overlap":!1,visibility:o?"visible":"none","text-field":["get","title"],"text-size":10,"text-offset":[0,.7],"text-anchor":"top"},paint:{"icon-color":0!==t?Sn[t]:r,"icon-halo-width":1,"icon-halo-color":"#000","text-color":r,"text-opacity":Math.max(i,.7)}}}function Rn(e,t,n){const[o,r]=ct(t);let i=2,a=[1];return-1!==e.indexOf("-ep-")||-1!==e.indexOf("-etops-")?(i=1,a=[10,10]):-1!==e.indexOf("rnat")&&(i=1),{id:`${e}-line-layer`,type:"line",source:`${e}-line-source`,layout:{"line-join":"round","line-cap":"round",visibility:n?"visible":"none"},paint:{"line-color":o,"line-opacity":r,"line-width":i,"line-dasharray":a}}}function zn(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,i=`${e}-marker-layer`;if(n.getLayer(i)&&n.getLayer(r)){const e=o,t=Sn[e],a=n.getPaintProperty(r,"line-color");n.setPaintProperty(i,"icon-color",0!==e?t:a),n.setPaintProperty(i,"text-color",a),n.setLayoutProperty(i,"icon-size",0!==e?1:.2),n.setLayoutProperty(i,"icon-image",0!==e?"sdf-marker-15":"sdf-triangle"),n.setLayoutProperty(i,"icon-anchor",0!==e?"bottom":"center")}return!0}function qn(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,i=`${e}-marker-layer`,[a,s]=ct(o);return n.getLayer(r)&&(n.setPaintProperty(r,"line-color",a),n.setPaintProperty(r,"line-opacity",s)),n.getLayer(i)&&n.setPaintProperty(i,"text-color",a),!0}function Wn(e,t,n){const{map:o}=n,r=`${e}-line-layer`,i=`${e}-marker-layer`;return o.getLayer(r)&&o.setLayoutProperty(r,"visibility",t?"visible":"none"),o.getLayer(i)&&o.setLayoutProperty(i,"visibility",t?"visible":"none"),!0}const Nn="etops-ep-circle-line-layer",Gn="etops-etops-circle-line-layer";function Un(e,t){const{map:n}=e;n.getLayer(Gn)&&n.setLayoutProperty(Gn,"visibility",t?"visible":"none"),n.getLayer(Nn)&&n.setLayoutProperty(Nn,"visibility",t?"visible":"none")}var Hn={show:e=>Un(e,!0),hide:e=>Un(e,!1),remove:()=>{},add:function(e){const{map:t,mapData:n,ofp:o,kmlOptions:r}=e;if(!o.isFake&&o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0){const{affineAndClip:e}=n;o.infos.EEP,o.infos.EXP;const i=o.infos.ETOPS,a=r.etopsDisplay;In(t,"etops-ep-circle",[o.infos.EEP.circle(420,48),o.infos.EXP.circle(420,48)],e,r.routeColor,a),In(t,"etops-etops-circle",o.infos.raltPoints.map((e=>e.circle(7*i))),e,r.etopsColor,a)}},changeLine:e=>function(e){const{map:t}=e,[n,o]=ct(e.value);t.getLayer(Gn)&&(t.setPaintProperty(Gn,"line-color",n),t.setPaintProperty(Gn,"line-opacity",o))}(e),changeMarker:()=>{},change:()=>{}};const Bn="fir-reg-line-layer",Zn="fir-reg-layer",Kn="fir-reg-source";function Xn(e,t){const{map:n}=e;n.getLayer(Zn)&&n.setLayoutProperty(Zn,"visibility",t?"visible":"none"),n.getLayer(Bn)&&n.setLayoutProperty(Bn,"visibility",t?"visible":"none")}var Jn={show:e=>Xn(e,!0),hide:e=>Xn(e,!1),remove:()=>{},add:e=>{const{map:t,mapData:n,kmlOptions:o,mapOptions:r}=e;if("jb_pacific"===r.id)return;const{affine:i}=n,a=o.firDisplay;fetch("data/fir-reg.2102a.geojson").then((e=>e.json())).then((e=>{if(i)for(let t=0;t<e.features.length;t++){const n=e.features[t].geometry.coordinates[0];e.features[t].geometry.coordinates=[n.map((e=>i(e)))]}t.addSource(Kn,{type:"geojson",data:e}),t.addLayer({id:Zn,type:"fill",source:Kn,layout:{visibility:a?"visible":"none"},paint:{"fill-color":["case",["==","FIR-RED",["get","type"]],"rgba(255,0,0,0.2)","rgba(255,127,0,0.25)"]}}),t.addLayer({id:Bn,type:"line",source:Kn,layout:{visibility:a?"visible":"none"},paint:{"line-color":["case",["==","FIR-RED",["get","type"]],"rgb(255,0,0)","rgb(255,127,0)"],"line-width":1,"line-opacity":["case",["==","FIR-RED",["get","type"]],.4,.6]}})}))},changeLine:()=>{},changeMarker:()=>{},change:()=>{}};const Vn="great-circle";var Yn={show:Wn.bind(null,Vn,!0),hide:Wn.bind(null,Vn,!1),remove:()=>{},add:e=>{const{ofp:t,kmlOptions:n,mapData:o,map:r}=e;if(t.isFake)return;const{affineAndClip:i}=o,a=`${t.infos.departure}-${t.infos.destination}`,s=t.route,l=new editolido.Route([s.points[0],s.points[s.points.length-1]]).split(300,{name:`Ortho ${a}`});Tn(r,Vn,l.points,i,n.greatCircleColor,n.greatCircleDisplay)},changeLine:qn.bind(null,Vn),changeMarker:zn.bind(null,Vn)};const Qn="ogimet";var eo={show:Wn.bind(null,Qn,!0),hide:Wn.bind(null,Qn,!1),remove:()=>{},add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(n.isFake)return;const{affineAndClip:i}=r;Tn(t,Qn,n.ogimetData.route.points,i,o.ogimetColor,o.ogimetDisplay)},changeLine:qn.bind(null,Qn),changeMarker:zn.bind(null,Qn)};const to="ralt";var no={show:Wn.bind(null,to,!0),hide:Wn.bind(null,to,!1),remove:()=>{},add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(n.isFake)return;const{affineAndClip:i,affineOrDrop:a}=r,s=new editolido.Route(n.wptCoordinatesAlternate(),{name:"Route D√©gagement"});Tn(t,to,s.points,i,o.alternateColor,o.alternateDisplay),An(t,to,s.points,a,o.alternatePin,o.alternateDisplay,o.alternateColor)},changeLine:qn.bind(null,to),changeMarker:zn.bind(null,to),change:()=>{}};const oo="rmain";var ro={show:Wn.bind(null,oo,!0),hide:Wn.bind(null,oo,!1),remove:()=>{},add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(n.isFake)return;const{affineAndClip:i,affineOrDrop:a}=r,s=n.route;s.name=`${n.infos.departure}-${n.infos.destination}`,s.description=n.description,Tn(t,oo,s.points,i,o.routeColor,!0),An(t,oo,s.points,a,o.routePin,!0,o.routeColor)},changeLine:e=>qn(oo,e)&&function(e){const{map:t,kmlOptions:n}=e,[o,r]=ct(n.routeColor);t.getLayer(Nn)&&(t.setPaintProperty(Nn,"line-color",o),t.setPaintProperty(Nn,"line-opacity",r))}(e),changeMarker:zn.bind(null,oo),change:()=>{}};const io="rnat";const ao={airport:jn,etops:Hn,fir:Jn,greatcircle:Yn,ogimet:eo,ralt:no,rmain:ro,rnat:{show:e=>Wn(io,!0,e)&&Wn("rnat-incomplete",!0,e),hide:e=>Wn(io,!1,e)&&Wn("rnat-incomplete",!1,e),remove:()=>{},add:function(e){const{map:t,ofp:n,mapData:o,kmlOptions:r}=e;if(n.isFake)return;const{affineOrDrop:i,affineAndClip:a}=o,s=i,l=a,c=r.natColor,u=r.natPin,p=r.natDisplay,d={rnat:[],"rnat-incomplete":[]},m={rnat:[],"rnat-incomplete":[]};for(let e of n.tracks){const t=e.isComplete?"rnat":"rnat-incomplete";if(l){const n=l(e.points),o=n.length;for(let r=0;r<o;r++)d[t].push(On(n[r],e.name))}else d[t].push(On(e.points.map((e=>[e.longitude,e.latitude])),e.name));const n=e.points[0];let o=s?s([n.longitude,n.latitude]):[n.longitude,n.latitude];if(o&&m[t].push(Fn(o,`${e.name}\n${n.name}`,e.description)),e.isMine){const n=e.points[e.points.length-1];o=s?s([n.longitude,n.latitude]):[n.longitude,n.latitude],o&&m[t].push(Fn(o,`${e.name}\n${n.name}`,e.description))}}t.addSource("rnat-marker-source",En(m.rnat)),t.addSource("rnat-incomplete-marker-source",En(m["rnat-incomplete"])),t.addSource("rnat-line-source",En(d.rnat)),t.addSource("rnat-incomplete-line-source",En(d["rnat-incomplete"])),t.addLayer(Rn("rnat",c,p)),t.addLayer(Rn("rnat-incomplete",r.natIncompleteColor,p)),t.addLayer(Dn("rnat",u,c,p)),t.addLayer(Dn("rnat-incomplete",u,c,p));const f=e=>{for(var n=e.features[0].geometry.coordinates.slice(),o=e.features[0].properties.description;Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;(new mapboxgl.Popup).setLngLat(n).setHTML(o).addTo(t)},g=e=>{const n=e+"-marker-layer";t.on("click",n,f),t.on("mouseenter",n,(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave",n,(function(){t.getCanvas().style.cursor=""}))};g("rnat"),g("rnat-incomplete")},changeLine:qn.bind(null,io),changeMarker:zn.bind(null,io),change:()=>{}}},so=2*Math.PI,lo=Math.PI/4,co=function(e){return Math.abs(e)<=3.14159265359?e:e-function(e){return e<0?-1:1}(e)*so};var uo={init:function(){},forward:function(e){var t=e.x,n=e.y,o=co(t-this.long0),r=Math.tan(n/2),i=Math.sin(lo*r),a=i*i,s=this.x0+this.a*o*(.74482-.34588*a),l=this.y0+1.70711*this.a*r;return e.x=s,e.y=l,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.y/1.70711/this.a,n=Math.sin(lo*t),o=n*n,r=co(this.long0+e.x/this.a/(.74482-.34588*o)),i=2*Math.atan(t);return e.x=r,e.y=i,e},names:["The Times","times"]};function po(e,t,n,o,r){window.proj4.Proj.projections.get("times")||window.proj4.Proj.projections.add(uo);let i={container:e,center:[0,49],zoom:2,attributionControl:!0,customAttribution:`Yammer/${t.id.startsWith("jb_")?"QGIS & Avenza maps":"Maps.me"} - Airports/FIR ¬© Olivier Ravet`};const a=new mapboxgl.Map({...t.mapboxOptions,...i});let s,l,c,u;a._setCacheLimits(320,32),a.loadImage("sdf/maki-marker-sdf.png",(function(e,t){e||a.addImage("sdf-marker-15",t,{pixelRatio:2,sdf:!0})})),a.loadImage("sdf/map-triangle-sdf.png",(function(e,t){e||a.addImage("sdf-triangle",t,{pixelRatio:2,sdf:!0})})),a.loadImage("sdf/map-circle-sdf.png",(function(e,t){e||a.addImage("sdf-airport",t,{pixelRatio:2,sdf:!0})})),a.loadImage("sdf/map-star-sdf.png",(function(e,t){e||a.addImage("sdf-star",t,{pixelRatio:2,sdf:!0})})),window.proj4.defs("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),window.proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");let p,d=e=>window.proj4("WGS84","EPSG:3857",e),m=e=>window.proj4("EPSG:3857","WGS84",e);if(t.extent){let e,n,o,r;if(window.proj4.defs("CUSTOM",t.proj4),t.affineTransform)[e,n,o,r]=t.affineTransform;else if(t.ratio){const i=[-20026376.39,-20048966.1,20026376.39,20048966.1],a=i[2]-i[0],s=i[3]-i[1],[l,c,u,p]=t.extent,[d,m]=t.ratio,f=a/d*m*(s/a),[g,h,v,y]=[i[0],i[3]-f,i[2],i[3]];e=(v-g)/(u-l),n=g-e*l,o=(y-h)/(p-c),r=h-o*c}else{const[i,a,s,l]=t.extent,[c,u,p,d]=[-20026376.39,-20048966.1,20026376.39,20048966.1];e=(p-c)/(s-i),n=c-e*i,o=(d-u)/(l-a),r=u-o*a}const[i,a,p,f]=t.viewport?t.viewport:t.extent,g=e=>window.proj4("WGS84","CUSTOM",e),h=t=>[e*t[0]+n,o*t[1]+r],v=e=>m(h(e));d=e=>h(g(e)),s=e=>m(d(e)),l=e=>{let[t,n]=g(e);return t=Re(t,i,p),n=Re(n,a,f),v([t,n])},c=e=>{let[t,n]=g(e);if(ze(t,i,p)&&ze(n,a,f))return v([t,n])},u=e=>{if(0===e.length)return[];return function(e,t,n){var o,r,i,a,s,l=e.length,c=We(e[0],t),u=[];for(n||(n=[]),o=1;o<l;o++){for(r=e[o-1],a=s=We(i=e[o],t);;){if(!(c|a)){u.push(r),a!==s?(u.push(i),o<l-1&&(n.push(u),u=[])):o===l-1&&u.push(i);break}if(c&a)break;c?c=We(r=qe(r,i,c,t),t):a=We(i=qe(r,i,a,t),t)}c=s}return u.length&&n.push(u),n}(e.map((e=>g([e.longitude,e.latitude]))),t.extent).map((e=>e.map((e=>v(e)))))}}let f=[];if(!n.isFake){for(const e of n.tracks)f=f.concat(e.points);f=f.concat(n.route.points,n.wptCoordinatesAlternate()),p=((e,t,n=[1/0,1/0,-1/0,-1/0])=>{for(const[o,r]of e.map((e=>t?t([e.longitude,e.latitude]):[e.longitude,e.latitude])))n[0]>o&&(n[0]=o),n[1]>r&&(n[1]=r),n[2]<o&&(n[2]=o),n[3]<r&&(n[3]=r);return n[0]-=1,n[1]-=1,n[2]+=1,n[3]+=1,n})(f,l),a.fitBounds(p,{padding:{top:30,bottom:80,left:30,right:30}})}const g=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!1},fitBoundsOptions:{maxZoom:3},trackUserLocation:!0});if(s){const e=g._onSuccess;g._onSuccess=function(t){const[n,o]=s([t.coords.longitude,t.coords.latitude]);return e.apply(this,[{coords:{longitude:n,latitude:o,accuracy:t.coords.accuracy}}])}}const h={map:a,affine:s,affineAndClamp:l,affineAndClip:u,affineOrDrop:c,bbox:p,mapOptions:t};return a.addControl(new class{onAdd(e){return this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl  mapboxgl-ctrl-group",this._button=document.createElement("button"),this._button.className="mapboxgl-ctrl-layers",this._button.setAttribute("type","button"),this._button.setAttribute("title","Personnaliser la carte"),this._button.innerHTML='<svg><use xlink:href="#layers-symbol"/></svg>',this._container.appendChild(this._button),this._toggleSidebar=()=>an.update((e=>!e)),this._button.addEventListener("click",this._toggleSidebar),this._container}onRemove(){this._button.removeEventListener("click",this._toggleSidebar),this._container.parentNode.removeChild(this._container),this._map=void 0}}),a.addControl(g),a.on("load",(function(){(e=>{const{map:t,mapOptions:n}=e;n.tiles&&(t.addSource("jb-raster",{type:"raster",tiles:n.tiles,tileSize:n.tileSize}),t.addLayer({id:"jb-layer",type:"raster",source:"jb-raster",minzoom:0,maxzoom:22,paint:{"raster-opacity":1}})),Object.values(ao).forEach((t=>t.add(e)))})({ofp:n,kmlOptions:o,mapData:h,map:a,mapOptions:t}),n.isFake||async function(e,t){if(window.caches)try{const n=await window.caches.open(t);await n.addAll(e)}catch(e){}}([n.ogimetData.proxyImg],"lido-gramet2"),r&&r(a,t)})),h}class mo{constructor(e,t,n){this.dbName=e,this.dbPromise=new Promise(((o,r)=>{const i=indexedDB.open(e,t);i.onsuccess=()=>{o(i)},i.onerror=()=>{r("Error while opening DB")},i.onupgradeneeded=n?n.bind(null,i):()=>{}}))}getImageIdFromURL(e){return e.pathname.replace(/[/.]/g,"_")}async fetchImageFromDB(e,t){const n=await this.dbPromise;return new Promise(((o,r)=>{const i=n.result.transaction(t,"readonly").objectStore(t).get(e);i.onsuccess=()=>{o(i.result)},i.onerror=()=>{r("Something went wrong while fetching image from DB ")}}))}async putImageInDB(e,t,n){const o=await this.dbPromise;return new Promise(((r,i)=>{const a=o.result.transaction(t,"readwrite").objectStore(t),s=a.put(n,e);s.onsuccess=()=>{const t=a.get(e);t.onsuccess=()=>{r(t.result)}},s.onerror=()=>{i("Something went wrong while putting image in DB ")}}))}getCacheHandler(e){return this._cacheHandler.bind(this,e)}async isNotCached(e,t){const n=this.getImageIdFromURL(t),o=await this.dbPromise;return new Promise(((r,i)=>{const a=o.result.transaction(e,"readonly").objectStore(e).getKey(n);a.onsuccess=()=>{r(void 0===a.result?t:null)},a.onerror=()=>{i("Something went wrong while checking if cached from DB ")}}))}async countTiles(e){const t=await this.dbPromise;return new Promise(((n,o)=>{const r=t.result.transaction(e,"readonly").objectStore(e).count();r.onsuccess=()=>n(r.result),r.onerror=()=>o("Something went wrong while counting entries from DB")}))}async close(){(await this.dbPromise).result.close()}async _cacheHandler(e,{request:t,url:n}){const o=this.getImageIdFromURL(n);return this.fetchImageFromDB(o,e).then((n=>n?new Response(n):fetch(t).then((e=>e.clone().blob())).then((t=>t.type.startsWith("image/")||"application/x-protobuf"===t.type?this.putImageInDB(o,e,t).then((e=>new Response(e))):new Response("",{status:404,statusText:"invalid image found (sw)"})))))}}function fo(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}function go(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}const ho=async(e,t)=>{const{map:n,mapOptions:o,bbox:r}=t;if(e.isFake||void 0===n)return[];const i=new mo("lido-tiles");if(o.cacheAll){const e=await i.countTiles(o.cacheName);let t;if(t=o.matrix?o.matrix.map((([e,t])=>e*t)):[...Array(o.cacheZoom+1).keys()].map((e=>Math.pow(2,e)*Math.pow(2,e))),e>=t.reduce(((e,t)=>e+t),0))return i.close(),caches[o.id]=!0,[]}const[a,s]=[[r[0],r[1]],[r[2],r[3]]],l=[];for(let e=0;e<=o.cacheZoom;e++){let t,r;const c=Math.pow(2,e);let u,p;o.cacheAll?(t={x:0,y:c-1},r={x:c-1,y:0}):(t={x:fo(a[0],e),y:go(a[1],e)},r={x:fo(s[0],e),y:go(s[1],e)}),o.matrix?[u,p]=o.matrix[e]:[u,p]=[c,c];for(let a=t.x;a<=r.x;a++)for(let s=r.y;s<=t.y;s++)if(a>=0&&s>=0&&a<u&&s<p){let t;o.tiles?(t=new URL(o.tiles[0].replace("{z}",e).replace("{x}",a).replace("{y}",s)),l.push(i.isNotCached(o.cacheName,t))):(t=new URL(`https://api.mapbox.com/v4/denizotjb.63g5ah66/${e}/${a}/${s}@2x.webp?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(i.isNotCached(o.cacheName,t)),t=new URL(`https://api.mapbox.com/v4/denizotjb.9001lcsf,denizotjb.494jxmoa,mapbox.mapbox-streets-v8,denizotjb.bifqeinj,denizotjb.cz0kdfpx,mapbox.mapbox-terrain-v2/${e}/${a}/${s}.vector.pbf?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(i.isNotCached(o.cacheName,t)))}}const c=await Promise.all(l);return i.close(),c.filter((e=>null!==e))};function vo(e){let t,n,o,r,i,a;const s=e[4].default,l=c(s,e,e[3],null);return{c(){t=L("svg"),n=L("path"),o=L("path"),i=j(),l&&l.c(),S(n,"d","M50,5A45 45 0 1 1 49.9999 5"),S(n,"class","svelte-1bp2w4i"),S(o,"d",r=e[0]()),S(o,"class","svelte-1bp2w4i"),S(t,"viewBox","0 0 100 100"),S(t,"class","svelte-1bp2w4i")},m(e,r){w(e,t,r),x(t,n),x(t,o),w(e,i,r),l&&l.m(e,r),a=!0},p(e,[t]){(!a||1&t&&r!==(r=e[0]()))&&S(o,"d",r),l&&l.p&&8&t&&p(l,s,e,e[3],t,null,null)},i(e){a||($e(l,e),a=!0)},o(e){xe(l,e),a=!1},d(e){e&&k(t),e&&k(i),l&&l.d(e)}}}function yo(e,t,n){let o,{$$slots:r={},$$scope:i}=t,{value:a=0}=t,{max:s=100}=t;return e.$$set=e=>{"value"in e&&n(1,a=e.value),"max"in e&&n(2,s=e.max),"$$scope"in e&&n(3,i=e.$$scope)},e.$$.update=()=>{6&e.$$.dirty&&n(0,o=()=>{if(a<=0)return"";if(a>=s)return"M50,5A45 45 0 1 1 49.9999 5";{const e=2*Math.PI*(a/s),t=50+45*Math.cos(e-Math.PI/2),n=50+45*Math.sin(e-Math.PI/2);let o="M50,5";return e>Math.PI&&(o+="A45 45 0 0 1 50 95"),o+=`A45 45 0 0 1 ${t} ${n}`,o}})},[o,a,s,i,r]}class bo extends Fe{constructor(e){super(),je(this,e,yo,vo,s,{value:1,max:2})}}function $o(e,t,n){const o=e.slice();return o[13]=t[n],o}function xo(e){let t,n,o,r,a,s=Co,l=[];for(let t=0;t<s.length;t+=1)l[t]=wo($o(e,s,t));return{c(){t=C("div"),n=C("select"),o=C("option"),o.textContent="pas d'ofp ?";for(let e=0;e<l.length;e+=1)l[e].c();o.__value="none",o.value=o.__value,S(n,"class","form-control-sm svelte-4l3qox"),n.disabled=e[0],S(t,"class","footer svelte-4l3qox")},m(i,s){w(i,t,s),x(t,n),x(n,o);for(let e=0;e<l.length;e+=1)l[e].m(n,null);r||(a=[E(n,"click",e[4],{once:!0}),E(n,"change",e[6])],r=!0)},p(e,t){if(0&t){let o;for(s=Co,o=0;o<s.length;o+=1){const r=$o(e,s,o);l[o]?l[o].p(r,t):(l[o]=wo(r),l[o].c(),l[o].m(n,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=s.length}1&t&&(n.disabled=e[0])},d(e){e&&k(t),P(l,e),r=!1,i(a)}}}function wo(t){let n,o,r=t[13]+"";return{c(){n=C("option"),o=M(r),n.__value=t[13],n.value=n.__value},m(e,t){w(e,n,t),x(n,o)},p:e,d(e){e&&k(n)}}}function ko(t){let n,o,r,a,s,l,c,u,p,d=!t[3]&&xo(t);return{c(){n=C("div"),o=C("input"),r=j(),a=C("label"),s=M(t[1]),l=j(),d&&d.c(),c=F(),S(o,"id",_o),S(o,"name",_o),S(o,"type","file"),S(o,"accept","application/pdf"),o.disabled=t[0],S(o,"class","custom-file-input svelte-4l3qox"),S(a,"class","custom-file-label text-truncate svelte-4l3qox"),S(a,"for",_o),N(a,"ready",t[2]),S(n,"class","custom-file svelte-4l3qox"),N(n,"blink",!t[3])},m(e,i){w(e,n,i),x(n,o),x(n,r),x(n,a),x(a,s),w(e,l,i),d&&d.m(e,i),w(e,c,i),u||(p=[E(o,"change",t[5]),E(o,"click",t[4],{once:!0})],u=!0)},p(e,[t]){1&t&&(o.disabled=e[0]),2&t&&D(s,e[1]),4&t&&N(a,"ready",e[2]),8&t&&N(n,"blink",!e[3]),e[3]?d&&(d.d(1),d=null):d?d.p(e,t):(d=xo(e),d.c(),d.m(c.parentNode,c))},i:e,o:e,d(e){e&&k(n),e&&k(l),d&&d.d(e),e&&k(c),u=!1,i(p)}}}const Po=[{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.min.js"},{type:"script",url:"./js/lidojs.1.3.7.min.js"},{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.min.js"},{type:"script",url:"./js/wmo.1.3.7.var.js"},{type:"script",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.js"},{type:"link",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.css"}],Co=["318","319","320","321","330","340","350","380","787","772","773","77F"],Lo=async(e,t)=>{const n=await e.getPage(t);return(await n.getTextContent()).items.map((e=>e.str)).join("")};let _o="file";function Mo(e,t,n){let o,r;l(e,ln,(e=>n(9,o=e))),l(e,sn,(e=>n(3,r=e)));let i,{kmlOptions:a}=t,s=!1,c=new Ee,u="Choisir un OFP",p=!1;const d=Y();function f(){!function(e,t,n){let o=e.length;function r(){o=--o,o<1&&n()}t()?n():e.forEach((({type:e,url:t,options:n={async:!0,defer:!0}})=>{const i="script"===e,a=document.createElement(i?"script":"link");(t.startsWith("http")||t.startsWith("//"))&&(a.crossOrigin="anonymous");let s=!0;i?(a.src=t,a.async=n.async,a.defer=n.defer):(a.href=t,"prefetch"in n?(a.rel="prefetch",o-=1,s=!1):"preload"in n?(a.rel="preload",o-=1,s=!1):(a.rel="stylesheet",o-=1,s=!1)),s&&(a.onload=r),document.body.appendChild(a)}))}(Po,(()=>!!window["pdfjs-dist/build/pdf"]),(()=>{const e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.worker.min.js",i&&!i.destroyed||(i=new e.PDFWorker),c.resolve(!0),n(2,p=!0)}))}const g=e=>{const t=new FileReader;return m(ln,o=!1,o),new Promise(((n,o)=>{t.onload=e=>{if(!i||i.destroyed){const e=window["pdfjs-dist/build/pdf"];i=new e.PDFWorker}(async e=>{const t=window["pdfjs-dist/build/pdf"],n=[];let o=0;const r=await t.getDocument(e).promise,i=r.numPages;for(let e=1;e<=i;e+=1){const t=await Lo(r,e);if(t.includes("(Long copy #1)"))n.push(t),o+=1;else{if(0!==o)break;t.includes("FPL SUMMARY")&&n.push(t)}}return n.join("\n")})({data:e.target.result,verbosity:0,worker:i}).then((e=>{if(e)try{const t=new editolido.Ofp("_PDFJS_"+e),r=new editolido.GeoGridIndex;r.data=window.WMO;const i=editolido.ogimetData(t,r);i.proxyImg=`https://ofp2map-gramet.vercel.app/api/${i.proxy}__${i.route.name.replace(/[^a-z0-9\-_]/giu,"_")}.png`,i.route.description=i.wmo.join(" "),t.ogimetData=i;try{ot();rt(t,a),n(t)}catch(e){o(e)}}catch(e){o(e)}else o(Error('OFP non reconnu, il faut choisir "Dossier de vol OFP" dans Pilot Mission.'))}),(e=>o(e)))},t.onerror=e=>{o(Error("Fichier illisible !"))},t.readAsArrayBuffer(e)}))};return e.$$set=e=>{"kmlOptions"in e&&n(7,a=e.kmlOptions)},[s,u,p,r,f,async function(e){n(0,s=!0),f(),await c.promise.then((()=>{const t=e.target.files[0];t&&(n(1,u=e.target.value.split(/([\\/])/g).pop()),d("change",u),m(sn,r=g(t),r),"#/gramet"!==window.location.hash&&(window.location.hash="#/map"))})),n(0,s=!1)},async function(e){n(0,s=!0),f(),await c.promise.then((()=>{m(ln,o=!0,o),m(sn,r=new Promise(((t,n)=>{let o=new editolido.Ofp("_PDFJS_AF 681 KATL/LFPG 11Mar2020/2235zReleased: 11Mar/1724z3Main OFP (Long copy #1)OFP 6/0/1 ATC FLIGHT PLAN (FPL-AFR681-IS -B77W/ -KATL2235 -LFPG0724 LFPO ) FLIGHT SUMMARY 0012 TAXI IN Generated");o.isFake=e.target.value;try{ot();rt(o,a),t(o)}catch(e){n(e)}})),r),window.location.hash="#/map"})),n(0,s=!1)},a]}class jo extends Fe{constructor(e){super(),je(this,e,Mo,ko,s,{kmlOptions:7})}}function Fo(e,t,n){const o=e.slice();return o[6]=t[n],o}function Eo(e){let t;return{c(){t=C("option"),t.textContent="???",t.__value="???",t.value=t.__value,t.selected=!0},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function Oo(e){let t,n,o,r=e[6]+"";return{c(){t=C("option"),n=M(r),t.__value=e[6],t.value=t.__value,t.selected=o=e[6]===e[0]},m(e,o){w(e,t,o),x(t,n)},p(e,n){1&n&&o!==(o=e[6]===e[0])&&(t.selected=o)},d(e){e&&k(t)}}}function So(t){let n,o,r,a,s="???"===t[0]&&Eo(),l=Co,c=[];for(let e=0;e<l.length;e+=1)c[e]=Oo(Fo(t,l,e));return{c(){n=C("select"),s&&s.c(),o=F();for(let e=0;e<c.length;e+=1)c[e].c();S(n,"name","aircraftType"),S(n,"class","svelte-1xpiicm"),void 0===t[0]&&se((()=>t[5].call(n)))},m(e,i){w(e,n,i),s&&s.m(n,null),x(n,o);for(let e=0;e<c.length;e+=1)c[e].m(n,null);t[4](n),q(n,t[0]),r||(a=[E(n,"change",t[5]),E(n,"change",t[3])],r=!0)},p(e,[t]){if("???"===e[0]?s||(s=Eo(),s.c(),s.m(n,o)):s&&(s.d(1),s=null),1&t){let o;for(l=Co,o=0;o<l.length;o+=1){const r=Fo(e,l,o);c[o]?c[o].p(r,t):(c[o]=Oo(r),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}1&t&&q(n,e[0])},i:e,o:e,d(e){e&&k(n),s&&s.d(),P(c,e),t[4](null),r=!1,i(a)}}}function Ao(e,t,n){let{selectedAircraft:o="???"}=t,{aircraftTypeSelectElement:r=null}=t,{ofp:i}=t;return V((()=>{"???"===o&&i&&n(0,o=i.isFake?i.isFake:i.infos.aircraft),-1===Co.indexOf(o)&&n(0,o="???")})),e.$$set=e=>{"selectedAircraft"in e&&n(0,o=e.selectedAircraft),"aircraftTypeSelectElement"in e&&n(1,r=e.aircraftTypeSelectElement),"ofp"in e&&n(2,i=e.ofp)},[o,r,i,function(t){Q(e,t)},function(e){te[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(){o=W(this),n(0,o)}]}class To extends Fe{constructor(e){super(),je(this,e,Ao,So,s,{selectedAircraft:0,aircraftTypeSelectElement:1,ofp:2})}}const Io={version:8,name:"Blank pour App",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template","mapbox:sdk-support":{js:"1.9.0",android:"8.6.0",ios:"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},center:[0,0],zoom:1.2946207284336362,bearing:0,pitch:0,sources:{},sprite:"mapbox://sprites/flyingeek/ckbhlmwdm0mn51imw8t4dddqs/ck2u8j60r58fu0sgyxrigm3cu",glyphs:"mapbox://fonts/flyingeek/{fontstack}/{range}.pbf",layers:[],created:"2020-06-16T07:22:32.952Z",id:"ckbhlmwdm0mn51imw8t4dddqs",modified:"2020-06-16T07:23:29.539Z",owner:"flyingeek",visibility:"public",draft:!1},Do=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?256:512,Ro=[{label:"Mercator",id:"mercator",mapboxOptions:{style:"mapbox://styles/flyingeek/cklgh38ep0xsr17qsvlrhth1e",renderWorldCopies:!1,maxZoom:12},cacheName:"denizotjbv1",cacheZoom:6},{label:"Lambert North",id:"jb_north",extent:[-7441575.3298294,-5719574.1644927,7383398.17621086,9105399.34154755],proj4:"+proj=lcc +lat_1=30 +lat_2=65 +lat_0=47.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Io,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-northv3.netlify.app/northv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"northv3",cacheAll:!0,tileSize:Do},{label:"Lambert South",id:"jb_south",extent:[-12613000.20107552,-12796118.19556621,13437104.14597977,13253986.15148908],validity:[-12613903.56963206,-9420000.1608799,13437054.51836624,5862747.38325809],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Io,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-southv3.netlify.app/southv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"southv3",cacheAll:!0,tileSize:Do},{label:"Lambert Pacific",id:"jb_pacific",extent:[-8306365.14297095,-7788164.66141786,6519185.45830619,7037385.93985927],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=-140 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:Io,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-pacificv1.netlify.app/pacificv1/{z}/{x}/{y}.jpg"],cacheName:"pacificv1",cacheZoom:4,cacheAll:!0,tileSize:Do},{label:"The World",id:"jb_theworld",affineTransform:[1.314746085506463,-45260.546626176685,1.315,648e4],extent:[-15201502.45260082,-8478963.56607166,15262747.04890729,10300929.57326125],proj4:"+proj=times +ellps=sphere +no_defs +wktext +lon_0=0 +x_0=0 +y_0=0",mapboxOptions:{style:Io,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-theworldv2.netlify.app/theworldv2/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,10],[32,20]],cacheZoom:5,cacheName:"theworldv2",cacheAll:!0,tileSize:Do}];function zo(e,t,n){const o=e.slice();return o[6]=t[n],o[8]=n,o}function qo(e){let t,n,o,r=(e[6].proj4&&e[2](e[6])?`${e[6].label.toUpperCase()}`:e[6].label)+"";return{c(){t=C("option"),n=M(r),t.__value=e[6],t.value=t.__value,t.selected=o=e[6].id===e[0].id},m(e,o){w(e,t,o),x(t,n)},p(e,n){1&n&&o!==(o=e[6].id===e[0].id)&&(t.selected=o)},d(e){e&&k(t)}}}function Wo(t){let n,o,r,a=Ro,s=[];for(let e=0;e<a.length;e+=1)s[e]=qo(zo(t,a,e));return{c(){n=C("select");for(let e=0;e<s.length;e+=1)s[e].c();S(n,"name",t[1]),S(n,"class","form-control form-control-sm svelte-1uc3ace"),void 0===t[0]&&se((()=>t[5].call(n)))},m(e,i){w(e,n,i);for(let e=0;e<s.length;e+=1)s[e].m(n,null);q(n,t[0]),o||(r=[E(n,"change",t[5]),E(n,"change",t[4])],o=!0)},p(e,[t]){if(5&t){let o;for(a=Ro,o=0;o<a.length;o+=1){const r=zo(e,a,o);s[o]?s[o].p(r,t):(s[o]=qo(r),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=a.length}2&t&&S(n,"name",e[1]),1&t&&q(n,e[0])},i:e,o:e,d(e){e&&k(n),P(s,e),o=!1,i(r)}}}function No(e,t,n){let{name:o="map-style"}=t,{ofp:r}=t,{selected:i=Ro[0]}=t;return V((()=>{if(i.id===Ro[0].id&&r&&!r.isFake){const e=r.route.points[0],t=r.route.points[r.route.points.length-1];t.latitude>30&&e.latitude>30?n(0,i=Ro[1]):t.longitude<-80&&e.longitude<-80?n(0,i=Ro[3]):n(0,i=Ro[2])}})),e.$$set=e=>{"name"in e&&n(1,o=e.name),"ofp"in e&&n(3,r=e.ofp),"selected"in e&&n(0,i=e.selected)},[i,o,function(e){if(!e.proj4||!r||r.isFake)return!0;const t=r.route.points[0],n=r.route.points[r.route.points.length-1];if("jb_north"===e.id)return n.latitude>30&&t.latitude>30;if("jb_south"===e.id){if(n.latitude>30&&t.latitude>30)return!1}else if("jb_theworld"===e.id)return!1;const o=e.validity?e.validity:e.extent;for(let r of[t,n]){const[t,n]=window.proj4(e.proj4,[r.longitude,r.latitude]);if(t<o[0]||t>o[2]||n<o[1]||n>o[3])return!1}return!0},r,function(t){Q(e,t)},function(){i=W(this),n(0,i)}]}class Go extends Fe{constructor(e){super(),je(this,e,No,Wo,s,{name:1,ofp:3,selected:0})}}function Uo(e,t){let n=t;const o=()=>n&&n.resize(),r=new IntersectionObserver(((e,t)=>{e.forEach((e=>{1===e.intersectionRatio&&o()}))}),{threshold:1});r.observe(e);const i=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&o()};return document.addEventListener("visibilitychange",i,!1),window.addEventListener("orientationchange",o),{update(e){n=e},destroy(){r.unobserve(e),r.disconnect(),window.removeEventListener("orientationchange",o),document.removeEventListener("visibilitychange",i),n&&n.remove()}}}function Ho(e){let t,n,o,r,i;return n=new bo({props:{value:e[8],max:e[7],$$slots:{default:[Bo]},$$scope:{ctx:e}}}),{c(){t=C("div"),Le(n.$$.fragment),S(t,"class","cacheButton svelte-qq3vrb"),N(t,"cacheError",e[9]),N(t,"cacheProgress",e[8]>0||e[7]>0)},m(s,l){w(s,t,l),_e(n,t,null),o=!0,r||(i=E(t,"click",(function(){a(e[11]?Ko:e[17])&&(e[11]?Ko:e[17]).apply(this,arguments)})),r=!0)},p(o,r){e=o;const i={};256&r&&(i.value=e[8]),128&r&&(i.max=e[7]),33554432&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i),512&r&&N(t,"cacheError",e[9]),384&r&&N(t,"cacheProgress",e[8]>0||e[7]>0)},i(e){o||($e(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){e&&k(t),Me(n),r=!1,i()}}}function Bo(e){let t;const n=e[19].default,o=c(n,e,e[25],null),r=o||function(e){let t;return{c(){t=C("span"),t.textContent="‚Üì",S(t,"class","svelte-qq3vrb")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}();return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,t){o&&o.p&&33554432&t&&p(o,n,e,e[25],t,null,null)},i(e){t||($e(r,e),t=!0)},o(e){xe(r,e),t=!1},d(e){r&&r.d(e)}}}function Zo(e){let t,n,o,r,i,s,l,c,u,p,d,m,g,h,v,y,b;function $(t){e[20](t)}let P={ofp:e[1]};void 0!==e[4]&&(P.selected=e[4]),i=new Go({props:P}),te.push((()=>Ce(i,"selected",$))),i.$on("change",e[14]);let L=e[4]&&!e[1].isFake&&window.indexedDB&&e[13]&&!0!==e[10][e[4].id]&&!e[12]&&Ho(e);function _(t){e[21](t)}function M(t){e[22](t)}let F={ofp:e[1]};function E(t){e[23](t)}void 0!==e[5]&&(F.selectedAircraft=e[5]),void 0!==e[6]&&(F.aircraftTypeSelectElement=e[6]),u=new To({props:F}),te.push((()=>Ce(u,"selectedAircraft",_))),te.push((()=>Ce(u,"aircraftTypeSelectElement",M))),u.$on("change",e[15]);let O={};return void 0!==e[0]&&(O.kmlOptions=e[0]),g=new bn({props:O}),te.push((()=>Ce(g,"kmlOptions",E))),g.$on("change",e[16]),g.$on("save",e[24]),{c(){t=C("div"),o=j(),r=C("div"),Le(i.$$.fragment),l=j(),L&&L.c(),c=j(),Le(u.$$.fragment),m=j(),Le(g.$$.fragment),S(t,"id",e[2]),S(t,"class","svelte-qq3vrb"),S(r,"class","mapmenu svelte-qq3vrb")},m(a,s){w(a,t,s),w(a,o,s),w(a,r,s),_e(i,r,null),x(r,l),L&&L.m(r,null),w(a,c,s),_e(u,a,s),w(a,m,s),_e(g,a,s),v=!0,y||(b=f(n=Uo.call(null,t,e[3])),y=!0)},p(e,[o]){(!v||4&o)&&S(t,"id",e[2]),n&&a(n.update)&&8&o&&n.update.call(null,e[3]);const l={};2&o&&(l.ofp=e[1]),!s&&16&o&&(s=!0,l.selected=e[4],le((()=>s=!1))),i.$set(l),e[4]&&!e[1].isFake&&window.indexedDB&&e[13]&&!0!==e[10][e[4].id]&&!e[12]?L?(L.p(e,o),13330&o&&$e(L,1)):(L=Ho(e),L.c(),$e(L,1),L.m(r,null)):L&&(ye(),xe(L,1,1,(()=>{L=null})),be());const c={};2&o&&(c.ofp=e[1]),!p&&32&o&&(p=!0,c.selectedAircraft=e[5],le((()=>p=!1))),!d&&64&o&&(d=!0,c.aircraftTypeSelectElement=e[6],le((()=>d=!1))),u.$set(c);const m={};!h&&1&o&&(h=!0,m.kmlOptions=e[0],le((()=>h=!1))),g.$set(m)},i(e){v||($e(i.$$.fragment,e),$e(L),$e(u.$$.fragment,e),$e(g.$$.fragment,e),v=!0)},o(e){xe(i.$$.fragment,e),xe(L),xe(u.$$.fragment,e),xe(g.$$.fragment,e),v=!1},d(e){e&&k(t),e&&k(o),e&&k(r),Me(i),L&&L.d(),e&&k(c),Me(u,e),e&&k(m),Me(g,e),y=!1,b()}}}const Ko=()=>!1;function Xo(e,t,n){let o,r;l(e,dn,(e=>n(13,r=e)));let{$$slots:i={},$$scope:a}=t;const s=Y();let c,u,p,d,m,{kmlOptions:f}=t,{ofp:g}=t,h=0,v=0,y=!1,b=[];const $={};let{id:x="map"}=t;async function w(){n(18,b=await ho(g,u));const e=document.querySelector(`#${x} .mapboxgl-ctrl-attrib-inner`);e&&(e.appendChild(document.createTextNode(" | ")),e.appendChild(m),e.appendChild(document.createTextNode(`${"2102a".substring(0,2)}.${"2102a".substring(2,4)}`)))}const k=e=>{(e=>{const{name:t,value:n}=e,o=De(t),r=ao[o];r&&(t.endsWith("-display")?n?r.show(e):r.hide(e):t.endsWith("-pin")?r.changeMarker(e):t.endsWith("-color")?r.changeLine(e):t.endsWith("-change")&&r.change(e))})({map:c,mapData:u,name:e.detail.name,value:e.detail.value,ofp:g,kmlOptions:f,aircraftType:d}),function(e,t){if(e.startsWith("etops-")||e.startsWith("airport-")||e.startsWith("fir-"))return;const n=ot(),o=De(e);e.endsWith("-display")?n.changeFolderState(o,t):e.endsWith("-pin")?n.changeFolderPin(o,t):e.endsWith("-color")&&n.changeFolderColor(o,t.toUpperCase())}(e.detail.name,e.detail.value),s("save")};let P=!1;return V((()=>{mapboxgl.accessToken="pk.eyJ1IjoiZmx5aW5nZWVrIiwiYSI6ImNrYXpmZzhuYjBpczUycW1pZzZ1b2Z4NjAifQ.5S-VzSXpJkui8NDMlTU51Q",u=po(x,p,g,f,w),n(3,c=u.map)})),e.$$set=e=>{"kmlOptions"in e&&n(0,f=e.kmlOptions),"ofp"in e&&n(1,g=e.ofp),"id"in e&&n(2,x=e.id),"$$scope"in e&&n(25,a=e.$$scope)},e.$$.update=()=>{262144&e.$$.dirty&&n(12,o=0===b.length)},[f,g,x,c,p,d,m,h,v,y,$,P,o,r,function(e){e.target.blur(),c&&c.remove(),n(8,v=0),n(9,y=!1),n(18,b=[]),n(7,h=0),u=po(x,p,g,f,w),n(3,c=u.map)},function(e){e.target.blur(),k({detail:{value:d,name:"airport-change"}})},k,async e=>{if(P)return!1;n(11,P=!0);try{n(7,h=b.length),n(9,y=!1);try{await Ne(4e3,fetch(`./manifest.json?dummy=${Date.now()}`,{cache:"no-store"}))}catch(e){return n(11,P=!1),n(9,y=!0),!1}n(8,v=0),await async function(e,t){const n=e;let o=0,r=0;return await new Promise((e=>{const i=setInterval((async()=>{if(0===n.filter((e=>e)).length&&(clearInterval(i),e()),o>=5||r>n.length-1)return;const a=r++,s=n[a];o++;try{await fetch(s),t&&t()}catch{}o--,delete n[a]}),100)}))}(b,(()=>n(8,v++,v))),v>=h&&(n(10,$[p.id]=!0,$),n(10,$),n(18,b=[]),n(7,h=0))}finally{n(11,P=!1)}},b,i,function(e){p=e,n(4,p)},function(e){d=e,n(5,d)},function(e){m=e,n(6,m)},function(e){f=e,n(0,f)},function(t){Q(e,t)},a]}class Jo extends Fe{constructor(e){super(),je(this,e,Xo,Zo,s,{kmlOptions:0,ofp:1,id:2})}}function Vo(e){let t,n;return{c(){t=C("li"),n=C("a"),n.innerHTML='<svg class="f svelte-t5xqrm"><use xlink:href="#map-symbol"></use></svg> \n      <span class="svelte-t5xqrm">CARTE</span>',S(n,"class","nav-link svelte-t5xqrm"),S(n,"href","#/map"),N(n,"disabled",!e[1]),S(t,"class","nav-item svelte-t5xqrm"),N(t,"active","/map"===e[0])},m(e,o){w(e,t,o),x(t,n)},p(e,o){2&o&&N(n,"disabled",!e[1]),1&o&&N(t,"active","/map"===e[0])},d(e){e&&k(t)}}}function Yo(e){let t,n;return{c(){t=C("li"),n=C("a"),n.innerHTML='<svg class="f svelte-t5xqrm"><use xlink:href="#cloud-symbol"></use></svg> \n      <span class="svelte-t5xqrm">GRAMET</span>',S(n,"class","nav-link svelte-t5xqrm"),S(n,"href","#/gramet"),N(n,"disabled",!e[1]),S(t,"class","nav-item svelte-t5xqrm"),N(t,"active","/gramet"===e[0])},m(e,o){w(e,t,o),x(t,n)},p(e,o){2&o&&N(n,"disabled",!e[1]),1&o&&N(t,"active","/gramet"===e[0])},d(e){e&&k(t)}}}function Qo(e){let t,n;return{c(){t=C("li"),n=C("a"),n.innerHTML='<svg class="f svelte-t5xqrm"><use xlink:href="#share-symbol"></use></svg> \n      <span class="svelte-t5xqrm">EXPORT</span>',S(n,"class","nav-link svelte-t5xqrm"),S(n,"href","#/export"),N(n,"disabled",!e[1]),S(t,"class","nav-item svelte-t5xqrm"),N(t,"active","/export"===e[0])},m(e,o){w(e,t,o),x(t,n)},p(e,o){2&o&&N(n,"disabled",!e[1]),1&o&&N(t,"active","/export"===e[0])},d(e){e&&k(t)}}}function er(e){let t,n,o,r,i,a,s,l,u,d,m,f,g,h=(e[1]||"/map"===e[0])&&Vo(e),v=(e[1]&&!e[2]||"/gramet"===e[0])&&Yo(e),y=(e[1]&&!e[2]||"/export"===e[0])&&Qo(e);const b=e[4].default,$=c(b,e,e[3],null);return{c(){t=C("nav"),n=C("ul"),o=C("li"),r=C("a"),i=L("svg"),a=L("use"),s=j(),h&&h.c(),l=j(),v&&v.c(),u=j(),y&&y.c(),d=j(),m=C("li"),m.innerHTML='<a class="nav-link" href="#/help"><svg class="f svelte-t5xqrm"><use xlink:href="#info-symbol"></use></svg> \n      <span class="svelte-t5xqrm">AIDE</span></a>',f=j(),$&&$.c(),T(a,"xlink:href","#home-symbol"),S(i,"class","svelte-t5xqrm"),S(r,"class","nav-link"),S(r,"href","#/"),S(o,"class","nav-item svelte-t5xqrm"),N(o,"active","/"===e[0]),S(m,"class","nav-item svelte-t5xqrm"),N(m,"active","/help"===e[0]),S(n,"class","navbar-nav mr-auto svelte-t5xqrm"),S(t,"class","navbar navbar-expand-md navbar-light bg-light svelte-t5xqrm")},m(e,c){w(e,t,c),x(t,n),x(n,o),x(o,r),x(r,i),x(i,a),x(n,s),h&&h.m(n,null),x(n,l),v&&v.m(n,null),x(n,u),y&&y.m(n,null),x(n,d),x(n,m),x(t,f),$&&$.m(t,null),g=!0},p(e,[t]){1&t&&N(o,"active","/"===e[0]),e[1]||"/map"===e[0]?h?h.p(e,t):(h=Vo(e),h.c(),h.m(n,l)):h&&(h.d(1),h=null),e[1]&&!e[2]||"/gramet"===e[0]?v?v.p(e,t):(v=Yo(e),v.c(),v.m(n,u)):v&&(v.d(1),v=null),e[1]&&!e[2]||"/export"===e[0]?y?y.p(e,t):(y=Qo(e),y.c(),y.m(n,d)):y&&(y.d(1),y=null),1&t&&N(m,"active","/help"===e[0]),$&&$.p&&8&t&&p($,b,e,e[3],t,null,null)},i(e){g||($e($,e),g=!0)},o(e){xe($,e),g=!1},d(e){e&&k(t),h&&h.d(),v&&v.d(),y&&y.d(),$&&$.d(e)}}}function tr(e,t,n){let o,r,i;l(e,mn,(e=>n(0,o=e))),l(e,sn,(e=>n(1,r=e))),l(e,ln,(e=>n(2,i=e)));let{$$slots:a={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(3,s=e.$$scope)},[o,r,i,s,a]}class nr extends Fe{constructor(e){super(),je(this,e,tr,er,s,{})}}function or(n){let o,r,i;const s=n[3].default,l=c(s,n,n[2],null);return{c(){o=C("page"),l&&l.c(),S(o,"class","svelte-1de5e3b"),N(o,"fadein",!1===n[0]),N(o,"d-none",!0===n[0])},m(e,t){w(e,o,t),l&&l.m(o,null),i=!0},p(e,[t]){l&&l.p&&4&t&&p(l,s,e,e[2],t,null,null),1&t&&N(o,"fadein",!1===e[0]),1&t&&N(o,"d-none",!0===e[0])},i(s){i||($e(l,s),r||se((()=>{r=function(n,o,r){let i,s,l=o(n,r),c=!1,u=0;function p(){i&&K(n,i)}function d(){const{delay:o=0,duration:r=300,easing:a=t,tick:d=e,css:m}=l||we;m&&(i=Z(n,0,1,r,o,a,m,u++)),d(0,1);const f=h()+o,g=f+r;s&&s.abort(),c=!0,se((()=>ge(n,!0,"start"))),s=$((e=>{if(c){if(e>=g)return d(1,0),ge(n,!0,"end"),p(),c=!1;if(e>=f){const t=a((e-f)/r);d(t,1-t)}}return c}))}let m=!1;return{start(){m||(K(n),a(l)?(l=l(),fe().then(d)):d())},invalidate(){m=!1},end(){c&&(p(),c=!1)}}}(o,n[1],{}),r.start()})),i=!0)},o(e){xe(l,e),i=!1},d(e){e&&k(o),l&&l.d(e)}}}function rr(e,t,n){let{$$slots:o={},$$scope:r}=t,{hidden:i}=t;return e.$$set=e=>{"hidden"in e&&n(0,i=e.hidden),"$$scope"in e&&n(2,r=e.$$scope)},[i,(e,t,n)=>{if(void 0===i)return He(e,t)},r,o]}class ir extends Fe{constructor(e){super(),je(this,e,rr,or,s,{hidden:0})}}function ar(e){let t,o;const r=e[3].default,i=c(r,e,e[2],null);let a=[{href:e[0]},e[1]],s={};for(let e=0;e<a.length;e+=1)s=n(s,a[e]);return{c(){t=C("a"),i&&i.c(),A(t,s)},m(e,n){w(e,t,n),i&&i.m(t,null),o=!0},p(e,[n]){i&&i.p&&4&n&&p(i,r,e,e[2],n,null,null),A(t,s=function(e,t){const n={},o={},r={$$scope:1};let i=e.length;for(;i--;){const a=e[i],s=t[i];if(s){for(const e in a)e in s||(o[e]=1);for(const e in s)r[e]||(n[e]=s[e],r[e]=1);e[i]=s}else for(const e in a)r[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}(a,[(!o||1&n)&&{href:e[0]},e[1]]))},i(e){o||($e(i,e),o=!0)},o(e){xe(i,e),o=!1},d(e){e&&k(t),i&&i.d(e)}}}function sr(e,t,o){const r=["href"];let i=d(t,r),{$$slots:a={},$$scope:s}=t,{href:l}=t;const c=l&&!l.startsWith("#")?Object.assign({rel:"noreferrer",target:"_blank"},i):i;return e.$$set=e=>{t=n(n({},t),function(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}(e)),o(5,i=d(t,r)),"href"in e&&o(0,l=e.href),"$$scope"in e&&o(2,s=e.$$scope)},[l,c,s,a]}class lr extends Fe{constructor(e){super(),je(this,e,sr,ar,s,{href:0})}}function cr(e){let t;return{c(){t=C("span"),t.innerHTML="Fly<span>Tax</span>",S(t,"class","flytax")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function ur(e){let t,n,o,r,i,a,s,l,c,u,p,d,m,f,g,h,v,y,b,$,P,L,_,F,E,O,A,T,I,D,R,z,q,W,N,G,U,H,B,Z,K,X,J,V,Y,Q,ee,te,ne,oe,re,ie,ae=!0!==navigator.standalone&&function(e){let t,n,o;return{c(){t=M("Pour m√©moire, dans un navigateur, il suffit de partager l'url ou "),n=C("a"),n.textContent="ce lien",o=M("."),S(n,"href","http://flyingeek.github.io/lido-online/index.html")},m(e,r){w(e,t,r),w(e,n,r),w(e,o,r)},d(e){e&&k(t),e&&k(n),e&&k(o)}}}();return oe=new lr({props:{href:"https://flyingeek.github.io/flytax/",rel:"noopener",$$slots:{default:[cr]},$$scope:{ctx:e}}}),{c(){t=C("h2"),t.textContent="Pr√©ambule",n=j(),o=C("p"),o.textContent="OFP2MAP est une application PWA (ou Web Application), elle peut √™tre lanc√©e soit depuis un navigateur, soit depuis l'√©cran d'accueil de l'iPad. Initialement, simple convertisseur de l'OFP en KML, OFP2MAP est devenu une vraie application de cartographie.",r=j(),i=C("p"),i.textContent="OFP2MAP n√©cessite des navigateurs r√©cents pour fonctionner. Safari 14 iOS/Mac est compatible, Chrome 83 fonctionne aussi.",a=j(),s=C("p"),s.textContent="L'OFP ne transite sur aucun serveur, seule une route calcul√©e (bas√©e sur au plus 21 stations m√©t√©o) est transmise √† l'h√©bergeur du proxy (voir plus bas) puis √† Ogimet.com pour r√©cup√©rer le Gramet. L'app ne collecte aucune donn√©es.",l=j(),c=C("h2"),c.textContent="Utilisation",u=j(),p=C("ol"),p.innerHTML="<li><p>Dans Pilot Mission, onglet ¬´Dossier de vol¬ª, affichez le PDF nomm√© &quot;Dossier de vol OFP&quot;. Sur la gauche, cliquez sur le carr√© avec une fl√®che vers le haut. Choisissez ¬´Enregistrer dans Fichiers¬ª. Dans l&#39;app, c&#39;est cet OFP qu&#39;il faut ensuite s√©lectionner.</p></li> \n<li><p>La carte dispose d&#39;un bouton pour personnaliser les couleurs. Le type avion pour l&#39;ad√©quation des terrains est d√©tect√© dans l&#39;OFP. Pour vous entrainer, je vous recommande de modifier la couleur des terrains en vert/rouge et de sauvegarder votre choix.</p></li> \n<li><p>Pour Exporter vers une app, direction le menu EXPORT, vous pouvez exporter une route pour mPilot, t√©l√©charger le KML (routes et tracks uniquement), ou envoyer vers l&#39;app <strong>Raccourcis</strong> d&#39;Apple.</p></li> \n<li><p>La carte par d√©faut est une LAMBERT, il est possible sur la carte, en haut √† gauche, de basculer sur d&#39;autres projections.</p> \n<ul><li>LAMBERT NORTH (parall√®les s√©cants N30 et N65) est recommand√©e au-dessus du N40</li> \n<li>LAMBERT SOUTH &amp; PACIFIC (parall√®les s√©cants N30 et S15 ) sont recommand√©es sous N30</li> \n<li>THE WORLD permet de disposer d&#39;un Atlas off-line, c&#39;est une projection Times</li> \n<li>MERCATOR est une Web Mercator avec un th√®me est inspir√© des cartes VFR. Il y a 12 niveaux de zoom, dont 6 disponibles off-line</li></ul></li>",d=j(),m=C("ol"),m.innerHTML="<li>Navigation dans la carte: on peut avec un doigt d√©placer la carte, zoomer ou orienter la carte avec deux doigts. Il est aussi possible de modifier l&#39;angle de vue en balayant de haut en bas avec deux doigts. Si vous activez le bouton de g√©olocalisation, la carte peut se centrer automatiquement.</li>",f=j(),g=C("h2"),g.textContent="Particularit√©s de l'iPad",h=j(),v=C("p"),v.textContent="OFP2MAP ne peut √™tre lanc√© que depuis l'√©cran d'accueil, l'application se lance en plein √©cran. On ne peut pas recharger la page comme dans un navigateur‚ÄØ: il faudra pour cela aller dans le menu d'aide (cet √©cran) ou un bouton sp√©cifique sera affich√© en haut.",y=j(),b=C("p"),$=M("Pour partager le lien vers OFP2MAP, utilisez le bouton situ√© en haut sur cette page, ou le lien situ√© sous le logo sur la page d'accueil, puis utilisez AirDrop. "),ae&&ae.c(),P=j(),L=C("p"),L.innerHTML='L&#39;export des fichiers KML affiche une page nomm√©e &quot;data:&quot;, utilisez le bouton <svg style="vertical-align: bottom;"><use xlink:href="#share-symbol"></use></svg> pour choisir l&#39;app qui recevra le fichier. Cliquez en haut √† gauche sur OK pour revenir √† OFP2MAP. En raison d&#39;un bug d&#39;iOS, il est impossible de nommer le fichier pour le moment.',_=j(),F=C("p"),F.textContent="√Ä noter que parfois, des bugs d'affichage peuvent appara√Ætre‚ÄØ:  lorsque l'on retourne sur l'app, l'app est zoom√©e, il faut alors juste d√©zoomer en utilisant un pinch de deux doigts sur la barre de menu. Il est aussi possible de tuer l'app,  m√™me en mode d√©connect√©, pour la relancer.",E=j(),O=C("h2"),O.textContent="Mode off-line",A=j(),T=C("p"),T.textContent="Une fois un premier OFP charg√©, il est possible m√™me en mode d√©connect√© de charger un autre OFP pour l'exporter. Le cache de l'App vous permettra de naviguer sur les cartes d√©j√† visualis√©es. Pour mettre en cache les cartes, il suffit de les consulter.",I=j(),D=C("p"),D.textContent="Il existe aussi un bouton de mise en cache‚ÄØ: le pictogramme ‚Üì situ√© √† droite du s√©lecteur de carte. Sur les cartes LAMBERT ou THE WORLD, il mettra en cache la totalit√© de la carte. Sur la MERCATOR, seule la partie de carte incluant la route sera mise en cache.",R=j(),z=C("p"),z.textContent="Les premi√®res mises en cache peuvent prendre du temps‚ÄØ: sur la Mercator, un vol LC peut n√©cessiter le t√©l√©chargement de 40Mo de donn√©es. Les caches des autres projections utilisent‚ÄØ: 7Mo pour la NORTH, 4Mo pour la PACIFIC, 7Mo pour la SOUTH et 32Mo pour THE WORLD.",q=j(),W=C("h2"),W.textContent="Mise √† jour",N=j(),G=C("p"),G.textContent="L'app d√©tecte les mises √† jour automatiquement, normalement vous n'avez rien √† faire. Eventuellement un prompt peut\napparaitre vous demandant d'autoriser cette mise √† jour. La version AIRAC et le type avion d√©tect√© dans l'OFP sont affich√©s en bas √† droite de la carte dans le champ d'attribution.",U=j(),H=C("h2"),H.textContent="Cr√©dits",B=j(),Z=C("ul"),Z.innerHTML='<li>Les donn√©es terrains/FIR sont fournies par Olivier Ravet forum Yammer/Mapsme</li> \n<li>Les cartes (autres que Mapbox streets) sont de Jean-Baptiste Denizot forum Yammer/QGIS &amp; Avenza Maps</li> \n<li>Le GRAMET provient du site ogimet.com</li> \n<li>Le site est d√©velopp√© en javascript √† l&#39;aide du framework SVELTE</li> \n<li>La partie serveur (un proxy pour pouvoir r√©cup√©rer l&#39;image du GRAMET) est en python.</li> \n<li>Eric Delord CDB 777 est l&#39;auteur. Le code source est disponible sur GitHub pour <a href="https://github.com/flyingeek/lido-online">l&#39;app</a> et <a href="https://github.com/flyingeek/ofp2map-gramet">le proxy</a></li>',K=j(),X=C("h2"),X.textContent="H√©bergement",J=j(),V=C("p"),V.textContent="L'h√©bergement des images est normalement fourni par alwaysdata.com (pack gratuit) mais en raison d'un blacklistage sur le r√©seau internet d'AF, les fonds de cartes sont √† pr√©sent h√©berg√©s sur netlify. Le proxy gramet est lui dor√©navant h√©berg√© sur vercel.",Y=j(),Q=C("h2"),Q.textContent="Liens",ee=j(),te=C("ul"),ne=C("li"),Le(oe.$$.fragment),re=M(" une aide aux calculs des frais professionnels (m√™me auteur)."),S(m,"start","5")},m(e,k){w(e,t,k),w(e,n,k),w(e,o,k),w(e,r,k),w(e,i,k),w(e,a,k),w(e,s,k),w(e,l,k),w(e,c,k),w(e,u,k),w(e,p,k),w(e,d,k),w(e,m,k),w(e,f,k),w(e,g,k),w(e,h,k),w(e,v,k),w(e,y,k),w(e,b,k),x(b,$),ae&&ae.m(b,null),w(e,P,k),w(e,L,k),w(e,_,k),w(e,F,k),w(e,E,k),w(e,O,k),w(e,A,k),w(e,T,k),w(e,I,k),w(e,D,k),w(e,R,k),w(e,z,k),w(e,q,k),w(e,W,k),w(e,N,k),w(e,G,k),w(e,U,k),w(e,H,k),w(e,B,k),w(e,Z,k),w(e,K,k),w(e,X,k),w(e,J,k),w(e,V,k),w(e,Y,k),w(e,Q,k),w(e,ee,k),w(e,te,k),x(te,ne),_e(oe,ne,null),x(ne,re),ie=!0},p(e,[t]){const n={};1&t&&(n.$$scope={dirty:t,ctx:e}),oe.$set(n)},i(e){ie||($e(oe.$$.fragment,e),ie=!0)},o(e){xe(oe.$$.fragment,e),ie=!1},d(e){e&&k(t),e&&k(n),e&&k(o),e&&k(r),e&&k(i),e&&k(a),e&&k(s),e&&k(l),e&&k(c),e&&k(u),e&&k(p),e&&k(d),e&&k(m),e&&k(f),e&&k(g),e&&k(h),e&&k(v),e&&k(y),e&&k(b),ae&&ae.d(),e&&k(P),e&&k(L),e&&k(_),e&&k(F),e&&k(E),e&&k(O),e&&k(A),e&&k(T),e&&k(I),e&&k(D),e&&k(R),e&&k(z),e&&k(q),e&&k(W),e&&k(N),e&&k(G),e&&k(U),e&&k(H),e&&k(B),e&&k(Z),e&&k(K),e&&k(X),e&&k(J),e&&k(V),e&&k(Y),e&&k(Q),e&&k(ee),e&&k(te),Me(oe)}}}class pr extends Fe{constructor(e){super(),je(this,e,null,ur,s,{})}}function dr(t){let n,o,r,i,a=navigator.share&&function(t){let n,o,r;return{c(){n=C("button"),n.textContent="Partager l'App",S(n,"class","btn btn-outline-secondary btn-sm svelte-12luy5v")},m(e,t){w(e,n,t),o||(r=E(n,"click",Ge),o=!0)},p:e,d(e){e&&k(n),o=!1,r()}}}();return{c(){a&&a.c(),n=j(),o=C("button"),o.textContent="Recharger l'App",S(o,"class","btn btn-outline-secondary btn-sm svelte-12luy5v")},m(e,s){a&&a.m(e,s),w(e,n,s),w(e,o,s),r||(i=E(o,"click",t[2]),r=!0)},p(e,t){navigator.share&&a.p(e,t)},d(e){a&&a.d(e),e&&k(n),e&&k(o),r=!1,i()}}}function mr(e){let t,n,o,r,i,a,s,l,c,u,p,d,m,f,g,h=!0===navigator.standalone&&dr(e);return d=new pr({}),{c(){t=C("div"),n=C("h1"),o=C("div"),o.innerHTML='<img src="images/ofp2map-icons/icon-128x128.png" alt="logo" class="svelte-12luy5v"/><span class="svelte-12luy5v">OFP2MAP</span>',r=M(" v"),i=M(fr),a=j(),s=C("small"),l=M("/ ServiceWorker‚ÄØ: "),c=M(e[1]),u=j(),h&&h.c(),p=j(),Le(d.$$.fragment),S(o,"class","app svelte-12luy5v"),S(s,"class","svelte-12luy5v"),S(n,"class","svelte-12luy5v"),S(t,"class","markdown svelte-12luy5v")},m(v,y){w(v,t,y),x(t,n),x(n,o),x(n,r),x(n,i),x(n,a),x(n,s),x(s,l),x(s,c),x(n,u),h&&h.m(n,null),x(t,p),_e(d,t,null),m=!0,f||(g=E(s,"click",e[3],{once:!0}),f=!0)},p(e,[t]){(!m||2&t)&&D(c,e[1]),!0===navigator.standalone&&h.p(e,t)},i(e){m||($e(d.$$.fragment,e),m=!0)},o(e){xe(d.$$.fragment,e),m=!1},d(e){e&&k(t),h&&h.d(),Me(d),f=!1,g()}}}const fr="1.4.4";function gr(e,t,n){let o;l(e,on,(e=>n(0,o=e)));let r="";return e.$$.update=()=>{var t;1&e.$$.dirty&&(t=o)&&t.messageSW({type:"GET_VERSION"}).then((e=>n(1,r=e)))},[o,r,()=>{window.location.hash="#/",window.location.reload()},()=>o&&o.update()&&void 0]}class hr extends Fe{constructor(e){super(),je(this,e,gr,mr,s,{})}}function vr(e){let t,n,o,r,a,s,l,c,u,p,d,m,f,g,h,v;return{c(){t=C("div"),n=C("div"),o=C("strong"),o.innerHTML='<span class="svelte-395rpc">üë®üèª‚Äç‚úàÔ∏è</span>Mise √† jour disponible',r=j(),a=C("button"),a.innerHTML='<span aria-hidden="true">√ó</span>',s=j(),l=C("div"),c=C("p"),c.textContent="Il faudra recharger l'OFP",u=j(),p=C("button"),d=C("span"),m=M(e[1]),S(o,"class","svelte-395rpc"),S(a,"type","button"),S(a,"class","close svelte-395rpc"),S(a,"aria-label","Close"),S(n,"class","toast-header svelte-395rpc"),S(d,"class","svelte-395rpc"),N(d,"blinking",e[1].endsWith("...")),S(p,"class","btn btn-primary"),S(p,"type","button"),S(l,"class","toast-body text-center"),S(t,"class","toast svelte-395rpc"),z(t,"position","fixed"),z(t,"top","0"),z(t,"right","0")},m(i,f){w(i,t,f),x(t,n),x(n,o),x(n,r),x(n,a),x(t,s),x(t,l),x(l,c),x(l,u),x(l,p),x(p,d),x(d,m),g=!0,h||(v=[E(a,"click",e[6]),E(p,"click",e[7],{once:!0})],h=!0)},p(e,t){(!g||2&t)&&D(m,e[1]),2&t&&N(d,"blinking",e[1].endsWith("..."))},i(e){g||(se((()=>{f||(f=ke(t,He,{},!0)),f.run(1)})),g=!0)},o(e){f||(f=ke(t,He,{},!1)),f.run(0),g=!1},d(e){e&&k(t),e&&f&&f.end(),h=!1,i(v)}}}function yr(t){let n,o,r,i,a,s,l,c,u,p,d=(t[4](700)||"")+"";return{c(){n=C("div"),o=C("div"),r=C("div"),r.innerHTML='<strong class="svelte-395rpc"><span class="svelte-395rpc">üë®üèª‚Äç‚úàÔ∏è</span>Mise √† jour d√©tect√©e</strong>',i=j(),a=C("div"),s=C("button"),s.innerHTML="<span>Mise √† jour...</span>",l=j(),c=M(d),S(r,"class","toast-header svelte-395rpc"),S(s,"class","btn"),S(s,"type","button"),S(a,"class","toast-body text-center"),S(o,"class","toast svelte-395rpc"),S(n,"class","modal svelte-395rpc")},m(e,d){w(e,n,d),x(n,o),x(o,r),x(o,i),x(o,a),x(a,s),x(n,l),w(e,c,d),u||(p=E(s,"click",O(t[5])),u=!0)},p:e,i:e,o:e,d(e){e&&k(n),e&&k(c),u=!1,p()}}}function br(e){let t,n,o,r;const i=[yr,vr],a=[];function s(e,t){return!e[3]||e[2]||e[0]?e[3]&&!e[2]?1:-1:0}return~(t=s(e))&&(n=a[t]=i[t](e)),{c(){n&&n.c(),o=F()},m(e,n){~t&&a[t].m(e,n),w(e,o,n),r=!0},p(e,[r]){let l=t;t=s(e),t===l?~t&&a[t].p(e,r):(n&&(ye(),xe(a[l],1,1,(()=>{a[l]=null})),be()),~t?(n=a[t],n?n.p(e,r):(n=a[t]=i[t](e),n.c()),$e(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||($e(n),r=!0)},o(e){xe(n),r=!1},d(e){~t&&a[t].d(e),e&&k(o)}}}const $r=nn(!1),xr=nn(),wr=nn(!1),kr=e=>{$r.set(!0),rn.set(!1),e?wr.set(!((e,t)=>{const n=e.split("."),o=t.split(".");return n.slice(0,-1).join(".")===o.slice(0,-1).join(".")})("1.4.4",e)):wr.set(!0)};function Pr(t,n,o){let r,i,a,s,c=e,u=e;l(t,rn,(e=>o(2,r=e))),l(t,on,(e=>o(8,i=e))),l(t,xr,(e=>o(9,a=e))),l(t,$r,(e=>o(3,s=e))),t.$$.on_destroy.push((()=>c())),t.$$.on_destroy.push((()=>u()));let p="Installer";m(rn,r=!1,r);let{prompt:d=!1}=n;const f=(e=0)=>{let t;i&&a&&a.waiting?(navigator.serviceWorker.addEventListener("controllerchange",(()=>{t||(t=!0,e?setTimeout((()=>window.location.reload()),e):window.location.reload())})),o(1,p="En cours..."),a.waiting.postMessage({type:"SKIP_WAITING"})):window.location.reload()};return t.$$set=e=>{"prompt"in e&&o(0,d=e.prompt)},[d,p,r,s,f,function(e){Q(t,e)},()=>m(rn,r=!0,r),()=>f()]}class Cr extends Fe{constructor(e){super(),je(this,e,Pr,br,s,{prompt:0})}}function Lr(e){let t;return{c(){t=C("ol"),t.innerHTML='<li class="svelte-aqbc18">Dans la barre de menu, cliquez sur <svg class="svelte-aqbc18"><use xlink:href="#share-symbol"></use></svg></li> \n                    <li class="svelte-aqbc18">Faites d√©filer, choisir‚ÄØ: <em>Sur l&#39;√©cran d&#39;accueil</em>  <svg style="width:22px;height:22px;" class="svelte-aqbc18"><use xlink:href="#add2home-symbol"></use></svg></li> \n                    <li class="svelte-aqbc18">Lancez l&#39;application depuis l&#39;√©cran d&#39;accueil</li>',S(t,"class","guide svelte-aqbc18")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function _r(e){let t;return{c(){t=C("p"),t.textContent="Merci d'ouvrir cette page dans Safari",S(t,"class","guide error svelte-aqbc18")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function Mr(t){let n,o,r,i,a,s,l,c,u,p,d,m,f,g;n=new Nt({});let h=function(e,t){return e[0]?Lr:_r}(t)(t);return f=new Cr({}),{c(){Le(n.$$.fragment),o=j(),r=C("div"),i=C("div"),a=C("div"),a.innerHTML='<img src="./images/ofp2map-icons/icon-128x128.png" alt="OFP2MAP" class="svelte-aqbc18"/>',s=j(),l=C("div"),c=C("h3"),c.textContent="Installez OFP2MAP",u=j(),p=C("p"),p.textContent="Si OFP2MAP est d√©j√† sur l'√©cran d'accueil, ne l'installez pas une deuxi√®me fois. Attention: l'installation ne peut se faire que depuis\n                le navigateur Safari, ce n'est pas possible depuis une WebView (√† l'int√©rieur d'une app).",d=j(),h.c(),m=j(),Le(f.$$.fragment),S(a,"class","icon-container svelte-aqbc18"),S(c,"class","title svelte-aqbc18"),S(p,"class","text svelte-aqbc18"),S(l,"class","prompt-content svelte-aqbc18"),S(i,"class","prompt svelte-aqbc18"),S(r,"class","prompt-container svelte-aqbc18")},m(e,t){_e(n,e,t),w(e,o,t),w(e,r,t),x(r,i),x(i,a),x(i,s),x(i,l),x(l,c),x(l,u),x(l,p),x(l,d),h.m(l,null),w(e,m,t),_e(f,e,t),g=!0},p:e,i(e){g||($e(n.$$.fragment,e),$e(f.$$.fragment,e),g=!0)},o(e){xe(n.$$.fragment,e),xe(f.$$.fragment,e),g=!1},d(e){Me(n,e),e&&k(o),e&&k(r),h.d(),e&&k(m),Me(f,e)}}}function jr(e){return[Ae&&!Se]}class Fr extends Fe{constructor(e){super(),je(this,e,jr,Mr,s,{})}}function Er(e){let t,n,o,r,i,a,s,l,c;t=new nr({props:{$$slots:{default:[Sr]},$$scope:{ctx:e}}}),o=new Cr({props:{prompt:!!e[1]}});let u=e[1]&&Ar(e);const p=[Gr,Nr,Wr,qr],d=[];function m(e,t){return!e[1]||"/gramet"!==e[2]&&"/export"!==e[2]?"/"===e[2]?1:"/help"===e[2]?2:e[1]?-1:3:0}return~(a=m(e))&&(s=d[a]=p[a](e)),{c(){Le(t.$$.fragment),n=j(),Le(o.$$.fragment),r=j(),u&&u.c(),i=j(),s&&s.c(),l=F()},m(e,s){_e(t,e,s),w(e,n,s),_e(o,e,s),w(e,r,s),u&&u.m(e,s),w(e,i,s),~a&&d[a].m(e,s),w(e,l,s),c=!0},p(e,n){const r={};8217&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const c={};2&n&&(c.prompt=!!e[1]),o.$set(c),e[1]?u?(u.p(e,n),2&n&&$e(u,1)):(u=Ar(e),u.c(),$e(u,1),u.m(i.parentNode,i)):u&&(ye(),xe(u,1,1,(()=>{u=null})),be());let f=a;a=m(e),a===f?~a&&d[a].p(e,n):(s&&(ye(),xe(d[f],1,1,(()=>{d[f]=null})),be()),~a?(s=d[a],s?s.p(e,n):(s=d[a]=p[a](e),s.c()),$e(s,1),s.m(l.parentNode,l)):s=null)},i(e){c||($e(t.$$.fragment,e),$e(o.$$.fragment,e),$e(u),$e(s),c=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),xe(u),xe(s),c=!1},d(e){Me(t,e),e&&k(n),Me(o,e),e&&k(r),u&&u.d(e),e&&k(i),~a&&d[a].d(e),e&&k(l)}}}function Or(t){let n,o;return n=new Fr({}),{c(){Le(n.$$.fragment)},m(e,t){_e(n,e,t),o=!0},p:e,i(e){o||($e(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){Me(n,e)}}}function Sr(e){let t,n,o,r,i;return n=new jo({props:{kmlOptions:e[0]}}),n.$on("change",e[7]),{c(){t=C("form"),Le(n.$$.fragment),S(t,"class","form-inline svelte-1a0hzo3")},m(a,s){w(a,t,s),_e(n,t,null),o=!0,r||(i=E(t,"submit",O(e[6])),r=!0)},p(e,t){const o={};1&t&&(o.kmlOptions=e[0]),n.$set(o)},i(e){o||($e(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){e&&k(t),Me(n),r=!1,i()}}}function Ar(e){let t,n,o,r={ctx:e,current:null,token:null,hasCatch:!0,pending:Rr,then:Ir,catch:Tr,value:11,error:12,blocks:[,,,]};return Pe(n=e[1],r),{c(){t=F(),r.block.c()},m(e,n){w(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t,o=!0},p(t,o){if(e=t,r.ctx=e,2&o&&n!==(n=e[1])&&Pe(n,r));else{const t=e.slice();t[11]=t[12]=r.resolved,r.block.p(t,o)}},i(e){o||($e(r.block),o=!0)},o(e){for(let e=0;e<3;e+=1){xe(r.blocks[e])}o=!1},d(e){e&&k(t),r.block.d(e),r.token=null,r=null}}}function Tr(t){let n,o,r,i=t[12].message+"";return{c(){n=C("p"),o=M("üò±: "),r=M(i),N(n,"d-none","/map"!==t[2])},m(e,t){w(e,n,t),x(n,o),x(n,r)},p(e,t){2&t&&i!==(i=e[12].message+"")&&D(r,i),4&t&&N(n,"d-none","/map"!==e[2])},i:e,o:e,d(e){e&&k(n)}}}function Ir(e){let t,n;return t=new ir({props:{hidden:"/map"!==e[2],$$slots:{default:[Dr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.hidden="/map"!==e[2]),8199&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Dr(e){let t,n,o;function r(t){e[8](t)}let i={id:"map",ofp:e[11]};return void 0!==e[0]&&(i.kmlOptions=e[0]),t=new Jo({props:i}),te.push((()=>Ce(t,"kmlOptions",r))),t.$on("save",e[9]),{c(){Le(t.$$.fragment)},m(e,n){_e(t,e,n),o=!0},p(e,o){const r={};2&o&&(r.ofp=e[11]),!n&&1&o&&(n=!0,r.kmlOptions=e[0],le((()=>n=!1))),t.$set(r)},i(e){o||($e(t.$$.fragment,e),o=!0)},o(e){xe(t.$$.fragment,e),o=!1},d(e){Me(t,e)}}}function Rr(e){let t,n;return t=new ir({props:{hidden:"/map"!==e[2],$$slots:{default:[zr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};4&n&&(o.hidden="/map"!==e[2]),8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function zr(e){let t;return{c(){t=C("div"),t.textContent="traitement en cours...",z(t,"margin","auto")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function qr(t){let n,o=t[5](t[2])+"";return{c(){n=M(o)},m(e,t){w(e,n,t)},p(e,t){4&t&&o!==(o=e[5](e[2])+"")&&D(n,o)},i:e,o:e,d(e){e&&k(n)}}}function Wr(e){let t,n;return t=new ir({props:{$$slots:{default:[Ur]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Nr(e){let t,n;return t=new ir({props:{$$slots:{default:[Hr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Gr(e){let t,n,o,r={ctx:e,current:null,token:null,hasCatch:!0,pending:Yr,then:Zr,catch:Br,value:11,error:12,blocks:[,,,]};return Pe(n=e[1],r),{c(){t=F(),r.block.c()},m(e,n){w(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t,o=!0},p(t,o){if(e=t,r.ctx=e,2&o&&n!==(n=e[1])&&Pe(n,r));else{const t=e.slice();t[11]=t[12]=r.resolved,r.block.p(t,o)}},i(e){o||($e(r.block),o=!0)},o(e){for(let e=0;e<3;e+=1){xe(r.blocks[e])}o=!1},d(e){e&&k(t),r.block.d(e),r.token=null,r=null}}}function Ur(e){let t,n;return t=new hr({}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Hr(e){let t,n;return t=new Ut({}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Br(t){let n,o,r,i=t[12].message+"";return{c(){n=C("p"),o=M("üò±: "),r=M(i)},m(e,t){w(e,n,t),x(n,o),x(n,r)},p(e,t){2&t&&i!==(i=e[12].message+"")&&D(r,i)},i:e,o:e,d(e){e&&k(n)}}}function Zr(e){let t,n,o,r;const i=[Xr,Kr],a=[];function s(e,t){return"/gramet"===e[2]?0:"/export"===e[2]?1:-1}return~(t=s(e))&&(n=a[t]=i[t](e)),{c(){n&&n.c(),o=F()},m(e,n){~t&&a[t].m(e,n),w(e,o,n),r=!0},p(e,r){let l=t;t=s(e),t===l?~t&&a[t].p(e,r):(n&&(ye(),xe(a[l],1,1,(()=>{a[l]=null})),be()),~t?(n=a[t],n?n.p(e,r):(n=a[t]=i[t](e),n.c()),$e(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||($e(n),r=!0)},o(e){xe(n),r=!1},d(e){~t&&a[t].d(e),e&&k(o)}}}function Kr(e){let t,n;return t=new ir({props:{$$slots:{default:[Jr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};8199&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Xr(e){let t,n;return t=new ir({props:{$$slots:{default:[Vr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};8194&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Jr(e){let t,n,o,r;return t=new Ot({props:{ofp:e[11]}}),t.$on("save",e[10]),o=new et({props:{ofp:e[11]}}),{c(){Le(t.$$.fragment),n=j(),Le(o.$$.fragment)},m(e,i){_e(t,e,i),w(e,n,i),_e(o,e,i),r=!0},p(e,n){const r={};2&n&&(r.ofp=e[11]),t.$set(r);const i={};2&n&&(i.ofp=e[11]),o.$set(i)},i(e){r||($e(t.$$.fragment,e),$e(o.$$.fragment,e),r=!0)},o(e){xe(t.$$.fragment,e),xe(o.$$.fragment,e),r=!1},d(e){Me(t,e),e&&k(n),Me(o,e)}}}function Vr(e){let t,n;return t=new Rt({props:{ofp:e[11]}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.ofp=e[11]),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Yr(e){let t,n;return t=new ir({props:{$$slots:{default:[Qr]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,o){_e(t,e,o),n=!0},p(e,n){const o={};8192&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function Qr(e){let t;return{c(){t=C("div"),t.textContent="traitement en cours...",z(t,"margin","auto")},m(e,n){w(e,t,n)},d(e){e&&k(t)}}}function ei(e){let t,n,o,r,i,a;const s=[Or,Er],l=[];return o=navigator&&!1===navigator.standalone&&Oe?0:1,r=l[o]=s[o](e),{c(){t=C("main"),n=C("div"),r.c(),S(n,"class","content svelte-1a0hzo3"),S(t,"class",i="container "+(e[2].substr(1)||"home")+" svelte-1a0hzo3")},m(e,r){w(e,t,r),x(t,n),l[o].m(n,null),a=!0},p(e,[n]){r.p(e,n),(!a||4&n&&i!==(i="container "+(e[2].substr(1)||"home")+" svelte-1a0hzo3"))&&S(t,"class",i)},i(e){a||($e(r),a=!0)},o(e){xe(r),a=!1},d(e){e&&k(t),l[o].d()}}}function ti(e,t,n){let o,r,i,a;l(e,sn,(e=>n(1,o=e))),l(e,mn,(e=>n(2,r=e))),l(e,an,(e=>n(3,i=e))),l(e,rn,(e=>n(4,a=e)));(e=>{const t={},n={};e.length>1&&(e.substr(1)||"").split("&").forEach((function(e){const n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}));for(let[e,o]of Object.entries(t))if(e in tt){let t;e.endsWith("Pin")?(o*=1,isNaN(o)||(t=o)):e.endsWith("Color")&&o.match(lt)?t=o.toUpperCase():e.endsWith("Display")&&(t=!!o),void 0!==t&&(n[e]=t)}else"downloadType"===e?(o*=1,isNaN(o)||yt.setItem(vt.downloadType,o)):"shortcut"===e&&(o=o.trim(),o&&yt.setItem(vt.shortcut,o));yt.setItem(vt.optionsKML,n)})(window.location.search);let s=(e=>{const t={};for(let[n,o]of Object.entries(e))n in tt&&(n.endsWith("Pin")?(o*=1,isNaN(o)||(t[n]=o)):n.endsWith("Color")&&o.match(lt)?t[n]=o.toUpperCase():n.endsWith("Display")&&(t[n]=!!o));return{...tt,...t}})(yt.getItem(vt.optionsKML)||{});bt(s,r),V((()=>(document.addEventListener("visibilitychange",pn,!1),()=>document.removeEventListener("visibilitychange",pn))));return[s,o,r,i,a,e=>{window.location.hash="#/"},function(t){Q(e,t)},()=>m(an,i=m(rn,a=!1,a),i),function(e){s=e,n(0,s)},()=>bt(s,r),()=>bt(s,r)]}class ni extends Fe{constructor(e){super(),je(this,e,ti,ei,s,{})}}try{self["workbox:window:6.1.1"]&&_()}catch(oi){}function oi(e,t){return new Promise((function(n){var o=new MessageChannel;o.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[o.port2])}))}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function ii(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ri(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.1.1"]&&_()}catch(oi){}var ai=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function si(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var li=function(e,t){this.type=e,Object.assign(this,t)};function ci(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ui(){}var pi={type:"SKIP_WAITING"};function di(e,t){if(!t)return e&&e.then?e.then(ui):Promise.resolve()}var mi=function(e){var t,n;function o(t,n){var o,r;return void 0===n&&(n={}),(o=e.call(this)||this).nn={},o.tn=0,o.rn=new ai,o.en=new ai,o.on=new ai,o.un=0,o.an=new Set,o.cn=function(){var e=o.fn,t=e.installing;o.tn>0||!si(t.scriptURL,o.sn)||performance.now()>o.un+6e4?(o.vn=t,e.removeEventListener("updatefound",o.cn)):(o.hn=t,o.an.add(t),o.rn.resolve(t)),++o.tn,t.addEventListener("statechange",o.ln)},o.ln=function(e){var t=o.fn,n=e.target,r=n.state,i=n===o.vn,a={sw:n,isExternal:i,originalEvent:e};!i&&o.mn&&(a.isUpdate=!0),o.dispatchEvent(new li(r,a)),"installed"===r?o.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&o.dispatchEvent(new li("waiting",a))}),200):"activating"===r&&(clearTimeout(o.wn),i||o.en.resolve(n))},o.dn=function(e){var t=o.hn;t===navigator.serviceWorker.controller&&(o.dispatchEvent(new li("controlling",{sw:t,originalEvent:e,isUpdate:o.mn})),o.on.resolve(t))},o.gn=(r=function(e){var t=e.data,n=e.source;return ci(o.getSW(),(function(){o.an.has(n)&&o.dispatchEvent(new li("message",{data:t,sw:n,originalEvent:e}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),o.sn=t,o.nn=n,navigator.serviceWorker.addEventListener("message",o.gn),o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,i=o.prototype;return i.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var o=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return di(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return o.mn=Boolean(navigator.serviceWorker.controller),o.yn=o.pn(),ci(o.bn(),(function(e){o.fn=e,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&si(t.scriptURL,o.sn)&&(o.hn=t,Promise.resolve().then((function(){o.dispatchEvent(new li("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn,{once:!0}),o.fn}))}))}catch(e){return Promise.reject(e)}},i.update=function(){try{return this.fn?di(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},i.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(e){try{return ci(this.getSW(),(function(t){return oi(t,e)}))}catch(e){return Promise.reject(e)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&oi(this.fn.waiting,pi)},i.pn=function(){var e=navigator.serviceWorker.controller;return e&&si(e.scriptURL,this.sn)?e:void 0},i.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return ci(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(o.prototype,r),o}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=ii(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());let fi,gi=!1;try{fi=new ni({target:document.body})}catch(e){gi=!0;try{var hi=document.createElement("p");hi.innerHTML="Erreur: "+e.message+"<br/><br/>OFP2MAP a besoin de navigateurs r√©cents: Safari 14¬†iOS/Mac, Firefox¬†86, Chrome¬†87 et Microsoft Edge¬†87 sont compatibles. <br /><br />Contactez moi sur l'email AF (erdelord@...) en me donnant le message d'erreur.",document.body.appendChild(hi)}catch(ii){}}finally{if("serviceWorker"in navigator){const e=new mi("./sw.js");on.set(e),e.addEventListener("installed",(e=>{e.isUpdate})),e.addEventListener("activated",(t=>{t.isUpdate||e.messageSW({type:"CLIENTS_CLAIM"}),t.isExternal})),e.addEventListener("waiting",(t=>{gi?(e.addEventListener("controlling",(()=>{window.location.reload()})),e.messageSkipWaiting()):(t.isExternal,Ne(400,oi(t.sw,{type:"GET_VERSION"})).then((e=>kr(e))).catch((e=>{kr()})))})),e.register().then((e=>{gi&&e&&e.unregister(),xr.set(e)}),console.error)}}return fi}();
//# sourceMappingURL=bundle.js.map
