var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function r(){return Object.create(null)}function i(e){e.forEach(o)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l;function c(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function u(e){let t;return c(e,(e=>t=e))(),t}function d(e,t,n){e.$$.on_destroy.push(c(t,n))}function p(e,t,n,o){if(e){const r=m(e,t,n,o);return e[0](r)}}function m(e,t,o,r){return e[1]&&r?n(o.ctx.slice(),e[1](r(t))):o.ctx}function f(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}function g(e,t,n,o,r,i){if(r){const s=m(t,n,o,i);e.p(s,r)}}function h(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function v(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function $(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function y(e){return null==e?"":e}function b(e,t,n){return e.set(n),t}function x(t){return t&&s(t.destroy)?t.destroy:e}const w="undefined"!=typeof window;let C=w?()=>window.performance.now():()=>Date.now(),k=w?e=>requestAnimationFrame(e):e;const L=new Set;function P(e){L.forEach((t=>{t.c(e)||(L.delete(t),t.f())})),0!==L.size&&k(P)}function M(e){let t;return 0===L.size&&k(P),{promise:new Promise((n=>{L.add(t={c:e,f:n})})),abort(){L.delete(t)}}}function S(e,t){e.appendChild(t)}function T(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t.host?t:document}function E(e){const t=F("style");return function(e,t){S(e.head||e,t)}(T(e),t),t}function O(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode.removeChild(e)}function I(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function F(e){return document.createElement(e)}function D(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function j(e){return document.createTextNode(e)}function R(){return j(" ")}function N(){return j("")}function z(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function W(e){return function(t){return t.preventDefault(),e.call(this,t)}}function G(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function q(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:G(e,o,t[o])}function U(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function H(e){return""===e?null:+e}function B(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function K(e,t){e.value=null==t?"":t}function Z(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function V(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function J(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let Y;function Q(){if(void 0===Y){Y=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){Y=!0}}return Y}function X(e,t,n){e.classList[n?"add":"remove"](t)}function ee(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}const te=new Set;let ne,oe=0;function re(e,t,n,o,r,i,s,a=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(n-t)*i(e);c+=100*e+`%{${s(o,1-o)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=T(e);te.add(p);const m=p.__svelte_stylesheet||(p.__svelte_stylesheet=E(e).sheet),f=p.__svelte_rules||(p.__svelte_rules={});f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${r}ms 1 both`,oe+=1,d}function ie(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-o.length;r&&(e.style.animation=o.join(", "),oe-=r,oe||k((()=>{oe||(te.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),te.clear())})))}function se(e){ne=e}function ae(){if(!ne)throw new Error("Function called outside component initialization");return ne}function le(e){ae().$$.on_mount.push(e)}function ce(e){ae().$$.on_destroy.push(e)}function ue(){const e=ae();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=ee(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}function de(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const pe=[],me=[],fe=[],ge=[],he=Promise.resolve();let ve=!1;function $e(){ve||(ve=!0,he.then(ke))}function ye(){return $e(),he}function be(e){fe.push(e)}function xe(e){ge.push(e)}let we=!1;const Ce=new Set;function ke(){if(!we){we=!0;do{for(let e=0;e<pe.length;e+=1){const t=pe[e];se(t),Le(t.$$)}for(se(null),pe.length=0;me.length;)me.pop()();for(let e=0;e<fe.length;e+=1){const t=fe[e];Ce.has(t)||(Ce.add(t),t())}fe.length=0}while(pe.length);for(;ge.length;)ge.pop()();ve=!1,we=!1,Ce.clear()}}function Le(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(be)}}let Pe;function Me(){return Pe||(Pe=Promise.resolve(),Pe.then((()=>{Pe=null}))),Pe}function Se(e,t,n){e.dispatchEvent(ee(`${t?"intro":"outro"}${n}`))}const Te=new Set;let Ee;function Oe(){Ee={r:0,c:[],p:Ee}}function Ae(){Ee.r||i(Ee.c),Ee=Ee.p}function Ie(e,t){e&&e.i&&(Te.delete(e),e.i(t))}function Fe(e,t,n,o){if(e&&e.o){if(Te.has(e))return;Te.add(e),Ee.c.push((()=>{Te.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}const De={duration:0};function _e(n,o,r){let i,a,l=o(n,r),c=!1,u=0;function d(){i&&ie(n,i)}function p(){const{delay:o=0,duration:r=300,easing:s=t,tick:p=e,css:m}=l||De;m&&(i=re(n,0,1,r,o,s,m,u++)),p(0,1);const f=C()+o,g=f+r;a&&a.abort(),c=!0,be((()=>Se(n,!0,"start"))),a=M((e=>{if(c){if(e>=g)return p(1,0),Se(n,!0,"end"),d(),c=!1;if(e>=f){const t=s((e-f)/r);p(t,1-t)}}return c}))}let m=!1;return{start(){m||(m=!0,ie(n),s(l)?(l=l(),Me().then(p)):p())},invalidate(){m=!1},end(){c&&(d(),c=!1)}}}function je(n,o,r,a){let l=o(n,r),c=a?0:1,u=null,d=null,p=null;function m(){p&&ie(n,p)}function f(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(o){const{delay:r=0,duration:s=300,easing:a=t,tick:g=e,css:h}=l||De,v={start:C()+r,b:o};o||(v.group=Ee,Ee.r+=1),u||d?d=v:(h&&(m(),p=re(n,c,o,s,r,a,h)),o&&g(0,1),u=f(v,s),be((()=>Se(n,o,"start"))),M((e=>{if(d&&e>d.start&&(u=f(d,s),d=null,Se(n,u.b,"start"),h&&(m(),p=re(n,c,u.b,u.duration,0,a,l.css))),u)if(e>=u.end)g(c=u.b,1-c),Se(n,u.b,"end"),d||(u.b?m():--u.group.r||i(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),g(c,1-c)}return!(!u&&!d)})))}return{run(e){s(l)?Me().then((()=>{l=l(),g(e)})):g(e)},end(){m(),u=d=null}}}function Re(e,t){const n=t.token={};function o(e,o,r,i){if(t.token!==n)return;t.resolved=i;let s=t.ctx;void 0!==r&&(s=s.slice(),s[r]=i);const a=e&&(t.current=e)(s);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(Oe(),Fe(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Ae())})):t.block.d(1),a.c(),Ie(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[o]=a),l&&ke()}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){const n=ae();if(e.then((e=>{se(n),o(t.then,1,t.value,e),se(null)}),(e=>{if(se(n),o(t.catch,2,t.error,e),se(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var r}const Ne="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ze(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function We(e){e&&e.c()}function Ge(e,t,n,r){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),r||be((()=>{const t=l.map(o).filter(s);c?c.push(...t):i(t),e.$$.on_mount=[]})),u.forEach(be)}function qe(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ue(t,n,o,s,a,l,c,u=[-1]){const d=ne;se(t);const p=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:n.context||[]),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(p.root);let m=!1;if(p.ctx=o?o(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),m&&function(e,t){-1===e.$$.dirty[0]&&(pe.push(e),$e(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),m=!0,i(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(A)}else p.fragment&&p.fragment.c();n.intro&&Ie(t.$$.fragment),Ge(t,n.target,n.anchor,n.customElement),ke()}se(d)}class He{$destroy(){qe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Be{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}const Ke="iPad"===navigator.platform||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,Ze=/CriOS/i.test(navigator.userAgent)&&/iphone|ipod|ipad/i.test(navigator.userAgent),Ve=/Safari\//i.test(navigator.userAgent)&&!/(Chrome\/|Chromium\/)/i.test(navigator.userAgent),Je=matchMedia("(hover: hover)").matches;function Ye(e,t,n){let o;return function(){const r=this,i=arguments,s=function(){o=null,n||e.apply(r,i)},a=n&&!o;clearTimeout(o),o=setTimeout(s,t),a&&e.apply(r,i)}}function Qe(e){const t=e.split("-").slice(0,-1).join("");switch(t){case"route":return"rmain";case"alternate":return"ralt";case"nat":return"rnat";default:return t}}function Xe(e,t,n){return e<=t?t:e>=n?n:e}function et(e,t,n){return!(e<t)&&!(e>n)}function tt(e,t,n,o){return 8&n?[e[0]+(t[0]-e[0])*(o[3]-e[1])/(t[1]-e[1]),o[3]]:4&n?[e[0]+(t[0]-e[0])*(o[1]-e[1])/(t[1]-e[1]),o[1]]:2&n?[o[2],e[1]+(t[1]-e[1])*(o[2]-e[0])/(t[0]-e[0])]:1&n?[o[0],e[1]+(t[1]-e[1])*(o[0]-e[0])/(t[0]-e[0])]:null}function nt(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function ot(e,t){let n=new Promise(((t,n)=>{let o=setTimeout((()=>{clearTimeout(o),n("Timed out in "+e+"ms.")}),e)}));return Promise.race([t,n])}const rt=(e,t)=>{let n=e.split("."),o=t.split(".");for(var r=0;r<3;r++){let e=Number(n[r]),t=Number(o[r]);if(e>t)return 1;if(t>e)return-1;if(!isNaN(e)&&isNaN(t))return 1;if(isNaN(e)&&!isNaN(t))return-1}return 0},it=async()=>{const e={title:"OFP2MAP",url:window.location.pathname};try{await navigator.share(e)}catch(e){}return!1},st=(e,t)=>{let n=0,o=e.length-1,r=-1;for(;n<=o;){let i=Math.trunc((n+o)/2);t(e[i])?(r=i,o=i-1):n=i+1}return-1!==r&&t(e[r])?r:-1};function at(e){const t=e-1;return t*t*t+1}function lt(e,{delay:n=0,duration:o=400,easing:r=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:r,css:e=>"opacity: "+e*i}}function ct(e,{delay:t=0,duration:n=400,easing:o=at,x:r=0,y:i=0,opacity:s=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,u=l*(1-s);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*r}px, ${(1-e)*i}px);\n\t\t\topacity: ${l-u*t}`}}function ut(e,{delay:t=0,duration:n=400,easing:o=at}={}){const r=getComputedStyle(e),i=+r.opacity,s=parseFloat(r.height),a=parseFloat(r.paddingTop),l=parseFloat(r.paddingBottom),c=parseFloat(r.marginTop),u=parseFloat(r.marginBottom),d=parseFloat(r.borderTopWidth),p=parseFloat(r.borderBottomWidth);return{delay:t,duration:n,easing:o,css:e=>`overflow: hidden;opacity: ${Math.min(20*e,1)*i};height: ${e*s}px;padding-top: ${e*a}px;padding-bottom: ${e*l}px;margin-top: ${e*c}px;margin-bottom: ${e*u}px;border-top-width: ${e*d}px;border-bottom-width: ${e*p}px;`}}const dt=[];function pt(e,t){return{subscribe:mt(e,t).subscribe}}function mt(t,n=e){let o;const r=new Set;function i(e){if(a(t,e)&&(t=e,o)){const e=!dt.length;for(const e of r)e[1](),dt.push(e,t);if(e){for(let e=0;e<dt.length;e+=2)dt[e][0](dt[e+1]);dt.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(s,a=e){const l=[s,a];return r.add(l),1===r.size&&(o=n(i)||e),s(t),()=>{r.delete(l),0===r.size&&(o(),o=null)}}}}function ft(t,n,o){const r=!Array.isArray(t),a=r?[t]:t,l=n.length<2;return pt(o,(t=>{let o=!1;const u=[];let d=0,p=e;const m=()=>{if(d)return;p();const o=n(r?u[0]:u,t);l?t(o):p=s(o)?o:e},f=a.map(((e,t)=>c(e,(e=>{u[t]=e,d&=~(1<<t),o&&m()}),(()=>{d|=1<<t}))));return o=!0,m(),function(){i(f),p()}}))}const gt=["220","318","319","320","321","330","340","350","380","787","772","773","77F"],ht=["340","380"];const vt=mt(),$t=mt(!1),yt=mt(!1),bt=mt(!1),xt=mt(!1),wt=mt(!1),Ct=mt(!1),kt=function(e){const{subscribe:t,set:n,update:o}=mt(e);return{subscribe:t,set:n,update:o,reset:()=>n("object"==typeof e?{...e}:Array.isArray(e)?[...e]:e)}}(!1),Lt=mt(-1),Pt=mt(),Mt=mt(),St=mt(),Tt=ft([Pt,St],(([e,t])=>{if(e&&t){if(e.timeMatrix.length>0)return new Date(t.getTime()+6e4*e.timeMatrix[e.timeMatrix.length-1][1]);return new Date(t.getTime()+6e4*e.infos.flightTime)}})),Et=mt(),Ot=ft([Pt,Et],(([e,t])=>{let n;if(t?n=t:e&&(n=e.infos.aircraftType),n&&-1!==gt.indexOf(n))return n}));let At=new Date;const It=()=>{if("serviceWorker"in navigator){const e=18e5;new Date-At>e&&navigator.serviceWorker.getRegistration().then((e=>{e&&(e.waiting?(yt.set(!0),bt.set(!0)):e.update(),$t.set(!1),At=new Date)}),console.error)}},Ft=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&It()},Dt=pt(!0,(e=>{const t=()=>{document&&document.visibilityState?"visible"===document.visibilityState?e(!0):e(!1):e(!0)};return document.addEventListener("visibilitychange",t),t(),()=>{document.removeEventListener("visibilitychange",t)}})),_t=pt({},(e=>{const t=()=>{e(navigator.onLine)};return"undefined"!=typeof navigator&&"onLine"in navigator?(t(),window.addEventListener("offline",t),window.addEventListener("online",t)):e(void 0),()=>{"undefined"!=typeof navigator&&"onLine"in navigator&&(window.removeEventListener("offline",t),window.removeEventListener("online",t))}})),jt=pt("/",(e=>{const t=()=>{const t=document.querySelector("meta[name=viewport]"),n=t?t.getAttribute("content"):"";let o=window.location.hash.substr(1)||"/";"/map"===o?(xt.set(!1),n&&t.setAttribute("content",n+",maximum-scale=1")):n&&t.setAttribute("content",n.replace(",maximum-scale=1","")),e(o),It()};return t(),window.addEventListener("hashchange",t),()=>{window.removeEventListener("hashchange",t)}})),Rt=ft([Pt,Lt,St,kt,Dt],(([e,t,n,o,r],i)=>{let s;const a=o?1e4:6e4;if(e&&n){const o=e=>{e<100?i(e):(i(100),clearInterval(s),s=void 0,Lt.set(-1))};if(t>=0){let e=t;s=setInterval((()=>{o(e),e++}),100)}else{const t=n,l=new Date(t.getTime()+6e4*e.infos.flightTime),c=()=>{let n=new Date;return n<=t?0:n>=l?100:(n-t)/(60*e.infos.flightTime)/10},u=c();u<100?(r&&(s=setInterval((()=>{const e=c();o(e)}),a)),i(u)):i(100)}}else i(0);return()=>{s&&clearInterval(s)}}),0),Nt=ft([Pt,Rt],(([e,t])=>{if(!e)return{map:{latitude:0,longitude:0},gramet:t,fl:300,reltime:0};const n=e.timeMatrix,o=e.distanceMatrix,r=o[0][0],i=o[o.length-1][0],s=o[o.length-1][1],a=0!==n.length?n[0][2]:o[0][2],l=0!==n.length?n[n.length-1][2]:o[o.length-1][2],c=t*(0!==n.length?n[n.length-1][1]:e.infos.flightTime)/100;if(t<=0)return{map:r,gramet:0,fl:a,reltime:c};if(t>=100)return{map:i,gramet:100,fl:l,reltime:c};if(0!==n.length){const e=st(n,(e=>e[1]>=c)),[t,i,l]=n[e];if(c-i==0)return{reltime:c,map:t,gramet:100*o[e][1]/s,fl:l};const u=n[e-1];if(u){const n=o[e][1]-o[e-1][1],r=(i-c)/(i-u[1]);return{reltime:c,map:t.atFraction(u[0],r,n),gramet:100*(o[e][1]-r*n)/s,fl:u[2]}}return{reltime:c,map:r,gramet:0,fl:a}}if(0!==o.length){const e=t*o[o.length-1][1]/100,n=st(o,(t=>t[1]>=e)),[i,s,l]=o[n];if(e-s==0)return{map:i,gramet:t,fl:l,reltime:c};const u=o[n-1];if(u){const n=s-u[1];return{map:i.atFraction(u[0],(s-e)/n,n),gramet:t,fl:u[2],reltime:c}}return{map:r,gramet:0,fl:a,reltime:c}}return{map:i,gramet:100,fl:l,reltime:c}}),{map:{latitude:0,longitude:0},gramet:0,fl:300,reltime:0});function zt(e){let t;return{c(){t=F("textarea"),t.value=e[0],G(t,"class","svelte-1c0wrid")},m(n,o){O(n,t,o),e[5](t)},p(e,n){1&n&&(t.value=e[0])},d(n){n&&A(t),e[5](null)}}}function Wt(t){let n,o,r;return{c(){n=F("a"),n.textContent="copier la route",G(n,"role","button"),G(n,"class","btn btn-primary"),G(n,"href","lhs-mpilot://")},m(e,i){O(e,n,i),o||(r=z(n,"click",t[4]),o=!0)},p:e,d(e){e&&A(n),o=!1,r()}}}function Gt(t){let n,o,r;return{c(){n=F("a"),n.innerHTML="ouvrir mPilot <sup>*</sup>",G(n,"role","button"),G(n,"class","btn btn-primary"),G(n,"href","lhs-mpilot://")},m(e,i){O(e,n,i),o||(r=z(n,"click",t[4]),o=!0)},p:e,d(e){e&&A(n),o=!1,r()}}}function qt(n){let o,r,a;return{c(){o=F("span"),o.textContent="copié!",G(o,"class","svelte-1c0wrid")},m(e,t){O(e,o,t),a=!0},i(e){a||(r&&r.end(1),a=!0)},o(n){r=function(n,o,r){let a,l=o(n,r),c=!0;const u=Ee;function d(){const{delay:o=0,duration:r=300,easing:s=t,tick:d=e,css:p}=l||De;p&&(a=re(n,1,0,r,o,s,p));const m=C()+o,f=m+r;be((()=>Se(n,!1,"start"))),M((e=>{if(c){if(e>=f)return d(0,1),Se(n,!1,"end"),--u.r||i(u.c),!1;if(e>=m){const t=s((e-m)/r);d(1-t,t)}}return c}))}return u.r+=1,s(l)?Me().then((()=>{l=l(),d()})):d(),{end(e){e&&l.tick&&l.tick(1,0),c&&(a&&ie(n,a),c=!1)}}}(o,lt,{}),a=!1},d(e){e&&A(o),e&&r&&r.end()}}}function Ut(e){let t,n,o,r,i,s,a,l,c,u,d,p,m,f,g,h=null!=e[0]&&zt(e);let v=(Ke?Gt:Wt)(e),$=Ke&&function(e){let t;return{c(){t=F("div"),t.innerHTML='<small class="text-muted"><sup>*</sup> Une fois dans l&#39;application mPilot,\n                il vous suffira de faire un coller (la route aura été copiée automatiquement).</small>',G(t,"class","card-text")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}(),y=e[2]&&qt();return{c(){h&&h.c(),t=R(),n=F("div"),o=F("div"),r=F("h5"),r.textContent="Route Lido",i=R(),s=F("div"),a=F("div"),a.innerHTML='<p class="card-text">Cette route est optimisée par rapport à celle de PilotMission car elle utilise les airways. Utiliser cette route permet\n                    d&#39;avoir une application Lido plus réactive.</p>',l=R(),c=F("div"),v.c(),u=R(),$&&$.c(),d=R(),p=F("div"),m=j(e[3]),f=R(),y&&y.c(),G(r,"class","card-title"),G(a,"class","col-12 col-md-9"),G(c,"class","text-md-end col align-self-center col-12 col-md-3 py-3 py-md-0"),G(s,"class","row mb-3"),G(p,"class","text-monospace svelte-1c0wrid"),G(o,"class","card-body"),G(n,"class","card mb-3 svelte-1c0wrid")},m(e,b){h&&h.m(e,b),O(e,t,b),O(e,n,b),S(n,o),S(o,r),S(o,i),S(o,s),S(s,a),S(s,l),S(s,c),v.m(c,null),S(o,u),$&&$.m(o,null),S(o,d),S(o,p),S(p,m),S(p,f),y&&y.m(p,null),g=!0},p(e,[n]){null!=e[0]?h?h.p(e,n):(h=zt(e),h.c(),h.m(t.parentNode,t)):h&&(h.d(1),h=null),v.p(e,n),e[2]?y?4&n&&Ie(y,1):(y=qt(),y.c(),Ie(y,1),y.m(p,null)):y&&(Oe(),Fe(y,1,1,(()=>{y=null})),Ae())},i(e){g||(Ie(y),g=!0)},o(e){Fe(y),g=!1},d(e){h&&h.d(e),e&&A(t),e&&A(n),v.d(),$&&$.d(),y&&y.d()}}}let Ht=!1;if(navigator.permissions)try{navigator.permissions.query({name:"clipboard-write"}).then((e=>{"granted"!=e.state&&"prompt"!=e.state||(Ht=!0)}))}catch(e){}function Bt(e,t,n){let o;d(e,Pt,(e=>n(7,o=e)));let r,i=null;const s=o?o.lidoRoute(!1).join(" "):"";let a,l=!1;return ce((()=>{a&&clearTimeout(a)})),[i,r,l,s,e=>{const t=async function(e){let t=!0;if(Ht)navigator.clipboard.writeText(e).then((()=>t=!0),(()=>t=!1));else{n(0,i=e),await ye(),r.focus(),r.select();try{t=document.execCommand("copy")}catch(e){t=!1}n(0,i=null)}return t}(s);Ke||(n(2,l=t),a=setTimeout((function(){n(2,l=!1),a&&clearTimeout(a)}),3e3),e.preventDefault())},function(e){me[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Kt extends He{constructor(e){super(),Ue(this,e,Bt,Ut,a,{})}}const Zt={routeDisplay:!0,routePin:0,routeColor:"FFDA25A8",alternateDisplay:!0,alternatePin:0,alternateColor:"FFFF00FF",natDisplay:!0,natPin:8,natColor:"80DA25A8",greatCircleDisplay:!0,greatCircleColor:"5F1478FF"};function Vt(e,t){e.addFolders({name:"greatcircle",enabled:t.greatCircleDisplay,color:t.greatCircleColor},{name:"ralt",enabled:t.alternateDisplay,color:t.alternateColor,pinId:t.alternatePin},{name:"rmain",color:t.routeColor,pinId:t.routePin},{name:"rnat",enabled:t.natDisplay,color:t.natColor,pinId:t.natPin},{name:"rnat_incomplete",enabled:t.natDisplay,color:t.natIncompleteColor,pinId:t.natPin})}const Jt=()=>(window.kmlGen||(window.kmlGen=new editolido.KMLGenerator,Vt(window.kmlGen,Zt)),window.kmlGen);function Yt(e,t){if(e.startsWith("etops-")||e.startsWith("airport-")||e.startsWith("fir-")||e.endsWith("-change")||"nat-incomplete-color"===e||"nat-pin-position"===e||e.startsWith("ogimet-"))return;const n=Jt(),o=Qe(e);e.endsWith("-display")?n.changeFolderState(o,t):e.endsWith("-pin")?n.changeFolderPin(o,t):e.endsWith("-color")&&n.changeFolderColor(o,t.toUpperCase())}function Qt(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function Xt(e){let t,n,o,r,i=e[14].label+"";return{c(){t=F("option"),n=j(i),t.__value=o=e[16],t.value=t.__value,t.selected=r=e[16]===e[1]},m(e,o){O(e,t,o),S(t,n)},p(e,n){2&n&&r!==(r=e[16]===e[1])&&(t.selected=r)},d(e){e&&A(t)}}}function en(t){let n,o,r,a,l,c,u,d,p,m,f,g,h,v,$,y,b,w,C=ln,k=[];for(let e=0;e<C.length;e+=1)k[e]=Xt(Qt(t,C,e));return{c(){n=F("kmlcolor"),o=F("pin"),r=D("svg"),a=D("use"),l=R(),c=F("select");for(let e=0;e<k.length;e+=1)k[e].c();u=R(),d=F("picker"),p=F("label"),m=F("input"),h=R(),v=F("input"),U(a,"xlink:href","#marker-symbol"),Z(a,"stroke",0===t[1]?"#fff":ln[t[1]].color),Z(a,"fill",ln[t[1]].color),G(o,"class","form-control svelte-5nc947"),G(c,"name",t[4]),G(c,"class","form-select"),void 0===t[1]&&be((()=>t[8].call(c))),G(m,"type","color"),G(p,"style",f=an(t[2])),G(v,"type","range"),G(v,"min","30"),G(v,"max","255"),G(d,"class","form-control"),G(d,"style",$=sn(t[2][0])),G(n,"class","input-group")},m(e,i){O(e,n,i),S(n,o),S(o,r),S(r,a),S(n,l),S(n,c);for(let e=0;e<k.length;e+=1)k[e].m(c,null);V(c,t[1]),S(n,u),S(n,d),S(d,p),S(p,m),K(m,t[2][0]),S(d,h),S(d,v),K(v,t[2][1]),b||(w=[z(c,"change",t[8]),z(c,"change",t[9]),z(m,"input",t[10]),x(g=t[5].call(null,p,t[2])),z(v,"change",t[11]),z(v,"input",t[11]),x(y=t[6].call(null,n,t[0]))],b=!0)},p(e,[t]){if(2&t&&Z(a,"stroke",0===e[1]?"#fff":ln[e[1]].color),2&t&&Z(a,"fill",ln[e[1]].color),2&t){let n;for(C=ln,n=0;n<C.length;n+=1){const o=Qt(e,C,n);k[n]?k[n].p(o,t):(k[n]=Xt(o),k[n].c(),k[n].m(c,null))}for(;n<k.length;n+=1)k[n].d(1);k.length=C.length}2&t&&V(c,e[1]),4&t&&K(m,e[2][0]),4&t&&f!==(f=an(e[2]))&&G(p,"style",f),g&&s(g.update)&&4&t&&g.update.call(null,e[2]),4&t&&K(v,e[2][1]),4&t&&$!==($=sn(e[2][0]))&&G(d,"style",$),y&&s(y.update)&&1&t&&y.update.call(null,e[0])},i:e,o:e,d(e){e&&A(n),I(k,e),b=!1,i(w)}}}const tn=/^[A-F0-9]{8}$/i,nn=e=>{let[t,n]=rn(e);return[t,n/255]},on=["#FF0000",255],rn=e=>{try{const t=parseInt(e.slice(0,2),16);return["#"+e.slice(6,8)+e.slice(4,6)+e.slice(2,4),t]}catch(e){return on}},sn=e=>{const[t,n,o]=[e.slice(1,3),e.slice(3,5),e.slice(5,7)].map((e=>parseInt(e,16)));return`--range-red: ${t}; --range-green: ${n}; --range-blue: ${o};`},an=e=>`background-color: ${e[0]}; opacity: ${e[1]/255}`,ln=[{label:"Aucun repère",color:"#FFFFFF"},{label:"Bleu",color:"#6699FF"},{label:"Jaune",color:"#FFFF00"},{label:"Marron* (Rouge pour Avenza/Earth)",color:"#CC9966"},{label:"Orange",color:"#FF9922"},{label:"Rose* (Rouge pour Avenza)",color:"#DD5599"},{label:"Rouge",color:"#FF0000"},{label:"Vert",color:"#22DD44"},{label:"Violet",color:"#BB11EE"}];function cn(e,t,n){const o=ue();let{kmlColor:r="FF0000FF"}=t,{selected:i=0}=t,{name:s}=t;const a=s+"-color",l=s+"-pin";let c=on;const u=Ye(o,500);return e.$$set=e=>{"kmlColor"in e&&n(0,r=e.kmlColor),"selected"in e&&n(1,i=e.selected),"name"in e&&n(7,s=e.name)},[r,i,c,o,l,function(e){return{update(e){const[t,o]=e;n(0,r=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),u("change",{name:a,value:r})}}},function(e){return n(2,c=rn(r)),{update(e){n(2,c=rn(e)),u("change",{name:a,value:e.toUpperCase()})}}},s,function(){i=J(this),n(1,i)},e=>{e.target.blur(),o("change",{name:l,value:i})},function(){c[0]=this.value,n(2,c)},function(){c[1]=H(this.value),n(2,c)}]}class un extends He{constructor(e){super(),Ue(this,e,cn,en,a,{kmlColor:0,selected:1,name:7})}}const dn={routeDisplay:!0,routeColor:"FFDA25A8",alternateDisplay:!0,alternateColor:"FFFF00FF",natDisplay:!0,natPinPosition:0,natColor:"80858585",natIncompleteColor:"FF0000FF",greatCircleDisplay:!0,greatCircleColor:"5F1478FF",ogimetDisplay:!0,ogimetColor:"40FF0000",airportDisplay:!0,airportPin:0,airportLabel:0,firDisplay:!0,etopsDisplay:!0,etopsColor:"FF0324FC",iconTextChange:"1.0",lineWidthChange:"1.0",iconSizeChange:"1.0"};const pn=Object.freeze({optionsKML:"optionsKML",shortcut:"shortcut",downloadType:"downloadType",exportKML:"exportKML",focusKML:"focusKML",changelogOnUpdate:"changelogOnUpdate"}),mn=new class{constructor(){}getItem(e){const t=localStorage.getItem(e);if(null!==t)try{return JSON.parse(t)}catch(t){this.removeItem(e)}return null}setItem(e,t){const n=JSON.stringify(t);"{}"!==n&&localStorage.setItem(e,n)}removeItem(e){localStorage.removeItem(e)}hasItem(e){return null!==localStorage.getItem(e)}},fn=(e,t=dn)=>{const n={};for(let[o,r]of Object.entries(e))o in t&&(o.endsWith("Pin")?(r*=1,isNaN(r)||(n[o]=r)):o.endsWith("Color")&&r.match(tn)?n[o]=r.toUpperCase():o.endsWith("Display")?n[o]=!!r:o.endsWith("Change")&&(r*=1,isNaN(r)||(n[o]=r.toFixed(1))));return{...t,...n}},gn=(e,t,n="Mon OFP2MAP")=>{const o={},r=["optionsKML","shortcut","downloadType"];for(const[t,n]of Object.entries(pn)){if(!r.includes(n))continue;let i=mn.getItem(n);if(t===pn.optionsKML&&e){const t={};for(const n of Object.keys(e).filter((t=>e[t]!==dn[t])))t[n]=e[n];i=t}if(null!==i)if(t===pn.optionsKML)for(const[e,t]of Object.entries(i))o[e]=t;else o[t]=i}const i=Object.entries(o).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),s=window.location.origin+window.location.pathname+(i?"?"+i:"")+"#"+t;window.history.replaceState(o,n,s)};function hn(t){let n,o,r,s,a,l,c,u,d,p;return{c(){n=F("div"),o=F("span"),r=R(),s=F("input"),a=R(),l=F("div"),c=F("a"),u=j("Lancer"),G(o,"class","input-group-text svelte-1yaj23v"),G(s,"class","form-control svelte-1yaj23v"),G(s,"placeholder","Nom du raccourci"),G(s,"type","text"),G(c,"href",t[1]),G(c,"class","svelte-1yaj23v"),X(c,"disabled",t[2]),G(l,"class","input-group-text svelte-1yaj23v"),X(l,"disabled",t[2]),G(n,"class","input-group")},m(e,i){O(e,n,i),S(n,o),S(n,r),S(n,s),K(s,t[0]),S(n,a),S(n,l),S(l,c),S(c,u),d||(p=[z(s,"input",t[5]),z(s,"change",t[4]),z(c,"click",t[3])],d=!0)},p(e,[t]){1&t&&s.value!==e[0]&&K(s,e[0]),2&t&&G(c,"href",e[1]),4&t&&X(c,"disabled",e[2]),4&t&&X(l,"disabled",e[2])},i:e,o:e,d(e){e&&A(n),d=!1,i(p)}}}const vn="OFP2MAP";function $n(e,t,n){let o,r;d(e,Pt,(e=>n(6,r=e)));const i=ue(),s=pn.shortcut;let a,l=mn.getItem(s)||vn;const c=r?r.lidoRoute(!1).join(" "):"";return e.$$.update=()=>{1&e.$$.dirty&&n(2,o=!(l.trim()&&Ke))},[l,a,o,function(e){const t=l.trim();if(t&&Ke){const e=Jt(),o={lidoRoute:c,kml:e.render(),kmlAvenza:e.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS}),kmlGoogleEarth:e.render({styleTemplate:editolido.googleEarthStyleTemplate}),grametProxyURL:r.ogimetData.proxyImg};n(1,a="shortcuts://run-shortcut?name="+encodeURIComponent(t)+"&input=text&text="+encodeURIComponent(JSON.stringify(o)))}else e.preventDefault()},function(){const e=l.trim();e===vn?mn.removeItem(s):mn.setItem(s,e),i("save",[s,e])},function(){l=this.value,n(0,l)}]}class yn extends He{constructor(e){super(),Ue(this,e,$n,hn,a,{})}}function bn(e){const t=()=>{document&&document.visibilityState&&"visible"!==document.visibilityState&&e&&e.blur&&e.blur()};return document.addEventListener("visibilitychange",t,!1),{destroy(){document.removeEventListener("visibilitychange",t)}}}function xn(t){let n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,w=wn[0]+"",C=wn[1]+"",k=wn[2]+"";return{c(){n=F("div"),o=F("select"),r=F("option"),s=j(w),l=F("option"),c=j(C),d=F("option"),p=j(k),g=R(),h=F("div"),v=F("a"),$=j(t[0]),r.selected=a=0===t[1],r.__value=0,r.value=r.__value,l.selected=u=1===t[1],l.__value=1,l.value=l.__value,d.selected=m=2===t[1],d.__value=2,d.value=d.__value,G(o,"class",f="form-select choice"+t[1]+" svelte-c2m79k"),G(o,"aria-label","Example select with button addon"),void 0===t[1]&&be((()=>t[7].call(o))),G(v,"class"," svelte-c2m79k"),G(v,"download",t[3]),G(v,"href",t[2]),G(h,"class","input-group-text svelte-c2m79k"),G(n,"class","input-group svelte-c2m79k")},m(e,i){O(e,n,i),S(n,o),S(o,r),S(r,s),S(o,l),S(l,c),S(o,d),S(d,p),V(o,t[1]),S(n,g),S(n,h),S(h,v),S(v,$),t[8](n),y||(b=[z(o,"change",t[7]),z(o,"change",t[6]),x(bn.call(null,o)),z(v,"click",t[5])],y=!0)},p(e,[t]){2&t&&a!==(a=0===e[1])&&(r.selected=a),2&t&&u!==(u=1===e[1])&&(l.selected=u),2&t&&m!==(m=2===e[1])&&(d.selected=m),2&t&&f!==(f="form-select choice"+e[1]+" svelte-c2m79k")&&G(o,"class",f),2&t&&V(o,e[1]),1&t&&B($,e[0]),8&t&&G(v,"download",e[3]),4&t&&G(v,"href",e[2])},i:e,o:e,d(e){e&&A(n),t[8](null),y=!1,i(b)}}}const wn=["KML Mapsme","KML Avenza","KML Google Earth"],Cn=["bs-green","bs-purple","bs4-cyan"];function kn(e,t,n){const o=ue();let{label:r}=t;const i=pn.downloadType;let s=mn.getItem(i)||1;"string"==typeof s&&(s=parseInt(s,10)),(s<0||s>=wn.length)&&(s=0);let a,l="",c="";const u=e=>{a.style.setProperty("--color",`var(--${Cn[s]})`)},d=(e,t="application/vnd.google-earth.kml+xml")=>{const n=new Blob(e,{type:t});return URL.createObjectURL(n)};return le((()=>(u(),()=>{l&&l.startsWith("blob:")&&URL.revokeObjectURL(l)}))),e.$$set=e=>{"label"in e&&n(0,r=e.label)},[r,s,l,c,a,function(e){const t=Jt(),o=["_mapsme.kml","_avenza.kml","_googleearth.kml"][s];let r=t.name;if(r?(r=r.trim(),n(3,c=r.replace(/[ \/]/g,"_").replace(/:/g,"")+o)):n(3,c="editolido"+o),l&&l.startsWith("blob:")&&URL.revokeObjectURL(l),0===s)n(2,l=d([t.render()]));else if(1===s)n(2,l=d([t.render({template:editolido.avenzaTemplate,styleTemplate:editolido.avenzaStyleTemplate,iconTemplate:editolido.avenzaIconTemplate,icons:editolido.AVENZAICONS})]));else{if(2!==s)return e.preventDefault(),!1;n(2,l=d([t.render({styleTemplate:editolido.googleEarthStyleTemplate})]))}},function(e){e.target.blur(),1===s?mn.removeItem(i):mn.setItem(i,s),o("save",[i,s]),u()},function(){s=J(this),n(1,s)},function(e){me[e?"unshift":"push"]((()=>{a=e,n(4,a)}))}]}class Ln extends He{constructor(e){super(),Ue(this,e,kn,xn,a,{label:0})}}function Pn(e){let t,n,o,r,a,l,c,u,d,m,v,$,y,b,w,C;const k=e[8].default,L=p(k,e,e[7],null),P=L||function(e){let t;return{c(){t=j("Couleur")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}();return{c(){t=F("kmlcolor"),n=F("label"),o=F("input"),P&&P.c(),r=R(),a=F("picker"),l=F("label"),c=F("input"),m=R(),v=F("input"),G(o,"name",e[3]),o.checked=e[1],G(o,"type","checkbox"),G(n,"for",e[3]),G(n,"class","form-control"),G(c,"type","color"),G(l,"style",u=an(e[2])),G(v,"type","range"),G(v,"min","30"),G(v,"max","255"),G(a,"class","form-control"),G(a,"style",$=sn(e[2][0])),G(t,"class","input-group checkbox-combo")},m(i,s){O(i,t,s),S(t,n),S(n,o),P&&P.m(n,null),S(t,r),S(t,a),S(a,l),S(l,c),K(c,e[2][0]),S(a,m),S(a,v),K(v,e[2][1]),b=!0,w||(C=[z(o,"change",e[9]),z(c,"input",e[10]),x(d=e[4].call(null,l,e[2])),z(v,"change",e[11]),z(v,"input",e[11]),x(y=e[5].call(null,t,e[0]))],w=!0)},p(e,[t]){(!b||2&t)&&(o.checked=e[1]),L&&L.p&&(!b||128&t)&&g(L,k,e,e[7],b?f(k,e[7],t,null):h(e[7]),null),4&t&&K(c,e[2][0]),(!b||4&t&&u!==(u=an(e[2])))&&G(l,"style",u),d&&s(d.update)&&4&t&&d.update.call(null,e[2]),4&t&&K(v,e[2][1]),(!b||4&t&&$!==($=sn(e[2][0])))&&G(a,"style",$),y&&s(y.update)&&1&t&&y.update.call(null,e[0])},i(e){b||(Ie(P,e),b=!0)},o(e){Fe(P,e),b=!1},d(e){e&&A(t),P&&P.d(e),w=!1,i(C)}}}function Mn(e,t,n){let{$$slots:o={},$$scope:r}=t;const i=ue();let{kmlColor:s="FF0000FF"}=t,{checked:a}=t,{name:l}=t;const c=l+"-color",u=l+"-display";let d=on;const p=Ye(i,500);return e.$$set=e=>{"kmlColor"in e&&n(0,s=e.kmlColor),"checked"in e&&n(1,a=e.checked),"name"in e&&n(6,l=e.name),"$$scope"in e&&n(7,r=e.$$scope)},[s,a,d,u,function(e){return{update(e){const[t,o]=e;n(0,s=(o.toString(16)+t.slice(5,7)+t.slice(3,5)+t.slice(1,3)).toUpperCase()),p("change",{name:c,value:s})}}},function(e){return n(2,d=rn(s)),{update(e){n(2,d=rn(e)),p("change",{name:c,value:e.toUpperCase()})}}},l,r,o,function(t){de.call(this,e,t)},function(){d[0]=this.value,n(2,d)},function(){d[1]=H(this.value),n(2,d)}]}class Sn extends He{constructor(e){super(),Ue(this,e,Mn,Pn,a,{kmlColor:0,checked:1,name:6})}}function Tn(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function En(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function On(e){let t,n,o,r,i=e[7].label+"";return{c(){t=F("option"),n=j(i),t.__value=o=e[9],t.value=t.__value,t.selected=r=e[9]===e[0]},m(e,o){O(e,t,o),S(t,n)},p(e,n){1&n&&r!==(r=e[9]===e[0])&&(t.selected=r)},d(e){e&&A(t)}}}function An(e){let t,n,o,r,i=e[7].label+"";return{c(){t=F("option"),n=j(i),t.__value=o=e[9],t.value=t.__value,t.selected=r=e[9]===e[1]},m(e,o){O(e,t,o),S(t,n)},p(e,n){2&n&&r!==(r=e[9]===e[1])&&(t.selected=r)},d(e){e&&A(t)}}}function In(t){let n,o,r,s,a,l,c,u,d,p,m,f,g,h,v=Fn,$=[];for(let e=0;e<v.length;e+=1)$[e]=On(En(t,v,e));let y=Dn,b=[];for(let e=0;e<y.length;e+=1)b[e]=An(Tn(t,y,e));return{c(){n=F("div"),o=F("div"),r=F("div"),s=F("select");for(let e=0;e<$.length;e+=1)$[e].c();a=R(),l=F("label"),l.textContent="Style",c=R(),u=F("div"),d=F("div"),p=F("select");for(let e=0;e<b.length;e+=1)b[e].c();m=R(),f=F("label"),f.textContent="Noms",G(s,"name","airport-pin"),G(s,"class","form-select"),void 0===t[0]&&be((()=>t[3].call(s))),G(l,"for","airport-pin"),G(l,"class","svelte-f39dqa"),G(r,"class","form-floating"),G(o,"class","col svelte-f39dqa"),G(p,"name","airport-label"),G(p,"class","form-select"),void 0===t[1]&&be((()=>t[5].call(p))),G(f,"for","airport-label"),G(f,"class","svelte-f39dqa"),G(d,"class","form-floating"),G(u,"class","col svelte-f39dqa"),G(n,"class","row g-2 svelte-f39dqa")},m(e,i){O(e,n,i),S(n,o),S(o,r),S(r,s);for(let e=0;e<$.length;e+=1)$[e].m(s,null);V(s,t[0]),S(r,a),S(r,l),S(n,c),S(n,u),S(u,d),S(d,p);for(let e=0;e<b.length;e+=1)b[e].m(p,null);V(p,t[1]),S(d,m),S(d,f),g||(h=[x(bn.call(null,s)),z(s,"change",t[3]),z(s,"change",t[4]),x(bn.call(null,p)),z(p,"change",t[5]),z(p,"change",t[6])],g=!0)},p(e,[t]){if(1&t){let n;for(v=Fn,n=0;n<v.length;n+=1){const o=En(e,v,n);$[n]?$[n].p(o,t):($[n]=On(o),$[n].c(),$[n].m(s,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=v.length}if(1&t&&V(s,e[0]),2&t){let n;for(y=Dn,n=0;n<y.length;n+=1){const o=Tn(e,y,n);b[n]?b[n].p(o,t):(b[n]=An(o),b[n].c(),b[n].m(p,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=y.length}2&t&&V(p,e[1])},i:e,o:e,d(e){e&&A(n),I($,e),I(b,e),g=!1,i(h)}}}const Fn=[{label:"statuts"},{label:"vert/rouge"},{label:"médical"}],Dn=[{label:"ICAO"},{label:"IATA"}],_n=e=>2===e;function jn(e,t,n){const o=ue();let{selectedPin:r=0}=t,{selectedLabel:i=0}=t;return e.$$set=e=>{"selectedPin"in e&&n(0,r=e.selectedPin),"selectedLabel"in e&&n(1,i=e.selectedLabel)},[r,i,o,function(){r=J(this),n(0,r)},e=>{e.target.blur(),o("change",{name:"airport-pin",value:r})},function(){i=J(this),n(1,i)},e=>{e.target.blur(),o("change",{name:"airport-label",value:i})}]}class Rn extends He{constructor(e){super(),Ue(this,e,jn,In,a,{selectedPin:0,selectedLabel:1})}}function Nn(t){let n,o,r,s,a,l,c,u,d,p,m,f;return{c(){n=F("div"),o=F("label"),r=j(t[2]),s=R(),a=F("button"),a.innerHTML="<small>➖</small>",l=R(),c=F("div"),u=j(t[0]),d=R(),p=F("button"),p.textContent="➕",G(o,"for",t[1]),G(o,"class","input-group-text svelte-p16o3m"),G(a,"class","form-control svelte-p16o3m"),G(a,"type","button"),G(c,"class","form-control svelte-p16o3m"),G(p,"class","form-control svelte-p16o3m"),G(p,"type","button"),G(n,"class","input-group input-group-sm mb-2")},m(e,i){O(e,n,i),S(n,o),S(o,r),S(n,s),S(n,a),S(n,l),S(n,c),S(c,u),S(n,d),S(n,p),m||(f=[z(a,"click",t[4]),z(p,"click",t[3])],m=!0)},p(e,[t]){4&t&&B(r,e[2]),2&t&&G(o,"for",e[1]),1&t&&B(u,e[0])},i:e,o:e,d(e){e&&A(n),m=!1,i(f)}}}function zn(e,t,n){const o=ue();let{name:r}=t,{label:i}=t,{value:s}=t,{min:a=.6}=t,{max:l=2}=t,{step:c=.1}=t,{decimals:u=1}=t;const d=Ye(o,100);return e.$$set=e=>{"name"in e&&n(1,r=e.name),"label"in e&&n(2,i=e.label),"value"in e&&n(0,s=e.value),"min"in e&&n(5,a=e.min),"max"in e&&n(6,l=e.max),"step"in e&&n(7,c=e.step),"decimals"in e&&n(8,u=e.decimals)},[s,r,i,()=>{const e=s;n(0,s=Math.min(Math.max(parseFloat(s)+c,a),l).toFixed(u)),s!==e&&d("change",{name:r,value:s})},()=>{const e=s;n(0,s=Math.min(Math.max(parseFloat(s)-c,a),l).toFixed(u)),s!==e&&d("change",{name:r,value:s})},a,l,c,u]}class Wn extends He{constructor(e){super(),Ue(this,e,zn,Nn,a,{name:1,label:2,value:0,min:5,max:6,step:7,decimals:8})}}function Gn(e){const t=t=>{!e||e.contains(t.target)||t.defaultPrevented||e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function qn(e){let t,n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,w=e[6]&&Un(e);u=new Wn({props:{name:"icon-text-change",label:"Labels",value:e[0].iconTextChange,min:.9,max:2}}),u.$on("change",e[7]);let C=e[6]&&Xn(e);function k(e,t){return e[4]?eo:to}m=new Wn({props:{name:"icon-size-change",label:"Icônes",value:e[0].iconSizeChange}}),m.$on("change",e[7]);let L=k(e),P=L(e);return{c(){t=F("div"),n=F("a"),o=R(),r=F("form"),w&&w.c(),s=R(),a=F("fieldset"),l=F("legend"),l.textContent="Aspect général",c=R(),We(u.$$.fragment),d=R(),C&&C.c(),p=R(),We(m.$$.fragment),f=R(),g=F("div"),P.c(),G(n,"class","btn-close float-end"),G(n,"role","button"),G(n,"href","."),G(a,"class","form-group svelte-o8c2ei"),G(g,"class","svelte-o8c2ei"),G(r,"class","svelte-o8c2ei"),X(r,"mt-5",!e[6]),G(t,"class","settings svelte-o8c2ei"),X(t,"sidebar",e[5]),X(t,"focusmode",e[4])},m(i,v){O(i,t,v),S(t,n),S(t,o),S(t,r),w&&w.m(r,null),S(r,s),S(r,a),S(a,l),S(a,c),Ge(u,a,null),S(a,d),C&&C.m(a,null),S(a,p),Ge(m,a,null),S(r,f),S(r,g),P.m(g,null),$=!0,y||(b=[z(n,"click",W(e[17])),z(r,"submit",W(e[16])),x(h=Gn.call(null,t)),z(t,"click_outside",e[18])],y=!0)},p(e,n){e[6]?w?(w.p(e,n),64&n&&Ie(w,1)):(w=Un(e),w.c(),Ie(w,1),w.m(r,s)):w&&(Oe(),Fe(w,1,1,(()=>{w=null})),Ae());const o={};1&n&&(o.value=e[0].iconTextChange),u.$set(o),e[6]?C?(C.p(e,n),64&n&&Ie(C,1)):(C=Xn(e),C.c(),Ie(C,1),C.m(a,p)):C&&(Oe(),Fe(C,1,1,(()=>{C=null})),Ae());const i={};1&n&&(i.value=e[0].iconSizeChange),m.$set(i),L===(L=k(e))&&P?P.p(e,n):(P.d(1),P=L(e),P&&(P.c(),P.m(g,null))),64&n&&X(r,"mt-5",!e[6]),32&n&&X(t,"sidebar",e[5]),16&n&&X(t,"focusmode",e[4])},i(e){$||(Ie(w),Ie(u.$$.fragment,e),Ie(C),Ie(m.$$.fragment,e),be((()=>{v||(v=je(t,ct,{duration:300,x:200,y:0},!0)),v.run(1)})),$=!0)},o(e){Fe(w),Fe(u.$$.fragment,e),Fe(C),Fe(m.$$.fragment,e),v||(v=je(t,ct,{duration:300,x:200,y:0},!1)),v.run(0),$=!1},d(e){e&&A(t),w&&w.d(),qe(u),C&&C.d(),qe(m),P.d(),e&&v&&v.end(),y=!1,i(b)}}}function Un(e){let t,n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,C,k,L,P,M,T,E,I,D,_,N,W,q,U,H,B;c=new Sn({props:{name:"route",kmlColor:e[0].routeColor,checked:e[0].routeDisplay,$$slots:{default:[Bn]},$$scope:{ctx:e}}}),c.$on("change",e[7]);let K=e[4]&&Kn();return m=new Sn({props:{name:"alternate",kmlColor:e[0].alternateColor,checked:e[0].alternateDisplay,$$slots:{default:[Zn]},$$scope:{ctx:e}}}),m.$on("change",e[7]),h=new Sn({props:{name:"nat",kmlColor:e[0].natColor,checked:e[0].natDisplay,$$slots:{default:[Vn]},$$scope:{ctx:e}}}),h.$on("change",e[7]),x=new Sn({props:{name:"great-circle",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay,$$slots:{default:[Jn]},$$scope:{ctx:e}}}),x.$on("change",e[7]),k=new Sn({props:{name:"ogimet",kmlColor:e[0].ogimetColor,checked:e[0].ogimetDisplay,$$slots:{default:[Yn]},$$scope:{ctx:e}}}),k.$on("change",e[7]),M=new Sn({props:{name:"etops",kmlColor:e[0].etopsColor,checked:e[0].etopsDisplay,$$slots:{default:[Qn]},$$scope:{ctx:e}}}),M.$on("change",e[7]),q=new Rn({props:{selectedPin:e[0].airportPin,selectedLabel:e[0].airportLabel}}),q.$on("change",e[7]),{c(){t=F("fieldset"),n=F("legend"),o=F("input"),s=j("FIR REG"),a=R(),l=F("fieldset"),We(c.$$.fragment),u=R(),K&&K.c(),d=R(),p=F("fieldset"),We(m.$$.fragment),f=R(),g=F("fieldset"),We(h.$$.fragment),v=R(),$=F("small"),$.textContent="Un track incomplet sera rouge",y=R(),b=F("fieldset"),We(x.$$.fragment),w=R(),C=F("fieldset"),We(k.$$.fragment),L=R(),P=F("fieldset"),We(M.$$.fragment),T=R(),E=F("fieldset"),I=F("legend"),D=F("input"),N=j("Aéroports"),W=R(),We(q.$$.fragment),G(o,"name","fir-display"),o.checked=r=e[0].firDisplay,G(o,"type","checkbox"),G(n,"class","d-flex align-items-center"),G(t,"class","form-group mb-4 svelte-o8c2ei"),G(l,"class","form-group svelte-o8c2ei"),G(p,"class","form-group svelte-o8c2ei"),G($,"class","form-text text-muted svelte-o8c2ei"),G(g,"class","form-group svelte-o8c2ei"),G(b,"class","form-group svelte-o8c2ei"),G(C,"class","form-group svelte-o8c2ei"),G(P,"class","form-group svelte-o8c2ei"),G(D,"name","airport-display"),D.checked=_=e[0].airportDisplay,G(D,"type","checkbox"),G(I,"class","d-flex align-items-center"),G(E,"class","form-group svelte-o8c2ei")},m(r,i){O(r,t,i),S(t,n),S(n,o),S(n,s),O(r,a,i),O(r,l,i),Ge(c,l,null),S(l,u),K&&K.m(l,null),O(r,d,i),O(r,p,i),Ge(m,p,null),O(r,f,i),O(r,g,i),Ge(h,g,null),S(g,v),S(g,$),O(r,y,i),O(r,b,i),Ge(x,b,null),O(r,w,i),O(r,C,i),Ge(k,C,null),O(r,L,i),O(r,P,i),Ge(M,P,null),O(r,T,i),O(r,E,i),S(E,I),S(I,D),S(I,N),S(E,W),Ge(q,E,null),U=!0,H||(B=[z(o,"change",e[7]),z(D,"change",e[7])],H=!0)},p(e,t){(!U||1&t&&r!==(r=e[0].firDisplay))&&(o.checked=r);const n={};1&t&&(n.kmlColor=e[0].routeColor),1&t&&(n.checked=e[0].routeDisplay),33554448&t&&(n.$$scope={dirty:t,ctx:e}),c.$set(n),e[4]?K||(K=Kn(),K.c(),K.m(l,null)):K&&(K.d(1),K=null);const i={};1&t&&(i.kmlColor=e[0].alternateColor),1&t&&(i.checked=e[0].alternateDisplay),33554432&t&&(i.$$scope={dirty:t,ctx:e}),m.$set(i);const s={};1&t&&(s.kmlColor=e[0].natColor),1&t&&(s.checked=e[0].natDisplay),33554432&t&&(s.$$scope={dirty:t,ctx:e}),h.$set(s);const a={};1&t&&(a.kmlColor=e[0].greatCircleColor),1&t&&(a.checked=e[0].greatCircleDisplay),33554432&t&&(a.$$scope={dirty:t,ctx:e}),x.$set(a);const u={};1&t&&(u.kmlColor=e[0].ogimetColor),1&t&&(u.checked=e[0].ogimetDisplay),33554432&t&&(u.$$scope={dirty:t,ctx:e}),k.$set(u);const d={};1&t&&(d.kmlColor=e[0].etopsColor),1&t&&(d.checked=e[0].etopsDisplay),33554432&t&&(d.$$scope={dirty:t,ctx:e}),M.$set(d),(!U||1&t&&_!==(_=e[0].airportDisplay))&&(D.checked=_);const p={};1&t&&(p.selectedPin=e[0].airportPin),1&t&&(p.selectedLabel=e[0].airportLabel),q.$set(p)},i(e){U||(Ie(c.$$.fragment,e),Ie(m.$$.fragment,e),Ie(h.$$.fragment,e),Ie(x.$$.fragment,e),Ie(k.$$.fragment,e),Ie(M.$$.fragment,e),Ie(q.$$.fragment,e),U=!0)},o(e){Fe(c.$$.fragment,e),Fe(m.$$.fragment,e),Fe(h.$$.fragment,e),Fe(x.$$.fragment,e),Fe(k.$$.fragment,e),Fe(M.$$.fragment,e),Fe(q.$$.fragment,e),U=!1},d(e){e&&A(t),e&&A(a),e&&A(l),qe(c),K&&K.d(),e&&A(d),e&&A(p),qe(m),e&&A(f),e&&A(g),qe(h),e&&A(y),e&&A(b),qe(x),e&&A(w),e&&A(C),qe(k),e&&A(L),e&&A(P),qe(M),e&&A(T),e&&A(E),qe(q),H=!1,i(B)}}}function Hn(e){let t,n;return{c(){t=D("svg"),n=D("use"),U(n,"xlink:href","#checkmark-symbol"),G(t,"class","svelte-o8c2ei")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&A(t)}}}function Bn(e){let t,n,o,r,i,s=e[4]&&Hn();return{c(){t=j("Route\n                "),n=F("button"),s&&s.c(),o=j("FOCUS"),G(n,"class","getfocus btn btn-sm btn-outline-info svelte-o8c2ei"),X(n,"active",e[4])},m(a,l){O(a,t,l),O(a,n,l),s&&s.m(n,null),S(n,o),r||(i=z(n,"click",W(e[11])),r=!0)},p(e,t){e[4]?s||(s=Hn(),s.c(),s.m(n,o)):s&&(s.d(1),s=null),16&t&&X(n,"active",e[4])},d(e){e&&A(t),e&&A(n),s&&s.d(),r=!1,i()}}}function Kn(e){let t;return{c(){t=F("small"),t.textContent="Cliquez sur FOCUS pour sortir du mode",G(t,"class","text-center mt-0 svelte-o8c2ei")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Zn(e){let t;return{c(){t=j("Dégagement")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Vn(e){let t;return{c(){t=j("Tracks")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Jn(e){let t;return{c(){t=j("Orthodromie")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Yn(e){let t;return{c(){t=j("Route GRAMET")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Qn(e){let t;return{c(){t=j("ETOPS")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Xn(e){let t,n;return t=new Wn({props:{name:"line-width-change",label:"Lignes",value:e[0].lineWidthChange,max:3}}),t.$on("change",e[7]),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.value=e[0].lineWidthChange),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function eo(e){let t,n,o,r;return{c(){t=F("button"),n=j("RESET Réglages mode FOCUS"),t.disabled=e[2],G(t,"class","resetfocus btn btn-danger btn-sm svelte-o8c2ei"),G(t,"type","button")},m(i,s){O(i,t,s),S(t,n),o||(r=z(t,"click",e[12]),o=!0)},p(e,n){4&n&&(t.disabled=e[2])},d(e){e&&A(t),o=!1,r()}}}function to(e){let t,n,o,r,s,a,l,c,u,d,p,m=!e[1]&&no(e);return{c(){t=F("button"),n=j("Mémoriser"),r=R(),s=F("button"),a=j("Restaurer"),c=R(),m&&m.c(),u=N(),t.disabled=o=!e[3],G(t,"class","btn btn-primary btn-sm svelte-o8c2ei"),G(t,"type","button"),s.disabled=l=!e[3],G(s,"class","btn btn-secondary btn-sm svelte-o8c2ei"),G(s,"type","button")},m(o,i){O(o,t,i),S(t,n),O(o,r,i),O(o,s,i),S(s,a),O(o,c,i),m&&m.m(o,i),O(o,u,i),d||(p=[z(t,"click",e[10]),z(s,"click",e[9])],d=!0)},p(e,n){8&n&&o!==(o=!e[3])&&(t.disabled=o),8&n&&l!==(l=!e[3])&&(s.disabled=l),e[1]?m&&(m.d(1),m=null):m?m.p(e,n):(m=no(e),m.c(),m.m(u.parentNode,u))},d(e){e&&A(t),e&&A(r),e&&A(s),e&&A(c),m&&m.d(e),e&&A(u),d=!1,i(p)}}}function no(t){let n,o,r;return{c(){n=F("button"),n.textContent="Reset",G(n,"class","btn btn-outline-dark btn-sm ms-auto svelte-o8c2ei"),G(n,"type","button")},m(e,i){O(e,n,i),o||(r=z(n,"click",t[8]),o=!0)},p:e,d(e){e&&A(n),o=!1,r()}}}function oo(e){let t,n,o=e[5]&&qn(e);return{c(){o&&o.c(),t=N()},m(e,r){o&&o.m(e,r),O(e,t,r),n=!0},p(e,[n]){e[5]?o?(o.p(e,n),32&n&&Ie(o,1)):(o=qn(e),o.c(),Ie(o,1),o.m(t.parentNode,t)):o&&(Oe(),Fe(o,1,1,(()=>{o=null})),Ae())},i(e){n||(Ie(o),n=!0)},o(e){Fe(o),n=!1},d(e){o&&o.d(e),e&&A(t)}}}function ro(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}function io(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function so(e,t){return JSON.stringify(e)===JSON.stringify(t)}function ao(e,t,n){let o,r,i,s,a,l;d(e,wt,(e=>n(4,s=e))),d(e,xt,(e=>n(5,a=e))),d(e,Pt,(e=>n(6,l=e)));const c=ue(),u=pn.optionsKML;let p,m,{kmlOptions:f}=t;const g=pn.focusKML;let h=fn({...mn.getItem(u)||{}});const v=e=>Object.keys(e).reduce(((t,n)=>(t[n]=("routeDisplay"===n||!n.endsWith("Display"))&&e[n],t)),{});function $(e){let t=!1;for(const[o,r]of Object.entries(e))f[o]!==r&&(n(0,f[o]=r,f),c("change",{name:io(o),value:r}),t=!0);t&&n(0,f={...e})}function y(){s&&(mn.setItem(g,f),m&&$(m),p=void 0,b(wt,s=!1,s))}return e.$$set=e=>{"kmlOptions"in e&&n(0,f=e.kmlOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=so(f,dn)),32769&e.$$.dirty&&n(3,r=!so(h,f)),16385&e.$$.dirty&&n(2,i=!!m&&so(v(m),f))},[f,o,i,r,s,a,l,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=ro(t);f[r]!==o&&(n(0,f[r]=o,f),c("change",{name:t,value:o}))},function(){$(dn)},function(){$(h)},function(){if(o)mn.removeItem(u);else{const e={};for(const t of Object.keys(f).filter((e=>f[e]!==dn[e])))e[t]=f[t];mn.setItem(u,e)}c("save"),n(15,h={...f})},function(e){e.target.blur(),s?y():(n(14,m={...f}),p=fn({...mn.getItem(g)||v(f)}),b(wt,s=!0,s),$(p)),b(xt,a=!1,a)},function(){mn.removeItem(g),m&&(p=v(m),$(p))},y,m,h,function(t){de.call(this,e,t)},()=>{b(xt,a=!a,a)},()=>b(xt,a=!1,a)]}class lo extends He{constructor(e){super(),Ue(this,e,ao,oo,a,{kmlOptions:0,endFocusMode:13})}get endFocusMode(){return this.$$.ctx[13]}}function co(e){let t;return{c(){t=j("Orthodromie")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function uo(e){let t,n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,C,k,L,P,M,T,E,I,D,_,N,W,q,U,H,B,K,Z,V,J,Y,Q,X;return s=new un({props:{name:"route",kmlColor:e[0].routeColor,selected:e[0].routePin}}),s.$on("change",e[4]),f=new un({props:{name:"alternate",kmlColor:e[0].alternateColor,selected:e[0].alternatePin}}),f.$on("change",e[4]),w=new un({props:{name:"nat",kmlColor:e[0].natColor,selected:e[0].natPin}}),w.$on("change",e[4]),M=new Sn({props:{name:"great-circle",kmlColor:e[0].greatCircleColor,checked:e[0].greatCircleDisplay,$$slots:{default:[co]},$$scope:{ctx:e}}}),M.$on("change",e[4]),{c(){t=F("div"),n=F("fieldset"),o=F("legend"),o.textContent="Route",r=R(),We(s.$$.fragment),a=R(),l=F("fieldset"),c=F("legend"),u=F("input"),p=j("Dégagement"),m=R(),We(f.$$.fragment),g=R(),h=F("fieldset"),v=F("legend"),$=F("input"),b=j("Tracks"),x=R(),We(w.$$.fragment),C=R(),k=F("small"),k.textContent="Positionné à l'entrée des tracks, un track incomplet restera rouge.",L=R(),P=F("fieldset"),We(M.$$.fragment),T=R(),E=F("div"),I=F("button"),D=j("Mémoriser"),N=R(),W=F("button"),q=j("Restaurer"),H=R(),B=F("button"),K=j("Comme Carte"),Z=R(),V=F("button"),J=j("Reset"),G(n,"class","form-group svelte-1ib2evr"),G(u,"name","alternate-display"),u.checked=d=e[0].alternateDisplay,G(u,"type","checkbox"),G(l,"class","form-group svelte-1ib2evr"),G($,"name","nat-display"),$.checked=y=e[0].natDisplay,G($,"type","checkbox"),G(k,"class","form-text text-muted"),G(h,"class","form-group svelte-1ib2evr"),G(P,"class","form-group svelte-1ib2evr"),I.disabled=_=!e[3],G(I,"class","btn btn-primary btn-sm svelte-1ib2evr"),G(I,"type","button"),W.disabled=U=!e[3],G(W,"class","btn btn-secondary btn-sm ms-3 svelte-1ib2evr"),G(W,"type","button"),B.disabled=e[2],G(B,"class","btn btn-outline-secondary btn-sm ms-auto svelte-1ib2evr"),G(B,"type","button"),V.disabled=e[1],G(V,"class","btn btn-outline-secondary btn-sm ms-auto svelte-1ib2evr"),G(V,"type","button"),G(E,"class","mt-4 mb-2 d-flex svelte-1ib2evr")},m(i,d){O(i,t,d),S(t,n),S(n,o),S(n,r),Ge(s,n,null),S(t,a),S(t,l),S(l,c),S(c,u),S(c,p),S(l,m),Ge(f,l,null),S(t,g),S(t,h),S(h,v),S(v,$),S(v,b),S(h,x),Ge(w,h,null),S(h,C),S(h,k),S(t,L),S(t,P),Ge(M,P,null),S(t,T),S(t,E),S(E,I),S(I,D),S(E,N),S(E,W),S(W,q),S(E,H),S(E,B),S(B,K),S(E,Z),S(E,V),S(V,J),Y=!0,Q||(X=[z(u,"change",e[4]),z($,"change",e[4]),z(I,"click",e[8]),z(W,"click",e[5]),z(B,"click",e[7]),z(V,"click",e[6])],Q=!0)},p(e,[t]){const n={};1&t&&(n.kmlColor=e[0].routeColor),1&t&&(n.selected=e[0].routePin),s.$set(n),(!Y||1&t&&d!==(d=e[0].alternateDisplay))&&(u.checked=d);const o={};1&t&&(o.kmlColor=e[0].alternateColor),1&t&&(o.selected=e[0].alternatePin),f.$set(o),(!Y||1&t&&y!==(y=e[0].natDisplay))&&($.checked=y);const r={};1&t&&(r.kmlColor=e[0].natColor),1&t&&(r.selected=e[0].natPin),w.$set(r);const i={};1&t&&(i.kmlColor=e[0].greatCircleColor),1&t&&(i.checked=e[0].greatCircleDisplay),32768&t&&(i.$$scope={dirty:t,ctx:e}),M.$set(i),(!Y||8&t&&_!==(_=!e[3]))&&(I.disabled=_),(!Y||8&t&&U!==(U=!e[3]))&&(W.disabled=U),(!Y||4&t)&&(B.disabled=e[2]),(!Y||2&t)&&(V.disabled=e[1])},i(e){Y||(Ie(s.$$.fragment,e),Ie(f.$$.fragment,e),Ie(w.$$.fragment,e),Ie(M.$$.fragment,e),Y=!0)},o(e){Fe(s.$$.fragment,e),Fe(f.$$.fragment,e),Fe(w.$$.fragment,e),Fe(M.$$.fragment,e),Y=!1},d(e){e&&A(t),qe(s),qe(f),qe(w),qe(M),Q=!1,i(X)}}}function po(e,t){return JSON.stringify(e)===JSON.stringify(t)}function mo(e,t,n){let o,r,i;const s=pn.exportKML;let a=fn({...mn.getItem(s)||{}},Zt),l={...Zt,...a};const c=["routeDisplay","routeColor","alternateDisplay","alternateColor","natDisplay","natColor","greatCircleDisplay","greatCircleColor"];let{mapOptions:u}=t;const d=Object.keys(u).filter((e=>c.includes(e))).reduce(((e,t)=>(e[t]="routeDisplay"===t||u[t],e)),{});function p(e){let t=!1;for(const[o,r]of Object.entries(e))if(l[o]!==r){n(0,l[o]=r,l);Yt(io(o),r),t=!0}t&&n(0,l={...l})}for(const[e,t]of Object.entries(l))if(Zt[e]!==t){Yt(io(e),t)}return e.$$set=e=>{"mapOptions"in e&&n(9,u=e.mapOptions)},e.$$.update=()=>{1&e.$$.dirty&&n(1,o=po(Zt,l)),1025&e.$$.dirty&&n(3,r=!po(a,l)),1&e.$$.dirty&&n(2,i=po({...l,...d},l))},[l,o,i,r,function(e){const t=e.detail?e.detail.name:e.target.name,o=e.detail?e.detail.value:e.target.checked,r=ro(t);l[r]!==o&&(n(0,l[r]=o,l),Yt(t,o))},()=>p(a),()=>p(Zt),()=>p({...l,...d}),function(){if(o)mn.removeItem(s);else{const e={};for(const t of Object.keys(l).filter((e=>l[e]!==Zt[e])))e[t]=l[t];mn.setItem(s,e)}n(10,a={...l})},u,a]}class fo extends He{constructor(e){super(),Ue(this,e,mo,uo,a,{mapOptions:9})}}function go(e){let t,n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,C,k,L,P,M,T,E,I,D,_;return u=new fo({props:{mapOptions:e[0]}}),w=new Ln({props:{label:"Télécharger"}}),w.$on("save",e[3]),E=new yn({}),E.$on("save",e[4]),{c(){t=F("div"),n=F("div"),o=F("div"),r=F("div"),s=F("form"),a=F("fieldset"),l=F("legend"),l.textContent="Réglages pour l'export",c=R(),We(u.$$.fragment),d=R(),p=F("div"),m=F("form"),f=F("fieldset"),g=F("legend"),g.textContent="Export",h=R(),v=F("fieldset"),$=F("legend"),$.textContent="KML",y=R(),b=F("p"),b.textContent="Choisissez un format (MapsMe, Avenza Maps ou Google Earth) et téléchargez le fichier KML.",x=R(),We(w.$$.fragment),C=R(),k=F("fieldset"),L=F("legend"),L.textContent="Raccourcis",P=R(),M=F("p"),M.innerHTML='Sur iOS on peut lancer un raccourci.\n                            <a href="https://www.icloud.com/shortcuts/886cc07d24d74d83bb0859643242c2df" target="_blank">Exemple de raccourci à installer\n                            </a>. Le raccourci reçoit le KML, la route Lido et le GRAMET.',T=R(),We(E.$$.fragment),G(l,"class","svelte-166dwdr"),G(a,"class","form svelte-166dwdr"),G(s,"class","settings svelte-166dwdr"),G(r,"class","col-12 col-md-6 d-flex pt-2 pt-md-0 svelte-166dwdr"),G(g,"class","svelte-166dwdr"),G(v,"class","form-group"),G(k,"class","form-group mt-4"),G(f,"class","form svelte-166dwdr"),G(m,"class","settings svelte-166dwdr"),G(p,"class","col-12 col-md-6 d-flex export svelte-166dwdr"),G(o,"class","row"),G(n,"class","card-body"),G(t,"class","card mb-3 svelte-166dwdr")},m(i,A){O(i,t,A),S(t,n),S(n,o),S(o,r),S(r,s),S(s,a),S(a,l),S(a,c),Ge(u,a,null),S(o,d),S(o,p),S(p,m),S(m,f),S(f,g),S(f,h),S(f,v),S(v,$),S(v,y),S(v,b),S(v,x),Ge(w,v,null),S(f,C),S(f,k),S(k,L),S(k,P),S(k,M),S(k,T),Ge(E,k,null),I=!0,D||(_=[z(s,"submit",W(e[2])),z(m,"submit",W(e[1]))],D=!0)},p(e,[t]){const n={};1&t&&(n.mapOptions=e[0]),u.$set(n)},i(e){I||(Ie(u.$$.fragment,e),Ie(w.$$.fragment,e),Ie(E.$$.fragment,e),I=!0)},o(e){Fe(u.$$.fragment,e),Fe(w.$$.fragment,e),Fe(E.$$.fragment,e),I=!1},d(e){e&&A(t),qe(u),qe(w),qe(E),D=!1,i(_)}}}function ho(e,t,n){let{kmlOptions:o}=t;return e.$$set=e=>{"kmlOptions"in e&&n(0,o=e.kmlOptions)},[o,function(t){de.call(this,e,t)},function(t){de.call(this,e,t)},function(t){de.call(this,e,t)},function(t){de.call(this,e,t)}]}class vo extends He{constructor(e){super(),Ue(this,e,ho,go,a,{kmlOptions:0})}}function $o(t){let n;return{c(){n=j(" ")},m(e,t){O(e,n,t)},p:e,d(e){e&&A(n)}}}function yo(t){let n,o,r;return{c(){n=F("button"),n.textContent="Partager l'App",G(n,"class","btn btn-link")},m(e,t){O(e,n,t),o||(r=z(n,"click",it),o=!0)},p:e,d(e){e&&A(n),o=!1,r()}}}function bo(t){let n,o,r,i,s,a;let c=(!0===navigator.standalone&&navigator.share?yo:$o)(t);return{c(){var e,t;n=F("h1"),o=F("strong"),o.textContent="OFP2MAP ",r=j("Cartographie pour l'OFP \n    "),i=F("img"),a=R(),c.c(),G(o,"class","d-none"),e=i.src,t=s="svg/Air_France_Logo.svg",l||(l=document.createElement("a")),l.href=t,e!==l.href&&G(i,"src","svg/Air_France_Logo.svg"),G(i,"alt","logo Air France"),G(i,"class","svelte-drdjg7"),G(n,"class","svelte-drdjg7")},m(e,t){O(e,n,t),S(n,o),S(n,r),S(n,i),S(n,a),c.m(n,null)},p(e,[t]){c.p(e,t)},i:e,o:e,d(e){e&&A(n),c.d()}}}class xo extends He{constructor(e){super(),Ue(this,e,null,bo,a,{})}}function wo(t){let n,o,r,i;return n=new xo({}),{c(){We(n.$$.fragment),o=R(),r=F("div"),r.innerHTML='<div class=" col-12 col-sm-6 col-md-6 col-xl-3 svelte-11n9blw"><div class="card avenza svelte-11n9blw"><div class="card-header svelte-11n9blw">COMPATIBLE OFFLINE</div> \n    <div class="card-body"><p class="card-text">L&#39;OFP ne quitte pas votre iPad ou votre ordinateur. Fonctionne avec les dernières technologies: PWA, Service Worker, fully responsive, cartes WebGL...</p></div></div></div> \n  <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-11n9blw"><div class="card mapsme svelte-11n9blw"><div class="card-header svelte-11n9blw">Multiples Projections</div> \n    <div class="card-body"><p class="card-text">Des cartes LAMBERT conformes, un ATLAS politique, un ATLAS physique, une carte VFR et une MERCATOR avec 12 niveaux de zoom. Export en format KML vers Mapsme, Avenza ou Google Earth</p></div></div></div> \n  <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-11n9blw"><div class="card ogimet svelte-11n9blw"><div class="card-header svelte-11n9blw">Compatible avec Ogimet</div> \n    <div class="card-body"><p class="card-text">Calcule une route pour ogimet et affiche le GRAMET qui est un météogramme combinant l&#39;espace et le temps</p></div></div></div> \n  <div class="col-12 col-sm-6 col-md-6 col-xl-3 svelte-11n9blw"><div class="card shortcuts svelte-11n9blw"><div class="card-header svelte-11n9blw">Compatible Raccourcis</div> \n    <div class="card-body"><p class="card-text">Avec l&#39;app Raccourcis, automatisez en récupérant le KML, le Gramet, ou une route Lido optimisée</p></div></div></div>',G(r,"class","row svelte-11n9blw")},m(e,t){Ge(n,e,t),O(e,o,t),O(e,r,t),i=!0},p:e,i(e){i||(Ie(n.$$.fragment,e),i=!0)},o(e){Fe(n.$$.fragment,e),i=!1},d(e){qe(n,e),e&&A(o),e&&A(r)}}}class Co extends He{constructor(e){super(),Ue(this,e,null,wo,a,{})}}function ko(e,t={}){return{type:"Feature",geometry:{type:"Point",coordinates:[e[0],e[1]]},properties:t}}function Lo(e){return{type:"geojson",data:{type:"FeatureCollection",features:e}}}function Po(e,t={}){return{type:"Feature",geometry:{type:"LineString",coordinates:e},properties:t}}const Mo="#f8f9fa",So=e=>e>=10?e/2:0,To=e=>e/4,Eo=(e,t=1,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?1:o},Oo=(e,t=10,n=1)=>{const o=e*t*(e>1?n:1);return isNaN(o)?10:o},Ao=(e,t=2)=>{const n=e*t;return isNaN(n)?1:n},Io=e=>["case",["==",1,["get","overrideTextColor"]],Eo(e/1,.2*3),.2],Fo=(e,t)=>t?["case",["==",1,["get","overrideIconColor"]],t,e]:e,Do=(e,t)=>t?["case",["==",1,["get","overrideTextColor"]],t,e]:e,_o=(e,t,n=.8)=>t?["case",["==",1,["get","overrideTextColor"]],Math.max(t,n),Math.max(e,n)]:Math.max(e,n),jo=(e,t)=>{const[n]=nn(e),[o]=t?nn(t):[null,null];return Do(n,o)},Ro=(e,t,n=.8)=>{const[,o]=nn(e),[,r]=t?nn(t):[null,null];return _o(o,r,n)};function No(e,t,n,o,r){const i=function(e){switch(e){case"rmain":return"route";case"ralt":return"alternate";case"rnat":return"nat";default:return e}}(t),s=r[`${i}Display`],a=r[`${i}Color`],l=Oo(r.iconTextChange),c=Eo(r.iconSizeChange);e.addSource(`${t}-marker-source`,Lo(((e,t,n)=>{let o=[];const r=e.length;for(let i=0;i<r;i++){const r=t?t([e[i].longitude,e[i].latitude]):[e[i].longitude,e[i].latitude];r&&o.push(n?n(r,e[i]):r)}return o})(n,o,((e,t)=>ko(e,{title:t.name.replace(/00\.0/g,"")}))))),e.addLayer(Go(t,a,s,l,c))}function zo(e,t,n,o,r,i,s,a){o?e.addSource(`${t}-line-source`,Lo(o(n).map((e=>Po(e))))):e.addSource(`${t}-line-source`,{type:"geojson",data:Po(n.map((e=>[e.longitude,e.latitude])))}),e.addLayer(qo(t,r,i,s,a))}function Wo(e,t,n,o,r,i,s,a){if(o){const r=n.length,i=[];for(let e=0;e<r;e++){const t=o(n[e]),r=t.length;for(let e=0;e<r;e++)i.push(Po(t[e]))}e.addSource(`${t}-line-source`,Lo(i))}else e.addSource(`${t}-line-source`,Lo(n.map((e=>Po(e.map((e=>[e.longitude,e.latitude])))))));e.addLayer(qo(t,r,i,s,a))}function Go(e,t,n,o,r){const[i,s]=nn(t);return{id:`${e}-marker-layer`,type:"symbol",source:`${e}-marker-source`,layout:{"icon-image":"sdf-triangle","icon-size":Io(r),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!1,visibility:n?"visible":"none","text-field":["get","title"],"text-size":o,"text-offset":[0,.7],"text-anchor":"top"},paint:{"icon-color":Fo(i),"icon-halo-width":1,"icon-halo-color":"#000","text-halo-color":Mo,"text-color":Do(i),"text-opacity":_o(s)}}}function qo(e,t,n,o=2,r=!1){const[i,s]=nn(t);return{id:`${e}-line-layer`,type:"line",source:`${e}-line-source`,layout:{"line-join":"round","line-cap":"round",visibility:n?"visible":"none"},paint:{"line-color":i,"line-opacity":s,"line-width":o,"line-dasharray":r?[10,10]:[1]}}}function Uo(e,t,n=1){const{map:o,value:r}=t,i=`${e}-marker-layer`;return o.getLayer(i)&&o.setLayoutProperty(i,"icon-size",Io(Eo(r,n))),!0}function Ho(e,t,n=10){const{map:o,value:r}=t,i=`${e}-marker-layer`;return o.getLayer(i)&&o.setLayoutProperty(i,"text-size",Oo(r,n)),!0}function Bo(e,t,n=2){const{map:o,value:r}=t,i=`${e}-line-layer`;return o.getLayer(i)&&o.setPaintProperty(i,"line-width",Ao(r,n)),!0}function Ko(e,t){const{map:n,value:o}=t,r=`${e}-line-layer`,i=`${e}-marker-layer`,[s,a]=nn(o);if(n.getLayer(r)&&(n.setPaintProperty(r,"line-color",s),n.setPaintProperty(r,"line-opacity",a)),n.getLayer(i)){const e=n.getLayoutProperty(i,"icon-image"),t=Array.isArray(e)?e.slice(-1).pop():e;n.setPaintProperty(i,"text-color",Do(s)),n.setPaintProperty(i,"text-opacity",_o(a)),"sdf-triangle"===t&&n.setPaintProperty(i,"icon-color",Fo(s))}return!0}function Zo(e,t,n){const{map:o}=n,r=`${e}-line-layer`,i=`${e}-marker-layer`;return o.getLayer(r)&&o.setLayoutProperty(r,"visibility",t?"visible":"none"),o.getLayer(i)&&o.setLayoutProperty(i,"visibility",t?"visible":"none"),!0}const Vo={NY:"United States",TY:"Japan",AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BQ:"British Antarctic Territory",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",CW:"Curaçao",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts & Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre & Miquelon",VC:"Saint Vincent & Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome & Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",SX:"Sint Maarten",ZA:"South Africa",GS:"South Georgia & Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard & Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks & Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis & Futuna",EH:"Western Sahara",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},Jo="airport-layer",Yo="airport-emer-layer",Qo="airport-source",Xo="#062DF8",er=["==",1,["get","h"]],tr=(e,t,n,o,r)=>r?(e=>0===e)(e)?(e=>["case",["==",9,["get",`${e}`]],"#ea80d8",["==",8,["get",`${e}`]],"#ea80d8",["==",7,["get",`${e}`]],"#dddddd",["==",6,["get",`${e}`]],"#dddddd",["==",5,["get",`${e}`]],"#fbfe98",["==",4,["get",`${e}`]],"#fbfe98",["==",3,["get",`${e}`]],"#00b0f1",["==",2,["get",`${e}`]],"#00b0f1","#000"])(t):_n(e)?((e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],Xo,"#C71"])(n,o):((e,t)=>["case",["in",["get","name"],["literal",e]],t,["==",0,["get","level"]],"#095","#C71"])(n,o):"#095",nr=(e,t=!0,n=!1)=>{const o=["<",["coalesce",["get",`${e}`],11],10];return n?t?["all",er,o]:["to-boolean",!1]:t?o:["!",o]},or=(e,t)=>["case",["in",["get","name"],["literal",t]],0,["case",er,1,["get",`${e}`]]],rr=(e,t)=>0===e&&t?3:0,ir=(e,t,n,o)=>{const r=_n(e)?"#000":["case",er,Xo,"#000"];return o?["case",["in",["get","name"],["literal",t]],n,["==",0,["get","level"]],r,"#8d4600"]:r},sr=(e,t)=>{const n=0===t?["get","name"]:["get","iata"];return _n(e)?n:["case",["==",1,["get","h"]],["concat",n," ✚"],n]},ar=e=>0===e?["get","name"]:["get","iata"],lr=(e,t)=>["case",["in",["get","name"],["literal",e]],Oo(t,10),Oo(t,8,1.15)],cr=e=>Oo(e,8,1.15),ur=(e,t)=>["case",["in",["get","name"],["literal",e]],Eo(t,1),Eo(t,.6)],dr=(e,t)=>t?["case",["==",2,["get","level"]],Eo(e,.5,1.2),Eo(e,.4,1.2)]:Eo(e,.4,1.2);function pr(e,t){const{map:n}=e;n.getLayer(Jo)&&n.setLayoutProperty(Jo,"visibility",t?"visible":"none"),n.getLayer(Yo)&&n.setLayoutProperty(Yo,"visibility",t?"visible":"none")}const mr=e=>{const t=e?e.infos.ralts:[];let n=[];return e&&e.infos.EEP&&e.infos.EXP&&e.infos.raltPoints.length>0&&(n=[e.infos.EEP.name,e.infos.EXP.name]),[t,n.concat(t)]};const fr=e=>{const{map:t,kmlOptions:n,ofp:o,aircraftType:r}=e,i=n.airportPin,[s]=nn(n.etopsColor),[a]=mr(o);t.getLayer(Jo)&&(t.setPaintProperty(Jo,"icon-color",tr(i,r,a,s,!!o)),t.setPaintProperty(Jo,"text-color",ir(i,a,s,!!o)))};function gr(e){const{map:t,kmlOptions:n,ofp:o}=e,r=n.iconTextChange,[,i]=mr(o);return r&&t.getLayer(Jo)&&t.getLayer(Yo)&&(t.setPaintProperty(Jo,"text-halo-width",((e,t)=>["case",["in",["get","name"],["literal",e]],To(Oo(t,10)),To(Oo(t,8,1.15))])(i,r)),t.setPaintProperty(Yo,"text-halo-width",To(Oo(r,8,1.15))),t.setPaintProperty(Jo,"text-halo-blur",((e,t)=>["case",["in",["get","name"],["literal",e]],So(Oo(t,10)),So(Oo(t,8,1.15))])(i,r)),t.setPaintProperty(Yo,"text-halo-blur",(e=>So(Oo(e,8,1.15)))(r))),!0}var hr={show:e=>pr(e,!0),hide:e=>pr(e,!1),add:e=>{const{map:t,mapData:n,ofp:o,kmlOptions:r,aircraftType:i}=e,{affineOrDrop:s}=n,a=s;let l=[];o&&o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0&&(l=[o.infos.EEP,o.infos.EXP]);const c=o?o.infos.raltPoints:[],d=r.etopsColor,p=r.airportPin,m=r.airportDisplay,[f]=nn(d),g=l.map((e=>e.name)),h=c.map((e=>e.name)),v=g.concat(h),$=o?[o.departure.name,o.arrival.name].concat(v):v;fetch("data/airports.2108k.geojson").then((e=>e.json())).then((n=>{if(a){const e=[];for(let t of n.features)t.geometry.coordinates=a(t.geometry.coordinates),void 0!==t.geometry.coordinates&&e.push(t);n.features=e}t.addSource(Qo,{type:"geojson",data:n}),t.addLayer({id:Yo,type:"symbol",source:Qo,layout:{"icon-image":o?["case",["==",2,["get","level"]],"sdf-star","sdf-airport"]:"sdf-airport","icon-size":dr(r.iconSizeChange,!!o),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:m?"visible":"none","text-field":ar(r.airportLabel),"text-size":cr(r.iconTextChange),"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1},paint:{"icon-color":o?["case",["==",1,["get","level"]],"#D70","#B02"]:"#B02","icon-halo-width":0,"icon-halo-color":"#000","text-color":"#000","text-halo-color":Mo,"text-opacity":.8},filter:nr(i,!1,2===p)}),t.addLayer({id:Jo,type:"symbol",source:Qo,layout:{"icon-image":["case",["in",["get","name"],["literal",v]],"sdf-triangle","sdf-airport"],"icon-size":ur(v,r.iconSizeChange),"icon-anchor":"center","icon-offset":[0,0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:m?"visible":"none","text-field":sr(p,r.airportLabel),"text-size":lr(v,r.iconTextChange),"text-offset":[0,.7],"text-anchor":"top","text-allow-overlap":!1,"text-ignore-placement":!1,"symbol-sort-key":or(i,$)},paint:{"icon-halo-color":o?["case",["==",0,["get","level"]],"#095","#D70"]:"#444","icon-halo-width":rr(p,!!o),"icon-color":tr(p,i,h,f,!!o),"text-color":ir(p,h,f,!!o),"text-halo-color":Mo,"text-halo-width":["case",["==",0,["get","level"]],0,0],"text-opacity":.8},filter:nr(i,!0,2===p)}),gr(e);const s=new mapboxgl.Popup({closeButton:!0,closeOnClick:!1,closeOnMove:!Je}),l=function(e){const n=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.title,i=e.features[0].properties.name,a=editolido.icao2iata(i),l=u(Ot);for(;Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;const c=e.features[0].properties.level;let d="",p="0";switch(e.features[0].properties[l]){case 2:case 3:d="Destination & RCF",p="3";break;case 4:case 5:d="Dégagement à destination",p="2";break;case 6:case 7:d="Dégagement en route",p="2 ERA";break;case 8:case 9:d="Appui ou adéquat en route",p="1"}const m=1===e.features[0].properties.h&&"0"!==p,f=e.features[0].properties.cc;let g=`<div class="airport"><h1><span class="title">${i}/${a}</span><span class="flag">${function(e){const t=[...e.toUpperCase()].map((e=>e.codePointAt()+127397));return String.fromCodePoint(...t)}(f)}</span><span class="cc">${(e=>Vo[e]||"")(f)}</span></h1>`;g+=`<h2>${r}${m?" <b>🄷</b>":""}</h2>`,o&&(g+=`<p class="status status-${p.charAt(0)}">STATUT ${p}</p>`,c>0&&(g+=`<p class="security-${c}">${1==c?"ORANGE":"RED"}</p>`),d&&(g+=`<p class="status-text">${d}</p>`)),g+="</div>",s.setLngLat(n).setHTML(g).addTo(t)},c=()=>t.getCanvas().style.cursor="pointer",d=()=>t.getCanvas().style.cursor="",g=function(){d(),s.remove()};Je?(t.on("mouseenter",Jo,(e=>{c(),l(e)})),t.on("mouseenter",Yo,(e=>{c(),l(e)})),t.on("mouseleave",Jo,g),t.on("mouseleave",Yo,g)):(t.on("mouseenter",Jo,c),t.on("mouseenter",Yo,c),t.on("click",Jo,l),t.on("click",Yo,l),t.on("mouseleave",Jo,d),t.on("mouseleave",Yo,d))}))},changeMarker:function(e){const{map:t,kmlOptions:n,ofp:o,aircraftType:r}=e,i=n.airportPin;t.getLayer(Jo)&&(fr(e),t.setPaintProperty(Jo,"icon-halo-width",rr(i,!!o)),t.setLayoutProperty(Jo,"text-field",sr(i,n.airportLabel)),t.setFilter(Jo,nr(r,!0,2===i))),t.getLayer(Yo)&&t.setFilter(Yo,nr(r,!1,2===i))},change:function(e){const{map:t,kmlOptions:n,aircraftType:o,ofp:r}=e,[,i]=mr(r),s=n.airportPin,a=r?[r.departure.name,r.arrival.name].concat(i):i;t.setFilter(Jo,nr(o,!0,2===s)),fr(e),t.setLayoutProperty(Jo,"symbol-sort-key",or(o,a)),t.setFilter(Yo,nr(o,!1,2===s))},changeIconText:e=>{const{map:t,kmlOptions:n,ofp:o}=e,[,r]=mr(o);t.getLayer(Jo)&&t.setLayoutProperty(Jo,"text-size",lr(r,n.iconTextChange)),t.getLayer(Yo)&&t.setLayoutProperty(Yo,"text-size",cr(n.iconTextChange)),gr(e)},changeIconSize:e=>{const{map:t,kmlOptions:n,ofp:o}=e,[,r]=mr(o);t.getLayer(Jo)&&t.setLayoutProperty(Jo,"icon-size",ur(r,n.iconSizeChange)),t.getLayer(Yo)&&t.setLayoutProperty(Yo,"icon-size",dr(n.iconSizeChange))},changeLabel:e=>{const{map:t,kmlOptions:n,value:o}=e;t.getLayer(Jo)&&t.setLayoutProperty(Jo,"text-field",sr(n.airportPin,o)),t.getLayer(Yo)&&t.setLayoutProperty(Yo,"text-field",ar(o))}};const vr="etops-ep-circle-line-layer",$r="etops-etops-circle-line-layer";function yr(e,t){const{map:n}=e;n.getLayer($r)&&n.setLayoutProperty($r,"visibility",t?"visible":"none"),n.getLayer(vr)&&n.setLayoutProperty(vr,"visibility",t?"visible":"none")}var br={show:e=>yr(e,!0),hide:e=>yr(e,!1),add:function(e){const{map:t,mapData:n,ofp:o,kmlOptions:r}=e;if(!o)return;const i=Ao(r.lineWidthChange,1);if(o.infos.EEP&&o.infos.EXP&&o.infos.raltPoints.length>0){const{affineAndClip:e}=n,s=o.infos.maxETOPS,a=r.etopsDisplay;Wo(t,"etops-ep-circle",[o.infos.EEP.circle(420,48),o.infos.EXP.circle(420,48)],e,r.routeColor,a,i,!0),Wo(t,"etops-etops-circle",o.infos.raltPoints.map((e=>e.circle(7*s))),e,r.etopsColor,a,i,!0)}},changeLine:e=>function(e){const{map:t}=e,[n,o]=nn(e.value);t.getLayer($r)&&(t.setPaintProperty($r,"line-color",n),t.setPaintProperty($r,"line-opacity",o)),fr(e)}(e),changeLineWidth:function(e){const{map:t,value:n}=e,o=Ao(n,1);return t.getLayer($r)&&t.setPaintProperty($r,"line-width",o),t.getLayer(vr)&&t.setPaintProperty(vr,"line-width",o),!0}};const xr="fir-reg-line-layer",wr="fir-reg-orange-stripe-layer",Cr="fir-reg-red-stripe-layer",kr="fir-reg-source";function Lr(e,t){const{map:n}=e;n.getLayer(Cr)&&n.setLayoutProperty(Cr,"visibility",t?"visible":"none"),n.getLayer(wr)&&n.setLayoutProperty(wr,"visibility",t?"visible":"none"),n.getLayer(xr)&&n.setLayoutProperty(xr,"visibility",t?"visible":"none")}var Pr={show:e=>Lr(e,!0),hide:e=>Lr(e,!1),add:e=>{const{ofp:t,map:n,mapData:o,kmlOptions:r,mapOptions:i}=e;if(!t)return;const{affine:s}=o,a="jb_pacific"!==i.id&&!i.id.startsWith("vb_")&&r.firDisplay;fetch("data/fir-reg.2108k.geojson").then((e=>e.json())).then((e=>{if(s)for(let t=0;t<e.features.length;t++){const n=e.features[t].geometry.coordinates[0];e.features[t].geometry.coordinates=[n.map((e=>s(e)))]}n.addSource(kr,{type:"geojson",data:e}),n.addLayer({id:wr,type:"fill",source:kr,layout:{visibility:a?"visible":"none"},paint:{"fill-pattern":"stripe-orange","fill-opacity":.4},filter:["!",["==","FIR-RED",["get","type"]]]}),n.addLayer({id:Cr,type:"fill",source:kr,layout:{visibility:a?"visible":"none"},paint:{"fill-pattern":"stripe-red","fill-opacity":.35},filter:["==","FIR-RED",["get","type"]]}),n.addLayer({id:xr,type:"line",source:kr,layout:{visibility:a?"visible":"none"},paint:{"line-color":["case",["==","FIR-RED",["get","type"]],"rgb(255,0,0)","rgb(255,127,0)"],"line-width":1,"line-opacity":["case",["==","FIR-RED",["get","type"]],.35,.4]}})}))}};const Mr="great-circle";var Sr={show:Zo.bind(null,Mr,!0),hide:Zo.bind(null,Mr,!1),add:e=>{const{ofp:t,kmlOptions:n,mapData:o,map:r,mapOptions:i}=e;if(!t)return;const s=!i.id.startsWith("vb_")&&n.greatCircleDisplay,{affineAndClip:a}=o,l=`${t.infos.depICAO}-${t.infos.destICAO}`,c=t.route,u=new editolido.Route([c.points[0],c.points[c.points.length-1]]).split(300,{name:`Ortho ${l}`}),d=Ao(n.lineWidthChange,1.5);zo(r,Mr,u.points,a,n.greatCircleColor,s,d)},changeLine:Ko.bind(null,Mr),changeLineWidth:e=>Bo(Mr,e,1.5)};const Tr="ogimet";var Er={show:Zo.bind(null,Tr,!0),hide:Zo.bind(null,Tr,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r,mapOptions:i}=e;if(!n)return;const s=!i.id.startsWith("vb_")&&o.ogimetDisplay,{affineAndClip:a}=r,l=Ao(o.lineWidthChange,1.5);zo(t,Tr,n.ogimetData.route.points,a,o.ogimetColor,s,l)},changeLine:Ko.bind(null,Tr),changeLineWidth:e=>Bo(Tr,e,1.5)};const Or="ralt";var Ar={show:Zo.bind(null,Or,!0),hide:Zo.bind(null,Or,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(!n)return;const{affineAndClip:i,affineOrDrop:s}=r,a=new editolido.Route(n.wptCoordinatesAlternate(),{name:"Route Dégagement"}),l=Ao(o.lineWidthChange);zo(t,Or,a.points,i,o.alternateColor,o.alternateDisplay,l),No(t,Or,a.points,s,o)},changeLine:Ko.bind(null,Or),changeIconText:Ho.bind(null,Or),changeLineWidth:Bo.bind(null,Or),changeIconSize:Uo.bind(null,Or)};const Ir="rnat",Fr=(e,t,n,o)=>({id:`${e}-marker-layer`,type:"symbol",source:`${e.replace("-labels","")}-line-source`,layout:{visibility:n?"visible":"none","text-field":["get","title"],"text-size":o,"text-offset":[0,-.1],"text-anchor":"bottom","text-ignore-placement":!0,"text-allow-overlap":!0,"symbol-placement":"line-center"},paint:{"text-halo-color":"#000","text-color":jo(t),"text-opacity":Ro(t,null,.9)}});function Dr(e){const{map:t,kmlOptions:n}=e,o="rnat-marker-layer";return t.getLayer(o)&&(t.setPaintProperty(o,"text-color",jo(n.natColor,n.routeColor)),t.setPaintProperty(o,"text-opacity",Ro(n.natColor,n.routeColor,.9))),!0}var _r={show:e=>[Ir,"rnat-incomplete","rnat-labels","rnat-incomplete-labels"].forEach((t=>Zo(t,!0,e))),hide:e=>[Ir,"rnat-incomplete","rnat-labels","rnat-incomplete-labels"].forEach((t=>Zo(t,!1,e))),add:function(e){const{map:t,ofp:n,mapData:o,kmlOptions:r}=e;if(!n)return;const{affineOrDrop:i,affineAndClip:s}=o,a=i,l=s,c=r.natColor,u=r.natDisplay,d={rnat:[],"rnat-incomplete":[]},p={rnat:[],"rnat-incomplete":[]};for(let e of n.tracks){const t=e.isComplete?"rnat":"rnat-incomplete",n=e.name.slice(-1),o=e.infos.direction,r="WEST"===o?`< ${n}`:"EAST"===o?`${n} >`:n;if(l){const n=l(e.points),o=n.length;for(let e=0;e<o;e++)d[t].push(Po(n[e],{title:r}))}else d[t].push(Po(e.points.map((e=>[e.longitude,e.latitude])),{title:e.name.slice(-1)}));const i=e.points[0];let s=a?a([i.longitude,i.latitude]):[i.longitude,i.latitude];s&&p[t].push(ko(s,{title:`${e.isMine?e.name+"\n":""}${i.name}`,description:e.description,track:e.name,point:i.name,isMine:e.isMine,direction:o,overrideTextColor:e.isMine?1:0}));const c=e.points[e.points.length-1];s=a?a([c.longitude,c.latitude]):[c.longitude,c.latitude],s&&p[t].push(ko(s,{title:`${e.isMine?e.name+"\n":""}${c.name}`,description:e.description,track:e.name,point:c.name,isMine:e.isMine,direction:o,noPin:1,overrideTextColor:e.isMine?1:0}))}t.addSource("rnat-marker-source",Lo(p.rnat)),t.addSource("rnat-incomplete-marker-source",Lo(p["rnat-incomplete"])),t.addSource("rnat-line-source",Lo(d.rnat)),t.addSource("rnat-incomplete-line-source",Lo(d["rnat-incomplete"]));const m=Oo(r.iconTextChange),f=Ao(r.lineWidthChange,1),g=Eo(r.iconSizeChange);t.addLayer(qo("rnat",c,u,f)),t.addLayer(qo("rnat-incomplete",r.natIncompleteColor,u,f)),t.addLayer(Go("rnat",c,u,m,g)),Dr(e),t.setLayoutProperty("rnat-marker-layer","symbol-sort-key",["case",["==",1,["get","overrideTextColor"]],0,1]),t.addLayer(Go("rnat-incomplete",c,u,m,g)),t.addLayer(Fr("rnat-labels",c,u,m)),t.addLayer(Fr("rnat-incomplete-labels",r.natIncompleteColor,u,m));const h=e=>{const o=e.features[0].geometry.coordinates.slice();for(;Math.abs(e.lngLat.lng-o[0])>180;)o[0]+=e.lngLat.lng>o[0]?360:-360;const r=e.features[0].properties,i=(new mapboxgl.Popup).setLngLat(o).addTo(t),s=St.subscribe((e=>{let t=r.description.replace(r.point,`<b>${r.point}</b>`),o=[void 0,void 0,void 0];r.isMine&&(o=n.timeMatrix.filter((([e])=>editolido.isARINC(r.point)?editolido.arinc_normalizer(r.point).asDM===e.name:r.point===e.name)).pop()||o);const[,s,a]=o;let l=a?` - FL${a}`:"";const c="WEST"===r.direction?"WB":"EAST"===r.direction?"EB":"";if(a&&c){const e=new RegExp(String.raw`(LVLS ${c})([\d\s]*)( ${a} )`,"u"),n=t.replace(e,"<strong>$1</strong>$2<strong><b>$3</b></strong>");t=t!=n?n:t.replace(`LVLS ${c}`,`<strong class="error">LVLS ${c}</strong>`)}const u=s&&e?" - ETO: "+new Date(e.getTime()+6e4*s).toISOString().substring(11,16)+"z":"";let d=`<div class="track"><h1>${r.track}${u}${l}</h1><p>${t}</p>`;i.setHTML(d)}));i.on("close",(()=>{s()}))},v=e=>{const n=e+"-marker-layer";t.on("click",n,h),t.on("mouseenter",n,(function(){t.getCanvas().style.cursor="pointer"})),t.on("mouseleave",n,(function(){t.getCanvas().style.cursor=""}))};v("rnat"),v("rnat-incomplete"),o.initialLoad&&(()=>{const e=n.tracks.filter((e=>e.isMine)).pop();if(e&&e.points.length>0){const t=e.points[0],n=o.affineOrDrop,r=n?n([t.longitude,t.latitude]):[t.longitude,t.latitude];if(r){const[n,o]=r,i={lngLat:{lng:n,lat:o},features:[{properties:{track:e.name,point:t.name,isMine:!0,description:e.description,direction:e.infos.direction},geometry:{coordinates:[n,o]}}]};h(i)}}})()},changeLine:function(e){return Ko(Ir,e)&&Ko("rnat-labels",e),Dr(e),!0},changeIconText:e=>[Ir,"rnat-incomplete","rnat-labels","rnat-incomplete-labels"].forEach((t=>Ho(t,e))),changeLineWidth:e=>[Ir,"rnat-incomplete"].forEach((t=>Bo(t,e,1))),changeIconSize:e=>[Ir,"rnat-incomplete"].forEach((t=>Uo(t,e)))};const jr="rmain";function Rr(e){const{map:t,kmlOptions:n}=e,o=n.iconTextChange,r="rmain-marker-layer";if(t.getLayer(r)){const e=Oo(o),i=t.getPaintProperty(r,"text-opacity"),s=((e,t)=>{const[n,o,r]=(e=>[e.slice(6,8),e.slice(4,6),e.slice(2,4),e.slice(0,2)])(e).map((e=>parseInt(e,16)));return.299*n+.587*o+.114*r+255*(1-t)>186?"#212529":Mo})(n.routeColor,i);t.setPaintProperty(r,"text-halo-color",s),t.setPaintProperty(r,"text-halo-width",To(e)),t.setPaintProperty(r,"text-halo-blur",So(e))}return!0}const Nr=[["fir",Pr],["airport",hr],["etops",br],["greatcircle",Sr],["ogimet",Er],["ralt",Ar],["rmain",{show:Zo.bind(null,jr,!0),hide:Zo.bind(null,jr,!1),add:e=>{const{map:t,ofp:n,kmlOptions:o,mapData:r}=e;if(!n)return;const{affineAndClip:i,affineOrDrop:s}=r,a=n.route;a.name=`${n.infos.depICAO}-${n.infos.destICAO}`,a.description=n.description;const l=Ao(o.lineWidthChange);zo(t,jr,a.points,i,o.routeColor,!0,l),No(t,jr,a.points,s,o),Rr(e)},changeLine:e=>(Ko(jr,e),function(e){const{map:t,kmlOptions:n}=e,[o,r]=nn(n.routeColor);t.getLayer(vr)&&(t.setPaintProperty(vr,"line-color",o),t.setPaintProperty(vr,"line-opacity",r))}(e),Dr(e),Rr(e),!0),changeIconText:e=>Ho(jr,e)&&Rr(e),changeLineWidth:Bo.bind(null,jr),changeIconSize:Uo.bind(null,jr)}],["rnat",_r]],zr=2*Math.PI,Wr=Math.PI/4,Gr=function(e){return Math.abs(e)<=3.14159265359?e:e-function(e){return e<0?-1:1}(e)*zr};var qr={init:function(){},forward:function(e){var t=e.x,n=e.y,o=Gr(t-this.long0),r=Math.tan(n/2),i=Math.sin(Wr*r),s=i*i,a=this.x0+this.a*o*(.74482-.34588*s),l=this.y0+1.70711*this.a*r;return e.x=a,e.y=l,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=e.y/1.70711/this.a,n=Math.sin(Wr*t),o=n*n,r=Gr(this.long0+e.x/this.a/(.74482-.34588*o)),i=2*Math.atan(t);return e.x=r,e.y=i,e},names:["The Times","times"]};const Ur=Math.abs,Hr=Math.asin,Br=Math.cos,Kr=Math.sin,Zr=Math.sqrt,Vr=1.340264,Jr=-.081106,Yr=893e-6,Qr=.003796,Xr=Zr(3)/2;var ei={init:function(){},forward:function(e){const t=e.x,n=e.y,o=Hr(Xr*Kr(n)),r=o*o,i=r*r*r;return e.x=this.a*t*Br(o)/(Xr*(Vr+3*Jr*r+i*(7*Yr+9*Qr*r))),e.y=this.a*o*(Vr+Jr*r+i*(Yr+Qr*r)),e},inverse:function(e){const t=e.y/this.a,n=e.x/this.a;let o=t,r=o*o,i=r*r*r;for(var s,a=0;a<12&&(o-=s=(o*(Vr+Jr*r+i*(Yr+Qr*r))-t)/(Vr+3*Jr*r+i*(7*Yr+9*Qr*r)),r=o*o,i=r*r*r,!(Ur(s)<1e-12));++a);return e.x=Xr*n*(Vr+3*Jr*r+i*(7*Yr+9*Qr*r))/Br(o),e.y=Hr(Kr(o)/Xr),e},names:["Equal Earth","eqearth"]};function ti(e,t,n,o,r,i,s=!1){window.proj4.Proj.projections.get("times")||window.proj4.Proj.projections.add(qr),window.proj4.Proj.projections.get("eqearth")||window.proj4.Proj.projections.add(ei);let a={container:e,center:[0,49],zoom:2,attributionControl:!0,customAttribution:(()=>{const e="Airports/FIR © Olivier Ravet";return t.id.startsWith("ed_eqe")?`© equal-earth.com - ${e}`:t.id.startsWith("jb_")||t.id.startsWith("ed_")?`Yammer/QGIS & Avenza maps - ${e}`:t.id.startsWith("vb_")?`© ${window.atob("Q2FydGFCb3NzeQ==")}.com - Airports © Olivier Ravet`:`Yammer/Maps.me - ${e}`})()};const l=new mapboxgl.Map({...t.mapboxOptions,...a});let c,u,d,p;l._setCacheLimits(320,32),l.loadImage("sdf/maki-marker-sdf.png",(function(e,t){e||l.addImage("sdf-marker-15",t,{pixelRatio:2,sdf:!0})})),l.loadImage("sdf/map-triangle-sdf.png",(function(e,t){e||l.addImage("sdf-triangle",t,{pixelRatio:2,sdf:!0})})),l.loadImage("sdf/map-circle-sdf.png",(function(e,t){e||l.addImage("sdf-airport",t,{pixelRatio:2,sdf:!0})})),l.loadImage("sdf/map-star-sdf.png",(function(e,t){e||l.addImage("sdf-star",t,{pixelRatio:2,sdf:!0})})),l.loadImage("images/stripe-orange.png",(function(e,t){e||l.addImage("stripe-orange",t,{pixelRatio:2,sdf:!0})})),l.loadImage("images/stripe-red.png",(function(e,t){e||l.addImage("stripe-red",t,{pixelRatio:2,sdf:!0})})),window.proj4.defs("WGS84","+proj=longlat +datum=WGS84"),window.proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs");let m,f=e=>window.proj4("WGS84","EPSG:3857",e),g=e=>window.proj4("EPSG:3857","WGS84",e);if(t.extent){let e,n,o,r;if(window.proj4.defs("CUSTOM",t.proj4),t.affineTransform)[e,n,o,r]=t.affineTransform;else{const i=[-20026376.39,-20048966.1,20026376.39,20048966.1],[s,a,l,c]=t.extent;let[u,d,p,m]=i;if(t.ratio){const e=i[3]-i[1],[n,o]=t.ratio,r=o/n*e;[u,d,p,m]=[i[0],i[3]-r,i[2],i[3]]}e=(p-u)/(l-s),n=u-e*s,o=(m-d)/(c-a),r=d-o*a}const[i,s,a,l]=t.viewport?t.viewport:t.extent,m=e=>window.proj4("WGS84","CUSTOM",e),h=t=>[e*t[0]+n,o*t[1]+r],v=e=>g(h(e));f=e=>h(m(e)),c=e=>g(f(e)),u=e=>{let[t,n]=m(e);return t=Xe(t,i,a),n=Xe(n,s,l),v([t,n])},d=e=>{let[t,n]=m(e);if(et(t,i,a)&&et(n,s,l))return v([t,n])},p=e=>{if(0===e.length)return[];return function(e,t,n){var o,r,i,s,a,l=e.length,c=nt(e[0],t),u=[];for(n||(n=[]),o=1;o<l;o++){for(r=e[o-1],s=a=nt(i=e[o],t);;){if(!(c|s)){u.push(r),s!==a?(u.push(i),o<l-1&&(n.push(u),u=[])):o===l-1&&u.push(i);break}if(c&s)break;c?c=nt(r=tt(r,i,c,t),t):s=nt(i=tt(r,i,s,t),t)}c=a}return u.length&&n.push(u),n}(e.map((e=>m([e.longitude,e.latitude]))),t.extent).map((e=>e.map((e=>v(e)))))}}let h=[];if(n){for(const e of n.tracks)h=h.concat(e.points);h=h.concat(n.route.points,n.wptCoordinatesAlternate()),m=((e,t,n=[1/0,1/0,-1/0,-1/0])=>{for(const[o,r]of e.map((e=>t?t([e.longitude,e.latitude]):[e.longitude,e.latitude])))n[0]>o&&(n[0]=o),n[1]>r&&(n[1]=r),n[2]<o&&(n[2]=o),n[3]<r&&(n[3]=r);return n[0]-=1,n[1]-=1,n[2]+=1,n[3]+=1,n})(h,u),l.fitBounds(m,{padding:{top:30,bottom:80,left:30,right:30}})}const v=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!1},fitBoundsOptions:{maxZoom:3},trackUserLocation:!0});if(c){const e=v._onSuccess;v._onSuccess=function(t){const[n,o]=c([t.coords.longitude,t.coords.latitude]);return e.apply(this,[{coords:{longitude:n,latitude:o,accuracy:t.coords.accuracy}}])}}const $={map:l,affine:c,affineAndClamp:u,affineAndClip:p,affineOrDrop:d,bbox:m,mapOptions:t,geolocate:v,initialLoad:s};return l.addControl(new class{onAdd(e){return this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl  mapboxgl-ctrl-group",this._button=document.createElement("button"),this._button.className="mapboxgl-ctrl-layers",this._button.setAttribute("type","button"),this._button.setAttribute("title","Personnaliser la carte"),this._focusModeUnsubscribe=wt.subscribe((e=>this._button.innerHTML=(e=>e?'<svg><use xlink:href="#single-layer-symbol"/></svg>':'<svg><use xlink:href="#layers-symbol"/></svg>')(e))),this._container.appendChild(this._button),this._toggleSidebar=()=>xt.update((e=>!e)),this._button.addEventListener("click",this._toggleSidebar),this._container}onRemove(){this._button.removeEventListener("click",this._toggleSidebar),this._focusModeUnsubscribe(),this._container.parentNode.removeChild(this._container),this._map=void 0}}),l.addControl(v),l.on("load",(function(){(e=>{const{map:t,mapOptions:n}=e;n.tiles&&(t.addSource("jb-raster",{type:"raster",tiles:n.tiles,tileSize:n.tileSize}),t.addLayer({id:"jb-layer",type:"raster",source:"jb-raster",minzoom:0,maxzoom:22,paint:{"raster-opacity":1}})),Nr.forEach((([,t])=>t.add&&t.add(e)))})({ofp:n,kmlOptions:o,mapData:$,map:l,mapOptions:t,aircraftType:r}),i&&i(l,t)})),l.on("remove",(function(){})),$}class ni{constructor(e,t,n){this.dbName=e,this.dbPromise=new Promise(((o,r)=>{const i=indexedDB.open(e,t);i.onsuccess=()=>{o(i)},i.onerror=()=>{r("Error while opening DB")},i.onupgradeneeded=n?n.bind(null,i):()=>{}}))}getImageIdFromURL(e){return e.pathname.replace(/[/.]/g,"_")}async fetchImageFromDB(e,t){const n=await this.dbPromise;return new Promise(((o,r)=>{const i=n.result.transaction(t,"readonly").objectStore(t).get(e);i.onsuccess=()=>{o(i.result)},i.onerror=()=>{r("Something went wrong while fetching image from DB ")}}))}async putImageInDB(e,t,n){const o=await this.dbPromise;return new Promise(((r,i)=>{const s=o.result.transaction(t,"readwrite").objectStore(t),a=s.put(n,e);a.onsuccess=()=>{const t=s.get(e);t.onsuccess=()=>{r(t.result)}},a.onerror=()=>{i("Something went wrong while putting image in DB ")}}))}getCacheHandler(e){return this._cacheHandler.bind(this,e)}async isNotCached(e,t){const n=this.getImageIdFromURL(t),o=await this.dbPromise;return new Promise(((r,i)=>{const s=o.result.transaction(e,"readonly").objectStore(e).getKey(n);s.onsuccess=()=>{r(void 0===s.result?t:null)},s.onerror=()=>{i("Something went wrong while checking if cached from DB ")}}))}async countTiles(e){const t=await this.dbPromise;return new Promise(((n,o)=>{const r=t.result.transaction(e,"readonly").objectStore(e).count();r.onsuccess=()=>n(r.result),r.onerror=()=>o("Something went wrong while counting entries from DB")}))}async close(){(await this.dbPromise).result.close()}async _cacheHandler(e,{request:t,url:n}){const o=this.getImageIdFromURL(n);return this.fetchImageFromDB(o,e).then((n=>n?new Response(n):fetch(t).then((e=>e.clone().blob())).then((t=>t.type.startsWith("image/")||"application/x-protobuf"===t.type?this.putImageInDB(o,e,t).then((e=>new Response(e))):new Response("",{status:404,statusText:"invalid image found (sw)"})))))}}function oi(e,t){return Math.floor((e+180)/360*Math.pow(2,t))}function ri(e,t){return Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,t))}const ii=async(e,t)=>{const{map:n,mapOptions:o,bbox:r}=t;if(!n)return[];const i=new ni("lido-tiles");if(o.cacheAll){const e=await i.countTiles(o.cacheName);let t;if(t=o.matrix?o.matrix.map((([e,t])=>e*t)):[...Array(o.cacheZoom+1).keys()].map((e=>Math.pow(2,e)*Math.pow(2,e))),e>=t.reduce(((e,t)=>e+t),0))return i.close(),caches[o.id]=!0,[]}const[s,a]=[[r[0],r[1]],[r[2],r[3]]],l=[];for(let e=0;e<=o.cacheZoom;e++){let t,r;const c=Math.pow(2,e);let u,d;o.cacheAll?(t={x:0,y:c-1},r={x:c-1,y:0}):(t={x:oi(s[0],e),y:ri(s[1],e)},r={x:oi(a[0],e),y:ri(a[1],e)}),o.matrix?[u,d]=o.matrix[e]:[u,d]=[c,c];for(let s=t.x;s<=r.x;s++)for(let a=r.y;a<=t.y;a++)if(s>=0&&a>=0&&s<u&&a<d){let t;o.tiles?(t=new URL(o.tiles[0].replace("{z}",e).replace("{x}",s).replace("{y}",a)),l.push(i.isNotCached(o.cacheName,t))):(t=new URL(`https://api.mapbox.com/v4/denizotjb.6nts91f3/${e}/${s}/${a}@2x.webp?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(i.isNotCached(o.cacheName,t)),t=new URL(`https://api.mapbox.com/v4/denizotjb.9001lcsf,denizotjb.494jxmoa,mapbox.mapbox-streets-v8,denizotjb.1x3i1g8r,denizotjb.bifqeinj,denizotjb.cz0kdfpx,denizotjb.aop85z8z,mapbox.mapbox-terrain-v2/${e}/${s}/${a}.vector.pbf?sku=${n._requestManager._skuToken}&access_token=${mapboxgl.accessToken}`),l.push(i.isNotCached(o.cacheName,t)))}}const c=await Promise.all(l);return i.close(),c.filter((e=>null!==e))};function si(e){let t,n,o,r,i,s,a;const l=e[4].default,c=p(l,e,e[3],null);return{c(){t=D("svg"),n=D("circle"),o=D("path"),r=D("path"),s=R(),c&&c.c(),G(n,"cx","54"),G(n,"cy","54"),G(n,"r","50"),G(n,"class","svelte-ekos12"),G(o,"d","M50,5A45 45 0 1 1 49.9999 5"),G(o,"transform","translate(4,4)"),G(o,"class","svelte-ekos12"),G(r,"d",i=e[0]()),G(r,"transform","translate(4,4)"),G(r,"class","svelte-ekos12"),G(t,"viewBox","0 0 108 108"),G(t,"class","svelte-ekos12")},m(e,i){O(e,t,i),S(t,n),S(t,o),S(t,r),O(e,s,i),c&&c.m(e,i),a=!0},p(e,[t]){(!a||1&t&&i!==(i=e[0]()))&&G(r,"d",i),c&&c.p&&(!a||8&t)&&g(c,l,e,e[3],a?f(l,e[3],t,null):h(e[3]),null)},i(e){a||(Ie(c,e),a=!0)},o(e){Fe(c,e),a=!1},d(e){e&&A(t),e&&A(s),c&&c.d(e)}}}function ai(e,t,n){let o,{$$slots:r={},$$scope:i}=t,{value:s=0}=t,{max:a=100}=t;return e.$$set=e=>{"value"in e&&n(1,s=e.value),"max"in e&&n(2,a=e.max),"$$scope"in e&&n(3,i=e.$$scope)},e.$$.update=()=>{6&e.$$.dirty&&n(0,o=()=>{if(s<=0)return"";if(s>=a)return"M50,5A45 45 0 1 1 49.9999 5";{const e=2*Math.PI*(s/a),t=50+45*Math.cos(e-Math.PI/2),n=50+45*Math.sin(e-Math.PI/2);let o="M50,5";return e>Math.PI&&(o+="A45 45 0 0 1 50 95"),o+=`A45 45 0 0 1 ${t} ${n}`,o}})},[o,s,a,i,r]}class li extends He{constructor(e){super(),Ue(this,e,ai,si,a,{value:1,max:2})}}function ci(e,t,n){const o=e.slice();return o[8]=t[n],o}function ui(t){let n,o,r;return{c(){n=F("option"),o=j("???"),n.__value=void 0,n.value=n.__value,n.selected=r=!0},m(e,t){O(e,n,t),S(n,o)},p:e,d(e){e&&A(n)}}}function di(e){let t,n,o,r,i=e[8]+"";return{c(){t=F("option"),n=j(i),t.__value=o=e[8],t.value=t.__value,t.selected=r=e[8]===e[3]},m(e,o){O(e,t,o),S(t,n)},p(e,n){8&n&&r!==(r=e[8]===e[3])&&(t.selected=r)},d(e){e&&A(t)}}}function pi(e){let t,n=e[8]===e[3]||e[1]&&e[8]===e[1]||!ht.includes(e[8]),o=n&&di(e);return{c(){o&&o.c(),t=N()},m(e,n){o&&o.m(e,n),O(e,t,n)},p(e,r){10&r&&(n=e[8]===e[3]||e[1]&&e[8]===e[1]||!ht.includes(e[8])),n?o?o.p(e,r):(o=di(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&A(t)}}}function mi(t){let n,o,r,s,a=!t[3]&&ui(),l=gt,c=[];for(let e=0;e<l.length;e+=1)c[e]=pi(ci(t,l,e));return{c(){n=F("select"),a&&a.c(),o=N();for(let e=0;e<c.length;e+=1)c[e].c();G(n,"name","aircraftType"),G(n,"class","svelte-1xpiicm"),void 0===t[2]&&be((()=>t[7].call(n)))},m(e,i){O(e,n,i),a&&a.m(n,null),S(n,o);for(let e=0;e<c.length;e+=1)c[e].m(n,null);t[6](n),V(n,t[2]),r||(s=[z(n,"change",t[7]),z(n,"change",t[5]),x(bn.call(null,n))],r=!0)},p(e,[t]){if(e[3]?a&&(a.d(1),a=null):a?a.p(e,t):(a=ui(),a.c(),a.m(n,o)),10&t){let o;for(l=gt,o=0;o<l.length;o+=1){const r=ci(e,l,o);c[o]?c[o].p(r,t):(c[o]=pi(r),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}4&t&&V(n,e[2])},i:e,o:e,d(e){e&&A(n),a&&a.d(),I(c,e),t[6](null),r=!1,i(s)}}}function fi(e,t,n){let o,r,i,s;d(e,Pt,(e=>n(4,r=e))),d(e,Et,(e=>n(2,i=e))),d(e,Ot,(e=>n(3,s=e)));let{aircraftTypeSelectElement:a=null}=t;return e.$$set=e=>{"aircraftTypeSelectElement"in e&&n(0,a=e.aircraftTypeSelectElement)},e.$$.update=()=>{16&e.$$.dirty&&n(1,o=r?r.infos.aircraftType:void 0)},[a,o,i,s,r,function(t){de.call(this,e,t)},function(e){me[e?"unshift":"push"]((()=>{a=e,n(0,a)}))},function(){i=J(this),Et.set(i)}]}class gi extends He{constructor(e){super(),Ue(this,e,fi,mi,a,{aircraftTypeSelectElement:0})}}function hi(e,t,n){let o,r;d(e,Nt,(e=>n(1,o=e)));let{mapData:i}=t;const s=window.document.createElement("div");s.classList.add("mapboxgl-user-location-dot","map-plane");const a=e=>{if(r){const t=i.affine,[n,o]=t?t([e.longitude,e.latitude]):[e.longitude,e.latitude];r.setLngLat([n,o])}};return le((()=>{r=new mapboxgl.Marker(s),a(o.map),r.addTo(i.map)})),ce((()=>{r&&(r.remove(),r=void 0)})),e.$$set=e=>{"mapData"in e&&n(0,i=e.mapData)},e.$$.update=()=>{2&e.$$.dirty&&a(o.map)},[i,o]}class vi extends He{constructor(e){super(),Ue(this,e,hi,null,a,{mapData:0})}}const $i={version:8,name:"Blank pour App",metadata:{"mapbox:autocomposite":!0,"mapbox:type":"template","mapbox:sdk-support":{js:"1.9.0",android:"8.6.0",ios:"5.6.0"},"mapbox:groups":{},"mapbox:uiParadigm":"layers"},center:[0,0],zoom:1.2946207284336362,bearing:0,pitch:0,sources:{},sprite:"mapbox://sprites/flyingeek/ckbhlmwdm0mn51imw8t4dddqs/ck2u8j60r58fu0sgyxrigm3cu",glyphs:"mapbox://fonts/flyingeek/{fontstack}/{range}.pbf",layers:[],created:"2020-06-16T07:22:32.952Z",id:"ckbhlmwdm0mn51imw8t4dddqs",modified:"2020-06-16T07:23:29.539Z",owner:"flyingeek",visibility:"public",draft:!1},yi=matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches?256:512,bi=[{label:"Mercator",id:"mercator",mapboxOptions:{style:"mapbox://styles/flyingeek/cknj4nmwu0t8117ny6rk7dwbg",renderWorldCopies:!1,maxZoom:12},cacheName:"denizotjbv2",cacheZoom:6},{label:"Lambert North",id:"jb_north",extent:[-7441575.3298294,-5719574.1644927,7383398.17621086,9105399.34154755],proj4:"+proj=lcc +lat_1=30 +lat_2=65 +lat_0=47.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:$i,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-northv3.netlify.app/northv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"northv3",cacheAll:!0,tileSize:yi},{label:"Lambert South",id:"jb_south",extent:[-12613000.20107552,-12796118.19556621,13437104.14597977,13253986.15148908],validity:[-12613903.56963206,-9420000.1608799,13437054.51836624,5862747.38325809],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:$i,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-southv3.netlify.app/southv3/{z}/{x}/{y}.jpg"],cacheZoom:4,cacheName:"southv3",cacheAll:!0,tileSize:yi},{label:"Lambert Pacific",id:"jb_pacific",extent:[-8306365.14297095,-7788164.66141786,6519185.45830619,7037385.93985927],proj4:"+proj=lcc +lat_1=-15 +lat_2=30 +lat_0=7.5 +lon_0=-140 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",mapboxOptions:{style:$i,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-pacificv1.netlify.app/pacificv1/{z}/{x}/{y}.jpg"],cacheName:"pacificv1",cacheZoom:4,cacheAll:!0,tileSize:yi},{label:"The World",id:"jb_theworld",affineTransform:[1.314746085506463,-45260.546626176685,1.315,648e4],extent:[-15201502.45260082,-8478963.56607166,15262747.04890729,10300929.57326125],proj4:"+proj=times +ellps=sphere +no_defs +wktext +lon_0=0 +x_0=0 +y_0=0",mapboxOptions:{style:$i,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-theworldv2.netlify.app/theworldv2/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,10],[32,20],[64,40]],cacheZoom:5,cacheName:"theworldv2",cacheAll:!0,tileSize:yi},{label:"=Physique=",id:"ed_eqe_physical_fr",affineTransform:[1.104,-855.8520345054567,1.1,931e4],extent:[-18145536.6946,-10300589.33644032,18143985.81684419,9720047.1747],proj4:"+proj=eqearth +datum=WGS84 +wktext",mapboxOptions:{style:$i,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-eqephysicalfrv1.netlify.app/eqephysicalfrv1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,3],[8,5],[16,9],[32,18],[64,36]],cacheZoom:5,cacheName:"eqephysicalfrv1",cacheAll:!0,tileSize:yi},{label:atob("Q2FydGFCb3NzeQ==")+" 2020",id:"vb_2020",ratio:[19449,18352],extent:[26966.11818123,-430589.86447607,1262485.62823696,735241.49181695],proj4:"+proj=lcc +lat_1=45.89893890000052 +lat_2=47.69601440000037 +lat_0=46.8 +lon_0=2.33722917 +x_0=600000 +y_0=200000 +datum=WGS84 +units=m +no_defs ",mapboxOptions:{style:$i,renderWorldCopies:!1,maxZoom:5},tiles:["https://ofp2map-cb2020v1.netlify.app/cb2020v1/{z}/{x}/{y}.webp"],matrix:[[1,1],[2,2],[4,4],[8,8],[16,16],[32,31],[64,61]],cacheName:"cb2020v1",cacheZoom:5,cacheAll:!0,tileSize:yi}];function xi(e,t,n){const o=e.slice();return o[7]=t[n],o[9]=n,o}function wi(e){let t,n,o,r,i=(e[7].id===e[2]?`${e[7].label.toUpperCase()}`:e[7].label)+"";return{c(){t=F("option"),n=j(i),t.__value=o=e[7],t.value=t.__value,t.selected=r=e[7].id===e[0].id},m(e,o){O(e,t,o),S(t,n)},p(e,o){4&o&&i!==(i=(e[7].id===e[2]?`${e[7].label.toUpperCase()}`:e[7].label)+"")&&B(n,i),9&o&&r!==(r=e[7].id===e[0].id)&&(t.selected=r)},d(e){e&&A(t)}}}function Ci(t){let n,o,r,s,a=t[3],l=[];for(let e=0;e<a.length;e+=1)l[e]=wi(xi(t,a,e));return{c(){n=F("div"),o=F("select");for(let e=0;e<l.length;e+=1)l[e].c();G(o,"name",t[1]),G(o,"class","form-select form-select-sm svelte-1oguysy"),void 0===t[0]&&be((()=>t[6].call(o))),G(n,"class","input-group")},m(e,i){O(e,n,i),S(n,o);for(let e=0;e<l.length;e+=1)l[e].m(o,null);V(o,t[0]),r||(s=[z(o,"change",t[6]),z(o,"change",t[5]),x(bn.call(null,o))],r=!0)},p(e,[t]){if(13&t){let n;for(a=e[3],n=0;n<a.length;n+=1){const r=xi(e,a,n);l[n]?l[n].p(r,t):(l[n]=wi(r),l[n].c(),l[n].m(o,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=a.length}2&t&&G(o,"name",e[1]),9&t&&V(o,e[0])},i:e,o:e,d(e){e&&A(n),I(l,e),r=!1,i(s)}}}function ki(e,t,n){if(!e.proj4)return!1;try{const o=e.validity?e.validity:e.extent;for(let r of[t,n]){const[t,n]=window.proj4(e.proj4,[r.longitude,r.latitude]);if(t<o[0]||t>o[2]||n<o[1]||n>o[3])return!1}}catch(e){return!1}return!0}function Li(e,t,n){let{name:o="map-style"}=t,{ofp:r}=t,{selected:i=bi[0]}=t,s=i.id;const a=r?bi:bi.filter((e=>!e.id.startsWith("vb_")&&"jb_theworld"!==e.id));return le((()=>{if(i.id===bi[0].id&&r){const e=r.route.points[0],t=r.route.points[r.route.points.length-1],o=bi.find((e=>"vb_2020"===e.id)),s=bi.find((e=>"jb_north"===e.id));ki(o,e,t)?n(0,i=o):e.distanceTo(t,editolido.rad_to_nm)<=1500||(t.latitude>30&&e.latitude>30?n(0,i=s):t.longitude<-80&&e.longitude<-80?n(0,i=bi.find((e=>"jb_pacific"===e.id))):(t.latitude>30||e.latitude>30)&&e.atFraction(t,.5).latitude>=30&&ki(s,e,t)?n(0,i=s):n(0,i=bi.find((e=>"jb_south"===e.id))))}n(2,s=i.id)})),e.$$set=e=>{"name"in e&&n(1,o=e.name),"ofp"in e&&n(4,r=e.ofp),"selected"in e&&n(0,i=e.selected)},[i,o,s,a,r,function(t){de.call(this,e,t)},function(){i=J(this),n(0,i),n(3,a)}]}class Pi extends He{constructor(e){super(),Ue(this,e,Li,Ci,a,{name:1,ofp:4,selected:0})}}function Mi(t){let n,o,r,s,a,l,c,u=t[2]>=0?"◼︎":"▶︎";return{c(){n=F("label"),o=j(u),r=R(),s=F("input"),G(s,"name",t[0]),G(s,"type","checkbox"),s.checked=a=t[2]>=0,G(s,"class","svelte-1t9v15q"),G(n,"for",t[0]),G(n,"class","svelte-1t9v15q")},m(e,i){O(e,n,i),S(n,o),S(n,r),S(n,s),t[4](s),l||(c=[z(s,"change",t[3]),z(n,"click",t[3])],l=!0)},p(e,[t]){4&t&&u!==(u=e[2]>=0?"◼︎":"▶︎")&&B(o,u),1&t&&G(s,"name",e[0]),4&t&&a!==(a=e[2]>=0)&&(s.checked=a),1&t&&G(n,"for",e[0])},i:e,o:e,d(e){e&&A(n),t[4](null),l=!1,i(c)}}}function Si(e,t,n){let o;d(e,Lt,(e=>n(2,o=e)));let r,{name:i="simulator"}=t;return e.$$set=e=>{"name"in e&&n(0,i=e.name)},[i,r,o,()=>{n(1,r.checked=!r.checked,r),b(Lt,o=r.checked?0:-1,o)},function(e){me[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class Ti extends He{constructor(e){super(),Ue(this,e,Si,Mi,a,{name:0})}}const Ei=mt(),Oi=mt({});function Ai(e,{ofp:t,pos:n,fl:o}){const r=document.getElementById("gt-plane");let i,s,a,l,c,u=parseFloat(n),d=t,p=o;const m=e.clientHeight,f=e.clientWidth,g=getComputedStyle(document.body),h=parseFloat(g.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),v=e=>65*c+(l-130*c)*e/100,$=e=>{const t=v(e),n=65*c,o=f/3,r=n+o,i=l-n-(f-o);return t>r&&t<i?o-t:t<=r?o-r:o-i},y=(e,t,n,o)=>{e&&(e.style.left=n+(v(t)-e.clientWidth/2)+"px",e.style.top=(h-Math.round(-6e-4*o*o+.8985*o+46.264))*c-e.clientHeight/2+"px")},b=()=>{const t=s.height||700;a=s.cloneNode(),a.id="grametImg",a.style.display="none",a.crossOrigin="anonymous",a.addEventListener("load",x),a.addEventListener("error",w),document.body.appendChild(a),s.style.height=t/h*m+"px",s.style.objectFit="contain",s.style.position="absolute",s.style.opacity=.01,e.appendChild(s),l=s.clientWidth;const n=s.clientHeight/t;c=n;const o=$(u);s.style.top=`-${33*n}px`,s.style.left=`${o}px`},x=()=>{Ei.set("success"),r.style.display="block",s.style.opacity=1;const e=$(u);y(r,u,e,p)},w=()=>{r.style.display="none",Ei.set("error")},C=()=>{s&&s.removeEventListener("load",b),s&&s.removeEventListener("error",w),s&&s.remove(),Ct.set(!1),a&&a.removeEventListener("load",x),a&&a.removeEventListener("error",w),a&&a.remove(),a=void 0,s=void 0,i&&URL.revokeObjectURL(i),i=void 0},k=async e=>{s=document.createElement("img"),Ei.set("loading"),r.style.display="none",fetch(e.ogimetData.proxyImg).then((function(e){e.ok?(Oi.set({status:e.status,text:e.statusText||"OK"}),e.blob().then((e=>{s&&(i=URL.createObjectURL(e),s.addEventListener("load",b),s.addEventListener("error",w),s.src=i)}))):(w(),e.headers?Oi.set({status:e.status,text:e.statusText||e.headers.get("X-ofp2map-status")}):Oi.set({status:e.status,text:e.statusText||""}))})).catch((function(e){w(),Oi.set({status:0,text:e.message})}))};return k(t),{update({ofp:e,pos:t,fl:n}){if(u=parseFloat(t),e!==d)d=e,C(),k(e);else{const e=$(u);s.style.left=e+"px",p=n,y(r,u,e,n)}},destroy(){C()}}}const Ii=(e,{pos:t,fl:n})=>{const o=e.parentNode.querySelector("svg"),r=document.getElementById("grametImg"),i=getComputedStyle(document.body),s=parseFloat(i.getPropertyValue("--gramet-inner-height","384px").slice(0,-2)),a=parseFloat(e.parentNode.dataset.maxHeight||"370"),l=r.width,c=r.height,u=document.querySelector("nav").clientWidth;let d;d=0!==l?Math.min(u/l*c,a):Math.min(c,a);let p,m,f=parseFloat(t),g=0,h=0,v=n;const $=e=>(65+(l-130)*e/100)*p,y=(e,t,n)=>{e.style.left=g+($(t)-e.clientWidth/2+2)+"px",e.style.top=(s+33-2-Math.round(-6e-4*n*n+.8985*n+46.264))*p-e.clientHeight/2+h+"px"},b=e=>{const t=$(e),n=u/3,o=0+n,r=l*p-0-(u-n);return t>o&&t<r?n-t:t<=o?n-o:n-r},x=()=>{g=e.x,h=e.y,p=e.scale,m=u<=l*p,y(o,f,v)};return f<=0||f>=100?(p=0===l?a/(s+70):Math.min(u/l,d/(s+70)),h=0):(p=d/s,h=-33*p),u>l*p?(g=(u-l*p)/2,m=!1):(g=b(f),m=!0),y(o,f,v),r.style.display="block",e.style.maxHeight=`${a}px`,e.appendChild(r),e.setTransform({scale:p,x:g,y:h}),e.addEventListener("change",x),{update({pos:t,fl:n}){f=parseFloat(t),v=n,m&&(g=b(f),e.setTransform({x:g})),y(o,f,n)},destroy(){r.style.display="none",document.body.appendChild(r),e.removeEventListener("change",x)}}},Fi=e=>{const t=document.getElementById("grametImg"),n=t.width,o=t.height||700,r=parseFloat(e.dataset.maxHeight||"370"),i=document.querySelector("nav").clientWidth;let s=1;0!==n&&(s=i/n);const a=Math.min(s*o,r);e.style.height=`${a}px`};function Di(e){let t,n;return t=new Ti({}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function _i(e){let t,n,o,r,a,l,c,u,d,p,m,f=(0===e[0].gramet||100===e[0].gramet||e[1]>=0)&&Di();return{c(){var e,o,i;t=F("div"),n=F("pinch-zoom"),r=R(),a=D("svg"),l=D("use"),c=R(),f&&f.c(),i="0.3",(o="min-scale")in(e=n)?e[o]="boolean"==typeof e[o]&&""===i||i:G(e,o,i),U(l,"xlink:href","#plane-symbol"),G(a,"class","svelte-kdvpae"),G(t,"class","pinch-zoom-parent svelte-kdvpae"),G(t,"data-max-height",ji)},m(i,s){O(i,t,s),S(t,n),S(t,r),S(t,a),S(a,l),S(t,c),f&&f.m(t,null),d=!0,p||(m=[x(o=Ii.call(null,n,{pos:e[0].gramet,fl:e[0].fl})),x(Fi.call(null,t))],p=!0)},p(n,[r]){e=n,o&&s(o.update)&&1&r&&o.update.call(null,{pos:e[0].gramet,fl:e[0].fl}),0===e[0].gramet||100===e[0].gramet||e[1]>=0?f?3&r&&Ie(f,1):(f=Di(),f.c(),Ie(f,1),f.m(t,null)):f&&(Oe(),Fe(f,1,1,(()=>{f=null})),Ae())},i(e){d||(Ie(f),be((()=>{u||(u=je(t,ct,{y:ji},!0)),u.run(1)})),d=!0)},o(e){Fe(f),u||(u=je(t,ct,{y:ji},!1)),u.run(0),d=!1},d(e){e&&A(t),f&&f.d(),e&&u&&u.end(),p=!1,i(m)}}}const ji=370;function Ri(e,t,n){let o,r;return d(e,Nt,(e=>n(0,o=e))),d(e,Lt,(e=>n(1,r=e))),[o,r]}class Ni extends He{constructor(e){super(),Ue(this,e,Ri,_i,a,{})}}function zi(e,t){let n=t;const o=()=>n&&n.resize(),r=new IntersectionObserver(((e,t)=>{e.forEach((e=>{1===e.intersectionRatio&&o()}))}),{threshold:1});r.observe(e);const i=()=>{document&&document.visibilityState&&"visible"===document.visibilityState&&o()};return document.addEventListener("visibilitychange",i,!1),window.addEventListener("orientationchange",o),{update(e){n=e},destroy(){r.unobserve(e),r.disconnect(),window.removeEventListener("orientationchange",o),document.removeEventListener("visibilitychange",i),n&&n.remove()}}}function Wi(e){let t,n,o,r,i;return n=new li({props:{value:e[8]>=0?e[8]:0,max:e[7]}}),{c(){t=F("div"),We(n.$$.fragment),G(t,"class","cacheButton svelte-1j3yvi1"),X(t,"cacheError",e[9]),X(t,"cacheProgress",e[8]>=0||e[7]>0),X(t,"hidden",!e[1]||e[14]||!e[15]||!0===e[11][e[5].id])},m(a,l){O(a,t,l),Ge(n,t,null),o=!0,r||(i=z(t,"click",(function(){s(e[12]?Ki:e[22])&&(e[12]?Ki:e[22]).apply(this,arguments)})),r=!0)},p(o,r){e=o;const i={};256&r[0]&&(i.value=e[8]>=0?e[8]:0),128&r[0]&&(i.max=e[7]),n.$set(i),512&r[0]&&X(t,"cacheError",e[9]),384&r[0]&&X(t,"cacheProgress",e[8]>=0||e[7]>0),51234&r[0]&&X(t,"hidden",!e[1]||e[14]||!e[15]||!0===e[11][e[5].id])},i(e){o||(Ie(n.$$.fragment,e),o=!0)},o(e){Fe(n.$$.fragment,e),o=!1},d(e){e&&A(t),qe(n),r=!1,i()}}}function Gi(e){let t;return{c(){t=F("div"),t.textContent="Votre navigateur ne supporte pas l'affichage d'images au format .webp",G(t,"class","nowebp svelte-1j3yvi1")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function qi(e){let t,n;return t=new vi({props:{mapData:e[4]}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};16&n[0]&&(o.mapData=e[4]),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Ui(e){let t,n;return t=new Ni({}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Hi(e){let t,n,o,r,i,a,l,c,u,d,p,m,f,g,h,v,$,y,b,w,C,k=!e[13]&&e[4]&&e[4].mapOptions&&e[4].mapOptions.tiles&&e[4].mapOptions.tiles[0].endsWith(".webp");function L(t){e[24](t)}let P={ofp:e[1]};void 0!==e[5]&&(P.selected=e[5]),a=new Pi({props:P}),me.push((()=>ze(a,"selected",L))),a.$on("change",e[19]);let M=e[5]&&window.indexedDB&&Wi(e),T=k&&Gi(),E=e[4]&&!!e[1]&&(e[16]||e[17]>=0)&&qi(e);function I(t){e[25](t)}let D={};function _(t){e[27](t)}void 0!==e[6]&&(D.aircraftTypeSelectElement=e[6]),m=new gi({props:D}),me.push((()=>ze(m,"aircraftTypeSelectElement",I))),m.$on("change",e[20]);let j={};void 0!==e[0]&&(j.kmlOptions=e[0]),h=new lo({props:j}),e[26](h),me.push((()=>ze(h,"kmlOptions",_))),h.$on("change",e[21]),h.$on("save",e[28]);let z=e[18]&&Ui();return{c(){t=F("div"),o=R(),r=F("div"),i=F("div"),We(a.$$.fragment),c=R(),M&&M.c(),u=R(),T&&T.c(),d=R(),E&&E.c(),p=R(),We(m.$$.fragment),g=R(),We(h.$$.fragment),$=R(),z&&z.c(),y=N(),G(t,"id",e[2]),G(t,"class","svelte-1j3yvi1"),G(i,"class","projection svelte-1j3yvi1"),G(r,"class","mapmenu svelte-1j3yvi1")},m(s,l){O(s,t,l),O(s,o,l),O(s,r,l),S(r,i),Ge(a,i,null),S(i,c),M&&M.m(i,null),S(r,u),T&&T.m(r,null),O(s,d,l),E&&E.m(s,l),O(s,p,l),Ge(m,s,l),O(s,g,l),Ge(h,s,l),O(s,$,l),z&&z.m(s,l),O(s,y,l),b=!0,w||(C=x(n=zi.call(null,t,e[3])),w=!0)},p(e,o){(!b||4&o[0])&&G(t,"id",e[2]),n&&s(n.update)&&8&o[0]&&n.update.call(null,e[3]);const c={};2&o[0]&&(c.ofp=e[1]),!l&&32&o[0]&&(l=!0,c.selected=e[5],xe((()=>l=!1))),a.$set(c),e[5]&&window.indexedDB?M?(M.p(e,o),32&o[0]&&Ie(M,1)):(M=Wi(e),M.c(),Ie(M,1),M.m(i,null)):M&&(Oe(),Fe(M,1,1,(()=>{M=null})),Ae()),8208&o[0]&&(k=!e[13]&&e[4]&&e[4].mapOptions&&e[4].mapOptions.tiles&&e[4].mapOptions.tiles[0].endsWith(".webp")),k?T||(T=Gi(),T.c(),T.m(r,null)):T&&(T.d(1),T=null),e[4]&&e[1]&&(e[16]||e[17]>=0)?E?(E.p(e,o),196626&o[0]&&Ie(E,1)):(E=qi(e),E.c(),Ie(E,1),E.m(p.parentNode,p)):E&&(Oe(),Fe(E,1,1,(()=>{E=null})),Ae());const u={};!f&&64&o[0]&&(f=!0,u.aircraftTypeSelectElement=e[6],xe((()=>f=!1))),m.$set(u);const d={};!v&&1&o[0]&&(v=!0,d.kmlOptions=e[0],xe((()=>v=!1))),h.$set(d),e[18]?z?262144&o[0]&&Ie(z,1):(z=Ui(),z.c(),Ie(z,1),z.m(y.parentNode,y)):z&&(Oe(),Fe(z,1,1,(()=>{z=null})),Ae())},i(e){b||(Ie(a.$$.fragment,e),Ie(M),Ie(E),Ie(m.$$.fragment,e),Ie(h.$$.fragment,e),Ie(z),b=!0)},o(e){Fe(a.$$.fragment,e),Fe(M),Fe(E),Fe(m.$$.fragment,e),Fe(h.$$.fragment,e),Fe(z),b=!1},d(n){n&&A(t),n&&A(o),n&&A(r),qe(a),M&&M.d(),T&&T.d(),n&&A(d),E&&E.d(n),n&&A(p),qe(m,n),n&&A(g),e[26](null),qe(h,n),n&&A($),z&&z.d(n),n&&A(y),w=!1,C()}}}const Bi=e=>{kt.set(!1)},Ki=()=>!1;function Zi(e,t,n){let o,r,i,s,a,l;d(e,Ot,(e=>n(29,r=e))),d(e,_t,(e=>n(15,i=e))),d(e,kt,(e=>n(16,s=e))),d(e,Lt,(e=>n(17,a=e))),d(e,Ct,(e=>n(18,l=e)));const c=ue();let p,m,f,g,h,{kmlOptions:v}=t,{ofp:$}=t,y=0,b=-1,x=!1,w=[];const C={};let{id:k="map"}=t;async function L(){if($)try{n(23,w=await ii(0,m))}catch(e){n(23,w=[])}else n(23,w=[]);const e=document.querySelector(`#${k} .mapboxgl-ctrl-attrib-inner`);e&&(e.appendChild(document.createTextNode(" | ")),e.appendChild(g),e.appendChild(document.createTextNode(`${"2108k".substring(0,2)}.${"2108k".substring(2,4)}`)))}const P=e=>{(e=>{const{name:t,value:n}=e,o=Qe(t);if("icontext"===o)return Nr.forEach((([,t])=>t.changeIconText&&t.changeIconText(e)));if("linewidth"===o)return Nr.forEach((([,t])=>t.changeLineWidth&&t.changeLineWidth(e)));if("iconsize"===o)return Nr.forEach((([,t])=>t.changeIconSize&&t.changeIconSize(e)));const r=Object.fromEntries(Nr)[o];r&&(t.endsWith("-display")?n?r.show&&r.show(e):r.hide&&r.hide(e):t.endsWith("-label")?r.changeLabel&&r.changeLabel(e):t.endsWith("-pin")?r.changeMarker&&r.changeMarker(e):t.endsWith("-color")?r.changeLine&&r.changeLine(e):t.endsWith("-change")&&r.change&&r.change(e))})({map:p,mapData:m,name:e.detail.name,value:e.detail.value,ofp:$,kmlOptions:v,aircraftType:r}),c("save")};let M=!1;let S=!0;return(async()=>{const e=e=>{n(13,S=!(!e||"load"!==e.type)&&1==t.width)},t=new Image;t.onerror=e,t.onload=e,t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})(),le((()=>{mapboxgl.accessToken="pk.eyJ1IjoiZmx5aW5nZWVrIiwiYSI6ImNrYXpmZzhuYjBpczUycW1pZzZ1b2Z4NjAifQ.5S-VzSXpJkui8NDMlTU51Q",n(4,m=ti(k,f,$,v,r,L,!0)),Bi(),kt.reset(),n(3,p=m.map),m.geolocate.on("trackuserlocationstart",Bi)})),ce((()=>{m.geolocate.off("trackuserlocationstart",Bi),h.endFocusMode(),n(3,p=void 0),n(4,m=void 0)})),e.$$set=e=>{"kmlOptions"in e&&n(0,v=e.kmlOptions),"ofp"in e&&n(1,$=e.ofp),"id"in e&&n(2,k=e.id)},e.$$.update=()=>{8388608&e.$$.dirty[0]&&n(14,o=0===w.length)},[v,$,k,p,m,f,g,y,b,x,h,C,M,S,o,i,s,a,l,function(e){e.target.blur(),p&&p.remove(),n(8,b=-1),n(9,x=!1),n(23,w=[]),n(7,y=0),m&&m.geolocate&&m.geolocate.off("trackuserlocationstart",Bi);const t=u(kt);Bi(),n(4,m=ti(k,f,$,v,r,L)),n(3,p=m.map),m.geolocate.on("trackuserlocationstart",Bi),setTimeout((async()=>{await ye,kt.set(t)}),0)},function(e){e.target.blur(),P({detail:{value:r,name:"airport-change"}})},P,async e=>{if(M)return!1;n(12,M=!0),n(8,b=0);try{n(7,y=w.length),n(9,x=!1);try{await ot(4e3,fetch(`./manifest.json?dummy=${Date.now()}`,{cache:"no-store"}))}catch(e){return n(12,M=!1),n(9,x=!0),n(8,b=-1),!1}await async function(e,t){const n=e;let o=0,r=0;return await new Promise((e=>{const i=setInterval((async()=>{if(0===n.filter((e=>e)).length&&(clearInterval(i),e()),o>=5||r>n.length-1)return;const s=r++,a=n[s];o++;try{await fetch(a),t&&t()}catch(e){}o--,delete n[s]}),100)}))}(w,(()=>n(8,b++,b))),b>=y&&(n(11,C[f.id]=!0,C),n(11,C),n(23,w=[]),n(7,y=0),n(8,b=-1))}finally{n(12,M=!1),n(8,b=-1)}},w,function(e){f=e,n(5,f)},function(e){g=e,n(6,g)},function(e){me[e?"unshift":"push"]((()=>{h=e,n(10,h)}))},function(e){v=e,n(0,v)},function(t){de.call(this,e,t)}]}class Vi extends He{constructor(e){super(),Ue(this,e,Zi,Hi,a,{kmlOptions:0,ofp:1,id:2},null,[-1,-1])}}var Ji=["bottom-right","bottom-center","bottom-left","top-right","top-center","top-left","right-bottom","right-center","right-top","left-bottom","left-center","left-top"];const Yi="right",Qi="left",Xi="top",es="bottom";function ts(){return"undefined"!=typeof window&&"undefined"!=typeof document}const ns=(e,{top:t,bottom:n,left:o,right:r,height:i,width:s,clientWidth:a,clientHeight:l})=>{const c=t>i,u=n+i<l,d=o>s,p=r+s<a;return{top:()=>!c&&u?es:Xi,bottom:()=>c&&!u?Xi:es,left:()=>!d&&p?Yi:Qi,right:()=>!p&&d?Qi:Yi}[e]()},os=(e,{top:t,bottom:n,left:o,right:r,height:i,width:s,clientWidth:a,clientHeight:l})=>{const c=t+(n-t)/2,u=n>i,d=t+i<l,p=c-i/2>0&&c+i/2<l,m=r>s,f=o+s<a,g={top:()=>!u&&d?es:Xi,center:()=>p?"center":g.top(),bottom:()=>!d&&u?Xi:es,left:()=>!m&&f?Yi:Qi,right:()=>!f&&m?Qi:Yi};return g[e]()},{window:rs}=Ne,is=e=>({isOpen:1024&e[0]}),ss=e=>({toggle:e[12],isOpen:e[10],open:e[13],close:e[14]}),as=e=>({isOpen:1024&e[0]}),ls=e=>({toggle:e[12],isOpen:e[10],open:e[13],close:e[14]});function cs(e){let t,n,o;const r=e[26].content,i=p(r,e,e[25],ss);return{c(){t=F("div"),i&&i.c(),G(t,"class",n=y(`content ${e[4]||""}`)+" svelte-d6atc3")},m(n,r){O(n,t,r),i&&i.m(t,null),e[28](t),o=!0},p(e,s){i&&i.p&&(!o||33555456&s[0])&&g(i,r,e,e[25],o?f(r,e[25],s,is):h(e[25]),ss),(!o||16&s[0]&&n!==(n=y(`content ${e[4]||""}`)+" svelte-d6atc3"))&&G(t,"class",n)},i(e){o||(Ie(i,e),o=!0)},o(e){Fe(i,e),o=!1},d(n){n&&A(t),i&&i.d(n),e[28](null)}}}function us(e){let t,n,o,r,s,a,l,c,u,d;const m=e[26].parent,v=p(m,e,e[25],ls);let $=e[10]&&cs(e);return{c(){t=F("div"),n=F("div"),v&&v.c(),o=R(),r=F("div"),$&&$.c(),G(n,"class","svelte-d6atc3"),G(r,"class","content-wrapper svelte-d6atc3"),G(r,"style",s=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`),G(t,"class",a=y(`overlay ${e[11]}`)+" svelte-d6atc3"),G(t,"style",l=`z-index:${e[0]}; ${e[1]}`)},m(i,s){O(i,t,s),S(t,n),v&&v.m(n,null),e[27](n),S(t,o),S(t,r),$&&$.m(r,null),e[29](t),c=!0,u||(d=[z(rs,"mousedown",e[15]),z(rs,"keydown",e[16])],u=!0)},p(e,n){v&&v.p&&(!c||33555456&n[0])&&g(v,m,e,e[25],c?f(m,e[25],n,as):h(e[25]),ls),e[10]?$?($.p(e,n),1024&n[0]&&Ie($,1)):($=cs(e),$.c(),Ie($,1),$.m(r,null)):$&&(Oe(),Fe($,1,1,(()=>{$=null})),Ae()),(!c||961&n[0]&&s!==(s=`top: ${e[6]}px; left: ${e[7]}px; width: ${e[8]}px; height: ${e[9]}px; z-index:${e[0]};`))&&G(r,"style",s),(!c||2048&n[0]&&a!==(a=y(`overlay ${e[11]}`)+" svelte-d6atc3"))&&G(t,"class",a),(!c||3&n[0]&&l!==(l=`z-index:${e[0]}; ${e[1]}`))&&G(t,"style",l)},i(e){c||(Ie(v,e),Ie($),c=!0)},o(e){Fe(v,e),Fe($),c=!1},d(n){n&&A(t),v&&v.d(n),e[27](null),$&&$.d(),e[29](null),u=!1,i(d)}}}function ds(e,t,o){let r,i,s,a;const l=["isOpen","updateOnScroll","closeOnScroll","position","closeOnClickOutside","zIndex","onWindowKeyDown","style"];let c=$(t,l),{$$slots:u={},$$scope:d}=t;const p=ue(),m=Ji[0];let f,g,h,{isOpen:y=!1}=t,{updateOnScroll:b=!1}=t,{closeOnScroll:x=!1}=t,{position:w=m}=t,{closeOnClickOutside:C=!1}=t,{zIndex:k=1}=t,{onWindowKeyDown:L=(()=>{})}=t,{style:P=""}=t,M=null,S=0,T=0,E=0,O=0;function A(){ts()&&(window.addEventListener("resize",N),x?window.addEventListener("scroll",j):b&&window.addEventListener("scroll",N))}function I(){ts()&&(window.removeEventListener("resize",N),window.removeEventListener("scroll",N),window.removeEventListener("scroll",j))}var F;function D(e){const t=y,n=!0===e||!1===e?e:!y;(n&&i&&s||!n)&&o(17,y=n),t!==y&&(p("toggle",y),y?(A(),p("open")):(p("close"),I()))}function _(){a||D(!0)}function j(){a&&D(!1)}function R(e){const t=e.path||e.composedPath();return t.includes(f)||t.includes(g)}async function N(){if(await ye(),!a)return;Ji.includes(w)||o(18,w=m);const{top:e,bottom:t,left:n,right:r,width:i,height:s}=f.getBoundingClientRect(),{height:l,width:c}=g.getBoundingClientRect(),u=((e,t)=>{const n=Math.min(document.body.clientHeight,document.documentElement.clientHeight),o=Math.min(document.body.clientWidth,document.documentElement.clientWidth);Object.assign(t,{clientWidth:o,clientHeight:n});const[r,i]=e.split("-");return`${ns(r,t)}-${os(i,t)}`})(w,{top:e,bottom:t,left:n,right:r,height:l,width:c});M!==u&&o(4,M=u),o(6,S=e),o(7,T=n),o(8,E=i),o(9,O=s)}return le((()=>{a&&A()})),ce((()=>{ts()&&I()})),F=N,ae().$$.before_update.push(F),e.$$set=e=>{t=n(n({},t),v(e)),o(36,c=$(t,l)),"isOpen"in e&&o(17,y=e.isOpen),"updateOnScroll"in e&&o(19,b=e.updateOnScroll),"closeOnScroll"in e&&o(20,x=e.closeOnScroll),"position"in e&&o(18,w=e.position),"closeOnClickOutside"in e&&o(21,C=e.closeOnClickOutside),"zIndex"in e&&o(0,k=e.zIndex),"onWindowKeyDown"in e&&o(22,L=e.onWindowKeyDown),"style"in e&&o(1,P=e.style),"$$scope"in e&&o(25,d=e.$$scope)},e.$$.update=()=>{if(o(11,r=c.class||""),4&e.$$.dirty[0]&&o(24,i=!f||!!f.childNodes.length),8&e.$$.dirty[0]&&o(23,s=!g||!!g.childNodes.length),16777216&e.$$.dirty[0]&&!i)throw new Error("parent slot is required");if(8388608&e.$$.dirty[0]&&!s)throw new Error("content slot is required");25296896&e.$$.dirty[0]&&o(10,a=y&&i&&s)},[k,P,f,g,M,h,S,T,E,O,a,r,D,_,j,function(e){C&&a&&!R(e)&&j()},function(e){L&&a&&L(e,{isOpen:a,open:_,close:j,toggle:D,contains:R})},y,w,b,x,C,L,s,i,d,u,function(e){me[e?"unshift":"push"]((()=>{f=e,o(2,f)}))},function(e){me[e?"unshift":"push"]((()=>{g=e,o(3,g)}))},function(e){me[e?"unshift":"push"]((()=>{h=e,o(5,h)}))}]}class ps extends He{constructor(e){super(),Ue(this,e,ds,us,a,{isOpen:17,updateOnScroll:19,closeOnScroll:20,position:18,closeOnClickOutside:21,zIndex:0,onWindowKeyDown:22,style:1},null,[-1,-1])}}function ms(e){let t,o;const r=e[3].default,i=p(r,e,e[2],null);let s=[{href:e[0]},e[1]],a={};for(let e=0;e<s.length;e+=1)a=n(a,s[e]);return{c(){t=F("a"),i&&i.c(),q(t,a)},m(e,n){O(e,t,n),i&&i.m(t,null),o=!0},p(e,[n]){i&&i.p&&(!o||4&n)&&g(i,r,e,e[2],o?f(r,e[2],n,null):h(e[2]),null),q(t,a=function(e,t){const n={},o={},r={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(o[e]=1);for(const e in a)r[e]||(n[e]=a[e],r[e]=1);e[i]=a}else for(const e in s)r[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}(s,[(!o||1&n)&&{href:e[0]},e[1]]))},i(e){o||(Ie(i,e),o=!0)},o(e){Fe(i,e),o=!1},d(e){e&&A(t),i&&i.d(e)}}}function fs(e,t,o){const r=["href"];let i=$(t,r),{$$slots:s={},$$scope:a}=t,{href:l}=t;const c=l&&!l.startsWith("#")?Object.assign({rel:"noreferrer",target:"_blank"},i):i;return e.$$set=e=>{t=n(n({},t),v(e)),o(5,i=$(t,r)),"href"in e&&o(0,l=e.href),"$$scope"in e&&o(2,a=e.$$scope)},[l,c,a,s]}class gs extends He{constructor(e){super(),Ue(this,e,fs,ms,a,{href:0})}}function hs(t){let n;return{c(){n=F("div"),n.innerHTML='<p class="svelte-hcnibf">↻</p><p class="svelte-hcnibf">Mise à jour</p>',G(n,"class","gramet-thumbnail updating svelte-hcnibf")},m(e,t){O(e,n,t)},p:e,i:e,o:e,d(e){e&&A(n)}}}function vs(e){let t,n;return t=new ps({props:{position:"bottom-center",$$slots:{content:[Ls,({close:e})=>({10:e}),({close:e})=>e?1024:0],parent:[ys,({toggle:e})=>({11:e}),({toggle:e})=>e?2048:0]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};7212&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function $s(e){let t,n,o,r,a,l,c,u,d,p,m=e[1]&&Ps();return c=new ps({props:{position:"bottom-center",style:"margin-right: 0 !important;",isOpen:e[0],$$slots:{content:[Ss,({close:e})=>({10:e}),({close:e})=>e?1024:0],parent:[Ms]},$$scope:{ctx:e}}}),{c(){t=F("div"),n=D("svg"),o=D("circle"),r=R(),m&&m.c(),l=R(),We(c.$$.fragment),G(o,"cx","50"),G(o,"cy","50"),G(o,"r","50"),G(n,"id","gt-plane"),G(n,"viewBox","0 0 100 100"),G(n,"xmlns","http://www.w3.org/2000/svg"),G(n,"class","svelte-hcnibf"),G(t,"class","gramet-thumbnail svelte-hcnibf"),X(t,"open",e[1])},m(i,s){O(i,t,s),S(t,n),S(n,o),S(t,r),m&&m.m(t,null),O(i,l,s),Ge(c,i,s),u=!0,d||(p=[x(a=Ai.call(null,t,{ofp:e[2],pos:e[4].gramet,fl:e[4].fl})),z(t,"click",e[6])],d=!0)},p(e,n){e[1]?m||(m=Ps(),m.c(),m.m(t,null)):m&&(m.d(1),m=null),a&&s(a.update)&&20&n&&a.update.call(null,{ofp:e[2],pos:e[4].gramet,fl:e[4].fl}),2&n&&X(t,"open",e[1]);const o={};1&n&&(o.isOpen=e[0]),5120&n&&(o.$$scope={dirty:n,ctx:e}),c.$set(o)},i(e){u||(Ie(c.$$.fragment,e),u=!0)},o(e){Fe(c.$$.fragment,e),u=!1},d(e){e&&A(t),m&&m.d(),e&&A(l),qe(c,e),d=!1,i(p)}}}function ys(e){let t,n,o;return{c(){t=F("button"),t.innerHTML='<svg class="gramet-error svelte-hcnibf"><use xlink:href="#info-symbol"></use></svg>',G(t,"slot","parent"),G(t,"class","btn btn-light svelte-hcnibf")},m(r,i){O(r,t,i),n||(o=z(t,"click",(function(){s(e[11])&&e[11].apply(this,arguments)})),n=!0)},p(t,n){e=t},d(e){e&&A(t),n=!1,o()}}}function bs(e){let t;return{c(){t=j("ogimet")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function xs(e){let t,n,o,r=0!==e[5].status&&ks(e);return{c(){t=F("p"),t.textContent="A certaines heures le site ogimet est saturé, il faut essayer 2 ou 3 fois en temporisant de 30 secondes à chaque essai.",n=R(),r&&r.c(),o=N()},m(e,i){O(e,t,i),O(e,n,i),r&&r.m(e,i),O(e,o,i)},p(e,t){0!==e[5].status?r?r.p(e,t):(r=ks(e),r.c(),r.m(o.parentNode,o)):r&&(r.d(1),r=null)},d(e){e&&A(t),e&&A(n),r&&r.d(e),e&&A(o)}}}function ws(t){let n;return{c(){n=F("p"),n.textContent="Le serveur ogimet indique qu'il est indisponible (no grib data). Sa mise à jour débute normalement à 00:00z et c'est long..."},m(e,t){O(e,n,t)},p:e,d(e){e&&A(n)}}}function Cs(e){let t,n,o,r,i,s=e[5].text+"";return{c(){t=F("p"),n=j('Erreur construction route GRAMET: Station "'),o=F("code"),r=j(s),i=j("\" non reconnue par ogimet,\n                    merci de me remonter l'information pour que je corrige l'application. Inutile de réessayer.")},m(e,s){O(e,t,s),S(t,n),S(t,o),S(o,r),S(t,i)},p(e,t){32&t&&s!==(s=e[5].text+"")&&B(r,s)},d(e){e&&A(t)}}}function ks(e){let t,n,o,r,i=(e[5].text||e[5].status)+"";return{c(){t=F("p"),n=j("Pour information, le proxy a retourné: "),o=F("code"),r=j(i)},m(e,i){O(e,t,i),S(t,n),S(t,o),S(o,r)},p(e,t){32&t&&i!==(i=(e[5].text||e[5].status)+"")&&B(r,i)},d(e){e&&A(t)}}}function Ls(e){let t,n,o,r,a,l,c,u,d,p,m,f,g,h,v,$,y;function b(e,t){return 409===e[5].status?Cs:"no grib data"===e[5].text?ws:xs}f=new gs({props:{href:e[2].ogimetData.url,target:"_blank",$$slots:{default:[bs]},$$scope:{ctx:e}}});let x=b(e),w=x(e);return{c(){t=F("div"),n=F("div"),o=F("div"),r=F("span"),r.textContent="😱: Erreur de récupération du Gramet",a=R(),l=F("button"),c=R(),u=F("div"),d=F("p"),p=F("a"),p.textContent="essayez à nouveau",m=j(" ou allez sur "),We(f.$$.fragment),g=j("."),h=R(),w.c(),G(l,"type","button"),G(l,"class","btn-close ms-auto"),G(l,"aria-label","Close"),G(o,"class","card-header"),G(p,"href","."),G(u,"class","card-body"),G(n,"class","overlay card"),Z(n,"position","absolute"),G(t,"slot","content"),Z(t,"width","350px")},m(i,b){O(i,t,b),S(t,n),S(n,o),S(o,r),S(o,a),S(o,l),S(n,c),S(n,u),S(u,d),S(d,p),S(d,m),Ge(f,d,null),S(d,g),S(u,h),w.m(u,null),v=!0,$||(y=[z(l,"click",(function(){s(e[10])&&e[10].apply(this,arguments)})),z(p,"click",W(e[8]))],$=!0)},p(t,n){e=t;const o={};4&n&&(o.href=e[2].ogimetData.url),4096&n&&(o.$$scope={dirty:n,ctx:e}),f.$set(o),x===(x=b(e))&&w?w.p(e,n):(w.d(1),w=x(e),w&&(w.c(),w.m(u,null)))},i(e){v||(Ie(f.$$.fragment,e),v=!0)},o(e){Fe(f.$$.fragment,e),v=!1},d(e){e&&A(t),qe(f),w.d(),$=!1,i(y)}}}function Ps(e){let t,n;return{c(){t=D("svg"),n=D("use"),U(n,"xlink:href","#close-symbol"),G(t,"class","gramet-close svelte-hcnibf")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&A(t)}}}function Ms(e){let t;return{c(){t=F("div"),G(t,"slot","parent"),G(t,"class","d-none")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Ss(e){let t,n,o,r,a,l,c,u,d,p,m,f;return{c(){t=F("div"),n=F("div"),o=F("div"),r=F("span"),r.textContent="Nouveau GRAMET disponible",a=R(),l=F("button"),c=R(),u=F("div"),d=F("p"),p=F("button"),p.textContent="Mettre à jour",G(l,"type","button"),G(l,"class","btn-close ms-auto"),G(l,"aria-label","Close"),G(o,"class","card-header"),G(p,"class","btn btn-primary"),G(d,"class","text-center mt-3"),G(u,"class","card-body"),G(n,"class","overlay card"),Z(n,"left","calc(-1rem - 35px)"),Z(n,"max-width","290px"),Z(n,"top","20px"),G(t,"slot","content"),Z(t,"width","290px")},m(i,g){O(i,t,g),S(t,n),S(n,o),S(o,r),S(o,a),S(o,l),S(n,c),S(n,u),S(u,d),S(d,p),m||(f=[z(l,"click",(function(){s(e[10])&&e[10].apply(this,arguments)})),z(p,"click",e[7])],m=!0)},p(t,n){e=t},d(e){e&&A(t),m=!1,i(f)}}}function Ts(e){let t,n,o,r;const i=[$s,vs,hs],s=[];function a(e,t){return"error"!==e[3]&&"reload"!==e[3]?0:"reload"!==e[3]?1:"reload"===e[3]?2:-1}return~(t=a(e))&&(n=s[t]=i[t](e)),{c(){n&&n.c(),o=N()},m(e,n){~t&&s[t].m(e,n),O(e,o,n),r=!0},p(e,[r]){let l=t;t=a(e),t===l?~t&&s[t].p(e,r):(n&&(Oe(),Fe(s[l],1,1,(()=>{s[l]=null})),Ae()),~t?(n=s[t],n?n.p(e,r):(n=s[t]=i[t](e),n.c()),Ie(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(Ie(n),r=!0)},o(e){Fe(n),r=!1},d(e){~t&&s[t].d(e),e&&A(o)}}}function Es(e,t,n){let o,r,i,s,a;d(e,Ct,(e=>n(1,o=e))),d(e,Pt,(e=>n(2,r=e))),d(e,Ei,(e=>n(3,i=e))),d(e,Nt,(e=>n(4,s=e))),d(e,Oi,(e=>n(5,a=e)));let l=!1;const c=async()=>{b(Ei,i="reload",i),b(Ct,o=!1,o),n(0,l=!1),await ye,b(Ei,i="loading",i)},u=async e=>{if("workbox-broadcast-update"===e.data.meta&&"CACHE_UPDATED"===e.data.type){const{updatedURL:t}=e.data.payload;t===r.ogimetData.proxyImg&&(o?n(0,l=!0):c())}};navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",u),ce((()=>{navigator&&navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",u)}));return[l,o,r,i,s,a,()=>{"success"===i&&b(Ct,o=!o,o)},c,()=>b(Ei,i="loading",i)]}class Os extends He{constructor(e){super(),Ue(this,e,Es,Ts,a,{})}}var As={"OFP2MAP-AURORA":{version:3,url:"https://www.icloud.com/shortcuts/0da61ab87f40469db1842622b4d951ff",description:"NOAA Aurora Forecast 30-90mn et prévisions à 3 jours."},"OFP2MAP-ETOPS":{version:4,url:"https://www.icloud.com/shortcuts/271499bbcfea414eaa7d2d6ec96ae235",description:"Affiche un cartouche ETOPS actualisé."},"OFP2MAP-FAA WIPs":{version:2,url:"https://www.icloud.com/shortcuts/17bd4ab2ebec430596137173b131ce38",description:"Affiche la carte des travaux sol sur les terrains US"},"OFP2MAP-MENU":{version:2,url:"https://www.icloud.com/shortcuts/2db576c98d8d48d095bf751f56b54f56",description:"Menu affichant l'ensemble des plugins installés, utile pour un accès rapide."},"OFP2MAP-PLANE FINDER":{version:2,url:"https://www.icloud.com/shortcuts/3f67e5d6f47d42d0b16fd620a4170407",description:"Recherche l'avion avec flightaware.com."},"OFP2MAP-PLUGIN":{version:2,url:"https://www.icloud.com/shortcuts/28d507b414fb45979be635cc87b2d70d",description:"Modèle à dupliquer pour coder un plugin, permet de visualiser les données disponibles."}};const Is=["CDG","ORY"],Fs=(e,t)=>e.longitude>=-30&&e.longitude<=40&&e.latitude>=25&&t.longitude>=-30&&t.longitude<=40&&t.latitude>=25?"MC":"LC",Ds=(e,t)=>"PAR"===e?Is.includes(t):e===t,_s=(e,{base:t})=>{const n=e.legs[e.legs.length-1];return n&&(e.OUT=e.legs[0].OUT,e.IN=n.IN,e.TVSV=e.legs.reduce(((e,t)=>t.blockTime+e),0),Ds(t,n.destIATA)||(e.layover=n.destIATA,e.layoverTZ=n.destTZ)),e},js=e=>{const t={};if(!e)return t;let n,o,r,i={},s=[];try{const l=editolido.extract(e.text,"CREW PAIRING","Generated");let c,u;if(o=/TSV\s+-\s+(\d{2}):(\d{2})/u,r=o.exec(l),n=r?parseInt(r[2],10)+60*parseInt(r[1],10):0,o=/DATE\s:\s(\d+)\.(\S{3})\.(\d{4})/u,r=o.exec(l),!r)throw new Error("could not extract pairing month/year");if(u=parseInt(r[3],10),c=editolido.months3.indexOf(r[2])+1,c<=0)throw new Error("could not extract pairing month");o=new RegExp(String.raw`>\s${e.infos.depIATA}\s\(([-+.0-9]+)\)`,"u"),r=o.exec(l),t.depTZ=r?r[1]:"",o=new RegExp(String.raw`>\s${e.infos.destIATA}\s\(([-+.0-9]+)\)`,"u"),r=o.exec(l),t.destTZ=r?r[1]:"",o=/OPERATION VERSION\s(.+?)\s\d+\sNB PAX/u,r=o.exec(l),t.aircraftOpsVersion=r?r[1]:"",o=/(\d{2})\/(\d{2})\s\S+\s(\S{3})\s>\s(\S{3})\s\(([-+\d.]+)\)\s(\d{2}):(\d{2})\s(?:\d{2}:\d{2})\s(\d{2}):(\d{2})/gu;let d,p=0,m={legs:[]},f="MC",g="MC1";for(r of l.matchAll(o)){const t=parseInt(r[2],10),n=parseInt(r[1],10),o=t<c?u+1:u,i=new Date(Date.UTC(o,t-1,n,parseInt(r[6],10),parseInt(r[7],10))),l=parseInt(r[9],10)+60*parseInt(r[8],10),h=new Date(i.getTime()+6e4*l),v=r[3],$=editolido.iata2GeoPoint(v);d||(d=Is.includes(v)?"PAR":v);const y=editolido.iata2GeoPoint(r[4]),b=Math.round($.distanceTo(y,editolido.rad_to_nm));if("LC"!==f&&"LC"===Fs($,y)&&(f="LC"),"LC"!==g){const e=(a=b)<=2100?"MC1":a<=3e3?"MC2":"LC";("LC"===e||"MC2"===e&&"MC1"===g)&&(g=e)}0!==m.legs.length&&i-m.legs[m.legs.length-1].IN>36e6&&(s.push(_s(m,{base:d})),m={legs:[]}),m.legs.push({depICAO:$.name,depIATA:v,destIATA:r[4],destICAO:y.name,destTZ:r[5],depTZ:p,OUT:i,IN:h,blockTime:l,isOFP:i.toISOString()===e.infos.ofpOUT.toISOString()}),p=r[5]}m.legs.length>0&&s.push(_s(m,{base:d})),i.baseTZ=p,i.base=d,s.length>0&&(s[0].legs[0].depTZ=p),i.flightTypePNT="MC2"===g&&((e,t,n)=>{const o=[];for(const r of n){const n=r.legs[r.legs.length-1];Ds(e,n.destIATA)||o.push(Math.abs(parseFloat(n.destTZ)-t))}return Math.max(o)})(d,parseFloat(i.baseTZ),s)>=4?"LC":g,i.flightTypePNC=f}catch(e){editolido.StringExtractException,s=[]}var a;t.pairing=i,t.pairing.duties=s;const l=s.filter((e=>e.legs.reduce(((e,t)=>t.isOFP||e),!1))).pop();if(t.scheduledTSV=n,l&&(l.TSV=n,l.legs.length>0)){const e=l.legs[l.legs.length-1];Ds(i.base,e.destIATA)||(l.layover=e.destIATA,l.layoverTZ=e.destTZ)}return t.duty=l,t};function Rs(e){let t;return{c(){t=F("p"),t.textContent="ETOPS",G(t,"class","etops svelte-pynkq6")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Ns(t){let n,o,r,i,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x=t[1].infos.flightNo+"",w=t[1].infos.depICAO+"",C=t[1].infos.destICAO+"",k=t[1].infos.ofpTextDate+"",L=t[1].infos.ofp.includes("/")?"":"ofp: ",P=t[1].infos.ofp+"",M=t[2]<20&&Rs(),T=navigator&&navigator.share&&function(e){let t,n;return{c(){t=D("svg"),n=D("use"),U(n,"xlink:href","#share-symbol"),G(t,"class","svelte-pynkq6")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&A(t)}}}();return{c(){n=F("div"),M&&M.c(),o=R(),r=F("div"),i=F("p"),s=F("b"),a=j(x),l=R(),c=j(w),u=j("-"),d=j(C),p=R(),m=F("p"),f=j(k),g=R(),h=j(L),v=j(P),$=R(),T&&T.c(),G(i,"class","svelte-pynkq6"),G(m,"class","svelte-pynkq6"),G(r,"class","details svelte-pynkq6"),G(n,"class","infos svelte-pynkq6"),X(n,"cursor-pointer",navigator&&navigator.share)},m(e,x){O(e,n,x),M&&M.m(n,null),S(n,o),S(n,r),S(r,i),S(i,s),S(s,a),S(i,l),S(i,c),S(i,u),S(i,d),S(r,p),S(r,m),S(m,f),S(m,g),S(m,h),S(m,v),S(m,$),T&&T.m(m,null),y||(b=z(n,"click",navigator&&navigator.share?t[0]:null),y=!0)},p(e,[t]){e[2]<20?M||(M=Rs(),M.c(),M.m(n,o)):M&&(M.d(1),M=null),2&t&&x!==(x=e[1].infos.flightNo+"")&&B(a,x),2&t&&w!==(w=e[1].infos.depICAO+"")&&B(c,w),2&t&&C!==(C=e[1].infos.destICAO+"")&&B(d,C),2&t&&k!==(k=e[1].infos.ofpTextDate+"")&&B(f,k),2&t&&L!==(L=e[1].infos.ofp.includes("/")?"":"ofp: ")&&B(h,L),2&t&&P!==(P=e[1].infos.ofp+"")&&B(v,P)},i:e,o:e,d(e){e&&A(n),M&&M.d(),T&&T.d(),y=!1,b()}}}function zs(e,t,n){let o,r,i;d(e,St,(e=>n(3,r=e))),d(e,Pt,(e=>n(1,i=e)));const s=e=>{const t=[],n=e=>e.getUTCHours().toString().padStart(2,"0"),o=e=>e.getUTCMinutes().toString().padStart(2,"0");for(const r of e)if("ETOPS"===r.description)t.push(`\n**Appui**: ${r.name} ${r.runway} - Plage: **${n(r.startWindow)}${o(r.startWindow)}-${n(r.endWindow)}${o(r.endWindow)}**`);else{let e;e=r.description.startsWith("ETP")?`**${r.description}** ${r.name}`:`**${r.description.substring(0,3)}**${r.description.substring(3)}`,t.push(`\n${e} ➔ ETO: **${n(r.ETO)}:${o(r.ETO)}** | ΔFUEL: **${r.fuelMargin}**\n`)}return t},a=(e,t)=>{let n="";const o=[];for(const[r,i,,,s,a,l,c,u,d,p]of function*(e,t){if(!e||!t)return[];let n="";const o=e.infos.ralts;if(o.length>0)try{n=e.text.extract("ETOPS SUMMARY","SUMMARY-").replace(e.removePageFooterRegex,"")}catch(e){}const r=String.raw`(EEP\(\S{4}\)|ETP\S+|EXP\(\S{4}\))\s+\d{2}\.\d{2}\s+(\S+)\s+(\S+)\s+EET (\d{2})\.(\d{2}) .+? ([\d.]+)\/EFOB ([\d.]+)(?:.+?(${o.join("|")})\s(\S+).+?\sREQ\s(\d{2})(\d{2})-(\d{2})(\d{2}))?`,i=new RegExp(r,"gm"),s=new Date(t),a=t-e.infos.ofpOFF;s.setUTCHours(0,0);const l=n.matchAll(i);for(let[,e,n,o,r,i,c,u,d,p,m,f,g,h]of l){const l=editolido.dm_normalizer([n,o]),v=60*parseInt(r,10)+parseInt(i,10),$=new Date(t.getTime()+6e4*v),y=Math.round(10*(parseFloat(u)-parseFloat(c)))/10,b=void 0!==m&&void 0!==f?new Date(s.getTime()+36e5*parseInt(m,10)+6e4*parseInt(f,10)+a):void 0,x=void 0!==g&&void 0!==h?new Date(s.getTime()+36e5*parseInt(g,10)+6e4*parseInt(h,10)+a):void 0;yield[e,$,parseFloat(c),parseFloat(u),y,d,p,b,x,l,v]}}(e,t)){const t={latitude:d.latitude,longitude:d.longitude,EET:p,ETO:i,fuelMargin:s.toFixed(1)};if(r.startsWith("ETP")?(t.name=`${n}/${a}`,t.description=r):(t.name=r.substring(4,8),t.description=r.substring(0,3)),o.push(t),a){const t=e.infos.raltPoints.filter((e=>e.name===a)).pop();let r,i;t&&(r=t.latitude,i=t.longitude),o.push({name:a,description:"ETOPS",latitude:r,longitude:i,runway:l,startWindow:c,endWindow:u}),n=a}}return o},l=e=>e.timeMatrix.length>0?e.timeMatrix.map((([e,t,n])=>({name:e.name,tte:t,fl:n,latitude:e.latitude.toFixed(6),longitude:e.longitude.toFixed(6)}))):e.route.points.map((e=>({name:e.name,latitude:e.latitude.toFixed(6),longitude:e.longitude.toFixed(6)})));return e.$$.update=()=>{2&e.$$.dirty&&n(2,o=i.infos.minFuelMarginETOPS/(i.infos.tripFuel/i.infos.flightTime))},[async()=>{const e=i,t=r,n=["EEP","EXP","raltPoints","rawFPL","inFlightStart","inFlightReleased"],o=Object.fromEntries(Object.entries(e.infos).filter((([e,t])=>!n.includes(e)))),c={title:"OFP2MAP",text:JSON.stringify({...o,lidoFPL:e.lidoRoute(!1).join(" "),realOFF:t,altnETOPS:e.infos.ralts,route:l(e),...js(e),registration:e.infos.aircraftRegistration,ralts:e.infos.ralts,etopsOutput:s(a(e,t)),"ofp2map-takeoff":t,plugins:As,rawText:e.text})};try{await navigator.share(c)}catch(e){}return!1},i,o]}class Ws extends He{constructor(e){super(),Ue(this,e,zs,Ns,a,{shareOFP:0})}get shareOFP(){return this.$$.ctx[0]}}function Gs(t){let n,o,r,s,a,l,c,u,d,p,m;return{c(){n=F("div"),o=D("svg"),r=D("use"),s=R(),a=F("label"),l=j("Heure de décollage"),c=R(),u=F("input"),U(r,"xlink:href","#takeoff-symbol"),G(o,"class","svelte-12zw33h"),X(o,"show",t[2]||t[3]>=0),X(o,"hide",!(t[2]||t[3]>=0)),G(a,"for",t[0]),G(a,"class","svelte-12zw33h"),G(u,"id",t[0]),G(u,"name",t[0]),G(u,"type","time"),u.value=d=t[4](t[1].getUTCHours(),t[1].getUTCMinutes()),G(u,"class","svelte-12zw33h"),G(n,"class","svelte-12zw33h")},m(e,i){O(e,n,i),S(n,o),S(o,r),S(n,s),S(n,a),S(a,l),S(n,c),S(n,u),p||(m=[z(o,"click",t[7]),x(bn.call(null,u)),z(u,"change",t[5])],p=!0)},p(e,[t]){12&t&&X(o,"show",e[2]||e[3]>=0),12&t&&X(o,"hide",!(e[2]||e[3]>=0)),1&t&&G(a,"for",e[0]),1&t&&G(u,"id",e[0]),1&t&&G(u,"name",e[0]),2&t&&d!==(d=e[4](e[1].getUTCHours(),e[1].getUTCMinutes()))&&(u.value=d)},i:e,o:e,d(e){e&&A(n),p=!1,i(m)}}}function qs(e,t,n){let o,r,i,s,a;d(e,St,(e=>n(8,r=e))),d(e,Pt,(e=>n(6,i=e))),d(e,kt,(e=>n(2,s=e))),d(e,Lt,(e=>n(3,a=e)));let{name:l="take-off"}=t;const c=(e,t)=>`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return e.$$set=e=>{"name"in e&&n(0,l=e.name)},e.$$.update=()=>{64&e.$$.dirty&&n(1,o=(e=>{const t=new Date(e.infos.ofpOFF.getTime());return b(St,r=t,r),t})(i))},[l,o,s,a,c,e=>{let t,n;""==e.target.value?(n=o.getUTCHours(),t=o.getUTCMinutes(),e.target.blur(),e.target.value=c(n,t)):(n=parseFloat(e.target.value.slice(0,2)),t=parseFloat(e.target.value.slice(3)));let i=new Date(o);i.setUTCMinutes(t),i.setUTCHours(n);const s=(i.getTime()-o.getTime())/6e4;s<-720?i=new Date(i.getTime()+864e5):s>720&&(i=new Date(i.getTime()-864e5)),b(St,r=i,r),i.toISOString()!==o.toISOString()?e.target.classList.add("changed"):e.target.classList.remove("changed")},i,()=>b(kt,s=!s,s)]}class Us extends He{constructor(e){super(),Ue(this,e,qs,Gs,a,{name:0})}}const Hs=Math.PI,Bs=Math.sin,Ks=Math.cos,Zs=Math.tan,Vs=Math.asin,Js=Math.acos,Ys=Math.atan2,Qs=180/Hs,Xs=Hs/180,ea=2451545,ta=e=>e.valueOf()/864e5-.5+2440588,na=e=>(ta(e)-ea)/36525,oa=e=>((e,t)=>(e%t+t)%t)(280.46646+e*(36000.76983+3032e-7*e),360),ra=e=>357.52911+e*(35999.05029-1537e-7*e),ia=e=>oa(e)+(e=>{const t=Xs*ra(e);return Bs(t)*(1.914602-e*(.004817+14e-6*e))+Bs(2*t)*(.019993-101e-6*e)+289e-6*Bs(3*t)})(e),sa=e=>ia(e)-.00569-.00478*Bs(Xs*(125.04-1934.136*e)),aa=e=>(e=>23+(26+(21.448-e*(46.815+e*(59e-5-.001813*e)))/60)/60)(e)+.00256*Ks(Xs*(125.04-1934.136*e)),la=e=>{const t=Xs*aa(e),n=Xs*sa(e),o=Bs(t)*Bs(n);return Vs(o)},ca=e=>{var t=Xs*aa(e),n=Xs*sa(e),o=Ks(t)*Bs(n),r=Ks(n);return Ys(o,r)},ua=(e,t)=>{const{longitude:n}=t,o=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),s=na(e),a=(e=>{const t=(e=>.016708634-e*(42037e-9+1.267e-7*e))(e),n=Xs*aa(e),o=Xs*oa(e),r=Xs*ra(e),i=Math.pow(Zs(n/2),2),s=i*Bs(2*o)-2*t*Bs(r)+4*t*i*Bs(r)*Ks(2*o)-.5*i*i*Bs(4*o)-1.25*t*t*Bs(2*r);return Qs*s*4})(s)+4*n,l=la(s);let c=(60*o+r+i/60+a)%1440/4-180;c<-180&&(c+=360);const u=t.latitude*Xs;let d=Bs(u)*Bs(l)+Ks(u)*Ks(l)*Ks(Xs*c);d>1?d=1:d<-1&&(d=-1);const p=Js(d);return{elevation:90-Qs*p}},da=[[-15,"night"],[-12,"astronomical twilight"],[-6,"nautical twilight"],[-.833,"civil twilight"]],pa=new Map([["night",([e,t])=>fa(e,t)?"astronomicalDawn":"nightStart"],["astronomical twilight",([e,t])=>fa(e,t)?"nauticalDawn":"astronomicalDusk"],["nautical twilight",([e,t])=>fa(e,t)?"civilDawn":"nauticalDusk"],["civil twilight",([e,t])=>fa(e,t)?"sunrise":"civilDusk"],["day",([e,t])=>fa(e,t)?"dayStart":"sunset"]]),ma=Array.from(pa.keys()),fa=(e,t)=>ma.indexOf(t)>=ma.indexOf(e),ga=(e,t,n=0)=>{const o=ua(e,t).elevation,r=1.15*Math.sqrt(100*n)/60;for(const[e,t]of da)if(o<=e-r)return{state:t,elevation:o};return{state:"day",elevation:o}},ha=e=>ta(e)-ea,va=23.4397*Xs,$a=(e,t)=>Ys(Bs(e)*Ks(va)-Zs(t)*Bs(va),Ks(e)),ya=(e,t)=>Vs(Bs(t)*Ks(va)+Ks(t)*Bs(va)*Bs(e)),ba=e=>{const t=Xs*(134.963+13.064993*e),n=Xs*(93.272+13.22935*e),o=Xs*(218.316+13.176396*e)+6.289*Xs*Bs(t),r=5.128*Xs*Bs(n),i=385001-20905*Ks(t);return{ra:$a(o,r),dec:ya(o,r),dist:i}},xa=e=>{const t=na(e),n={dec:la(t),ra:ca(t)},o=ba(ha(e)),r=149598e3,i=Js(Bs(n.dec)*Bs(o.dec)+Ks(n.dec)*Ks(o.dec)*Ks(n.ra-o.ra)),s=Ys(r*Bs(i),o.dist-r*Ks(i)),a=Ys(Ks(n.dec)*Bs(n.ra-o.ra),Bs(n.dec)*Ks(o.dec)-Ks(n.dec)*Bs(o.dec)*Ks(n.ra-o.ra));return{fraction:(1+Ks(s))/2,phase:.5+.5*s*(a<0?-1:1)/Math.PI,angle:a}},wa=function(e,t){var n=-t.longitude*Xs,o=t.latitude*Xs,r=ha(e),i=ba(r),s=((e,t)=>Xs*(280.16+360.9856235*e)-t)(r,n)-i.ra;return{altitude:((e,t,n)=>Vs(Bs(t)*Bs(n)+Ks(t)*Ks(n)*Ks(e)))(s,o,i.dec),parallacticAngle:Ys(Bs(s),Zs(o)*Ks(i.dec)-Bs(i.dec)*Ks(s))}},Ca=(e,t,n=0)=>{const o=1.15*Xs*Math.sqrt(100*n)/60,r=wa(e,t).altitude;return{state:r>-.005794821282742547-o,elevation:Qs*r}},ka=new Map([[!1,()=>"moonrise"],[!0,()=>"moonset"]]),La={name:"sun",getState:ga,stateMap:pa},Pa={name:"moon",getState:Ca,stateMap:ka};function*Ma({prev:e,next:t,takeOffTime:n,flightTime:o,segmentLength:r,getState:i,stateMap:s,increment:a=3e4}){let l=e.state;const c=6e4*e.sum,u=6e4*t.sum;for(let d=c+a;d<=u;d+=a){let a=e.fl;d>=u&&(a=t.fl);const p=new Date(n+d);let m;const f=u-c;if(0===f)m=t.p;else{const n=(d-c)/f;m=e.p.atFraction(t.p,n,r)}const{state:g}=i(p,m,a);if(g!==l){const e=Math.round(1e3*d/o)/10,n=s.get(l)([l,g]);if(yield{position:m,type:n,date:p,fl:a,relpos:e},g===t.state)break}l=g}}const Sa=()=>({[Pa.name]:[],[La.name]:[],route:[]}),Ta=ft([Pt,St],(([e,t])=>{if(!t||!e||0===e.timeMatrix.length)return Sa();const n=t.getTime(),o=Sa(),r=e.timeMatrix,i=e.distanceMatrix;let s=r.length-1;const a=6e4*r[s][1],l=[];for(const e of[La,Pa]){const t=[];let c=null;for(const[o,[u,d,p]]of r.entries()){let r=p;0!==o&&o!==s||(r=0);const m=new Date(n+6e4*d),f=e.getState(m,u,r).state,g={p:u,sum:d,fl:r,state:f};if(c&&f!==c.state){const r={prev:c,next:g,takeOffTime:n,flightTime:a,segmentLength:i[o][1]-i[o-1][1],getState:e.getState,stateMap:e.stateMap,increment:"sun"===e.name?3e4:6e4};for(const n of Ma(r))t.push(n),e===La&&l.push(n)}c=g,e===La&&l.push({position:u,type:f,date:m,relpos:Math.round(1e3*d*6e4/a)/10})}o[e.name]=t}return o.route=l,o}),Sa()),Ea=e=>{switch(e){case 0:case 1:case 2:return"#69B34C";case 3:return"#ACB334";case 4:return"#FAB733";case 5:return"#FF8E15";case 6:return"#FF4E11";case 7:case 8:case 9:return"#FF0D0D";default:return"lightgray"}},Oa=mt(),Aa=async()=>fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").then((e=>e.json())).then((e=>{try{const t=[];for(let n=e.length-1;n>=1;n--){const[o,r]=e[n],i=Date.parse(o.replace(" ","T")+"Z");t.push([i,parseFloat(r)])}Oa.set(t)}catch(e){}})).catch((function(e){})),Ia=ft([Tt,St,Oa],(([e,t,n])=>{if(!e||!t||!n)return;let o=[];const r=t.getTime(),i=e-t;const s=e.getTime()+0,a=st(n,(e=>e[0]<=s)),l=r+0,c=st(n,(e=>e[0]<=l));c>=0&&a>=0&&(o=n.slice(a,c+1));const u=o.map((e=>({date:new Date(e[0]-0),kp:e[1],relpos:Math.round(1e4*(e[0]-0-r)/i)/100})));return{timetable:u,get:e=>{if(e)for(let t=0;t<u.length;t++)if(e>=u[t].date)return u[t].kp;return-1}}})),Fa=ft([Ta,Ia],(([e,t])=>{if(0===e.route.length||!t)return[];const n=[];let o=[];for(const{position:r,date:i,type:s,relpos:a}of e.route){const e=t.get(i);["night","astronomicalDusk","astronomicalDawn"].includes(s)&&Math.round(_a(r))<=e?o.push({position:r,date:i,relpos:a,predictedKp:e}):o.length>0&&(n.push(o),o=[])}o.length>0&&n.push(o);const r=[],i=3e5;for(const e of n){const t=e.length-1,n=e[0].date.getTime(),o=e[t].date.getTime(),s=1===e.length?3e5:0,a=Math.floor((n-s)/i)*i,l=Math.ceil((o+s)/i)*i,c=a/n*e[0].relpos,u=l/o*e[t].relpos;r.push({period:[new Date(a),new Date(l)],relpos:[c,u]})}return r})),Da=[80.7,-72.7],_a=e=>{if(e.latitude<=40)return[-90,99];const t=90-e.distanceTo(new editolido.GeoPoint(Da),editolido.rad_to_deg);return t>66.5?0:(66.5-t)/2};function ja(t,n,o){let r,i=e;d(t,Ia,(e=>o(0,r=e))),t.$$.on_destroy.push((()=>i()));const s=async e=>{if("workbox-broadcast-update"===e.data.meta&&"CACHE_UPDATED"===e.data.type){const{updatedURL:t}=e.data.payload;"https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"===t&&Aa()}};return le((()=>{navigator&&navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",s);const e=Pt.subscribe((async()=>{await(async()=>{let e=!1;if(window.caches){const t=await window.caches.open("lido-noaa").then((e=>e.keys()));for(const n of t)if("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json"===n.url){e=!0;break}}return e})()&&void 0!==r?fetch("https://services.swpc.noaa.gov/products/noaa-planetary-k-index-forecast.json").catch((()=>{})):Aa()}));return()=>{e(),navigator&&navigator.serviceWorker&&navigator.serviceWorker.removeEventListener("message",s)}})),[]}class Ra extends He{constructor(e){super(),Ue(this,e,ja,null,a,{})}}function Na(e,t,n){const o=e.slice();return o[11]=t[n].period,o[12]=t[n].relpos,o}function za(e,t,n){const o=e.slice();return o[15]=t[n].type,o[12]=t[n].relpos,o[16]=t[n].date,o[17]=t[n].position,o}function Wa(e,t,n){const o=e.slice();return o[20]=t[n],o[22]=n,o}function Ga(e){let t;return{c(){t=F("p"),t.textContent="Les prédictions de Kp sont indisponibles."},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function qa(e){let t,n,o,r,i=("civilDawn"===e[20].type||"civilDusk"===e[20].type)&&Ua(e);return{c(){t=D("line"),i&&i.c(),r=N(),G(t,"stroke","gray"),G(t,"stroke-width","1"),G(t,"x1",n=el(e[20].relpos)),G(t,"y1","30"),G(t,"x2",o=el(e[20].relpos)),G(t,"y2","32")},m(e,n){O(e,t,n),i&&i.m(e,n),O(e,r,n)},p(e,s){16&s&&n!==(n=el(e[20].relpos))&&G(t,"x1",n),16&s&&o!==(o=el(e[20].relpos))&&G(t,"x2",o),"civilDawn"===e[20].type||"civilDusk"===e[20].type?i?i.p(e,s):(i=Ua(e),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(e){e&&A(t),i&&i.d(e),e&&A(r)}}}function Ua(e){let t,n,o,r;return{c(){t=D("text"),n=j(tl),G(t,"fill",o="civilDawn"===e[20].type?"#FCBF49":"#000B18"),G(t,"text-anchor","middle"),G(t,"x",r=el(e[20].relpos)),G(t,"y","44")},m(e,o){O(e,t,o),S(t,n)},p(e,n){16&n&&o!==(o="civilDawn"===e[20].type?"#FCBF49":"#000B18")&&G(t,"fill",o),16&n&&r!==(r=el(e[20].relpos))&&G(t,"x",r)},d(e){e&&A(t)}}}function Ha(e){let t,n,o,r;return{c(){t=D("rect"),G(t,"x",n=el(e[4].sun[e[22]-1].relpos)),G(t,"width",o=Xa*(e[20].relpos-e[4].sun[e[22]-1].relpos)+"%"),G(t,"fill",r=nl(e[4].sun[e[22]-1].type)),G(t,"y","20"),G(t,"height","10px")},m(e,n){O(e,t,n)},p(e,i){16&i&&n!==(n=el(e[4].sun[e[22]-1].relpos))&&G(t,"x",n),16&i&&o!==(o=Xa*(e[20].relpos-e[4].sun[e[22]-1].relpos)+"%")&&G(t,"width",o),16&i&&r!==(r=nl(e[4].sun[e[22]-1].type))&&G(t,"fill",r)},d(e){e&&A(t)}}}function Ba(e){let t,n,o;return{c(){t=D("rect"),G(t,"x",el(0)),G(t,"width",n=Xa*e[20].relpos+"%"),G(t,"fill",o=nl(e[0].state)),G(t,"y","20"),G(t,"height","10px")},m(e,n){O(e,t,n)},p(e,r){16&r&&n!==(n=Xa*e[20].relpos+"%")&&G(t,"width",n),1&r&&o!==(o=nl(e[0].state))&&G(t,"fill",o)},d(e){e&&A(t)}}}function Ka(e){let t,n,o=["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e[20].type),r=o&&qa(e);let i=function(e,t){return 0===e[22]?Ba:Ha}(e)(e);return{c(){r&&r.c(),t=N(),i.c(),n=N()},m(e,o){r&&r.m(e,o),O(e,t,o),i.m(e,o),O(e,n,o)},p(e,n){16&n&&(o=["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e[20].type)),o?r?r.p(e,n):(r=qa(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),i.p(e,n)},d(e){r&&r.d(e),e&&A(t),i.d(e),e&&A(n)}}}function Za(e){let t,n,o,r,i,s,a,l;return{c(){t=D("line"),r=D("text"),i=j("☾"),G(t,"stroke","gray"),G(t,"stroke-width","1"),G(t,"x1",n=el(e[12])),G(t,"y1","18"),G(t,"x2",o=el(e[12])),G(t,"y2","20"),G(r,"fill",s="moonrise"===e[15]?"#FCBF49":"gray"),G(r,"text-anchor","middle"),G(r,"x",a=el(e[12])),G(r,"y","16"),G(r,"transform",l=e[9](e[16],e[17],el(e[12],e[2]),9))},m(e,n){O(e,t,n),O(e,r,n),S(r,i)},p(e,i){16&i&&n!==(n=el(e[12]))&&G(t,"x1",n),16&i&&o!==(o=el(e[12]))&&G(t,"x2",o),16&i&&s!==(s="moonrise"===e[15]?"#FCBF49":"gray")&&G(r,"fill",s),16&i&&a!==(a=el(e[12]))&&G(r,"x",a),20&i&&l!==(l=e[9](e[16],e[17],el(e[12],e[2]),9))&&G(r,"transform",l)},d(e){e&&A(t),e&&A(r)}}}function Va(e){let t,n,o,r,i,s,a,l,c,u=Qa(e[11][0])+"",d=Qa(e[11][1])+"";return{c(){t=D("rect"),r=D("text"),i=j(u),a=D("text"),l=j(d),G(t,"stroke","lime"),G(t,"stroke-opacity","60%"),G(t,"fill","transparent"),G(t,"stroke-width","2"),G(t,"x",n=el(e[12][0])),G(t,"y","18"),G(t,"width",o=Xa*(e[12][1]-e[12][0])+"%"),G(t,"height","14"),G(r,"fill","green"),G(r,"text-anchor","middle"),G(r,"font-size","0.7em"),G(r,"x",s=el(e[12][0]+(e[12][1]-e[12][0])/2)),G(r,"y","15"),G(a,"fill","green"),G(a,"text-anchor","middle"),G(a,"font-size","0.7em"),G(a,"x",c=el(e[12][0]+(e[12][1]-e[12][0])/2)),G(a,"y","42")},m(e,n){O(e,t,n),O(e,r,n),S(r,i),O(e,a,n),S(a,l)},p(e,p){32&p&&n!==(n=el(e[12][0]))&&G(t,"x",n),32&p&&o!==(o=Xa*(e[12][1]-e[12][0])+"%")&&G(t,"width",o),32&p&&u!==(u=Qa(e[11][0])+"")&&B(i,u),32&p&&s!==(s=el(e[12][0]+(e[12][1]-e[12][0])/2))&&G(r,"x",s),32&p&&d!==(d=Qa(e[11][1])+"")&&B(l,d),32&p&&c!==(c=el(e[12][0]+(e[12][1]-e[12][0])/2))&&G(a,"x",c)},d(e){e&&A(t),e&&A(r),e&&A(a)}}}function Ja(e){let t;return{c(){t=F("div"),t.innerHTML='<span class="svelte-1x2hvh5">zone favorable aux aurores boréales</span>',G(t,"class","aurora-legend svelte-1x2hvh5")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Ya(t){let n,o,r,i,s,a,l,c,u,d,p,m,f,g,h,v,$=Qa(t[7])+"",y=Qa(t[8])+"",b=!t[3]&&Ga(),x=t[4].sun,w=[];for(let e=0;e<x.length;e+=1)w[e]=Ka(Wa(t,x,e));let C=t[4].moon,k=[];for(let e=0;e<C.length;e+=1)k[e]=Za(za(t,C,e));let L=t[5],P=[];for(let e=0;e<L.length;e+=1)P[e]=Va(Na(t,L,e));let M=t[5].length>0&&Ja();return{c(){n=F("div"),b&&b.c(),o=R(),r=F("div"),i=D("svg"),s=D("rect");for(let e=0;e<w.length;e+=1)w[e].c();l=N();for(let e=0;e<k.length;e+=1)k[e].c();c=N();for(let e=0;e<P.length;e+=1)P[e].c();u=D("circle"),p=D("text"),m=j($),f=D("text"),g=j(y),v=R(),M&&M.c(),G(s,"x",el(0)),G(s,"width",100*Xa+"%"),G(s,"fill",a=nl(t[1].state)),G(s,"y","20"),G(s,"height","10px"),G(u,"fill","#FCBF49"),G(u,"stroke","black"),G(u,"stroke-width","0.5"),G(u,"cx",d=el(t[6])),G(u,"cy","25"),G(u,"r","2.5"),G(p,"fill","black"),G(p,"text-anchor","middle"),G(p,"x","5%"),G(p,"y","56"),G(f,"fill","black"),G(f,"text-anchor","middle"),G(f,"x","95%"),G(f,"y","56"),G(i,"width","100%"),G(i,"height","60px"),G(i,"xmlns","http://www.w3.org/2000/svg"),be((()=>t[10].call(r)))},m(e,a){O(e,n,a),b&&b.m(n,null),S(n,o),S(n,r),S(r,i),S(i,s);for(let e=0;e<w.length;e+=1)w[e].m(i,null);S(i,l);for(let e=0;e<k.length;e+=1)k[e].m(i,null);S(i,c);for(let e=0;e<P.length;e+=1)P[e].m(i,null);S(i,u),S(i,p),S(p,m),S(i,f),S(f,g),h=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=F("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=Q();let r;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=z(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{r=z(n.contentWindow,"resize",t)}),S(e,n),()=>{(o||r&&n.contentWindow)&&r(),A(n)}}(r,t[10].bind(r)),S(n,v),M&&M.m(n,null)},p(e,[t]){if(e[3]?b&&(b.d(1),b=null):b||(b=Ga(),b.c(),b.m(n,o)),2&t&&a!==(a=nl(e[1].state))&&G(s,"fill",a),17&t){let n;for(x=e[4].sun,n=0;n<x.length;n+=1){const o=Wa(e,x,n);w[n]?w[n].p(o,t):(w[n]=Ka(o),w[n].c(),w[n].m(i,l))}for(;n<w.length;n+=1)w[n].d(1);w.length=x.length}if(532&t){let n;for(C=e[4].moon,n=0;n<C.length;n+=1){const o=za(e,C,n);k[n]?k[n].p(o,t):(k[n]=Za(o),k[n].c(),k[n].m(i,c))}for(;n<k.length;n+=1)k[n].d(1);k.length=C.length}if(32&t){let n;for(L=e[5],n=0;n<L.length;n+=1){const o=Na(e,L,n);P[n]?P[n].p(o,t):(P[n]=Va(o),P[n].c(),P[n].m(i,u))}for(;n<P.length;n+=1)P[n].d(1);P.length=L.length}64&t&&d!==(d=el(e[6]))&&G(u,"cx",d),128&t&&$!==($=Qa(e[7])+"")&&B(m,$),256&t&&y!==(y=Qa(e[8])+"")&&B(g,y),e[5].length>0?M||(M=Ja(),M.c(),M.m(n,null)):M&&(M.d(1),M=null)},i:e,o:e,d(e){e&&A(n),b&&b.d(),I(w,e),I(k,e),I(P,e),h(),M&&M.d()}}}const Qa=(e,t=!1)=>e?t?e.toJSON().slice(11,19):e.getUTCSeconds(e)<30?e.toJSON().slice(11,16):new Date(e.getTime()+6e4).toJSON().slice(11,16):t?"--:--:--":"--:--",Xa=.9,el=(e,t)=>t?""+t*(5+Xa*e)/100:5+Xa*e+"%",tl="✽",nl=e=>{switch(e){case"dayStart":case"day":case"sunrise":return"#89d4ff";case"sunset":case"civil twilight":case"civilDawn":return"#2383C2";case"civilDusk":case"nautical twilight":case"nauticalDawn":return"#0052A2";case"nauticalDusk":case"astronomical twilight":case"astronomicalDawn":case"astronomicalDusk":case"night":case"nighStart":return"#000B18";default:return"red"}};function ol(e,t,n){let o,r,i,s,a,l;d(e,Ia,(e=>n(3,o=e))),d(e,Ta,(e=>n(4,r=e))),d(e,Fa,(e=>n(5,i=e))),d(e,Rt,(e=>n(6,s=e))),d(e,St,(e=>n(7,a=e))),d(e,Tt,(e=>n(8,l=e)));let c=364;let{departureSun:u}=t,{arrivalSun:p}=t;return e.$$set=e=>{"departureSun"in e&&n(0,u=e.departureSun),"arrivalSun"in e&&n(1,p=e.arrivalSun)},[u,p,c,o,r,i,s,a,l,(e,t,n,o)=>`rotate(${180*-(xa(e).angle-wa(e,t).parallacticAngle)/Math.PI+132}, ${n}, ${o})`,function(){c=this.clientWidth,n(2,c)}]}class rl extends He{constructor(e){super(),Ue(this,e,ol,Ya,a,{departureSun:0,arrivalSun:1})}}function il(e,t,n){const o=e.slice();return o[7]=t[n].date,o[8]=t[n].kp,o[9]=t[n].relpos,o[11]=n,o}function sl(t){let n;return{c(){n=F("p"),n.textContent="Les prévisions sont disponibles de J-7 à J+2",G(n,"class","svelte-1t8wt3o")},m(e,t){O(e,n,t)},p:e,d(e){e&&A(n)}}}function al(t){let n;return{c(){n=F("p"),n.textContent="Les prévisions de Kp sont indisponibles.",G(n,"class","svelte-1t8wt3o")},m(e,t){O(e,n,t)},p:e,d(e){e&&A(n)}}}function ll(e){let t,n,o,r,i,s,a,l=Qa(e[3])+"",c=Qa(e[4])+"",u=e[1],d=[];for(let t=0;t<u.length;t+=1)d[t]=ul(il(e,u,t));let p=0===e[5].length&&!!e[0]&&dl();return{c(){t=D("svg");for(let e=0;e<d.length;e+=1)d[e].c();n=D("circle"),r=D("text"),i=j(l),s=D("text"),a=j(c),p&&p.c(),G(n,"fill","#FCBF49"),G(n,"stroke","black"),G(n,"stroke-width","0.5"),G(n,"cx",o=el(e[2])),G(n,"cy","20"),G(n,"r","2.5"),G(r,"fill","black"),G(r,"text-anchor","middle"),G(r,"x","5%"),G(r,"y","49"),G(s,"fill","black"),G(s,"text-anchor","middle"),G(s,"x","95%"),G(s,"y","49"),G(t,"width","100%"),G(t,"height","53px"),G(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){O(e,t,o);for(let e=0;e<d.length;e+=1)d[e].m(t,null);S(t,n),S(t,r),S(r,i),S(t,s),S(s,a),p&&p.m(t,null)},p(e,r){if(66&r){let o;for(u=e[1],o=0;o<u.length;o+=1){const i=il(e,u,o);d[o]?d[o].p(i,r):(d[o]=ul(i),d[o].c(),d[o].m(t,n))}for(;o<d.length;o+=1)d[o].d(1);d.length=u.length}4&r&&o!==(o=el(e[2]))&&G(n,"cx",o),8&r&&l!==(l=Qa(e[3])+"")&&B(i,l),16&r&&c!==(c=Qa(e[4])+"")&&B(a,c),0===e[5].length&&e[0]?p||(p=dl(),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},d(e){e&&A(t),I(d,e),p&&p.d()}}}function cl(e){let t,n,o,r=Qa(e[7])+"";return{c(){t=D("text"),n=j(r),G(t,"fill","gray"),G(t,"text-anchor","middle"),G(t,"font-size","0.7em"),G(t,"x",o=el(e[9])),G(t,"y","31")},m(e,o){O(e,t,o),S(t,n)},p(e,i){2&i&&r!==(r=Qa(e[7])+"")&&B(n,r),2&i&&o!==(o=el(e[9]))&&G(t,"x",o)},d(e){e&&A(t)}}}function ul(e){let t,n,o,r,i,s,a,l,c=e[8]+"",u=e[9]>5&&e[9]<95&&cl(e);return{c(){t=D("rect"),i=D("text"),s=j(c),u&&u.c(),l=N(),G(t,"fill",n=Ea(e[8])),G(t,"x",o=el(e[6](e[9]))),G(t,"y","7"),G(t,"width",r=Xa*(e[6](0===e[11]?100:e[1][e[11]-1].relpos-.2)-e[6](e[9]))+"%"),G(t,"height","14px"),G(i,"fill","white"),G(i,"stroke","white"),G(i,"text-anchor","middle"),G(i,"font-size","0.7em"),G(i,"x",a=el((e[6](e[9])+e[6](0===e[11]?100:e[1][e[11]-1].relpos))/2)),G(i,"y","17")},m(e,n){O(e,t,n),O(e,i,n),S(i,s),u&&u.m(e,n),O(e,l,n)},p(e,d){2&d&&n!==(n=Ea(e[8]))&&G(t,"fill",n),2&d&&o!==(o=el(e[6](e[9])))&&G(t,"x",o),2&d&&r!==(r=Xa*(e[6](0===e[11]?100:e[1][e[11]-1].relpos-.2)-e[6](e[9]))+"%")&&G(t,"width",r),2&d&&c!==(c=e[8]+"")&&B(s,c),2&d&&a!==(a=el((e[6](e[9])+e[6](0===e[11]?100:e[1][e[11]-1].relpos))/2))&&G(i,"x",a),e[9]>5&&e[9]<95?u?u.p(e,d):(u=cl(e),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null)},d(e){e&&A(t),e&&A(i),u&&u.d(e),e&&A(l)}}}function dl(e){let t,n;return{c(){t=D("text"),n=j("aucune aurore boréale prévue sur la route"),G(t,"fill","gray"),G(t,"text-anchor","middle"),G(t,"font-size","0.8em"),G(t,"x","50%"),G(t,"y","49")},m(e,o){O(e,t,o),S(t,n)},d(e){e&&A(t)}}}function pl(t){let n;function o(e,t){return e[1].length>0?ll:e[0]?sl:al}let r=o(t),i=r(t);return{c(){n=F("div"),i.c()},m(e,t){O(e,n,t),i.m(n,null)},p(e,[t]){r===(r=o(e))&&i?i.p(e,t):(i.d(1),i=r(e),i&&(i.c(),i.m(n,null)))},i:e,o:e,d(e){e&&A(n),i.d()}}}function ml(e,t,n){let o,r,i,s,a,l;d(e,Ia,(e=>n(0,r=e))),d(e,Rt,(e=>n(2,i=e))),d(e,St,(e=>n(3,s=e))),d(e,Tt,(e=>n(4,a=e))),d(e,Fa,(e=>n(5,l=e)));return e.$$.update=()=>{1&e.$$.dirty&&n(1,o=r?r.timetable:[])},[r,o,i,s,a,l,e=>Math.min(100,Math.max(0,e))]}class fl extends He{constructor(e){super(),Ue(this,e,ml,pl,a,{})}}function gl(e){let t,n,o;const r=e[5].default,i=p(r,e,e[4],null);return{c(){t=F("div"),i&&i.c(),G(t,"class","moon svelte-1ae9xab"),G(t,"style",n=e[1]()),X(t,"rise","moonrise"===e[0])},m(e,n){O(e,t,n),i&&i.m(t,null),o=!0},p(e,[s]){i&&i.p&&(!o||16&s)&&g(i,r,e,e[4],o?f(r,e[4],s,null):h(e[4]),null),(!o||2&s&&n!==(n=e[1]()))&&G(t,"style",n),1&s&&X(t,"rise","moonrise"===e[0])},i(e){o||(Ie(i,e),o=!0)},o(e){Fe(i,e),o=!1},d(e){e&&A(t),i&&i.d(e)}}}const hl=e=>Math.round(100*e.fraction),vl=e=>{const t=e.phase,n=hl(e);return n<=0?"Nouvelle lune":t<.5&&n<50?"Premier croissant":t<.5&&50===n?"Premier quartier":t<.5&&n<100?"Gibbeuse croissante":100===n?"Pleine Lune":t>=.5&&n>50?"Gibbeuse décroissante":t>=.5&&50===n?"Dernier quartier":"Dernier croissant"};function $l(e,t,n){let o,{$$slots:r={},$$scope:i}=t,{date:s}=t,{position:a}=t,{type:l=null}=t;return e.$$set=e=>{"date"in e&&n(2,s=e.date),"position"in e&&n(3,a=e.position),"type"in e&&n(0,l=e.type),"$$scope"in e&&n(4,i=e.$$scope)},e.$$.update=()=>{12&e.$$.dirty&&n(1,o=()=>{if(!s||!a)return 0;const e=xa(s),t=e.phase>=.5?Math.PI/2:-Math.PI/2;return`transform: rotate(${-(e.angle-wa(s,a).parallacticAngle)+t}rad);`})},[l,o,s,a,i,r]}class yl extends He{constructor(e){super(),Ue(this,e,$l,gl,a,{date:2,position:3,type:0})}}function bl(e,t,n){const o=e.slice();return o[14]=t[n],o}function xl(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function wl(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function Cl(e,t,n){const o=e.slice();return o[17]=t[n],o[19]=n,o}function kl(t){let n,o,r,i,s,a;return{c(){n=D("rect"),i=D("rect"),G(n,"fill",o=nl(t[17])),G(n,"y",r=0+6*t[19]),G(n,"x","0"),G(n,"width","45%"),G(n,"height","5"),G(i,"fill",s=nl(t[12][t[12].length-1-t[19]])),G(i,"y",a=0+6*t[19]),G(i,"x","55%"),G(i,"width","45%"),G(i,"height","5")},m(e,t){O(e,n,t),O(e,i,t)},p:e,d(e){e&&A(n),e&&A(i)}}}function Ll(e){let t;return{c(){t=F("tr"),t.innerHTML='<td colspan="4" class="svelte-fe56h4">Aucun événement</td>',G(t,"class","svelte-fe56h4")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Pl(e){let t,n,o,r=e[10](e[5].arrival,e[6],e[8])+"";return{c(){t=F("td"),n=j("Atterrissage "),o=j(r),G(t,"colspan","4"),G(t,"class","svelte-fe56h4")},m(e,r){O(e,t,r),S(t,n),S(t,o)},p(e,t){352&t&&r!==(r=e[10](e[5].arrival,e[6],e[8])+"")&&B(o,r)},d(e){e&&A(t)}}}function Ml(e){let t,n,o,r=e[11](e[17].type)+"",i=e[17].type.startsWith("civil"),s=i&&Tl(e);return{c(){t=F("td"),n=j(r),o=j(" en montée\n                        "),s&&s.c(),G(t,"colspan","4"),G(t,"class","svelte-fe56h4")},m(e,r){O(e,t,r),S(t,n),S(t,o),s&&s.m(t,null)},p(e,o){512&o&&r!==(r=e[11](e[17].type)+"")&&B(n,r),512&o&&(i=e[17].type.startsWith("civil")),i?s?s.p(e,o):(s=Tl(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&A(t),s&&s.d()}}}function Sl(e){let t,n,o,r,i,s,a,l,c,u,d,p,m,f=e[11](e[17].type)+"",g=e[17].type.startsWith("civil"),h=Qa(e[17].date)+"",v=e[17].fl+"",$=g&&El(e);return{c(){t=F("td"),n=j(f),o=R(),$&&$.c(),r=R(),i=F("td"),a=R(),l=F("td"),c=j(h),u=R(),d=F("td"),p=j("FL"),m=j(v),G(t,"class","svelte-fe56h4"),G(i,"class",s="color "+e[17].type+"-color svelte-fe56h4"),G(l,"class","svelte-fe56h4"),G(d,"class","svelte-fe56h4")},m(e,s){O(e,t,s),S(t,n),S(t,o),$&&$.m(t,null),O(e,r,s),O(e,i,s),O(e,a,s),O(e,l,s),S(l,c),O(e,u,s),O(e,d,s),S(d,p),S(d,m)},p(e,o){512&o&&f!==(f=e[11](e[17].type)+"")&&B(n,f),512&o&&(g=e[17].type.startsWith("civil")),g?$?$.p(e,o):($=El(e),$.c(),$.m(t,null)):$&&($.d(1),$=null),512&o&&s!==(s="color "+e[17].type+"-color svelte-fe56h4")&&G(i,"class",s),512&o&&h!==(h=Qa(e[17].date)+"")&&B(c,h),512&o&&v!==(v=e[17].fl+"")&&B(m,v)},d(e){e&&A(t),$&&$.d(),e&&A(r),e&&A(i),e&&A(a),e&&A(l),e&&A(u),e&&A(d)}}}function Tl(e){let t;return{c(){t=F("span"),t.textContent=`${tl}`,G(t,"class","svelte-fe56h4"),X(t,"rise","civilDawn"===e[17].type)},m(e,n){O(e,t,n)},p(e,n){512&n&&X(t,"rise","civilDawn"===e[17].type)},d(e){e&&A(t)}}}function El(e){let t;return{c(){t=F("span"),t.textContent=`${tl}`,G(t,"class","svelte-fe56h4"),X(t,"rise","civilDawn"===e[17].type)},m(e,n){O(e,t,n)},p(e,n){512&n&&X(t,"rise","civilDawn"===e[17].type)},d(e){e&&A(t)}}}function Ol(e){let t,n;function o(e,t){return 0!==e[17].fl?Sl:0===e[19]?Ml:Pl}let r=o(e),i=r(e);return{c(){t=F("tr"),i.c(),n=R(),G(t,"class","svelte-fe56h4")},m(e,o){O(e,t,o),i.m(t,null),S(t,n)},p(e,s){r===(r=o(e))&&i?i.p(e,s):(i.d(1),i=r(e),i&&(i.c(),i.m(t,n)))},d(e){e&&A(t),i.d()}}}function Al(e){let t;return{c(){t=j(e[1])},m(e,n){O(e,t,n)},p(e,n){2&n&&B(t,e[1])},d(e){e&&A(t)}}}function Il(e){let t;return{c(){t=F("tr"),t.innerHTML='<td colspan="4" class="svelte-fe56h4">Aucun événement</td>',G(t,"class","svelte-fe56h4")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Fl(e){let t,n,o,r,i,s,a,l=e[11](e[17].type)+"",c=0===e[19]?"montée":"descente";return s=new yl({props:{position:e[17].position,type:e[17].type,date:e[17].date,$$slots:{default:[_l]},$$scope:{ctx:e}}}),{c(){t=F("td"),n=j(l),o=j(" en "),r=j(c),i=R(),We(s.$$.fragment),G(t,"colspan","4"),G(t,"class","svelte-fe56h4")},m(e,l){O(e,t,l),S(t,n),S(t,o),S(t,r),S(t,i),Ge(s,t,null),a=!0},p(e,t){(!a||512&t)&&l!==(l=e[11](e[17].type)+"")&&B(n,l);const o={};512&t&&(o.position=e[17].position),512&t&&(o.type=e[17].type),512&t&&(o.date=e[17].date),4194306&t&&(o.$$scope={dirty:t,ctx:e}),s.$set(o)},i(e){a||(Ie(s.$$.fragment,e),a=!0)},o(e){Fe(s.$$.fragment,e),a=!1},d(e){e&&A(t),qe(s)}}}function Dl(e){let t,n,o,r,i,s,a,l,c,u,d,p,m,f,g=e[11](e[17].type)+"",h=Qa(e[17].date)+"",v=e[17].fl+"";return r=new yl({props:{position:e[17].position,type:e[17].type,date:e[17].date,$$slots:{default:[jl]},$$scope:{ctx:e}}}),{c(){t=F("td"),n=j(g),o=R(),We(r.$$.fragment),i=R(),s=F("td"),a=R(),l=F("td"),c=j(h),u=R(),d=F("td"),p=j("FL"),m=j(v),G(t,"class","svelte-fe56h4"),G(s,"class","color svelte-fe56h4"),G(l,"class","svelte-fe56h4"),G(d,"class","svelte-fe56h4")},m(e,g){O(e,t,g),S(t,n),S(t,o),Ge(r,t,null),O(e,i,g),O(e,s,g),O(e,a,g),O(e,l,g),S(l,c),O(e,u,g),O(e,d,g),S(d,p),S(d,m),f=!0},p(e,t){(!f||512&t)&&g!==(g=e[11](e[17].type)+"")&&B(n,g);const o={};512&t&&(o.position=e[17].position),512&t&&(o.type=e[17].type),512&t&&(o.date=e[17].date),4194306&t&&(o.$$scope={dirty:t,ctx:e}),r.$set(o),(!f||512&t)&&h!==(h=Qa(e[17].date)+"")&&B(c,h),(!f||512&t)&&v!==(v=e[17].fl+"")&&B(m,v)},i(e){f||(Ie(r.$$.fragment,e),f=!0)},o(e){Fe(r.$$.fragment,e),f=!1},d(e){e&&A(t),qe(r),e&&A(i),e&&A(s),e&&A(a),e&&A(l),e&&A(u),e&&A(d)}}}function _l(e){let t;return{c(){t=j(e[1])},m(e,n){O(e,t,n)},p(e,n){2&n&&B(t,e[1])},d(e){e&&A(t)}}}function jl(e){let t;return{c(){t=j(e[1])},m(e,n){O(e,t,n)},p(e,n){2&n&&B(t,e[1])},d(e){e&&A(t)}}}function Rl(e){let t,n,o,r,i;const s=[Dl,Fl],a=[];function l(e,t){return 0!==e[17].fl?0:1}return n=l(e),o=a[n]=s[n](e),{c(){t=F("tr"),o.c(),r=R(),G(t,"class","svelte-fe56h4")},m(e,o){O(e,t,o),a[n].m(t,null),S(t,r),i=!0},p(e,i){let c=n;n=l(e),n===c?a[n].p(e,i):(Oe(),Fe(a[c],1,1,(()=>{a[c]=null})),Ae(),o=a[n],o?o.p(e,i):(o=a[n]=s[n](e),o.c()),Ie(o,1),o.m(t,r))},i(e){i||(Ie(o),i=!0)},o(e){Fe(o),i=!1},d(e){e&&A(t),a[n].d()}}}function Nl(t){let n,o,r,i,s,a;return{c(){n=D("rect"),i=D("text"),s=j(t[14]),G(n,"stroke",o=Ea(t[14])),G(n,"stroke-width","1"),G(n,"fill","transparent"),G(n,"x",r=2+15*t[14]),G(n,"y","2"),G(n,"width","12"),G(n,"height","12"),G(i,"fill","gray"),G(i,"text-anchor","middle"),G(i,"font-size","0.7em"),G(i,"x",a=8+15*t[14]),G(i,"y","11.5")},m(e,t){O(e,n,t),O(e,i,t),S(i,s)},p:e,d(e){e&&A(n),e&&A(i)}}}function zl(e){let t,n,o,r,i,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,C,k,L,P,M,T,E,_,N,z,W,q,U,H,K,Z,V,J=vl(e[2])+"",Y=hl(e[2])+"",Q=e[7]?"":"non visible";n=new rl({props:{arrivalSun:e[8],departureSun:e[0]}});let X=e[12],ee=[];for(let t=0;t<X.length;t+=1)ee[t]=kl(Cl(e,X,t));let te=e[9].sun.filter(Wl),ne=[];for(let t=0;t<te.length;t+=1)ne[t]=Ol(wl(e,te,t));let oe=null;te.length||(oe=Ll()),w=new yl({props:{date:e[3],position:e[4].map,$$slots:{default:[Al]},$$scope:{ctx:e}}});let re=e[9].moon,ie=[];for(let t=0;t<re.length;t+=1)ie[t]=Rl(xl(e,re,t));const se=e=>Fe(ie[e],1,1,(()=>{ie[e]=null}));let ae=null;re.length||(ae=Il());let le=[0,1,2,3,4,5,6,7,8,9],ce=[];for(let t=0;t<10;t+=1)ce[t]=Nl(bl(e,le,t));return Z=new fl({}),{c(){t=F("div"),We(n.$$.fragment),o=R(),r=F("table"),i=F("thead"),s=F("tr"),a=F("th"),a.textContent="Soleil",l=R(),c=F("th"),u=D("svg");for(let e=0;e<ee.length;e+=1)ee[e].c();d=R(),p=F("th"),p.textContent="Heure",m=R(),f=F("th"),f.textContent="FL",g=R(),h=F("tbody");for(let e=0;e<ne.length;e+=1)ne[e].c();oe&&oe.c(),v=R(),$=F("thead"),y=F("tr"),b=F("th"),x=j("Lune "),We(w.$$.fragment),C=R(),k=j(J),L=R(),P=j(Y),M=j("% "),T=j(Q),E=R(),_=F("tbody");for(let e=0;e<ie.length;e+=1)ie[e].c();ae&&ae.c(),N=R(),z=F("thead"),W=F("tr"),q=F("th"),U=j("Prévisions de Kp\n                    "),H=D("svg");for(let e=0;e<10;e+=1)ce[e].c();K=R(),We(Z.$$.fragment),G(a,"scope","col"),G(a,"class","svelte-fe56h4"),G(u,"width","100%"),G(u,"height","27px"),G(u,"xmlns","http://www.w3.org/2000/svg"),G(c,"scope","col"),G(c,"class","color svelte-fe56h4"),G(p,"scope","col"),G(p,"class","svelte-fe56h4"),G(f,"scope","col"),G(f,"class","svelte-fe56h4"),G(s,"class","svelte-fe56h4"),G(i,"class","svelte-fe56h4"),G(h,"class","svelte-fe56h4"),G(b,"scope","col"),G(b,"colspan","4"),G(b,"class","svelte-fe56h4"),G(y,"class","svelte-fe56h4"),G($,"class","svelte-fe56h4"),G(_,"class","svelte-fe56h4"),G(H,"width","150px"),G(H,"height","13px"),G(H,"xmlns","http://www.w3.org/2000/svg"),G(H,"class","svelte-fe56h4"),G(q,"scope","col"),G(q,"colspan","4"),G(q,"class","kp svelte-fe56h4"),G(W,"class","svelte-fe56h4"),G(z,"class","svelte-fe56h4"),G(r,"class","table svelte-fe56h4"),G(t,"class","card-body")},m(e,A){O(e,t,A),Ge(n,t,null),S(t,o),S(t,r),S(r,i),S(i,s),S(s,a),S(s,l),S(s,c),S(c,u);for(let e=0;e<ee.length;e+=1)ee[e].m(u,null);S(s,d),S(s,p),S(s,m),S(s,f),S(r,g),S(r,h);for(let e=0;e<ne.length;e+=1)ne[e].m(h,null);oe&&oe.m(h,null),S(r,v),S(r,$),S($,y),S(y,b),S(b,x),Ge(w,b,null),S(b,C),S(b,k),S(b,L),S(b,P),S(b,M),S(b,T),S(r,E),S(r,_);for(let e=0;e<ie.length;e+=1)ie[e].m(_,null);ae&&ae.m(_,null),S(r,N),S(r,z),S(z,W),S(W,q),S(q,U),S(q,H);for(let e=0;e<10;e+=1)ce[e].m(H,null);S(t,K),Ge(Z,t,null),V=!0},p(e,[t]){const o={};if(256&t&&(o.arrivalSun=e[8]),1&t&&(o.departureSun=e[0]),n.$set(o),4096&t){let n;for(X=e[12],n=0;n<X.length;n+=1){const o=Cl(e,X,n);ee[n]?ee[n].p(o,t):(ee[n]=kl(o),ee[n].c(),ee[n].m(u,null))}for(;n<ee.length;n+=1)ee[n].d(1);ee.length=X.length}if(3936&t){let n;for(te=e[9].sun.filter(Wl),n=0;n<te.length;n+=1){const o=wl(e,te,n);ne[n]?ne[n].p(o,t):(ne[n]=Ol(o),ne[n].c(),ne[n].m(h,null))}for(;n<ne.length;n+=1)ne[n].d(1);ne.length=te.length,te.length?oe&&(oe.d(1),oe=null):oe||(oe=Ll(),oe.c(),oe.m(h,null))}const r={};if(8&t&&(r.date=e[3]),16&t&&(r.position=e[4].map),4194306&t&&(r.$$scope={dirty:t,ctx:e}),w.$set(r),(!V||4&t)&&J!==(J=vl(e[2])+"")&&B(k,J),(!V||4&t)&&Y!==(Y=hl(e[2])+"")&&B(P,Y),(!V||128&t)&&Q!==(Q=e[7]?"":"non visible")&&B(T,Q),2562&t){let n;for(re=e[9].moon,n=0;n<re.length;n+=1){const o=xl(e,re,n);ie[n]?(ie[n].p(o,t),Ie(ie[n],1)):(ie[n]=Rl(o),ie[n].c(),Ie(ie[n],1),ie[n].m(_,null))}for(Oe(),n=re.length;n<ie.length;n+=1)se(n);Ae(),re.length?ae&&(ae.d(1),ae=null):ae||(ae=Il(),ae.c(),ae.m(_,null))}if(0&t){let n;for(le=[0,1,2,3,4,5,6,7,8,9],n=0;n<10;n+=1){const o=bl(e,le,n);ce[n]?ce[n].p(o,t):(ce[n]=Nl(o),ce[n].c(),ce[n].m(H,null))}for(;n<10;n+=1)ce[n].d(1)}},i(e){if(!V){Ie(n.$$.fragment,e),Ie(w.$$.fragment,e);for(let e=0;e<re.length;e+=1)Ie(ie[e]);Ie(Z.$$.fragment,e),V=!0}},o(e){Fe(n.$$.fragment,e),Fe(w.$$.fragment,e),ie=ie.filter(Boolean);for(let e=0;e<ie.length;e+=1)Fe(ie[e]);Fe(Z.$$.fragment,e),V=!1},d(e){e&&A(t),qe(n),I(ee,e),I(ne,e),oe&&oe.d(),qe(w),I(ie,e),ae&&ae.d(),I(ce,e),qe(Z)}}}const Wl=e=>["sunrise","sunset","civilDawn","civilDusk","nauticalDawn","nauticalDusk"].includes(e.type);function Gl(e,t,n){let o,r,i,s,a,l;d(e,Nt,(e=>n(4,i=e))),d(e,Pt,(e=>n(5,s=e))),d(e,Tt,(e=>n(6,a=e))),d(e,Ta,(e=>n(9,l=e)));let{departureSun:c}=t,{moonEmoji:u}=t,{moonIllumination:p}=t,{estimatedDate:m}=t;const f={astronomicalDawn:"Aube astronomique",astronomicalDusk:"Nuit astronomique",nauticalDawn:"Aube nautique",nauticalDusk:"Nuit nautique",civilDawn:"Aube civile",civilDusk:"Nuit civile",sunrise:"Lever du soleil",sunset:"Coucher du soleil",day:"Jour",night:"Nuit",moonrise:"Lever de lune",moonset:"Coucher de lune"},g=ma.slice(1);return e.$$set=e=>{"departureSun"in e&&n(0,c=e.departureSun),"moonEmoji"in e&&n(1,u=e.moonEmoji),"moonIllumination"in e&&n(2,p=e.moonIllumination),"estimatedDate"in e&&n(3,m=e.estimatedDate)},e.$$.update=()=>{96&e.$$.dirty&&n(8,o=s&&a?((e,t,n)=>{const{state:o,elevation:r}=ga(e,t,n);return{state:o,isRising:r<ua(new Date(e.getTime()+6e5),t).elevation}})(a,s.arrival,0):""),24&e.$$.dirty&&n(7,r=i&&m?Ca(m,i.map,i.fl).state:"")},[c,u,p,m,i,s,a,r,o,l,(e,t,{state:n,isRising:o})=>e&&t?"day"===n?"de jour":"night"===n||"astronomical twilight"===n?"de nuit":"nautical twilight"===n?o?"durant l'aube nautique":"durant le crépuscule nautique":"civil twilight"===n?o?"durant l'aube civile":"durant le crépuscule civil":`#ERREUR ${n}#`:"",e=>f[e]||e,g]}class ql extends He{constructor(e){super(),Ue(this,e,Gl,zl,a,{departureSun:0,moonEmoji:1,moonIllumination:2,estimatedDate:3})}}function Ul(e,t,n){const o=e.slice();return o[17]=t[n],o}function Hl(e){let t,n;return t=new ps({props:{position:"bottom-center",isOpen:!1,$$slots:{content:[Yl,({close:e})=>({15:e}),({close:e})=>e?32768:0],parent:[Jl,({toggle:e})=>({16:e}),({toggle:e})=>e?65536:0]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};1147375&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Bl(t){let n;return{c(){n=j(t[2])},m(e,t){O(e,n,t)},p(e,t){4&t&&B(n,e[2])},i:e,o:e,d(e){e&&A(n)}}}function Kl(e){let t,n;return t=new yl({props:{position:e[5].map,date:e[1],$$slots:{default:[Zl]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};32&n&&(o.position=e[5].map),2&n&&(o.date=e[1]),1048640&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Zl(e){let t;return{c(){t=j(e[6])},m(e,n){O(e,t,n)},p(e,n){64&n&&B(t,e[6])},d(e){e&&A(t)}}}function Vl(e){let t,n,o,r,i=e[17].type.includes("rise")?"↥":"↧",s=Qa(e[17].date)+"";return{c(){t=F("p"),n=j(i),o=R(),r=j(s),G(t,"class","svelte-qwm2q0")},m(e,i){O(e,t,i),S(t,n),S(t,o),S(t,r)},p(e,t){128&t&&i!==(i=e[17].type.includes("rise")?"↥":"↧")&&B(n,i),128&t&&s!==(s=Qa(e[17].date)+"")&&B(r,s)},d(e){e&&A(t)}}}function Jl(e){let t,n,o,r,i,a,l,c,u;const d=[Kl,Bl],p=[];function m(e,t){return"moon"===e[2]?0:1}o=m(e),r=p[o]=d[o](e);let f=e[7].slice(0,3),g=[];for(let t=0;t<f.length;t+=1)g[t]=Vl(Ul(e,f,t));return{c(){t=F("div"),n=F("p"),r.c(),i=R(),a=F("div");for(let e=0;e<g.length;e+=1)g[e].c();G(n,"class","icon svelte-qwm2q0"),G(a,"class","details svelte-qwm2q0"),X(a,"two",2===e[7].length),X(a,"three",e[7].length>=3),G(t,"slot","parent"),G(t,"class","sun svelte-qwm2q0"),X(t,"aurora",e[8].length>0)},m(r,d){O(r,t,d),S(t,n),p[o].m(n,null),S(t,i),S(t,a);for(let e=0;e<g.length;e+=1)g[e].m(a,null);l=!0,c||(u=z(t,"click",(function(){s(e[16])&&e[16].apply(this,arguments)})),c=!0)},p(i,s){let l=o;if(o=m(e=i),o===l?p[o].p(e,s):(Oe(),Fe(p[l],1,1,(()=>{p[l]=null})),Ae(),r=p[o],r?r.p(e,s):(r=p[o]=d[o](e),r.c()),Ie(r,1),r.m(n,null)),128&s){let t;for(f=e[7].slice(0,3),t=0;t<f.length;t+=1){const n=Ul(e,f,t);g[t]?g[t].p(n,s):(g[t]=Vl(n),g[t].c(),g[t].m(a,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=f.length}128&s&&X(a,"two",2===e[7].length),128&s&&X(a,"three",e[7].length>=3),256&s&&X(t,"aurora",e[8].length>0)},i(e){l||(Ie(r),l=!0)},o(e){Fe(r),l=!1},d(e){e&&A(t),p[o].d(),I(g,e),c=!1,u()}}}function Yl(e){let t,n,o,r,i,a,l,c,u,d,p;return l=new ql({props:{departureSun:e[3],moonEmoji:e[6],estimatedDate:e[1],moonIllumination:e[0]}}),{c(){t=F("div"),n=F("h6"),o=F("span"),o.textContent="Éphémérides du vol",r=R(),i=F("button"),a=R(),We(l.$$.fragment),G(i,"type","button"),G(i,"class","btn-close ms-auto"),G(i,"aria-label","Close"),G(n,"class","card-header"),G(t,"slot","content"),Z(t,"width","390px"),G(t,"class","overlay card")},m(c,m){O(c,t,m),S(t,n),S(n,o),S(n,r),S(n,i),S(t,a),Ge(l,t,null),u=!0,d||(p=z(i,"click",(function(){s(e[15])&&e[15].apply(this,arguments)})),d=!0)},p(t,n){e=t;const o={};8&n&&(o.departureSun=e[3]),64&n&&(o.moonEmoji=e[6]),2&n&&(o.estimatedDate=e[1]),1&n&&(o.moonIllumination=e[0]),l.$set(o)},i(e){u||(Ie(l.$$.fragment,e),c||be((()=>{c=_e(t,ut,{duration:200}),c.start()})),u=!0)},o(e){Fe(l.$$.fragment,e),u=!1},d(e){e&&A(t),qe(l),d=!1,p()}}}function Ql(e){let t,n,o,r;t=new Ra({});let i=e[4]&&e[4].timeMatrix.length>0&&Hl(e);return{c(){We(t.$$.fragment),n=R(),i&&i.c(),o=N()},m(e,s){Ge(t,e,s),O(e,n,s),i&&i.m(e,s),O(e,o,s),r=!0},p(e,[t]){e[4]&&e[4].timeMatrix.length>0?i?(i.p(e,t),16&t&&Ie(i,1)):(i=Hl(e),i.c(),Ie(i,1),i.m(o.parentNode,o)):i&&(Oe(),Fe(i,1,1,(()=>{i=null})),Ae())},i(e){r||(Ie(t.$$.fragment,e),Ie(i),r=!0)},o(e){Fe(t.$$.fragment,e),Fe(i),r=!1},d(e){qe(t,e),e&&A(n),i&&i.d(e),e&&A(o)}}}function Xl(e,t,n){let o,r,i,s,a,l,c,u,p,m,f,g,h,v;d(e,Ta,(e=>n(12,m=e))),d(e,Pt,(e=>n(4,f=e))),d(e,St,(e=>n(13,g=e))),d(e,Nt,(e=>n(5,h=e))),d(e,Fa,(e=>n(8,v=e)));return e.$$.update=()=>{8208&e.$$.dirty&&n(3,o=f&&g?La.getState(g,f.departure,0):""),8208&e.$$.dirty&&n(11,r=f&&g?Pa.getState(g,f.departure,0):""),8240&e.$$.dirty&&n(1,i=g&&h?new Date(g.getTime()+6e4*h.reltime):g||f.infos.ofpOFF),4096&e.$$.dirty&&n(9,s=m.sun.filter((e=>["sunrise","sunset"].includes(e.type)))),6144&e.$$.dirty&&n(10,a=m.moon.length>0||r.state),1544&e.$$.dirty&&n(2,l=s.length>0?"☀️":((e,t)=>"day"===e.state?"☀️":t?"moon":"🔭")(o,a)),4612&e.$$.dirty&&n(7,c="☀️"===l?s:"moon"===l?m.moon:[]),2&e.$$.dirty&&n(0,u=i?xa(i):{}),1&e.$$.dirty&&n(6,p=(e=>{const t=e.phase,n=e.fraction;return t&&n?n<=.02?"🌑":t<.5&&n<=.34?"🌒":t<.5&&n<=.65?"🌓":t<.5&&n<.97?"🌔":n>=.97?"🌕":t>=.5&&n>.65?"🌖":t>=.5&&n>.34?"🌗":"🌘":"☽"})(u))},[u,i,l,o,f,h,p,c,v,s,a,r,m,g]}class ec extends He{constructor(e){super(),Ue(this,e,Xl,Ql,a,{})}}function tc(e){let t,n,o,r,i,s;t=new Ws({}),o=new Us({});let a="/map"===e[2]&&nc();return{c(){We(t.$$.fragment),n=R(),We(o.$$.fragment),r=R(),a&&a.c(),i=N()},m(e,l){Ge(t,e,l),O(e,n,l),Ge(o,e,l),O(e,r,l),a&&a.m(e,l),O(e,i,l),s=!0},p(e,t){"/map"===e[2]?a?4&t&&Ie(a,1):(a=nc(),a.c(),Ie(a,1),a.m(i.parentNode,i)):a&&(Oe(),Fe(a,1,1,(()=>{a=null})),Ae())},i(e){s||(Ie(t.$$.fragment,e),Ie(o.$$.fragment,e),Ie(a),s=!0)},o(e){Fe(t.$$.fragment,e),Fe(o.$$.fragment,e),Fe(a),s=!1},d(e){qe(t,e),e&&A(n),qe(o,e),e&&A(r),a&&a.d(e),e&&A(i)}}}function nc(e){let t,n,o;return t=new Os({}),n=new ec({}),{c(){We(t.$$.fragment),We(n.$$.fragment)},m(e,r){Ge(t,e,r),Ge(n,e,r),o=!0},i(e){o||(Ie(t.$$.fragment,e),Ie(n.$$.fragment,e),o=!0)},o(e){Fe(t.$$.fragment,e),Fe(n.$$.fragment,e),o=!1},d(e){qe(t,e),qe(n,e)}}}function oc(e){let t,n,o,r;return{c(){t=F("li"),n=F("a"),n.innerHTML='<span class="svelte-182trw2">CARTE</span>',G(n,"class","nav-link"),G(n,"href","#/map"),G(t,"class","nav-item svelte-182trw2"),X(t,"active","/map"===e[2])},m(i,s){O(i,t,s),S(t,n),o||(r=z(n,"click",e[4]),o=!0)},p(e,n){4&n&&X(t,"active","/map"===e[2])},d(e){e&&A(t),o=!1,r()}}}function rc(e){let t,n,o,r;return{c(){t=F("li"),n=F("a"),n.innerHTML='<span class="svelte-182trw2">EXPORT</span>',G(n,"class","nav-link"),G(n,"href","#/export"),G(t,"class","nav-item svelte-182trw2"),X(t,"active","/export"===e[2])},m(i,s){O(i,t,s),S(t,n),o||(r=z(n,"click",e[4]),o=!0)},p(e,n){4&n&&X(t,"active","/export"===e[2])},d(e){e&&A(t),o=!1,r()}}}function ic(e){let t,n,o,r,s,a,l,c,u,d,m,v,$,y,b,x,w,C,k,L,P,M;const T=e[6].default,E=p(T,e,e[5],null);let I=e[1]&&tc(e),_=(e[1]||e[3]||"/map"===e[2])&&oc(e),j=(e[1]||"/export"===e[2])&&rc(e);return{c(){t=F("nav"),n=F("div"),o=F("input"),r=R(),E&&E.c(),s=R(),I&&I.c(),a=R(),l=F("label"),l.innerHTML='<span class="navbar-toggler-icon"></span>',c=R(),u=F("ul"),d=F("li"),m=F("a"),v=F("strong"),v.textContent="OFP2MAP ",$=D("svg"),y=D("use"),b=R(),_&&_.c(),x=R(),j&&j.c(),w=R(),C=F("li"),k=F("a"),k.innerHTML='<span class="svelte-182trw2">AIDE</span>',G(o,"type","checkbox"),G(o,"id","menu"),G(o,"class","svelte-182trw2"),G(l,"class","navbar-toggler"),G(l,"for","menu"),G(v,"class","d-none"),U(y,"xlink:href","#home-symbol"),G($,"class","svelte-182trw2"),G(m,"class","nav-link"),G(m,"href","#/"),G(d,"class","nav-item svelte-182trw2"),X(d,"active","/"===e[2]),G(k,"class","nav-link"),G(k,"href","#/help"),G(C,"class","nav-item svelte-182trw2"),X(C,"active","/help"===e[2]),G(u,"class","navbar-nav collapse navbar-collapse svelte-182trw2"),G(u,"id","navbarToggler"),G(n,"class","container-fluid svelte-182trw2"),G(t,"class","navbar navbar-expand-md navbar-light svelte-182trw2")},m(i,p){O(i,t,p),S(t,n),S(n,o),e[7](o),S(n,r),E&&E.m(n,null),S(n,s),I&&I.m(n,null),S(n,a),S(n,l),S(n,c),S(n,u),S(u,d),S(d,m),S(m,v),S(m,$),S($,y),S(u,b),_&&_.m(u,null),S(u,x),j&&j.m(u,null),S(u,w),S(u,C),S(C,k),L=!0,P||(M=[z(m,"click",e[4]),z(k,"click",e[4])],P=!0)},p(e,[t]){E&&E.p&&(!L||32&t)&&g(E,T,e,e[5],L?f(T,e[5],t,null):h(e[5]),null),e[1]?I?(I.p(e,t),2&t&&Ie(I,1)):(I=tc(e),I.c(),Ie(I,1),I.m(n,a)):I&&(Oe(),Fe(I,1,1,(()=>{I=null})),Ae()),4&t&&X(d,"active","/"===e[2]),e[1]||e[3]||"/map"===e[2]?_?_.p(e,t):(_=oc(e),_.c(),_.m(u,x)):_&&(_.d(1),_=null),e[1]||"/export"===e[2]?j?j.p(e,t):(j=rc(e),j.c(),j.m(u,w)):j&&(j.d(1),j=null),4&t&&X(C,"active","/help"===e[2])},i(e){L||(Ie(E,e),Ie(I),L=!0)},o(e){Fe(E,e),Fe(I),L=!1},d(n){n&&A(t),e[7](null),E&&E.d(n),I&&I.d(),_&&_.d(),j&&j.d(),P=!1,i(M)}}}function sc(e,t,n){let o,r,i;d(e,Pt,(e=>n(1,o=e))),d(e,jt,(e=>n(2,r=e))),d(e,Ot,(e=>n(3,i=e)));let s,{$$slots:a={},$$scope:l}=t;return e.$$set=e=>{"$$scope"in e&&n(5,l=e.$$scope)},[s,o,r,i,()=>n(0,s.checked=!1,s),l,a,function(e){me[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class ac extends He{constructor(e){super(),Ue(this,e,sc,ic,a,{})}}function lc(e,t,n){const o=e.slice();return o[17]=t[n],o}function cc(t){let n,o,r,i,s;return{c(){n=F("label"),o=j("Changer"),r=F("input"),G(r,"id",hc),G(r,"name",hc),G(r,"type","file"),G(r,"accept","application/pdf"),r.hidden=!0,G(n,"class","btn btn-outline-secondary btn-sm svelte-xrs9al")},m(e,a){O(e,n,a),S(n,o),S(n,r),i||(s=z(r,"change",t[4]),i=!0)},p:e,d(e){e&&A(n),i=!1,s()}}}function uc(e){let t,n,o,r,s,a,l,c,u,d,p;return{c(){t=F("div"),n=F("span"),n.innerHTML='<span class="d-block d-sm-none">Choisir</span> \n            <span class="d-none d-sm-block">Choisir un OFP</span>',o=R(),r=F("label"),s=F("span"),s.textContent="OFP…",a=R(),l=F("span"),l.textContent="Sélectionner",c=R(),u=F("input"),G(n,"class","input-group-text svelte-xrs9al"),G(s,"class","d-block d-sm-none"),G(l,"class","d-none d-sm-block"),G(u,"id",hc),G(u,"name",hc),G(u,"type","file"),G(u,"accept","application/pdf"),u.disabled=e[0],u.hidden=!0,G(r,"class","input-group-text btn btn-primary svelte-xrs9al"),G(r,"for",hc),G(t,"class","input-group svelte-xrs9al"),X(t,"blink",!e[2])},m(i,m){O(i,t,m),S(t,n),S(t,o),S(t,r),S(r,s),S(r,a),S(r,l),S(r,c),S(r,u),d||(p=[z(u,"change",e[4]),z(u,"click",e[3],{once:!0})],d=!0)},p(e,n){1&n&&(u.disabled=e[0]),4&n&&X(t,"blink",!e[2])},d(e){e&&A(t),d=!1,i(p)}}}function dc(e){let t,n,o,r,s,a,l=gt.filter(e[8]),c=[];for(let t=0;t<l.length;t+=1)c[t]=pc(lc(e,l,t));return{c(){t=F("div"),n=F("select"),o=F("option"),r=j("pas d'ofp ?");for(let e=0;e<c.length;e+=1)c[e].c();o.__value=void 0,o.value=o.__value,G(n,"class","form-control-sm svelte-xrs9al"),n.disabled=e[0],G(t,"class","footer svelte-xrs9al")},m(i,l){O(i,t,l),S(t,n),S(n,o),S(o,r);for(let e=0;e<c.length;e+=1)c[e].m(n,null);s||(a=[z(n,"click",e[3],{once:!0}),z(n,"change",e[5])],s=!0)},p(e,t){if(0&t){let o;for(l=gt.filter(e[8]),o=0;o<l.length;o+=1){const r=lc(e,l,o);c[o]?c[o].p(r,t):(c[o]=pc(r),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}1&t&&(n.disabled=e[0])},d(e){e&&A(t),I(c,e),s=!1,i(a)}}}function pc(t){let n,o,r,i=t[17]+"";return{c(){n=F("option"),o=j(i),n.__value=r=t[17],n.value=n.__value},m(e,t){O(e,n,t),S(n,o)},p:e,d(e){e&&A(n)}}}function mc(t){let n,o,r,i;function s(e,t){return e[2]?cc:uc}let a=s(t),l=a(t),c=!t[2]&&!t[1]&&dc(t);return{c(){n=F("form"),l.c(),o=R(),c&&c.c(),G(n,"class","form-inline")},m(e,s){O(e,n,s),l.m(n,null),S(n,o),c&&c.m(n,null),r||(i=z(n,"submit",W(t[7])),r=!0)},p(e,[t]){a===(a=s(e))&&l?l.p(e,t):(l.d(1),l=a(e),l&&(l.c(),l.m(n,o))),e[2]||e[1]?c&&(c.d(1),c=null):c?c.p(e,t):(c=dc(e),c.c(),c.m(n,null))},i:e,o:e,d(e){e&&A(n),l.d(),c&&c.d(),r=!1,i()}}}const fc=[{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.min.js"},{type:"script",url:"./js/lidojs.1.6.12.min.js"},{type:"script",url:"https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.min.js"},{type:"script",url:"./js/wmo.1.6.12.var.js"},{type:"script",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.js"},{type:"script",url:"https://unpkg.com/pinch-zoom-element-js@1.1.2/dist/pinch-zoom-min.js"},{type:"link",url:"https://unpkg.com/mapbox-gl@1.10.1/dist/mapbox-gl.css"}],gc=async(e,t)=>{const n=await e.getPage(t);return(await n.getTextContent()).items.map((e=>e.str)).join(1===t?" ":"")};let hc="file";function vc(e,t,n){let o,r,i,s,a;d(e,Mt,(e=>n(11,o=e))),d(e,Et,(e=>n(1,r=e))),d(e,Pt,(e=>n(2,i=e))),d(e,St,(e=>n(12,s=e))),d(e,Ct,(e=>n(13,a=e)));let l,{kmlOptions:c}=t,u=!1,p=new Be;const m=ue();function f(){!function(e,t,n){let o=e.length;function r(){o=--o,o<1&&n()}t()?n():e.forEach((({type:e,url:t,options:n={async:!0,defer:!0}})=>{const i="script"===e,s=document.createElement(i?"script":"link");(t.startsWith("http")||t.startsWith("//"))&&(s.crossOrigin="anonymous");let a=!0;i?(s.src=t,s.async=n.async,s.defer=n.defer):(s.href=t,"prefetch"in n?(s.rel="prefetch",o-=1,a=!1):"preload"in n?(s.rel="preload",o-=1,a=!1):(s.rel="stylesheet",o-=1,a=!1)),a&&(s.onload=r),document.body.appendChild(s)}))}(fc,(()=>!!window["pdfjs-dist/build/pdf"]),(()=>{const e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.4.456/pdf.worker.min.js",l&&!l.destroyed||(l=new e.PDFWorker),p.resolve(!0)}))}const g=e=>{const t=new FileReader;return new Promise(((n,o)=>{t.onload=e=>{if(!l||l.destroyed){const e=window["pdfjs-dist/build/pdf"];l=new e.PDFWorker}(async e=>{const t=window["pdfjs-dist/build/pdf"],n=[];let o=0;const r=await t.getDocument(e).promise,i=r.numPages;for(let e=1;e<=i;e+=1){const t=await gc(r,e);if(t.includes("(Long copy #1)"))n.push(t),o+=1;else{if(0!==o)break;(t.includes("FPL SUMMARY")||t.includes("CREW PAIRING"))&&n.push(t)}}return n.join("\n")})({data:e.target.result,verbosity:0,worker:l}).then((e=>{if(e)try{const t=new editolido.Ofp("_PDFJS_"+e),r=new editolido.GeoGridIndex;r.data=window.WMO;const i=editolido.ogimetData(t,r);i.proxyImg=`https://ofp2map-gramet.vercel.app/api/${i.proxy}__${i.route.name.replace(/[^a-z0-9\-_]/giu,"_")}.png`,i.route.description=i.wmo.join(" "),t.ogimetData=i;let s=0,a=t.infos.averageFL;const l=t.route.segments.map((([e,t])=>(s+=e.distanceTo(t),[t,s,a])));l.unshift([t.route.points[0],0]),t.distanceMatrix=l;let u=[];try{u=t.wptNamesEET(t.route.points)}catch(e){}0===u.length?document.body.style.setProperty("--plane-halo-color","red"):document.body.style.setProperty("--plane-halo-color","var(--plane-color)"),t.timeMatrix=u,t.departure=t.route.points[0],t.arrival=t.route.points[t.route.points.length-1];try{Jt(),function(e,t){let n={...Zt,...t};const o=Jt();Vt(o,n);const r=e.description;if(o.setName(r),!e)return;const i=`${e.infos.depICAO}-${e.infos.destICAO}`,s=new editolido.Route(e.wptCoordinates(),{name:i,description:r}),a=new editolido.Route(e.wptCoordinatesAlternate(),{name:"Route Dégagement"}),l=new editolido.Route([s.points[0],s.points[s.points.length-1]]).split(300,{name:`Ortho ${i}`});let c=[];for(let t of e.tracks){let e=t.isComplete?"rnat":"rnat_incomplete";o.addLine(e,t);let n=new editolido.GeoPoint(t.points[0],{name:t.name,description:t.description});o.addPoint(e,n),t.isMine&&(c.push(n),n=new editolido.GeoPoint(t.points[t.points.length-1],{name:t.name,description:t.description}),c.push(n),o.addPoint(e,n))}o.addLine("greatcircle",l),o.addLine("rmain",s),o.addPoints("rmain",s,{excluded:c}),o.addLine("ralt",a),o.addPoints("ralt",a)}(t,c),n(t)}catch(e){o(e)}}catch(e){o(e)}else o(Error("OFP non reconnu. Attention il y a 2 OFP dans PilotMission, il faut bien choisir celui nommé « Dossier de vol OFP »."))}),(e=>{o(e)}))},t.onerror=e=>{o(Error("Fichier illisible !"))},t.readAsArrayBuffer(e)}))};return e.$$set=e=>{"kmlOptions"in e&&n(6,c=e.kmlOptions)},[u,r,i,f,async function(e){n(0,u=!0),b(Ct,a=!1,a),f(),await p.promise.then((()=>{const t=e.target.files[0],n=e.target.closest("form");t&&(b(Mt,o="loading",o),b(St,s=void 0,s),m("change","Choisir un OFP"),window.location.hash="#/map",g(t).then((t=>{b(Pt,i=t,i),b(Et,r=void 0,r),b(Mt,o="success",o),n.blur(),e.target.blur()})).catch((e=>{b(Mt,o=e,o),b(Pt,i=void 0,i)})).finally((()=>{n.reset()})))})),n(0,u=!1)},async function(e){n(0,u=!0),b(Mt,o="loading",o),f(),await p.promise.then((()=>{b(Pt,i=void 0,i);try{Jt(),b(Et,r=e.target.value,r),b(Mt,o="success",o)}catch(e){b(Mt,o=e,o)}window.location.hash="#/map"})),n(0,u=!1)},c,function(t){de.call(this,e,t)},e=>!ht.includes(e)]}class $c extends He{constructor(e){super(),Ue(this,e,vc,mc,a,{kmlOptions:6})}}function yc(e){let t,n,o,r;const i=e[4].default,s=p(i,e,e[3],null);return{c(){t=F("page"),s&&s.c(),G(t,"style",n=e[1]?`max-width: ${e[1]}; align-self: center;`:""),G(t,"class","svelte-1de5e3b"),X(t,"fadein",!1===e[0]),X(t,"d-none",!0===e[0])},m(e,n){O(e,t,n),s&&s.m(t,null),r=!0},p(e,[o]){s&&s.p&&(!r||8&o)&&g(s,i,e,e[3],r?f(i,e[3],o,null):h(e[3]),null),(!r||2&o&&n!==(n=e[1]?`max-width: ${e[1]}; align-self: center;`:""))&&G(t,"style",n),1&o&&X(t,"fadein",!1===e[0]),1&o&&X(t,"d-none",!0===e[0])},i(n){r||(Ie(s,n),o||be((()=>{o=_e(t,e[2],{}),o.start()})),r=!0)},o(e){Fe(s,e),r=!1},d(e){e&&A(t),s&&s.d(e)}}}function bc(e,t,n){let{$$slots:o={},$$scope:r}=t,{hidden:i}=t,{maxWidth:s}=t;return e.$$set=e=>{"hidden"in e&&n(0,i=e.hidden),"maxWidth"in e&&n(1,s=e.maxWidth),"$$scope"in e&&n(3,r=e.$$scope)},[i,s,(e,t,n)=>{if(void 0===i)return lt(e,t)},r,o]}class xc extends He{constructor(e){super(),Ue(this,e,bc,yc,a,{hidden:0,maxWidth:1})}}function wc(e,t,n){const o=e.slice();return o[3]=t[n][0],o[4]=t[n][1].url,o[5]=t[n][1].description,o[6]=t[n][1].version,o}function Cc(t){let n,o;return{c(){n=j(t[1]),o=j(".com")},m(e,t){O(e,n,t),O(e,o,t)},p:e,d(e){e&&A(n),e&&A(o)}}}function kc(e){let t;return{c(){t=j("ce lien")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Lc(e){let t;return{c(){t=j("ogimet.com")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Pc(e){let t;return{c(){t=j("Guide d'interprétation")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Mc(t){let n,o,r,i=t[3]+"",s=t[6]+"";return{c(){n=j(i),o=j(" v"),r=j(s)},m(e,t){O(e,n,t),O(e,o,t),O(e,r,t)},p:e,d(e){e&&A(n),e&&A(o),e&&A(r)}}}function Sc(e){let t,n,o,r,i,s,a=e[5]+"";return n=new gs({props:{href:e[4],$$slots:{default:[Mc]},$$scope:{ctx:e}}}),{c(){t=F("li"),We(n.$$.fragment),o=R(),r=j(a),i=R()},m(e,a){O(e,t,a),Ge(n,t,null),S(t,o),S(t,r),S(t,i),s=!0},p(e,t){const o={};512&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){s||(Ie(n.$$.fragment,e),s=!0)},o(e){Fe(n.$$.fragment,e),s=!1},d(e){e&&A(t),qe(n)}}}function Tc(e){let t;return{c(){t=j("liste des commits")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Ec(e){let t;return{c(){t=j("Equal Earth")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Oc(t){let n,o;return{c(){n=j(t[1]),o=j(".com")},m(e,t){O(e,n,t),O(e,o,t)},p:e,d(e){e&&A(n),e&&A(o)}}}function Ac(e){let t;return{c(){t=j("l'app")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Ic(e){let t;return{c(){t=j("le proxy")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Fc(e){let t;return{c(){t=F("span"),t.innerHTML="Fly<span>Tax</span>",G(t,"class","flytax")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Dc(e){let t,n,o,r,i,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,x,w,C,k,L,P,M,T,E,D,_,N,z,W,q,U,H,B,K,Z,V,J,Y,Q,X,ee,te,ne,oe,re,ie,se,ae,le,ce,ue,de,pe,me,fe,ge,he,ve,$e,ye,be,xe,we,Ce,ke,Le,Pe,Me,Se,Te,Ee,De,_e,je,Re,Ne,ze,Ue,He,Be,Ke,Ze,Ve,Je,Ye,Qe,Xe,et,tt,nt,ot,rt,it,st,at,lt,ct,ut,dt,pt,mt,ft,gt,ht,vt,$t,yt,bt,xt,wt,Ct,kt,Lt,Pt,Mt,St,Tt,Et,Ot,At,It,Ft,Dt,_t,jt,Rt,Nt,zt,Wt,Gt,qt,Ut,Ht,Bt,Kt,Zt,Vt,Jt,Yt,Qt,Xt,en,tn,nn,on,rn,sn,an,ln,cn,un,dn,pn,mn,fn,gn,hn,vn,$n,yn,bn,xn,wn,Cn,kn,Ln,Pn,Mn,Sn,Tn,En,On,An=window.atob("VmluY2VudCBCb3NzeQ==")+"";_=new gs({props:{href:`https://www.${e[1].toLowerCase()}.com`,$$slots:{default:[Cc]},$$scope:{ctx:e}}});let In=!0!==navigator.standalone&&function(e){let t,n,o,r;return n=new gs({props:{href:"http://flyingeek.github.io/lido-online/index.html",$$slots:{default:[kc]},$$scope:{ctx:e}}}),{c(){t=j("Pour mémoire, dans un navigateur, il suffit de partager l'url ou "),We(n.$$.fragment),o=j(".")},m(e,i){O(e,t,i),Ge(n,e,i),O(e,o,i),r=!0},i(e){r||(Ie(n.$$.fragment,e),r=!0)},o(e){Fe(n.$$.fragment,e),r=!1},d(e){e&&A(t),qe(n,e),e&&A(o)}}}(e);xe=new gs({props:{href:e[0],$$slots:{default:[Lc]},$$scope:{ctx:e}}}),Se=new gs({props:{href:"http://www.ogimet.com/guia_gramet.phtml.en",$$slots:{default:[Pc]},$$scope:{ctx:e}}});let Fn=Object.entries(As),Dn=[];for(let t=0;t<Fn.length;t+=1)Dn[t]=Sc(wc(e,Fn,t));const _n=e=>Fe(Dn[e],1,1,(()=>{Dn[e]=null}));return Gt=new gs({props:{href:"https://github.com/flyingeek/lido-online/commits/master",$$slots:{default:[Tc]},$$scope:{ctx:e}}}),Qt=new gs({props:{href:"https://equal-earth.com/physical/",$$slots:{default:[Ec]},$$scope:{ctx:e}}}),rn=new gs({props:{href:`https://www.${e[1].toLowerCase()}.com`,$$slots:{default:[Oc]},$$scope:{ctx:e}}}),vn=new gs({props:{href:"https://github.com/flyingeek/lido-online",$$slots:{default:[Ac]},$$scope:{ctx:e}}}),yn=new gs({props:{href:"https://github.com/flyingeek/ofp2map-gramet",$$slots:{default:[Ic]},$$scope:{ctx:e}}}),Tn=new gs({props:{href:"https://flyingeek.github.io/flytax/",rel:"noopener",$$slots:{default:[Fc]},$$scope:{ctx:e}}}),{c(){t=F("h2"),t.textContent="Préambule",n=R(),o=F("p"),o.textContent="OFP2MAP est une application PWA (ou Web Application), elle peut être lancée soit depuis un navigateur, soit depuis l'écran d'accueil de l'iPad. Initialement, simple convertisseur de l'OFP en KML, OFP2MAP est devenu une vraie application de cartographie. OFP2MAP nécessite des navigateurs récents pour fonctionner. Safari 14 iOS/Mac est compatible, Chrome 83 fonctionne aussi.",r=R(),i=F("p"),i.textContent="L'OFP ne transite sur aucun serveur, seule une route calculée (basée sur au plus 21 stations météo) est transmise à l'hébergeur du proxy (voir plus bas) puis à Ogimet.com pour récupérer le Gramet. L'app ne collecte aucune donnée.",s=R(),a=F("h2"),a.textContent="Utilisation",l=R(),c=F("ol"),u=F("li"),u.innerHTML="<p>Dans Pilot Mission, onglet «Dossier de vol», affichez le PDF nommé &quot;Dossier de vol OFP&quot;. Sur la gauche, cliquez sur le carré avec une flèche vers le haut. Choisissez «Enregistrer dans Fichiers». Dans l&#39;app, c&#39;est cet OFP qu&#39;il faut ensuite sélectionner.</p>",d=R(),p=F("li"),m=F("p"),m.textContent=`La carte par défaut dépend de la distance: ${e[1]} 2020, puis Mercator jusqu'à 1500nm puis LAMBERT, il est possible sur la carte, en haut à gauche, de basculer sur d'autres projections :`,f=R(),g=F("ul"),h=F("li"),h.textContent="LAMBERT NORTH (parallèles sécants N30 et N65) est recommandée au-dessus du N40",v=R(),$=F("li"),$.textContent="LAMBERT SOUTH & PACIFIC (sécants N30 et S15 ) sont recommandées sous N30",y=R(),b=F("li"),b.textContent="THE WORLD permet de disposer d'un Atlas off-line, c'est une projection Times",x=R(),w=F("li"),w.textContent="MERCATOR est une Web Mercator avec un thème est inspiré des cartes VFR. Il y a 12 niveaux de zoom, dont 6 disponibles off-line",C=R(),k=F("li"),k.textContent="=Physique= est un Atlas physique basé sur une projection Equal Earth (qui montre les continents et les pays à leur taille réelle) avec des étiquettes en français (par Tom Patterson).",L=R(),P=F("li"),M=j(e[1]),T=j(" 2020 est une carte VFR, elle couvre France/Belgique/Luxembourg/Suisse et "),E=j(An),D=j(" a autorisé son utilisation. Sur cette carte, déjà très dense en informations, la route Gramet, l'orthodromie et les FIR sont désactivées. La dernière version est disponible sur "),We(_.$$.fragment),N=j("."),z=R(),W=F("ol"),W.innerHTML="<li>Navigation dans la carte: on peut avec un doigt déplacer la carte, zoomer ou orienter la carte avec deux doigts.<br/><strong><big>☞</big> Il est aussi possible de modifier l&#39;angle de vue en balayant de bas en haut avec deux doigts</strong>.</li>",q=R(),U=F("h2"),U.textContent="Mémo visuel",H=R(),B=F("p"),B.innerHTML='<img src="./images/map-help.webp" alt="mémo visuel" id="memovisuel"/><br/>',K=R(),Z=F("h2"),Z.textContent="Réglages des calques",V=R(),J=F("p"),J.innerHTML='<figure><img src="./images/layers-settings.webp" alt="layers settings help"/><figcaption>Réglages des calques</figcaption></figure>La carte, en haut à droite, dispose d&#39;un bouton pour personnaliser les calques et les couleurs. Un calque contient un type d&#39;information, par exemple les cercles ETOPS, les FIR réglementées, les tracks, la route...\nIl est possible d&#39;afficher ou de masquer chaque calque en utilisant la coche qui précède son nom. La plupart des calques permettent de choisir la couleur et l&#39;opacité.\nPour les aéroports (le type avion est déterminé dans l&#39;OFP), il est possible de choisir entre 3 styles: couleur du statut, vert/rouge ou médical. Si vous optez pour le second, le statut reste accessible en cliquant sur un terrain (popup). Le style médical n&#39;affiche que les terrains de support médical.',Y=R(),Q=F("p"),Q.textContent="Trois boutons permettent la sauvegarde, la restauration ou un retour aux valeurs par défaut. Le bouton RESTAURER permet, après avoir fait des modifications temporaires (non sauvegardées), de revenir rapidement aux réglages précédents.",X=R(),ee=F("p"),ee.textContent="Pour vous entraîner, je vous recommande de modifier la couleur des terrains en vert/rouge et de sauvegarder votre choix.",te=R(),ne=F("p"),ne.textContent="Un mode FOCUS est disponible, par défaut il n'affiche que la route. Il s'active en cliquant sur FOCUS dans le champ ROUTE des réglages. Pour quitter ce mode, réaffichez les réglages et cliquez à nouveau sur le bouton.",oe=R(),re=F("p"),re.textContent="Le mode FOCUS est personnalisable, devenant ainsi un deuxième jeu de réglages : En mode FOCUS, affichez et modifiez les réglages, la sauvegarde est automatique. Dans mon usage personnel, à titre d'exemple, je modifie la couleur de la route pour une couleur rouge orangée bien plus lisible dans la projection The World.",ie=R(),se=F("p"),se.textContent="Si besoin, vous pouvez effacer vos réglages et revenir aux valeurs par défaut du mode FOCUS.",ae=R(),le=F("h2"),le.textContent="Particularités de l'iPad",ce=R(),ue=F("p"),ue.textContent="OFP2MAP ne peut être lancé que depuis l'écran d'accueil, l'application se lance en plein écran. On ne peut pas recharger la page comme dans un navigateur : il faudra pour cela aller dans le menu d'aide (cet écran) ou un bouton spécifique sera affiché en haut.",de=R(),pe=F("p"),me=j("Pour partager le lien vers OFP2MAP, utilisez le bouton situé en haut sur cette page, ou le lien situé sous le logo sur la page d'accueil, puis utilisez AirDrop. "),In&&In.c(),fe=R(),ge=F("p"),ge.textContent="À noter que parfois, des bugs d'affichage peuvent apparaître :  lorsque l'on retourne sur l'app, l'app est zoomée, il faut alors juste dézoomer en utilisant un pinch de deux doigts sur la barre de menu. Il est aussi possible de tuer l'app,  même en mode déconnecté, pour la relancer.",he=R(),ve=F("h2"),ve.textContent="GRAMET",$e=R(),ye=F("p"),be=j("Le GRAMET est un météogramme représentant le temps et l'espace. Il indique, en tout point de la route, et à l'heure de passage estimée, une coupe verticale de la météo prévue.\nLe GRAMET est réalisé par "),We(xe.$$.fragment),we=j(" à partir d'une route calculée. Il est possible d'afficher le GRAMET et sa route sur la carte. La route est particulièrement utile lors des vols océaniques car il n'y a aucune station en mer.\nPour construire la route du GRAMET, on utilise non pas les waypoints, mais au plus 21 stations météo (WMO). Il y a au total 13000 WMO dans le monde. Le GRAMET débute toujours à l'heure hh:00. Pour un decollage à 19h30, il débutera à 19h, pour un décollage à 19h31, il débutera à 20h. Pour les OFP anciens, c'est l'heure actuelle qui est envoyée. En mode déconnecté, OFP2MAP utilise la version du GRAMET qu'il a mis en cache pendant 48h. Après l'heure de décollage initialement prévue, vous pouvez forcer une mise à jour, soit en rechargeant l'ofp, soit en changeant brièvement de page."),Ce=R(),ke=F("p"),ke.textContent="Pour afficher le Gramet, cliquez sur sa miniature à gauche de l'OFP. Pour afficher la route, direction le réglage des calques de la carte. Par défaut elle est affichée en bleu. En fonction de l'heure de décollage (modifiable), le Gramet et sa miniature affichent la position avion. Avant l'horaire prévu de décollage, un bouton play permet de lancer une animation.",Le=R(),Pe=F("p"),Me=j("Pour mieux comprendre le GRAMET, je vous conseille son "),We(Se.$$.fragment),Te=j("."),Ee=R(),De=F("h2"),De.textContent="Position estimée / GPS",_e=R(),je=F("p"),je.textContent="Il est possible d'afficher la position avion sur la carte (bouton en forme de mire). Si vous l'autorisez, la position GPS sera prise en compte. Si la localisation GPS semble ne pas fonctionner (au sol ou en vol avec un gps externe), vérifiez que vous n'avez pas désactivé la localisation dans iPad / Réglages / Confidentialité / Service de localisation / Sites Safari. Vous devez choisir «Lorsque l'app est active» ou «Demander la prochaine fois». Le Bouton a deux ou trois positions: OFF, ON centré, ON non centré. Si, dans la position ON centré, vous déplacez la carte, il passe en ON non centré. L'appui suivant le repassera en ON centré. Un dernier appui le mettra sur OFF.",Re=R(),Ne=F("p"),Ne.textContent="En l'absence de GPS, l'avion dans la barre de menu (à gauche de l'heure de décollage) permet d'afficher la position estimée. Si la reconnaissance des waypoints s'est bien effectuée, les estimées de l'OFP seront prises en compte. Sinon, ce sera un simple ratio horaire, merci de me transmettre l'OFP dans ce cas (ce sera signalé par un avion rouge dans la barre de menu et par l'absence des éphémérides). L'heure de décollage est modifiable et permet toujours d'ajuster la position estimée.",ze=R(),Ue=F("h2"),Ue.textContent="ETOPS",He=R(),Be=F("p"),Be.textContent="La capacité ETOPS est determinée depuis l'OFP et les cercles sont tracés. Un drapeau ETOPS apparait dans le pavé d'information de l'OFP si le carburant est limitatif (20mn, soit environ 2T de marge sur 777). Pour avoir plus d'informations vous pouvez utiliser un plugin (voir ci-dessous).",Ke=R(),Ze=F("h2"),Ze.textContent="Éphémérides / Aurore Boréale",Ve=R(),Je=F("p"),Je.textContent="Le symbole du widget est dynamique:",Ye=R(),Qe=F("ul"),Qe.innerHTML="<li>☀️ si le soleil est visible pendant le vol</li> \n<li>🌕🌖🌗🌘🌑🌒🌓🌔 si la lune est visible pendant le vol</li> \n<li>🔭 si vous restez dans le noir</li> \n<li>un halo vert se superpose si les conditions sont favorables à l&#39;observation d&#39;aurores boréales</li>",Xe=R(),et=F("p"),et.textContent="Le widget affiche également les heures de lever ou de coucher. Un clic révèle des éphémérides avec 2 timelines. La première synthétise le jour et la nuit le long du vol ainsi que les zones favorables à l'observation des aurores boréales. La seconde montre les prévisions de Kp. Le Kp permet de prédire les aurores boréales. Entre ces deux timelines, la Lune est aussi un objet dynamique: l'angle des cornes va se modifier en fonction de la position estimée et cet angle est indiqué pour les levers et les couchers. Pour le soleil, l'aube nautique est indiquée, car ce n'est pas tout à fait la nuit: en vol l'horizon est partiellement discernable, et au sol on distingue encore le relief.",tt=R(),nt=F("p"),nt.innerHTML="<strong>Précision des calculs :</strong> si vous avez bien recalé la position estimée d&#39;OFP2MAP sur la carte (en modifiant l&#39;heure de décollage), la précision attendue est de ±2 min sous 72° de latitude et de 10 min au-delà. Pour la lune, on est plutôt sur une précision de ±5 min. Le calcul n&#39;est valable que pour la croisière, reportez vous à EWAS pour un calcul précis au départ ou à destination.",ot=R(),rt=F("p"),rt.innerHTML="<strong>Correction d&#39;altitude :</strong> Si votre niveau de vol est différent de l&#39;OFP, appliquez une correction de 15s/1000ft pour le soleil. Exemple: FL OFP 400, FL réel 360, il faut ajouter 1min pour le lever, et soustraire 1min pour le coucher.",it=R(),st=F("p"),st.textContent="Pour rappel, la chronologie des événements pour le soleil est:",at=R(),lt=F("table"),lt.innerHTML="<thead><tr><th>Angle</th><th>▲ Soleil levant</th><th>▼ Soleil couchant</th></tr></thead> \n<tbody><tr><td>-0.83°</td><td>↑ Lever du soleil (fin aube civile)</td><td>↓ Coucher du soleil (début crépuscule civil)</td></tr> \n<tr><td>-6°</td><td>↑ début aube civile (jour civil)</td><td>↓ fin du crépuscule civil (début nuit civile)</td></tr> \n<tr><td>-12°</td><td>↑ début aube nautique (jour nautique)</td><td>↓ fin du crépuscule nautique (début nuit nautique)</td></tr></tbody>",ct=R(),ut=F("p"),ut.textContent="Et pour la lune:",dt=R(),pt=F("table"),pt.innerHTML="<thead><tr><th>Jour</th><th>Nom</th><th>Hémisphère nord</th><th>Hémisphère sud</th></tr></thead> \n<tbody><tr><td>1</td><td>Nouvelle lune</td><td>🌑</td><td>🌑</td></tr> \n<tr><td></td><td>Premier croissant</td><td>🌒</td><td>🌘</td></tr> \n<tr><td>7</td><td>Premier quartier</td><td>🌓</td><td>🌗</td></tr> \n<tr><td></td><td>Lune gibbeuse croissante</td><td>🌔</td><td>🌖</td></tr> \n<tr><td>14</td><td>Pleine lune</td><td>🌕</td><td>🌕</td></tr> \n<tr><td></td><td>Lune gibbeuse décroissante</td><td>🌖</td><td>🌔</td></tr> \n<tr><td>21</td><td>Dernier quartier</td><td>🌗</td><td>🌓</td></tr> \n<tr><td></td><td>Dernier croissant</td><td>🌘</td><td>🌒</td></tr></tbody>",mt=R(),ft=F("h2"),ft.textContent="Mode off-line / Cache",gt=R(),ht=F("p"),ht.textContent="Une fois un premier OFP chargé, il est possible même en mode déconnecté de charger un autre OFP pour l'exporter. Le cache de l'App vous permettra de naviguer sur les cartes déjà visualisées. Pour mettre en cache les cartes, il suffit de les consulter.",vt=R(),$t=F("p"),$t.textContent=`Il existe aussi un bouton de mise en cache : le pictogramme ↓ situé à droite du sélecteur de carte. Sur les cartes LAMBERT, THE WORLD, =Physique= et ${e[1]}, il mettra en cache la totalité de la carte. Sur la MERCATOR, seule la partie de carte incluant la route sera mise en cache.`,yt=R(),bt=F("p"),bt.textContent=`Les premières mises en cache peuvent prendre du temps : sur la Mercator, un vol LC peut nécessiter le téléchargement de 40Mo de données. Les caches des autres projections utilisent : 7Mo pour la NORTH, 4Mo pour la PACIFIC, 7Mo pour la SOUTH, 32Mo pour THE WORLD, 40Mo pour =Physique= et 40Mo pour ${e[1]}.`,xt=R(),wt=F("h2"),wt.textContent="Export / Plugins (Raccourcis)",Ct=R(),kt=F("p"),kt.innerHTML="<strong>Page Export :</strong> Elle permet d&#39;exporter la route et les tracks au format KML, elle dispose de ses propres réglages pour générer le KML. Pour l&#39;export il est possible d&#39;ajouter des repères. Les repères sont utiles pour afficher des informations textuelles dans MapsMe ou__ Avenza. Le bouton « COMME CARTE » permet de récupérer les couleurs choisies pour la carte.",Lt=R(),Pt=F("p"),Pt.innerHTML='Sur iPad, l&#39;export des fichiers KML affiche une page un peu particulière, utilisez le bouton <svg style="vertical-align: bottom;"><use xlink:href="#share-symbol"></use></svg> pour choisir l&#39;app qui recevra le fichier. Cliquez en haut à gauche sur OK pour revenir à OFP2MAP. Alternativement, vous pouvez utiliser « Options... » pour définir une app qui recevra les fichiers kml par défaut et utiliser Ouvrir dans « nom de l&#39;app ».',Mt=R(),St=F("p"),St.textContent="Un raccourci peut être lancé depuis la page Export, il recevra les fichiers KML, la route Lido et le Gramet. Le nom du raccourci est modifiable, il faut que le raccourci soit installé avant de le lancer.",Tt=R(),Et=F("p"),Et.innerHTML="<strong>Plugins depuis la carte :</strong> Il est aussi possible de lancer des raccourcis ayant accès au contenu de l&#39;OFP depuis le pavé d&#39;informations du vol dans la barre de menu. Il faut autoriser les raccourcis non fiables dans Réglages/Raccourcis (après avoir lancé au moins un raccourci &quot;fiable&quot; depuis la Galerie), puis installer le(s) plugin(s).",Ot=R(),At=F("p"),At.innerHTML="<strong>Liste des plugins :</strong>",It=R(),Ft=F("ul");for(let e=0;e<Dn.length;e+=1)Dn[e].c();Dt=R(),_t=F("h2"),_t.textContent="Mise à jour",jt=R(),Rt=F("p"),Rt.textContent="L'app détecte les mises à jour automatiquement, normalement vous n'avez rien à faire. Eventuellement un prompt peut\napparaitre vous demandant d'autoriser cette mise à jour. La version AIRAC et le type avion détecté dans l'OFP sont affichés en bas à droite de la carte dans le champ d'attribution.",Nt=R(),zt=F("p"),Wt=j("Après une mise à jour, les dernières nouveautés d'OFP2MAP s'affichent. Le bouton CHANGELOG en haut de cette page permet de consulter l'historique, et vous pouvez aussi consulter la "),We(Gt.$$.fragment),qt=j(" sur GitHub. Je poste les nouveautés importantes dans Yammer/Mapsme et Teams/MyConcorde."),Ut=R(),Ht=F("h2"),Ht.textContent="Crédits",Bt=R(),Kt=F("ul"),Zt=F("li"),Zt.textContent="Les données terrains/FIR sont fournies par Olivier Ravet forum Yammer/Mapsme",Vt=R(),Jt=F("li"),Yt=j("=Physique= est une carte de Tom Patterson disponible sur "),We(Qt.$$.fragment),Xt=R(),en=F("li"),tn=j("La dernière version de la carte "),nn=j(e[1]),on=j(" est disponible sur le site "),We(rn.$$.fragment),sn=R(),an=F("li"),an.textContent="Les autres cartes sont de Jean-Baptiste Denizot forum Yammer/QGIS & Avenza Maps",ln=R(),cn=F("li"),cn.textContent="Le GRAMET provient du site ogimet.com",un=R(),dn=F("li"),dn.textContent="Le site est développé en javascript à l'aide du framework SVELTE",pn=R(),mn=F("li"),mn.textContent="La partie serveur (un proxy pour pouvoir récupérer l'image du GRAMET) est en python.",fn=R(),gn=F("li"),hn=j("Eric Delord CDB 777 est l'auteur. Le code source est disponible sur GitHub pour "),We(vn.$$.fragment),$n=j(" et "),We(yn.$$.fragment),bn=R(),xn=F("h2"),xn.textContent="Hébergement",wn=R(),Cn=F("p"),Cn.textContent="L'hébergement des images est normalement fourni par alwaysdata.com (pack gratuit) mais en raison d'un blacklistage sur le réseau internet d'AF, les fonds de cartes sont à présent hébergés sur netlify. Le proxy gramet est lui dorénavant hébergé sur vercel. Le site est hébergé sur GitHub.",kn=R(),Ln=F("h2"),Ln.textContent="Liens",Pn=R(),Mn=F("ul"),Sn=F("li"),We(Tn.$$.fragment),En=j(" une aide aux calculs des frais professionnels (même auteur)."),G(t,"id","md_préambule"),G(a,"id","md_utilisation"),G(W,"start","3"),G(U,"id","md_mémo-visuel"),G(Z,"id","md_réglages-des-calques"),G(le,"id","md_particularités-de-lipad"),G(ve,"id","md_gramet"),G(De,"id","md_position-estimée--gps"),G(Ue,"id","md_etops"),G(Ze,"id","md_éphémérides--aurore-boréale"),G(lt,"class","table"),G(pt,"class","table moon"),G(ft,"id","md_mode-off-line--cache"),G(wt,"id","md_export--plugins-raccourcis"),G(_t,"id","md_mise-à-jour"),G(Ht,"id","md_crédits"),G(xn,"id","md_hébergement"),G(Ln,"id","md_liens")},m(e,A){O(e,t,A),O(e,n,A),O(e,o,A),O(e,r,A),O(e,i,A),O(e,s,A),O(e,a,A),O(e,l,A),O(e,c,A),S(c,u),S(c,d),S(c,p),S(p,m),S(p,f),S(p,g),S(g,h),S(g,v),S(g,$),S(g,y),S(g,b),S(g,x),S(g,w),S(g,C),S(g,k),S(g,L),S(g,P),S(P,M),S(P,T),S(P,E),S(P,D),Ge(_,P,null),S(P,N),O(e,z,A),O(e,W,A),O(e,q,A),O(e,U,A),O(e,H,A),O(e,B,A),O(e,K,A),O(e,Z,A),O(e,V,A),O(e,J,A),O(e,Y,A),O(e,Q,A),O(e,X,A),O(e,ee,A),O(e,te,A),O(e,ne,A),O(e,oe,A),O(e,re,A),O(e,ie,A),O(e,se,A),O(e,ae,A),O(e,le,A),O(e,ce,A),O(e,ue,A),O(e,de,A),O(e,pe,A),S(pe,me),In&&In.m(pe,null),O(e,fe,A),O(e,ge,A),O(e,he,A),O(e,ve,A),O(e,$e,A),O(e,ye,A),S(ye,be),Ge(xe,ye,null),S(ye,we),O(e,Ce,A),O(e,ke,A),O(e,Le,A),O(e,Pe,A),S(Pe,Me),Ge(Se,Pe,null),S(Pe,Te),O(e,Ee,A),O(e,De,A),O(e,_e,A),O(e,je,A),O(e,Re,A),O(e,Ne,A),O(e,ze,A),O(e,Ue,A),O(e,He,A),O(e,Be,A),O(e,Ke,A),O(e,Ze,A),O(e,Ve,A),O(e,Je,A),O(e,Ye,A),O(e,Qe,A),O(e,Xe,A),O(e,et,A),O(e,tt,A),O(e,nt,A),O(e,ot,A),O(e,rt,A),O(e,it,A),O(e,st,A),O(e,at,A),O(e,lt,A),O(e,ct,A),O(e,ut,A),O(e,dt,A),O(e,pt,A),O(e,mt,A),O(e,ft,A),O(e,gt,A),O(e,ht,A),O(e,vt,A),O(e,$t,A),O(e,yt,A),O(e,bt,A),O(e,xt,A),O(e,wt,A),O(e,Ct,A),O(e,kt,A),O(e,Lt,A),O(e,Pt,A),O(e,Mt,A),O(e,St,A),O(e,Tt,A),O(e,Et,A),O(e,Ot,A),O(e,At,A),O(e,It,A),O(e,Ft,A);for(let e=0;e<Dn.length;e+=1)Dn[e].m(Ft,null);O(e,Dt,A),O(e,_t,A),O(e,jt,A),O(e,Rt,A),O(e,Nt,A),O(e,zt,A),S(zt,Wt),Ge(Gt,zt,null),S(zt,qt),O(e,Ut,A),O(e,Ht,A),O(e,Bt,A),O(e,Kt,A),S(Kt,Zt),S(Kt,Vt),S(Kt,Jt),S(Jt,Yt),Ge(Qt,Jt,null),S(Kt,Xt),S(Kt,en),S(en,tn),S(en,nn),S(en,on),Ge(rn,en,null),S(Kt,sn),S(Kt,an),S(Kt,ln),S(Kt,cn),S(Kt,un),S(Kt,dn),S(Kt,pn),S(Kt,mn),S(Kt,fn),S(Kt,gn),S(gn,hn),Ge(vn,gn,null),S(gn,$n),Ge(yn,gn,null),O(e,bn,A),O(e,xn,A),O(e,wn,A),O(e,Cn,A),O(e,kn,A),O(e,Ln,A),O(e,Pn,A),O(e,Mn,A),S(Mn,Sn),Ge(Tn,Sn,null),S(Sn,En),On=!0},p(e,[t]){const n={};512&t&&(n.$$scope={dirty:t,ctx:e}),_.$set(n);const o={};1&t&&(o.href=e[0]),512&t&&(o.$$scope={dirty:t,ctx:e}),xe.$set(o);const r={};if(512&t&&(r.$$scope={dirty:t,ctx:e}),Se.$set(r),0&t){let n;for(Fn=Object.entries(As),n=0;n<Fn.length;n+=1){const o=wc(e,Fn,n);Dn[n]?(Dn[n].p(o,t),Ie(Dn[n],1)):(Dn[n]=Sc(o),Dn[n].c(),Ie(Dn[n],1),Dn[n].m(Ft,null))}for(Oe(),n=Fn.length;n<Dn.length;n+=1)_n(n);Ae()}const i={};512&t&&(i.$$scope={dirty:t,ctx:e}),Gt.$set(i);const s={};512&t&&(s.$$scope={dirty:t,ctx:e}),Qt.$set(s);const a={};512&t&&(a.$$scope={dirty:t,ctx:e}),rn.$set(a);const l={};512&t&&(l.$$scope={dirty:t,ctx:e}),vn.$set(l);const c={};512&t&&(c.$$scope={dirty:t,ctx:e}),yn.$set(c);const u={};512&t&&(u.$$scope={dirty:t,ctx:e}),Tn.$set(u)},i(e){if(!On){Ie(_.$$.fragment,e),Ie(In),Ie(xe.$$.fragment,e),Ie(Se.$$.fragment,e);for(let e=0;e<Fn.length;e+=1)Ie(Dn[e]);Ie(Gt.$$.fragment,e),Ie(Qt.$$.fragment,e),Ie(rn.$$.fragment,e),Ie(vn.$$.fragment,e),Ie(yn.$$.fragment,e),Ie(Tn.$$.fragment,e),On=!0}},o(e){Fe(_.$$.fragment,e),Fe(In),Fe(xe.$$.fragment,e),Fe(Se.$$.fragment,e),Dn=Dn.filter(Boolean);for(let e=0;e<Dn.length;e+=1)Fe(Dn[e]);Fe(Gt.$$.fragment,e),Fe(Qt.$$.fragment,e),Fe(rn.$$.fragment,e),Fe(vn.$$.fragment,e),Fe(yn.$$.fragment,e),Fe(Tn.$$.fragment,e),On=!1},d(e){e&&A(t),e&&A(n),e&&A(o),e&&A(r),e&&A(i),e&&A(s),e&&A(a),e&&A(l),e&&A(c),qe(_),e&&A(z),e&&A(W),e&&A(q),e&&A(U),e&&A(H),e&&A(B),e&&A(K),e&&A(Z),e&&A(V),e&&A(J),e&&A(Y),e&&A(Q),e&&A(X),e&&A(ee),e&&A(te),e&&A(ne),e&&A(oe),e&&A(re),e&&A(ie),e&&A(se),e&&A(ae),e&&A(le),e&&A(ce),e&&A(ue),e&&A(de),e&&A(pe),In&&In.d(),e&&A(fe),e&&A(ge),e&&A(he),e&&A(ve),e&&A($e),e&&A(ye),qe(xe),e&&A(Ce),e&&A(ke),e&&A(Le),e&&A(Pe),qe(Se),e&&A(Ee),e&&A(De),e&&A(_e),e&&A(je),e&&A(Re),e&&A(Ne),e&&A(ze),e&&A(Ue),e&&A(He),e&&A(Be),e&&A(Ke),e&&A(Ze),e&&A(Ve),e&&A(Je),e&&A(Ye),e&&A(Qe),e&&A(Xe),e&&A(et),e&&A(tt),e&&A(nt),e&&A(ot),e&&A(rt),e&&A(it),e&&A(st),e&&A(at),e&&A(lt),e&&A(ct),e&&A(ut),e&&A(dt),e&&A(pt),e&&A(mt),e&&A(ft),e&&A(gt),e&&A(ht),e&&A(vt),e&&A($t),e&&A(yt),e&&A(bt),e&&A(xt),e&&A(wt),e&&A(Ct),e&&A(kt),e&&A(Lt),e&&A(Pt),e&&A(Mt),e&&A(St),e&&A(Tt),e&&A(Et),e&&A(Ot),e&&A(At),e&&A(It),e&&A(Ft),I(Dn,e),e&&A(Dt),e&&A(_t),e&&A(jt),e&&A(Rt),e&&A(Nt),e&&A(zt),qe(Gt),e&&A(Ut),e&&A(Ht),e&&A(Bt),e&&A(Kt),qe(Qt),qe(rn),qe(vn),qe(yn),e&&A(bn),e&&A(xn),e&&A(wn),e&&A(Cn),e&&A(kn),e&&A(Ln),e&&A(Pn),e&&A(Mn),qe(Tn)}}}function _c(e,t,n){let o,r;d(e,Pt,(e=>n(2,r=e)));const i=window.atob("Q2FydGFCb3NzeQ==");return e.$$.update=()=>{4&e.$$.dirty&&n(0,o=r?r.ogimetData.url:"http://www.ogimet.com")},[o,i,r]}class jc extends He{constructor(e){super(),Ue(this,e,_c,Dc,a,{})}}function Rc(e,t,n){const o=e.slice();return o[3]=t[n][0],o[4]=t[n][1],o}function Nc(e,t,n){const o=e.slice();return o[7]=t[n][0],o[8]=t[n][1],o}function zc(e,t,n){const o=e.slice();return o[11]=t[n],o}function Wc(e){let t,n,o,r;function i(e,t){return(null==n||7&t)&&(n=!!e[3].match(eu)),n?qc:Gc}let s=i(e,-1),a=s(e),l=Object.entries(e[4]),c=[];for(let t=0;t<l.length;t+=1)c[t]=Kc(Nc(e,l,t));return{c(){t=F("li"),a.c(),o=R();for(let e=0;e<c.length;e+=1)c[e].c();r=R(),G(t,"class","svelte-1i5p3sa")},m(e,n){O(e,t,n),a.m(t,null),S(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null);S(t,r)},p(e,n){if(s===(s=i(e,n))&&a?a.p(e,n):(a.d(1),a=s(e),a&&(a.c(),a.m(t,o))),7&n){let o;for(l=Object.entries(e[4]),o=0;o<l.length;o+=1){const i=Nc(e,l,o);c[o]?c[o].p(i,n):(c[o]=Kc(i),c[o].c(),c[o].m(t,r))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}},d(e){e&&A(t),a.d(),I(c,e)}}}function Gc(e){let t,n,o=e[3]+"";return{c(){t=F("h2"),n=j(o),G(t,"class","svelte-1i5p3sa")},m(e,o){O(e,t,o),S(t,n)},p(e,t){7&t&&o!==(o=e[3]+"")&&B(n,o)},d(e){e&&A(t)}}}function qc(e){let t,n=tu(e[3])+"";return{c(){t=F("h2"),G(t,"class","svelte-1i5p3sa")},m(e,o){O(e,t,o),t.innerHTML=n},p(e,o){7&o&&n!==(n=tu(e[3])+"")&&(t.innerHTML=n)},d(e){e&&A(t)}}}function Uc(e){let t,n=Yc(e[8])+"";return{c(){t=F("div"),G(t,"class","item svelte-1i5p3sa")},m(e,o){O(e,t,o),t.innerHTML=n},p(e,o){7&o&&n!==(n=Yc(e[8])+"")&&(t.innerHTML=n)},d(e){e&&A(t)}}}function Hc(e){let t,n=e[8].raw.replace(/^\n\n|\n\n$/,"").split("\n"),o=[];for(let t=0;t<n.length;t+=1)o[t]=Bc(zc(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=N()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);O(e,t,n)},p(e,r){if(7&r){let i;for(n=e[8].raw.replace(/^\n\n|\n\n$/,"").split("\n"),i=0;i<n.length;i+=1){const s=zc(e,n,i);o[i]?o[i].p(s,r):(o[i]=Bc(s),o[i].c(),o[i].m(t.parentNode,t))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(e){I(o,e),e&&A(t)}}}function Bc(e){let t,n=Yc(e[11]).replace("- ",`- <span class="badge bg-${ru(e[7])} ${iu(e[7])}">${Xc(e[7])}</span>`)+"";return{c(){t=F("div"),G(t,"class","item svelte-1i5p3sa")},m(e,o){O(e,t,o),t.innerHTML=n},p(e,o){7&o&&n!==(n=Yc(e[11]).replace("- ",`- <span class="badge bg-${ru(e[7])} ${iu(e[7])}">${Xc(e[7])}</span>`)+"")&&(t.innerHTML=n)},d(e){e&&A(t)}}}function Kc(e){let t;function n(e,t){return"raw"!==e[7]?Hc:Uc}let o=n(e),r=o(e);return{c(){r.c(),t=N()},m(e,n){r.m(e,n),O(e,t,n)},p(e,i){o===(o=n(e))&&r?r.p(e,i):(r.d(1),r=o(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&A(t)}}}function Zc(e){let t,n="raw"!==e[3]&&Wc(e);return{c(){n&&n.c(),t=N()},m(e,o){n&&n.m(e,o),O(e,t,o)},p(e,o){"raw"!==e[3]?n?n.p(e,o):(n=Wc(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&A(t)}}}function Vc(t){let n,o=Jc(t[0],{version:t[2],limit:t[1]}),r=[];for(let e=0;e<o.length;e+=1)r[e]=Zc(Rc(t,o,e));return{c(){n=F("ul");for(let e=0;e<r.length;e+=1)r[e].c();G(n,"class","markdown svelte-1i5p3sa")},m(e,t){O(e,n,t);for(let e=0;e<r.length;e+=1)r[e].m(n,null)},p(e,[t]){if(7&t){let i;for(o=Jc(e[0],{version:e[2],limit:e[1]}),i=0;i<o.length;i+=1){const s=Rc(e,o,i);r[i]?r[i].p(s,t):(r[i]=Zc(s),r[i].c(),r[i].m(n,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},i:e,o:e,d(e){e&&A(n),I(r,e)}}}const Jc=(e,{version:t,limit:n}={})=>{if(!e)return[];let o=Object.entries(e.CHANGELOG);return t&&(o=o.filter((([e])=>{const n=e.match(/\[([^\]]+)\]/);return!!n&&rt(n[1],t)>0}))),n?o.slice(0,n+1):o};function Yc(e){return e.replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/_(.*)\_/gim,"<i>$1</i>").replace(/\[(.*?)\]\((#.*?)\)/gim,"<a href='$2'>$1</a>").replace(/\[(.*?)\]\((.*?)\)/gim,"<a href='$2' rel='noreferrer' target='_blank'>$1</a>").replace(/^$/g,"<br />").trim()}const Qc={ADDED:"Ajouté",FIXED:"Corrigé",DEPRECATED:"Obsolète",CHANGED:"Modifié",REMOVED:"Supprimé",SECURITY:"Sécurité"},Xc=e=>Qc[e.toUpperCase()]||e,eu=/\[([^\]]+)\].+(\d{4})-(\d{2})-(\d{2})/,tu=e=>e.replace(/\[([^\]]+)\].+(\d{4})-(\d{2})-(\d{2})/,"<span class='version'>$1</span> <span class='date'>$4/$3/$2</span>"),nu={ADDED:"primary",FIXED:"success",DEPRECATED:"warning",CHANGED:"info",REMOVED:"danger",SECURITY:"secondary"},ou={ADDED:"text-white",FIXED:"text-white",DEPRECATED:"text-dark",CHANGED:"text-dark",REMOVED:"text-white",SECURITY:"text-white"},ru=e=>nu[e.toUpperCase()]||"light",iu=e=>ou[e.toUpperCase()]||"text-dark";function su(e,t,n){let{data:o}=t,{limit:r}=t,{version:i}=t;return e.$$set=e=>{"data"in e&&n(0,o=e.data),"limit"in e&&n(1,r=e.limit),"version"in e&&n(2,i=e.version)},[o,r,i]}class au extends He{constructor(e){super(),Ue(this,e,su,Vc,a,{data:0,limit:1,version:2})}}function lu(e){let t,n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b,w,C,k,L,P,M={ctx:e,current:null,token:null,hasCatch:!1,pending:du,then:uu,catch:cu,value:10,blocks:[,,,]};return Re(v=e[4],M),{c(){t=F("div"),n=F("div"),o=F("div"),r=F("div"),s=F("h5"),a=j(e[1]),l=R(),c=F("small"),u=F("input"),d=R(),p=F("label"),p.textContent="Afficher lors des mises à jour",m=R(),f=F("button"),g=R(),h=F("div"),M.block.c(),b=R(),w=F("div"),G(u,"id","display-on-update"),G(u,"class","form-check-input"),G(u,"type","checkbox"),G(p,"for","display-on-update"),G(p,"class","form-check-label"),G(c,"class","d-inline-block ms-4 form-check form-switch"),G(s,"class","modal-title"),G(f,"type","button"),G(f,"class","btn-close"),G(f,"data-dismiss","modal"),G(f,"aria-label","Close"),G(r,"class","modal-header"),G(h,"class","modal-body svelte-40kcd8"),X(h,"expanded",!e[2]),G(o,"class","modal-content"),G(n,"class","modal-dialog modal-xl modal-dialog-centered"),G(n,"role","document"),G(t,"class","modal svelte-40kcd8"),G(t,"tabindex","-1"),G(t,"role","dialog"),G(w,"class","modal-backdrop show")},m(i,v){O(i,t,v),S(t,n),S(n,o),S(o,r),S(r,s),S(s,a),S(s,l),S(s,c),S(c,u),u.checked=e[5],S(c,d),S(c,p),S(r,m),S(r,f),S(o,g),S(o,h),M.block.m(h,M.anchor=null),M.mount=()=>h,M.anchor=null,O(i,b,v),O(i,w,v),k=!0,L||(P=[z(u,"change",e[7]),z(u,"change",e[8]),z(f,"click",e[3]),x($=Gn.call(null,n)),z(n,"click_outside",e[3])],L=!0)},p(t,n){e=t,(!k||2&n)&&B(a,e[1]),32&n&&(u.checked=e[5]),M.ctx=e,16&n&&v!==(v=e[4])&&Re(v,M)||function(e,t,n){const o=t.slice(),{resolved:r}=e;e.current===e.then&&(o[e.value]=r),e.current===e.catch&&(o[e.error]=r),e.block.p(o,n)}(M,e,n),4&n&&X(h,"expanded",!e[2])},i(e){k||(Ie(M.block),y||be((()=>{y=_e(t,lt,{}),y.start()})),C||be((()=>{C=_e(w,lt,{}),C.start()})),k=!0)},o(e){for(let e=0;e<3;e+=1){Fe(M.blocks[e])}k=!1},d(e){e&&A(t),M.block.d(),M.token=null,M=null,e&&A(b),e&&A(w),L=!1,i(P)}}}function cu(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function uu(e){let t,n;return t=new au({props:{data:e[10],version:e[2]}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};16&n&&(o.data=e[10]),4&n&&(o.version=e[2]),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function du(t){let n;return{c(){n=F("p"),n.textContent="chargement..."},m(e,t){O(e,n,t)},p:e,i:e,o:e,d(e){e&&A(n)}}}function pu(e){let t,n,o=e[0]&&lu(e);return{c(){o&&o.c(),t=N()},m(e,r){o&&o.m(e,r),O(e,t,r),n=!0},p(e,[n]){e[0]?o?(o.p(e,n),1&n&&Ie(o,1)):(o=lu(e),o.c(),Ie(o,1),o.m(t.parentNode,t)):o&&(Oe(),Fe(o,1,1,(()=>{o=null})),Ae())},i(e){n||(Ie(o),n=!0)},o(e){Fe(o),n=!1},d(e){o&&o.d(e),e&&A(t)}}}const mu=pn.changelogOnUpdate,fu=()=>null===mn.getItem(mu)||!!mn.getItem(mu);function gu(e,t,n){const o=ue();let r,{visible:i=!1}=t,{title:s="CHANGELOG"}=t,{version:a}=t,l=fu();const c=async()=>{n(0,i=!0),n(4,r=fetch("./CHANGELOG.json").then((e=>{if(e.ok)return e.json();throw new Error("CHANGELOG.json not available")})))};a&&l&&c();return e.$$set=e=>{"visible"in e&&n(0,i=e.visible),"title"in e&&n(1,s=e.title),"version"in e&&n(2,a=e.version)},[i,s,a,()=>{n(0,i=!1),o("close")},r,l,c,function(){l=this.checked,n(5,l)},()=>mn.setItem(mu,l)]}class hu extends He{constructor(e){super(),Ue(this,e,gu,pu,a,{visible:0,title:1,version:2,show:6,close:3})}get show(){return this.$$.ctx[6]}get close(){return this.$$.ctx[3]}}function vu(e,t,n){const o=e.slice();return o[19]=t[n].id,o[20]=t[n].label,o}function $u(t){let n,o,r,i,s=!!navigator.share&&function(t){let n,o,r;return{c(){n=F("button"),n.textContent="Partager",G(n,"class","btn btn-outline-secondary btn-sm svelte-1ebgrk0")},m(e,t){O(e,n,t),o||(r=z(n,"click",it),o=!0)},p:e,d(e){e&&A(n),o=!1,r()}}}();return{c(){s&&s.c(),n=R(),o=F("button"),o.textContent="Recharger",G(o,"class","btn btn-outline-secondary btn-sm svelte-1ebgrk0")},m(e,a){s&&s.m(e,a),O(e,n,a),O(e,o,a),r||(i=z(o,"click",t[7]),r=!0)},p(e,t){navigator.share&&s.p(e,t)},d(e){s&&s.d(e),e&&A(n),e&&A(o),r=!1,i()}}}function yu(e){let t,n,o,r,i=e[20]+"";return{c(){t=F("option"),n=j(i),t.__value=o=e[19],t.value=t.__value,t.selected=r=e[19]===e[0]},m(e,o){O(e,t,o),S(t,n)},p(e,n){257&n&&r!==(r=e[19]===e[0])&&(t.selected=r)},d(e){e&&A(t)}}}function bu(e){let t,n,o,r,a,l,c,u,d,p,m,f,g,h,v,$,y,b,w,C,k,L,P;t=new hu({props:{}}),e[10](t);let M=!0===navigator.standalone&&$u(e),T=e[8],E=[];for(let t=0;t<T.length;t+=1)E[t]=yu(vu(e,T,t));return C=new jc({}),{c(){We(t.$$.fragment),n=R(),o=F("div"),r=F("div"),a=F("div"),l=F("h1"),c=F("div"),c.innerHTML='<img src="images/ofp2map-icons/icon-128x128.png" alt="logo" class="svelte-1ebgrk0"/>',u=R(),d=F("div"),p=F("div"),p.textContent=`OFP2MAP v${xu}`,m=F("small"),f=j("ServiceWorker : "),g=j(e[2]),h=R(),M&&M.c(),v=R(),$=F("button"),$.textContent="CHANGELOG",y=R(),b=F("select");for(let e=0;e<E.length;e+=1)E[e].c();w=R(),We(C.$$.fragment),G(c,"class","app svelte-1ebgrk0"),G(m,"class","svelte-1ebgrk0"),G(d,"class","infos svelte-1ebgrk0"),G($,"class","btn btn-outline-secondary btn-sm svelte-1ebgrk0"),G(b,"class","form-select form-select-sm svelte-1ebgrk0"),void 0===e[0]&&be((()=>e[12].call(b))),G(l,"class","svelte-1ebgrk0"),G(r,"class","scrollContainer svelte-1ebgrk0"),G(o,"class","help markdown svelte-1ebgrk0"),G(o,"style",e[6])},m(i,T){Ge(t,i,T),O(i,n,T),O(i,o,T),S(o,r),S(r,a),S(a,l),S(l,c),S(l,u),S(l,d),S(d,p),S(d,m),S(m,f),S(m,g),S(l,h),M&&M.m(l,null),S(l,v),S(l,$),S(l,y),S(l,b);for(let e=0;e<E.length;e+=1)E[e].m(b,null);V(b,e[0]),e[13](l),S(a,w),Ge(C,a,null),e[14](r),k=!0,L||(P=[z(m,"click",e[11],{once:!0}),z($,"click",(function(){s(e[5].show)&&e[5].show.apply(this,arguments)})),z(b,"change",e[12]),z(b,"change",e[9]),x(bn.call(null,b))],L=!0)},p(n,[r]){e=n;if(t.$set({}),(!k||4&r)&&B(g,e[2]),!0===navigator.standalone&&M.p(e,r),257&r){let t;for(T=e[8],t=0;t<T.length;t+=1){const n=vu(e,T,t);E[t]?E[t].p(n,r):(E[t]=yu(n),E[t].c(),E[t].m(b,null))}for(;t<E.length;t+=1)E[t].d(1);E.length=T.length}257&r&&V(b,e[0]),(!k||64&r)&&G(o,"style",e[6])},i(e){k||(Ie(t.$$.fragment,e),Ie(C.$$.fragment,e),k=!0)},o(e){Fe(t.$$.fragment,e),Fe(C.$$.fragment,e),k=!1},d(r){e[10](null),qe(t,r),r&&A(n),r&&A(o),M&&M.d(),I(E,r),e[13](null),qe(C),e[14](null),L=!1,i(P)}}}const xu="1.15.2";function wu(e,t,n){let o,r;d(e,vt,(e=>n(1,r=e)));let i="";let s,a;const l=[];let c,u,p,m;le((()=>(c=a.querySelectorAll("h2[id]"),p=new IntersectionObserver((e=>{const t=a.scrollTop;if(t<Math.floor(a.scrollHeight-a.clientHeight)){let e=l[0].id;for(const n of c){if(t<n.offsetTop-a.offsetTop-s.clientHeight)break;e=n.id}n(0,u=e)}}),{root:a,rootMargin:0-s.clientHeight+"px 0px 30px 0px",threshold:1}),c.forEach((e=>{l.push({id:e.id,label:e.innerText}),p.observe(e)})),n(0,u=l[0].id),()=>{p.disconnect(),c=void 0,p=void 0})));return e.$$.update=()=>{var t;2&e.$$.dirty&&(t=r)&&t.messageSW({type:"GET_VERSION"}).then((e=>n(2,i=e))),1&e.$$.dirty&&n(6,o=void 0===u||u===l[0].id?"padding-top: 1rem;":"padding-top: 0.25rem;")},[u,r,i,s,a,m,o,()=>{window.location.hash="#/",window.location.reload()},l,e=>{e.target.blur(),p.disconnect(),function(e,t){const n=e-a.offsetTop-s.clientHeight,o=n.toFixed(),r=Math.floor(a.scrollHeight-a.clientHeight),i=function(){(a.scrollTop.toFixed()===o||a.scrollTop>=r)&&(a.removeEventListener("scroll",i),t&&t())};a.addEventListener("scroll",i),i(),a.scrollTo({top:n,behavior:"smooth"})}(document.getElementById(u).offsetTop,(()=>{c.forEach((e=>{p.observe(e)}))}))},function(e){me[e?"unshift":"push"]((()=>{m=e,n(5,m)}))},()=>r&&r.update()&&void 0,function(){u=J(this),n(0,u),n(8,l)},function(e){me[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},function(e){me[e?"unshift":"push"]((()=>{a=e,n(4,a)}))}]}class Cu extends He{constructor(e){super(),Ue(this,e,wu,bu,a,{})}}function ku(t){let n,o;return n=new hu({props:{version:t[5](),title:"NOUVEAUTÉS"}}),n.$on("close",t[6]),{c(){We(n.$$.fragment)},m(e,t){Ge(n,e,t),o=!0},p:e,i(e){o||(Ie(n.$$.fragment,e),o=!0)},o(e){Fe(n.$$.fragment,e),o=!1},d(e){qe(n,e)}}}function Lu(e){let t,n,o,r,s,a,l,c,u,d,p,m,f,g,h,v,$,y,b;return{c(){t=F("div"),n=F("div"),o=F("div"),r=F("h6"),s=F("span"),s.innerHTML="<span>👨🏻‍✈️</span> Mise à jour disponible",a=R(),l=F("button"),c=R(),u=F("div"),d=F("p"),d.textContent="Il faudra recharger l'OFP",p=R(),m=F("button"),f=F("span"),g=j(e[1]),G(s,"class","modal-title text-center"),G(l,"type","button"),G(l,"class","btn-close"),G(l,"data-bs-dismiss","modal"),G(l,"aria-label","Close"),G(r,"class","modal-header pt-2 pb-2 svelte-8a5ine"),G(f,"class","svelte-8a5ine"),X(f,"blinking",e[1].endsWith("...")),G(m,"class","btn btn-primary"),G(m,"type","button"),G(u,"class","modal-body text-center"),G(o,"class","modal-content"),G(n,"class","modal-dialog"),Z(n,"position","absolute"),Z(n,"top","0"),Z(n,"right","1rem"),Z(n,"max-width","350px"),G(t,"class","modal svelte-8a5ine"),G(t,"tabindex","-1")},m(i,h){O(i,t,h),S(t,n),S(n,o),S(o,r),S(r,s),S(r,a),S(r,l),S(o,c),S(o,u),S(u,d),S(u,p),S(u,m),S(m,f),S(f,g),$=!0,y||(b=[z(l,"click",e[11]),z(m,"click",e[12],{once:!0})],y=!0)},p(e,t){(!$||2&t)&&B(g,e[1]),2&t&&X(f,"blinking",e[1].endsWith("..."))},i(e){$||(be((()=>{h||(h=je(n,lt,{},!0)),h.run(1)})),be((()=>{v||(v=je(t,lt,{},!0)),v.run(1)})),$=!0)},o(e){h||(h=je(n,lt,{},!1)),h.run(0),v||(v=je(t,lt,{},!1)),v.run(0),$=!1},d(e){e&&A(t),e&&h&&h.end(),e&&v&&v.end(),y=!1,i(b)}}}function Pu(t){let n,o,r,s,a,l,c,u,d,p,m,f,g,h,v=(t[8](700)||"")+"";return{c(){n=F("div"),o=F("div"),r=F("div"),s=F("h6"),a=F("span"),a.innerHTML="<span>👨🏻‍✈️</span> Mise à jour détectée",l=R(),c=F("button"),u=R(),d=F("div"),p=F("button"),p.innerHTML="<span>Mise à jour...</span>",m=R(),f=j(v),G(a,"class","modal-title"),G(c,"type","button"),G(c,"class","btn-close"),G(c,"data-bs-dismiss","modal"),G(c,"aria-label","Close"),G(s,"class","modal-header text-center svelte-8a5ine"),G(p,"class","btn"),G(p,"type","button"),G(d,"class","modal-body text-center"),G(r,"class","modal-content"),G(o,"class","modal-dialog"),Z(o,"margin-top","15%"),Z(o,"max-width","270px"),G(n,"class","modal svelte-8a5ine"),G(n,"tabindex","-1")},m(e,i){O(e,n,i),S(n,o),S(o,r),S(r,s),S(s,a),S(s,l),S(s,c),S(r,u),S(r,d),S(d,p),S(n,m),O(e,f,i),g||(h=[z(c,"click",t[10]),z(p,"click",W(t[9]))],g=!0)},p:e,i:e,o:e,d(e){e&&A(n),e&&A(f),g=!1,i(h)}}}function Mu(e){let t,n,o,r,i;const s=[Pu,Lu,ku],a=[];function l(e,n){return!e[3]||e[2]||e[0]?e[3]&&!e[2]?1:(24&n&&(t=!(e[3]||!e[7]()||"/install"===e[4]||!fu())),t?2:-1):0}return~(n=l(e,-1))&&(o=a[n]=s[n](e)),{c(){o&&o.c(),r=N()},m(e,t){~n&&a[n].m(e,t),O(e,r,t),i=!0},p(e,[t]){let i=n;n=l(e,t),n===i?~n&&a[n].p(e,t):(o&&(Oe(),Fe(a[i],1,1,(()=>{a[i]=null})),Ae()),~n?(o=a[n],o?o.p(e,t):(o=a[n]=s[n](e),o.c()),Ie(o,1),o.m(r.parentNode,r)):o=null)},i(e){i||(Ie(o),i=!0)},o(e){Fe(o),i=!1},d(e){~n&&a[n].d(e),e&&A(r)}}}const Su=mt(),Tu=e=>{yt.set(!0),$t.set(!1),e?bt.set(!((e,t)=>{const n=e.split("."),o=t.split(".");return n.slice(0,-1).join(".")===o.slice(0,-1).join(".")})("1.15.2",e)):bt.set(!0)},Eu="previousAppVersion";function Ou(t,n,o){let r,i,s,a,l,c=e;d(t,Su,(e=>o(13,r=e))),d(t,vt,(e=>o(14,i=e))),d(t,$t,(e=>o(2,s=e))),d(t,yt,(e=>o(3,a=e))),d(t,jt,(e=>o(4,l=e))),t.$$.on_destroy.push((()=>c()));let u="Installer";const p=()=>sessionStorage?sessionStorage.getItem(Eu):void 0;b($t,s=!1,s);let{prompt:m=!1}=n;const f=(e=0)=>{let t;i&&r&&r.waiting?(navigator.serviceWorker.addEventListener("controllerchange",(()=>{t||(t=!0,e?setTimeout((()=>window.location.reload()),e):window.location.reload())})),o(1,u="En cours..."),p()&&fu()||sessionStorage&&sessionStorage.setItem(Eu,"1.15.2"),r.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout((()=>{window.location.reload()}),5e3)):window.location.reload()};return t.$$set=e=>{"prompt"in e&&o(0,m=e.prompt)},[m,u,s,a,l,p,()=>sessionStorage?sessionStorage.removeItem(Eu):void 0,()=>{const e=p();return!!e&&rt("1.15.2",e)>0},f,function(e){de.call(this,t,e)},()=>b($t,s=!0,s),()=>b($t,s=!0,s),()=>f()]}class Au extends He{constructor(e){super(),Ue(this,e,Ou,Mu,a,{prompt:0})}}function Iu(e){let t;return{c(){t=F("ol"),t.innerHTML='<li class="svelte-3tetng">Dans la barre de menu, cliquez sur <svg class="svelte-3tetng"><use xlink:href="#share-symbol"></use></svg></li> \n                    <li class="svelte-3tetng">Faites défiler, choisir : <em>Sur l&#39;écran d&#39;accueil</em>  <svg style="width:22px;height:22px;" class="svelte-3tetng"><use xlink:href="#add2home-symbol"></use></svg></li> \n                    <li class="svelte-3tetng">Lancez l&#39;application depuis l&#39;écran d&#39;accueil</li>',G(t,"class","guide svelte-3tetng")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Fu(e){let t;return{c(){t=F("p"),t.textContent="Merci d'ouvrir cette page dans Safari",G(t,"class","guide error svelte-3tetng")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function Du(t){let n,o,r,i,s,a,l,c,u,d,p,m,f,g;n=new xo({});let h=function(e,t){return e[0]?Iu:Fu}(t)(t);return f=new Au({}),{c(){We(n.$$.fragment),o=R(),r=F("div"),i=F("div"),s=F("div"),s.innerHTML='<img src="./images/ofp2map-icons/icon-128x128.png" alt="OFP2MAP" class="svelte-3tetng"/>',a=R(),l=F("div"),c=F("h3"),c.textContent="Installez OFP2MAP",u=R(),d=F("p"),d.innerHTML='Si OFP2MAP est déjà sur l&#39;écran d&#39;accueil, ne l&#39;installez pas une deuxième fois. <b>Attention:</b> l&#39;installation ne peut se faire que depuis\n                le navigateur Safari, <b>si présent, cliquez sur <svg class="safari svelte-3tetng"><use xlink:href="#safari-symbol"></use></svg> en haut à droite</b>.',p=R(),h.c(),m=R(),We(f.$$.fragment),G(s,"class","icon-container svelte-3tetng"),G(c,"class","title svelte-3tetng"),G(d,"class","text svelte-3tetng"),G(l,"class","prompt-content svelte-3tetng"),G(i,"class","prompt svelte-3tetng"),G(r,"class","prompt-container svelte-3tetng")},m(e,t){Ge(n,e,t),O(e,o,t),O(e,r,t),S(r,i),S(i,s),S(i,a),S(i,l),S(l,c),S(l,u),S(l,d),S(l,p),h.m(l,null),O(e,m,t),Ge(f,e,t),g=!0},p:e,i(e){g||(Ie(n.$$.fragment,e),Ie(f.$$.fragment,e),g=!0)},o(e){Fe(n.$$.fragment,e),Fe(f.$$.fragment,e),g=!1},d(e){qe(n,e),e&&A(o),e&&A(r),h.d(),e&&A(m),qe(f,e)}}}function _u(e){return[Ve&&!Ze]}class ju extends He{constructor(e){super(),Ue(this,e,_u,Du,a,{})}}function Ru(e){let t,n,o,r,i,s,a,l,c;t=new ac({props:{$$slots:{default:[zu]},$$scope:{ctx:e}}}),o=new Au({props:{prompt:!!e[3]}});let u=(e[3]||e[4])&&"success"===e[2]&&Wu(e);const d=[Zu,Ku,Bu,Hu,Uu,qu],p=[];function m(e,t){return"loading"===e[2]?0:e[2]&&"success"!==e[2]&&"/map"===e[1]?1:"/export"===e[1]&&"success"===e[2]?2:"/"===e[1]?3:"/help"===e[1]?4:!e[3]&&!e[4]||"/map"!==e[1]?5:-1}return~(s=m(e))&&(a=p[s]=d[s](e)),{c(){We(t.$$.fragment),n=R(),We(o.$$.fragment),r=R(),u&&u.c(),i=R(),a&&a.c(),l=N()},m(e,a){Ge(t,e,a),O(e,n,a),Ge(o,e,a),O(e,r,a),u&&u.m(e,a),O(e,i,a),~s&&p[s].m(e,a),O(e,l,a),c=!0},p(e,n){const r={};4097&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const c={};8&n&&(c.prompt=!!e[3]),o.$set(c),(e[3]||e[4])&&"success"===e[2]?u?(u.p(e,n),28&n&&Ie(u,1)):(u=Wu(e),u.c(),Ie(u,1),u.m(i.parentNode,i)):u&&(Oe(),Fe(u,1,1,(()=>{u=null})),Ae());let f=s;s=m(e),s===f?~s&&p[s].p(e,n):(a&&(Oe(),Fe(p[f],1,1,(()=>{p[f]=null})),Ae()),~s?(a=p[s],a?a.p(e,n):(a=p[s]=d[s](e),a.c()),Ie(a,1),a.m(l.parentNode,l)):a=null)},i(e){c||(Ie(t.$$.fragment,e),Ie(o.$$.fragment,e),Ie(u),Ie(a),c=!0)},o(e){Fe(t.$$.fragment,e),Fe(o.$$.fragment,e),Fe(u),Fe(a),c=!1},d(e){qe(t,e),e&&A(n),qe(o,e),e&&A(r),u&&u.d(e),e&&A(i),~s&&p[s].d(e),e&&A(l)}}}function Nu(t){let n,o;return n=new ju({}),{c(){We(n.$$.fragment)},m(e,t){Ge(n,e,t),o=!0},p:e,i(e){o||(Ie(n.$$.fragment,e),o=!0)},o(e){Fe(n.$$.fragment,e),o=!1},d(e){qe(n,e)}}}function zu(e){let t,n;return t=new $c({props:{kmlOptions:e[0]}}),t.$on("change",e[6]),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Wu(e){let t,n;return t=new xc({props:{hidden:"/map"!==e[1],$$slots:{default:[Gu]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.hidden="/map"!==e[1]),4107&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Gu(e){let t,n,o;function r(t){e[7](t)}let i={id:"map",ofp:e[3]};return void 0!==e[0]&&(i.kmlOptions=e[0]),t=new Vi({props:i}),me.push((()=>ze(t,"kmlOptions",r))),t.$on("save",e[8]),{c(){We(t.$$.fragment)},m(e,n){Ge(t,e,n),o=!0},p(e,o){const r={};8&o&&(r.ofp=e[3]),!n&&1&o&&(n=!0,r.kmlOptions=e[0],xe((()=>n=!1))),t.$set(r)},i(e){o||(Ie(t.$$.fragment,e),o=!0)},o(e){Fe(t.$$.fragment,e),o=!1},d(e){qe(t,e)}}}function qu(t){let n,o=t[5](t[1])+"";return{c(){n=j(o)},m(e,t){O(e,n,t)},p(e,t){2&t&&o!==(o=e[5](e[1])+"")&&B(n,o)},i:e,o:e,d(e){e&&A(n)}}}function Uu(e){let t,n;return t=new xc({props:{maxWidth:"1400px",$$slots:{default:[Vu]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Hu(e){let t,n;return t=new xc({props:{maxWidth:"1400px",$$slots:{default:[Ju]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Bu(e){let t,n;return t=new xc({props:{maxWidth:"1400px",$$slots:{default:[Yu]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};4099&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Ku(e){let t,n;return t=new xc({props:{$$slots:{default:[Qu]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};4100&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Zu(e){let t,n;return t=new xc({props:{$$slots:{default:[Xu]},$$scope:{ctx:e}}}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},p(e,n){const o={};4096&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Vu(e){let t,n;return t=new Cu({}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Ju(e){let t,n;return t=new Co({}),{c(){We(t.$$.fragment)},m(e,o){Ge(t,e,o),n=!0},i(e){n||(Ie(t.$$.fragment,e),n=!0)},o(e){Fe(t.$$.fragment,e),n=!1},d(e){qe(t,e)}}}function Yu(e){let t,n,o,r;return t=new vo({props:{kmlOptions:e[0]}}),t.$on("save",e[9]),o=new Kt({}),{c(){We(t.$$.fragment),n=R(),We(o.$$.fragment)},m(e,i){Ge(t,e,i),O(e,n,i),Ge(o,e,i),r=!0},p(e,n){const o={};1&n&&(o.kmlOptions=e[0]),t.$set(o)},i(e){r||(Ie(t.$$.fragment,e),Ie(o.$$.fragment,e),r=!0)},o(e){Fe(t.$$.fragment,e),Fe(o.$$.fragment,e),r=!1},d(e){qe(t,e),e&&A(n),qe(o,e)}}}function Qu(e){let t,n,o;return{c(){t=F("p"),n=j("😱: "),o=j(e[2]),G(t,"class","ofpError svelte-1vf54bl")},m(e,r){O(e,t,r),S(t,n),S(t,o)},p(e,t){4&t&&B(o,e[2])},d(e){e&&A(t)}}}function Xu(e){let t;return{c(){t=F("div"),t.textContent="traitement en cours...",Z(t,"margin","auto")},m(e,n){O(e,t,n)},d(e){e&&A(t)}}}function ed(e){let t,n,o,r,i,s;const a=[Nu,Ru],l=[];function c(e,t){return"/install"===e[1]||navigator&&!1===navigator.standalone&&Ke?0:1}return o=c(e),r=l[o]=a[o](e),{c(){t=F("main"),n=F("div"),r.c(),G(n,"class","content svelte-1vf54bl"),G(t,"class",i="container "+(e[1].substr(1)||"home")+" svelte-1vf54bl")},m(e,r){O(e,t,r),S(t,n),l[o].m(n,null),s=!0},p(e,[u]){let d=o;o=c(e),o===d?l[o].p(e,u):(Oe(),Fe(l[d],1,1,(()=>{l[d]=null})),Ae(),r=l[o],r?r.p(e,u):(r=l[o]=a[o](e),r.c()),Ie(r,1),r.m(n,null)),(!s||2&u&&i!==(i="container "+(e[1].substr(1)||"home")+" svelte-1vf54bl"))&&G(t,"class",i)},i(e){s||(Ie(r),s=!0)},o(e){Fe(r),s=!1},d(e){e&&A(t),l[o].d()}}}function td(e,t,n){let o,r,i,s,a,l;d(e,$t,(e=>n(10,o=e))),d(e,xt,(e=>n(11,r=e))),d(e,jt,(e=>n(1,i=e))),d(e,Mt,(e=>n(2,s=e))),d(e,Pt,(e=>n(3,a=e))),d(e,Ot,(e=>n(4,l=e)));null===mn.getItem(pn.optionsKML)&&(e=>{const t={},n={};e.length>1&&(e.substr(1)||"").split("&").forEach((function(e){const n=e.split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}));for(let[e,o]of Object.entries(t))if(e in dn){let t;e.endsWith("Pin")?(o*=1,isNaN(o)||(t=o)):e.endsWith("Color")&&o.match(tn)?t=o.toUpperCase():e.endsWith("Display")?t=!!o:e.endsWith("Change")&&(o*=1,isNaN(o)||(t=o.toFixed(1))),void 0!==t&&(n[e]=t)}else"downloadType"===e?(o*=1,isNaN(o)||mn.setItem(pn.downloadType,o)):"shortcut"===e&&(o=o.trim(),o&&mn.setItem(pn.shortcut,o));mn.setItem(pn.optionsKML,n)})(window.location.search);let c=fn(mn.getItem(pn.optionsKML)||{});gn(c,i);le((()=>(document.addEventListener("visibilitychange",Ft,!1),()=>document.removeEventListener("visibilitychange",Ft))));return[c,i,s,a,l,e=>{window.location.hash="#/"},()=>{b(xt,r=!1,r),b($t,o=!1,o)},function(e){c=e,n(0,c)},()=>gn(c,i),()=>gn(c,i)]}class nd extends He{constructor(e){super(),Ue(this,e,td,ed,a,{})}}try{self["workbox:window:6.2.4"]&&_()}catch(od){}function od(e,t){return new Promise((function(n){var o=new MessageChannel;o.port1.onmessage=function(e){n(e.data)},e.postMessage(t,[o.port2])}))}function rd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function id(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return rd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}try{self["workbox:core:6.2.4"]&&_()}catch(od){}var sd=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};function ad(e,t){var n=location.href;return new URL(e,n).href===new URL(t,n).href}var ld=function(e,t){this.type=e,Object.assign(this,t)};function cd(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ud(){}var dd={type:"SKIP_WAITING"};function pd(e,t){if(!t)return e&&e.then?e.then(ud):Promise.resolve()}var md=function(e){var t,n;function o(t,n){var o,r;return void 0===n&&(n={}),(o=e.call(this)||this).nn={},o.tn=0,o.rn=new sd,o.en=new sd,o.on=new sd,o.un=0,o.an=new Set,o.cn=function(){var e=o.fn,t=e.installing;o.tn>0||!ad(t.scriptURL,o.sn.toString())||performance.now()>o.un+6e4?(o.vn=t,e.removeEventListener("updatefound",o.cn)):(o.hn=t,o.an.add(t),o.rn.resolve(t)),++o.tn,t.addEventListener("statechange",o.ln)},o.ln=function(e){var t=o.fn,n=e.target,r=n.state,i=n===o.vn,s={sw:n,isExternal:i,originalEvent:e};!i&&o.mn&&(s.isUpdate=!0),o.dispatchEvent(new ld(r,s)),"installed"===r?o.wn=self.setTimeout((function(){"installed"===r&&t.waiting===n&&o.dispatchEvent(new ld("waiting",s))}),200):"activating"===r&&(clearTimeout(o.wn),i||o.en.resolve(n))},o.dn=function(e){var t=o.hn,n=t!==navigator.serviceWorker.controller;o.dispatchEvent(new ld("controlling",{isExternal:n,originalEvent:e,sw:t,isUpdate:o.mn})),n||o.on.resolve(t)},o.gn=(r=function(e){var t=e.data,n=e.ports,r=e.source;return cd(o.getSW(),(function(){o.an.has(r)&&o.dispatchEvent(new ld("message",{data:t,originalEvent:e,ports:n,sw:r}))}))},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}}),o.sn=t,o.nn=n,navigator.serviceWorker.addEventListener("message",o.gn),o}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r,i=o.prototype;return i.register=function(e){var t=(void 0===e?{}:e).immediate,n=void 0!==t&&t;try{var o=this;return function(e,t){var n=e();return n&&n.then?n.then(t):t()}((function(){if(!n&&"complete"!==document.readyState)return pd(new Promise((function(e){return window.addEventListener("load",e)})))}),(function(){return o.mn=Boolean(navigator.serviceWorker.controller),o.yn=o.pn(),cd(o.bn(),(function(e){o.fn=e,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var t=o.fn.waiting;return t&&ad(t.scriptURL,o.sn.toString())&&(o.hn=t,Promise.resolve().then((function(){o.dispatchEvent(new ld("waiting",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn),o.fn}))}))}catch(e){return Promise.reject(e)}},i.update=function(){try{return this.fn?pd(this.fn.update()):void 0}catch(e){return Promise.reject(e)}},i.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},i.messageSW=function(e){try{return cd(this.getSW(),(function(t){return od(t,e)}))}catch(e){return Promise.reject(e)}},i.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&od(this.fn.waiting,dd)},i.pn=function(){var e=navigator.serviceWorker.controller;return e&&ad(e.scriptURL,this.sn.toString())?e:void 0},i.bn=function(){try{var e=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return cd(navigator.serviceWorker.register(e.sn,e.nn),(function(t){return e.un=performance.now(),t}))}),(function(e){throw e}))}catch(e){return Promise.reject(e)}},(r=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(o.prototype,r),o}(function(){function e(){this.Pn=new Map}var t=e.prototype;return t.addEventListener=function(e,t){this.Sn(e).add(t)},t.removeEventListener=function(e,t){this.Sn(e).delete(t)},t.dispatchEvent=function(e){e.target=this;for(var t,n=id(this.Sn(e.type));!(t=n()).done;)(0,t.value)(e)},t.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},e}());let fd,gd=!1;try{fd=new nd({target:document.body})}catch(e){gd=!0;try{var hd=document.createElement("p");hd.innerHTML="Erreur: "+e.message+"<br/><br/>OFP2MAP a besoin de navigateurs récents: Safari 14 iOS/Mac, Firefox 86, Chrome 87 et Microsoft Edge 87 sont compatibles. <br /><br />Contactez moi sur l'email AF (erdelord@...) en me donnant le message d'erreur.",document.body.appendChild(hd)}catch(id){}}finally{if("serviceWorker"in navigator){const e=new md("./sw.js");vt.set(e),e.addEventListener("installed",(e=>{e.isUpdate})),e.addEventListener("activated",(t=>{t.isUpdate||e.messageSW({type:"CLIENTS_CLAIM"}),t.isExternal})),e.addEventListener("waiting",(t=>{gd?(e.addEventListener("controlling",(()=>{window.location.reload()})),e.messageSkipWaiting()):(t.isExternal,ot(400,od(t.sw,{type:"GET_VERSION"})).then((e=>Tu(e))).catch((e=>{Tu()})))})),e.register().then((e=>{gd&&e&&e.unregister(),Su.set(e)}),console.error)}}return fd}();
//# sourceMappingURL=bundle.js.map
